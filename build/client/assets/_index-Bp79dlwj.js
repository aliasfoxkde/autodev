const __vite__fileDeps=["assets/index-Bfkb4nP1.js","assets/index-8LHdKmGl.js","assets/components-VKHSbR2h.js","assets/theme-9upYr29Y.js","assets/index-CI1n3atb.js","assets/index-sdnQ5RiM.js","assets/index-C-tEOS5W.js","assets/index-BOTn_KY-.js","assets/index-CqQxgBpN.js","assets/index-B388QJbW.js","assets/index-DqMmoZwb.js","assets/index-y4yvzzFg.js","assets/angular-html-DZQ5UQWW.js","assets/html-CqhC7HHo.js","assets/javascript-Dch3xQiY.js","assets/css-CbYhyuC0.js","assets/angular-ts-DOuPvTiZ.js","assets/scss-DqznleHU.js","assets/apl-D9TNySCV.js","assets/xml-KWQaRJyt.js","assets/java-ClXEvkw9.js","assets/json-CupVZNk8.js","assets/asciidoc-CF5eOCvB.js","assets/yaml-C5gCGmDW.js","assets/csv-B2DkETJQ.js","assets/c-RCJZWN-0.js","assets/clojure-BF6G6X0H.js","assets/coffee-B4DZ7swD.js","assets/cpp-B9__le0e.js","assets/glsl-DNg5e6rY.js","assets/sql-DbK06e1c.js","assets/csharp-DISxKEhY.js","assets/diff-DvyTQcux.js","assets/docker-DNR26wTC.js","assets/elixir-DjCTzIqv.js","assets/elm-CTSLo1i4.js","assets/erlang-DS9ZWoKD.js","assets/go-BJn7Ek5W.js","assets/groovy-wChcbJ1V.js","assets/haskell-DAGYewaG.js","assets/jsx-CsyrCbsw.js","assets/julia-CnoVwgV8.js","assets/python-DwuVtWc2.js","assets/r-BXfENWL6.js","assets/kotlin-BIxS-Weu.js","assets/less-Du6_OKDb.js","assets/make-B9S9BZZh.js","assets/objective-c-DHmGyzbM.js","assets/ocaml-RqY_Nz63.js","assets/perl-InL218rs.js","assets/ruby-CPHW1Myo.js","assets/shellscript-BZfs-ost.js","assets/lua-BPmF2VOm.js","assets/rust-DGxQkqYo.js","assets/sass-CMDmr8et.js","assets/scala-vMsNTMhM.js","assets/swift-Dez-Qvcc.js","assets/toml-BT9ZzGyQ.js","assets/typescript-DC8MraHL.js","assets/astro-U9VgAVQT.js","assets/stylus-DSrLtGYv.js","assets/postcss-DXT9h7v2.js","assets/tsx-BlxWTfDV.js","assets/blade-HiqCVk8k.js","assets/cobol-DgBJixdi.js","assets/crystal-DwllXkRF.js","assets/erb-C4FIxXpw.js","assets/fortran-fixed-form-CdVjoHtb.js","assets/fortran-free-form-D6pmzCqS.js","assets/fsharp-C-VjhQSu.js","assets/markdown-BdfWgkoX.js","assets/gdresource-nSffpn2A.js","assets/gdshader-B_SUYfiV.js","assets/gdscript-B474tPdy.js","assets/git-commit-BleTlbuD.js","assets/git-rebase-CtmYztAk.js","assets/glimmer-js-Bhx_sfM5.js","assets/glimmer-ts-61dai_V5.js","assets/graphql-Cac5VMXA.js","assets/hack-OhUXFOZr.js","assets/haml-BsKmeTIz.js","assets/handlebars-C0vBBVRa.js","assets/html-derivative-CvQVKW9i.js","assets/http-mWhOz2-8.js","assets/hxml-C5imjkyf.js","assets/haxe-Dit6kIrv.js","assets/imba-BXg-Svbq.js","assets/jinja-DwshyRC8.js","assets/jison-5Ig0VrXv.js","assets/latex-DhY63DBA.js","assets/tex-Dk885XYG.js","assets/gnuplot-nclm9rTJ.js","assets/liquid-Dj-jsJFu.js","assets/marko-DTTVzMRa.js","assets/mdc-Bn_uTtpR.js","assets/nginx-Bo7Ko850.js","assets/nim-0XdZC7BR.js","assets/php-DdJTc9Za.js","assets/pug-BmZh5kCX.js","assets/qml-DcMLa_hy.js","assets/razor-CtZ59qoM.js","assets/rst-5AUMhdsS.js","assets/cmake-DXZpi2gR.js","assets/sas-WQZNIjpJ.js","assets/shaderlab-DBpbMEBh.js","assets/hlsl-DmDrTTlz.js","assets/shellsession-4WldjxEd.js","assets/soy-DhLnWwFA.js","assets/sparql-BgtC_-ln.js","assets/turtle-C15OxdQ5.js","assets/stata-8O9LehIm.js","assets/svelte-DavKDhWY.js","assets/twig-llAgFoxS.js","assets/vue-DwKRC_TW.js","assets/jsonc-DYI1rfmx.js","assets/json5-Bh8mriwU.js","assets/vue-html-BQKlc1uT.js","assets/wikitext-2Gt4HDrj.js","assets/ini-DeVv6D4_.js","assets/vb-beD-FUib.js","assets/xsl-bm8RKyr3.js","assets/bat-BPiaQZfK.js","assets/raku-D384ylkT.js","assets/powershell-9ZOzOPqN.js","assets/dart-DZLoTQm4.js","assets/bibtex-BaedD2tq.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as D,n as N,v as qe,w as L0,l as M0,x as vT,y as hr,z as N0,A as gL,B as _L,C as bL,p as yL}from"./components-VKHSbR2h.js";import{a as Jn,u as Dt,b as vL,t as Sm}from"./theme-9upYr29Y.js";const EL=5,eu=6,tu=10;let wL=(t,e,n,r)=>(t.events=t.events||{},t.events[n+tu]||(t.events[n+tu]=r(i=>{t.events[n].reduceRight((s,o)=>(o(s),s),{shared:{},...i})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let i=t.events[n],s=i.indexOf(e);i.splice(s,1),i.length||(delete t.events[n],t.events[n+tu](),delete t.events[n+tu])}),SL=1e3,TL=(t,e)=>wL(t,r=>{let i=e(r);i&&t.events[eu].push(i)},EL,r=>{let i=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,r()),i(...o));let s=t.off;return t.events[eu]=[],t.off=()=>{s(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[eu])o();t.events[eu]=[]}},SL)},()=>{t.listen=i,t.off=s}}),CL=(t,e,n)=>{Array.isArray(t)||(t=[t]);let r,i=0,s=()=>{let l=t.map(c=>c.get());if(r===void 0||l.some((c,u)=>c!==r[u])){let c=++i;r=l;let u=e(...l);u&&u.then&&u.t?u.then(h=>{c===i&&o.set(h)}):o.set(u)}},o=Jn(void 0,Math.max(...t.map(l=>l.l))+1),a=s;return TL(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return s(),()=>{for(let c of l)c()}}),o},B0=(t,e)=>CL(t,e),Zs=(t={})=>{let e=Jn(t);return e.setKey=function(n,r){let i=e.value;typeof r>"u"&&n in e.value?(e.value={...e.value},delete e.value[n],e.notify(i,n)):e.value[n]!==r&&(e.value={...e.value,[n]:r},e.notify(i,n))},e};function xL(){return()=>{}}function AL(){return D.useSyncExternalStore(xL,()=>!0,()=>!1)}function Oi({children:t,fallback:e=null}){return AL()?D.createElement(D.Fragment,null,t()):D.createElement(D.Fragment,null,e)}const F0=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),jd=D.createContext({}),zd=D.createContext(null),H0=typeof document<"u",U0=H0?D.useLayoutEffect:D.useEffect,ET=D.createContext({strict:!1}),j0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kL="framerAppearId",wT="data-"+j0(kL),RL={skipAnimations:!1,useManualTiming:!1};class g1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function PL(t){let e=new g1,n=new g1,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&i,d=h?e:n;return c&&o.add(l),d.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];o.has(u)&&(a.schedule(u),t()),u(l)}i=!1,s&&(s=!1,a.process(l))}};return a}const nu=["read","resolveKeyframes","update","preRender","render","postRender"],DL=40;function ST(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=nu.reduce((h,d)=>(h[d]=PL(()=>n=!0),h),{}),o=h=>{s[h].process(i)},a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,DL),1),i.timestamp=h,i.isProcessing=!0,nu.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:nu.reduce((h,d)=>{const f=s[d];return h[d]=(_,g=!1,m=!1)=>(n||l(),f.schedule(_,g,m)),h},{}),cancel:h=>nu.forEach(d=>s[d].cancel(h)),state:i,steps:s}}const{schedule:z0,cancel:Zce}=ST(queueMicrotask,!1);function xo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const TT=D.createContext({});let _1=!1;function OL(t,e,n,r,i){const{visualElement:s}=D.useContext(jd),o=D.useContext(ET),a=D.useContext(zd),l=D.useContext(F0).reducedMotion,c=D.useRef();r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=D.useContext(TT);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&LL(c.current,n,i,h),D.useInsertionEffect(()=>{u&&u.update(n,a)});const d=D.useRef(!!(n[wT]&&!window.HandoffComplete));return U0(()=>{u&&(u.updateFeatures(),z0.render(u.render),d.current&&u.animationState&&u.animationState.animateChanges())}),D.useEffect(()=>{u&&(!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,_1||(_1=!0,queueMicrotask(IL))))}),u}function IL(){window.HandoffComplete=!0}function LL(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:CT(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&xo(a),visualElement:t,scheduleRender:()=>t.scheduleRender(),animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function CT(t){if(t)return t.options.allowProjection!==!1?t.projection:CT(t.parent)}function ML(t,e,n){return D.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):xo(n)&&(n.current=r))},[e])}function Pl(t){return typeof t=="string"||Array.isArray(t)}function Vd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const V0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],W0=["initial",...V0];function Wd(t){return Vd(t.animate)||W0.some(e=>Pl(t[e]))}function xT(t){return!!(Wd(t)||t.variants)}function NL(t,e){if(Wd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pl(n)?n:void 0,animate:Pl(r)?r:void 0}}return t.inherit!==!1?e:{}}function BL(t){const{initial:e,animate:n}=NL(t,D.useContext(jd));return D.useMemo(()=>({initial:e,animate:n}),[b1(e),b1(n)])}function b1(t){return Array.isArray(t)?t.join(" "):t}const y1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zo={};for(const t in y1)Zo[t]={isEnabled:e=>y1[t].some(n=>!!e[n])};function FL(t){for(const e in t)Zo[e]={...Zo[e],...t[e]}}const G0=D.createContext({}),HL=Symbol.for("motionComponentSymbol"),ln=t=>t;let Rh=ln;function UL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&FL(t);function s(a,l){let c;const u={...D.useContext(F0),...a,layoutId:jL(a)},{isStatic:h}=u,d=BL(a),f=r(a,h);if(!h&&H0){zL();const _=VL(u);c=_.MeasureLayout,d.visualElement=OL(i,f,u,e,_.ProjectionNode)}return N.jsxs(jd.Provider,{value:d,children:[c&&d.visualElement?N.jsx(c,{visualElement:d.visualElement,...u}):null,n(i,a,ML(f,d.visualElement,l),f,h,d.visualElement)]})}const o=D.forwardRef(s);return o[HL]=i,o}function jL({layoutId:t}){const e=D.useContext(G0).id;return e&&t!==void 0?e+"-"+t:t}function zL(t,e){D.useContext(ET).strict}function VL(t){const{drag:e,layout:n}=Zo;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function WL(t){function e(r,i={}){return UL(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const GL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $0(t){return typeof t!="string"||t.includes("-")?!1:!!(GL.indexOf(t)>-1||/[A-Z]/u.test(t))}const Ph={};function $L(t){Object.assign(Ph,t)}const xc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eo=new Set(xc);function AT(t,{layout:e,layoutId:n}){return eo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ph[t]||t==="opacity")}const Vt=t=>!!(t&&t.getVelocity),qL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KL=xc.length;function YL(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<KL;o++){const a=xc[o];if(t[a]!==void 0){const l=qL[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const kT=t=>e=>typeof e=="string"&&e.startsWith(t),RT=kT("--"),XL=kT("var(--"),q0=t=>XL(t)?QL.test(t.split("/*")[0].trim()):!1,QL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,JL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gi=(t,e,n)=>n>e?e:n<t?t:n,fa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ll={...fa,transform:t=>Gi(0,1,t)},ru={...fa,default:1},cl=t=>Math.round(t*1e5)/1e5,K0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,ZL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,e3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function Ac(t){return typeof t=="string"}const kc=t=>({test:e=>Ac(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ti=kc("deg"),Gr=kc("%"),Ue=kc("px"),t3=kc("vh"),n3=kc("vw"),v1={...Gr,parse:t=>Gr.parse(t)/100,transform:t=>Gr.transform(t*100)},E1={...fa,transform:Math.round},PT={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,size:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,rotate:Ti,rotateX:Ti,rotateY:Ti,rotateZ:Ti,scale:ru,scaleX:ru,scaleY:ru,scaleZ:ru,skew:Ti,skewX:Ti,skewY:Ti,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:ll,originX:v1,originY:v1,originZ:Ue,zIndex:E1,backgroundPositionX:Ue,backgroundPositionY:Ue,fillOpacity:ll,strokeOpacity:ll,numOctaves:E1};function Y0(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const h in e){const d=e[h];if(RT(h)){s[h]=d;continue}const f=PT[h],_=JL(d,f);if(eo.has(h)){if(l=!0,o[h]=_,!u)continue;d!==(f.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=_):i[h]=_}if(e.transform||(l||r?i.transform=YL(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:d="50%",originZ:f=0}=a;i.transformOrigin=`${h} ${d} ${f}`}}const X0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function DT(t,e,n){for(const r in e)!Vt(e[r])&&!AT(r,n)&&(t[r]=e[r])}function r3({transformTemplate:t},e,n){return D.useMemo(()=>{const r=X0();return Y0(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function i3(t,e,n){const r=t.style||{},i={};return DT(i,r,t),Object.assign(i,r3(t,e,n)),i}function s3(t,e,n){const r={},i=i3(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const o3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||o3.has(t)}let OT=t=>!Dh(t);function a3(t){t&&(OT=e=>e.startsWith("on")?!Dh(e):t(e))}try{a3(require("@emotion/is-prop-valid").default)}catch{}function l3(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(OT(i)||n===!0&&Dh(i)||!e&&!Dh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function w1(t,e,n){return typeof t=="string"?t:Ue.transform(e+n*t)}function c3(t,e,n){const r=w1(e,t.x,t.width),i=w1(n,t.y,t.height);return`${r} ${i}`}const u3={offset:"stroke-dashoffset",array:"stroke-dasharray"},h3={offset:"strokeDashoffset",array:"strokeDasharray"};function d3(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?u3:h3;t[s.offset]=Ue.transform(-r);const o=Ue.transform(e),a=Ue.transform(n);t[s.array]=`${o} ${a}`}function Q0(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,d){if(Y0(t,c,u,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:_,dimensions:g}=t;f.transform&&(g&&(_.transform=f.transform),delete f.transform),g&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=c3(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&d3(f,o,a,l,!1)}const IT=()=>({...X0(),attrs:{}}),J0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function f3(t,e,n,r){const i=D.useMemo(()=>{const s=IT();return Q0(s,e,{enableHardwareAcceleration:!1},J0(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};DT(s,t.style,t),i.style={...s,...i.style}}return i}function p3(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=($0(n)?f3:s3)(r,s,o,n),c=l3(r,typeof n=="string",t),u=n!==D.Fragment?{...c,...l,ref:i}:{},{children:h}=r,d=D.useMemo(()=>Vt(h)?h.get():h,[h]);return D.createElement(n,{...u,children:d})}}function LT(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const MT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NT(t,e,n,r){LT(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(MT.has(i)?i:j0(i),e.attrs[i])}function Z0(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Vt(i[o])||e.style&&Vt(e.style[o])||AT(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function BT(t,e,n){const r=Z0(t,e,n);for(const i in t)if(Vt(t[i])||Vt(e[i])){const s=xc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function S1(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function e_(t,e,n,r){if(typeof e=="function"){const[i,s]=S1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=S1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Oh(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Tm=t=>Array.isArray(t),m3=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),g3=t=>Tm(t)?t[t.length-1]||0:t;function ih(t){const e=Vt(t)?t.get():t;return m3(e)?e.toValue():e}function _3({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:b3(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const FT=t=>(e,n)=>{const r=D.useContext(jd),i=D.useContext(zd),s=()=>_3(t,e,r,i);return n?s():Oh(s)};function b3(t,e,n,r){const i={},s=r(t,{});for(const d in s)i[d]=ih(s[d]);let{initial:o,animate:a}=t;const l=Wd(t),c=xT(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!Vd(h)&&(Array.isArray(h)?h:[h]).forEach(f=>{const _=e_(t,f);if(!_)return;const{transitionEnd:g,transition:m,...p}=_;for(const b in p){let y=p[b];if(Array.isArray(y)){const v=u?y.length-1:0;y=y[v]}y!==null&&(i[b]=y)}for(const b in g)i[b]=g[b]}),i}const{schedule:at,cancel:hi,state:$t,steps:jf}=ST(typeof requestAnimationFrame<"u"?requestAnimationFrame:ln,!0),y3={useVisualState:FT({scrapeMotionValuesFromProps:BT,createRenderState:IT,onMount:(t,e,{renderState:n,latestValues:r})=>{at.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),at.render(()=>{Q0(n,r,{enableHardwareAcceleration:!1},J0(e.tagName),t.transformTemplate),NT(e,n)})}})},v3={useVisualState:FT({scrapeMotionValuesFromProps:Z0,createRenderState:X0})};function E3(t,{forwardMotionProps:e=!1},n,r){return{...$0(t)?y3:v3,preloadedFeatures:n,useRender:p3(e),createVisualElement:r,Component:t}}function ii(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const HT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Gd(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const w3=t=>e=>HT(e)&&t(e,Gd(e));function oi(t,e,n,r){return ii(t,e,w3(n),r)}const S3=(t,e)=>n=>e(t(n)),ai=(...t)=>t.reduce(S3);function UT(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const T1=UT("dragHorizontal"),C1=UT("dragVertical");function jT(t){let e=!1;if(t==="y")e=C1();else if(t==="x")e=T1();else{const n=T1(),r=C1();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function zT(){const t=jT(!0);return t?(t(),!1):!0}class ns{constructor(e){this.isMounted=!1,this.node=e}update(){}}function x1(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||zT())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&at.postRender(()=>l(s,o))};return oi(t.current,n,i,{passive:!t.getProps()[r]})}class T3 extends ns{mount(){this.unmount=ai(x1(this.node,!0),x1(this.node,!1))}unmount(){}}class C3 extends ns{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ai(ii(this.node.current,"focus",()=>this.onFocus()),ii(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VT=(t,e)=>e?t===e?!0:VT(t,e.parentElement):!1;function zf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Gd(n))}class x3 extends ns{constructor(){super(...arguments),this.removeStartListeners=ln,this.removeEndListeners=ln,this.removeAccessibleListeners=ln,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=oi(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),d=!h&&!VT(this.node.current,a.target)?u:c;d&&at.update(()=>d(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=oi(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ai(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||zf("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&at.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=ii(this.node.current,"keyup",o),zf("down",(a,l)=>{this.startPress(a,l)})},n=ii(this.node.current,"keydown",e),r=()=>{this.isPressing&&zf("cancel",(s,o)=>this.cancelPress(s,o))},i=ii(this.node.current,"blur",r);this.removeAccessibleListeners=ai(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&at.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zT()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&at.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=oi(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ii(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ai(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Cm=new WeakMap,Vf=new WeakMap,A3=t=>{const e=Cm.get(t.target);e&&e(t)},k3=t=>{t.forEach(A3)};function R3({root:t,...e}){const n=t||document;Vf.has(n)||Vf.set(n,{});const r=Vf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(k3,{root:t,...e})),r[i]}function P3(t,e,n){const r=R3(e);return Cm.set(t,n),r.observe(t),()=>{Cm.delete(t),r.unobserve(t)}}const D3={some:0,all:1};class O3 extends ns{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:D3[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return P3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(I3(e,n))&&this.startObserver()}unmount(){}}function I3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const L3={inView:{Feature:O3},tap:{Feature:x3},focus:{Feature:C3},hover:{Feature:T3}};function WT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function $d(t,e,n){const r=t.getProps();return e_(r,e,n!==void 0?n:r.custom,t)}const li=t=>t*1e3,$r=t=>t/1e3,M3={type:"spring",stiffness:500,damping:25,restSpeed:10},N3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),B3={type:"keyframes",duration:.8},F3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},H3=(t,{keyframes:e})=>e.length>2?B3:eo.has(t)?t.startsWith("scale")?N3(e[1]):M3:F3;function U3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function t_(t,e){return t[e]||t.default||t}const j3=t=>t!==null;function qd(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(j3),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}let sh;function z3(){sh=void 0}const ji={now:()=>(sh===void 0&&ji.set($t.isProcessing||RL.useManualTiming?$t.timestamp:performance.now()),sh),set:t=>{sh=t,queueMicrotask(z3)}},GT=t=>/^0[^.\s]+$/u.test(t);function V3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||GT(t):!0}const $T=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),W3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function G3(t){const e=W3.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function qT(t,e,n=1){const[r,i]=G3(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return $T(o)?parseFloat(o):o}return q0(i)?qT(i,e,n+1):i}const $3=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),A1=t=>t===fa||t===Ue,k1=(t,e)=>parseFloat(t.split(", ")[e]),R1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return k1(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?k1(s[1],t):0}},q3=new Set(["x","y","z"]),K3=xc.filter(t=>!q3.has(t));function Y3(t){const e=[];return K3.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ea={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:R1(4,13),y:R1(5,14)};ea.translateX=ea.x;ea.translateY=ea.y;const KT=t=>e=>e.test(t),X3={test:t=>t==="auto",parse:t=>t},YT=[fa,Ue,Gr,Ti,n3,t3,X3],P1=t=>YT.find(KT(t)),Ls=new Set;let xm=!1,Am=!1;function XT(){if(Am){const t=Array.from(Ls).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Y3(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Am=!1,xm=!1,Ls.forEach(t=>t.complete()),Ls.clear()}function QT(){Ls.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Am=!0)})}function Q3(){QT(),XT()}class n_{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ls.add(this),xm||(xm=!0,at.read(QT),at.resolveKeyframes(XT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ls.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ls.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const r_=(t,e)=>n=>!!(Ac(n)&&e3.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),JT=(t,e,n)=>r=>{if(!Ac(r))return r;const[i,s,o,a]=r.match(K0);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},J3=t=>Gi(0,255,t),Wf={...fa,transform:t=>Math.round(J3(t))},Ss={test:r_("rgb","red"),parse:JT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Wf.transform(t)+", "+Wf.transform(e)+", "+Wf.transform(n)+", "+cl(ll.transform(r))+")"};function Z3(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const km={test:r_("#"),parse:Z3,transform:Ss.transform},Ao={test:r_("hsl","hue"),parse:JT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gr.transform(cl(e))+", "+Gr.transform(cl(n))+", "+cl(ll.transform(r))+")"},nn={test:t=>Ss.test(t)||km.test(t)||Ao.test(t),parse:t=>Ss.test(t)?Ss.parse(t):Ao.test(t)?Ao.parse(t):km.parse(t),transform:t=>Ac(t)?t:t.hasOwnProperty("red")?Ss.transform(t):Ao.transform(t)};function eM(t){var e,n;return isNaN(t)&&Ac(t)&&(((e=t.match(K0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ZL))===null||n===void 0?void 0:n.length)||0)>0}const ZT="number",eC="color",tM="var",nM="var(",D1="${}",rM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(rM,l=>(nn.test(l)?(r.color.push(s),i.push(eC),n.push(nn.parse(l))):l.startsWith(nM)?(r.var.push(s),i.push(tM),n.push(l)):(r.number.push(s),i.push(ZT),n.push(parseFloat(l))),++s,D1)).split(D1);return{values:n,split:a,indexes:r,types:i}}function tC(t){return Dl(t).values}function nC(t){const{split:e,types:n}=Dl(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===ZT?s+=cl(i[o]):a===eC?s+=nn.transform(i[o]):s+=i[o]}return s}}const iM=t=>typeof t=="number"?0:t;function sM(t){const e=tC(t);return nC(t)(e.map(iM))}const $i={test:eM,parse:tC,createTransformer:nC,getAnimatableNone:sM},oM=new Set(["brightness","contrast","saturate","opacity"]);function aM(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(K0)||[];if(!r)return t;const i=n.replace(r,"");let s=oM.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const lM=/\b([a-z-]*)\(.*?\)/gu,Rm={...$i,getAnimatableNone:t=>{const e=t.match(lM);return e?e.map(aM).join(" "):t}},cM={...PT,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:Rm,WebkitFilter:Rm},i_=t=>cM[t];function rC(t,e){let n=i_(t);return n!==Rm&&(n=$i),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const uM=new Set(["auto","none","0"]);function hM(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!uM.has(s)&&Dl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=rC(n,i)}class iC extends n_{constructor(e,n,r,i){super(e,n,r,i,i?.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),q0(c))){const u=qT(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$3.has(r)||e.length!==2)return;const[i,s]=e,o=P1(i),a=P1(s);if(o!==a)if(A1(o)&&A1(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)V3(e[i])&&r.push(i);r.length&&hM(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ea[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=ea[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function sC(t){let e;return()=>(e===void 0&&(e=t()),e)}const O1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($i.test(t)||t==="0")&&!t.startsWith("url("));function dM(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function fM(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=O1(i,e),a=O1(s,e);return!o||!a?!1:dM(t)||n==="spring"&&r}class oC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Q3(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!fM(e,r,i,s))if(o)this.options.duration=0;else{l?.(qd(e,this.options,n)),a?.(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function aC(t,e){return e?t*(1e3/e):0}const pM=5;function lC(t,e,n){const r=Math.max(e-pM,0);return aC(n-t(r),e-r)}const Gf=.001,mM=.01,gM=10,_M=.05,bM=1;function yM({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Gi(_M,bM,o),t=Gi(mM,gM,$r(t)),o<1?(i=c=>{const u=c*o,h=u*t,d=u-n,f=Pm(c,o),_=Math.exp(-h);return Gf-d/f*_},s=c=>{const h=c*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,_=Math.exp(-h),g=Pm(Math.pow(c,2),o);return(-i(c)+Gf>0?-1:1)*((d-f)*_)/g}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-Gf+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=EM(i,s,a);if(t=li(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const vM=12;function EM(t,e,n){let r=n;for(let i=1;i<vM;i++)r=r-t(r)/e(r);return r}function Pm(t,e){return t*Math.sqrt(1-e*e)}const wM=["duration","bounce"],SM=["stiffness","damping","mass"];function I1(t,e){return e.some(n=>t[n]!==void 0)}function TM(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!I1(t,SM)&&I1(t,wM)){const n=yM(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function s_({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:d}=TM({...r,velocity:-$r(r.velocity||0)}),f=h||0,_=l/(2*Math.sqrt(a*c)),g=s-i,m=$r(Math.sqrt(a/c)),p=Math.abs(g)<5;n||(n=p?.01:2),e||(e=p?.005:.5);let b;if(_<1){const y=Pm(m,_);b=v=>{const E=Math.exp(-_*m*v);return s-E*((f+_*m*g)/y*Math.sin(y*v)+g*Math.cos(y*v))}}else if(_===1)b=y=>s-Math.exp(-m*y)*(g+(f+m*g)*y);else{const y=m*Math.sqrt(_*_-1);b=v=>{const E=Math.exp(-_*m*v),w=Math.min(y*v,300);return s-E*((f+_*m*g)*Math.sinh(w)+y*g*Math.cosh(w))/y}}return{calculatedDuration:d&&u||null,next:y=>{const v=b(y);if(d)o.done=y>=u;else{let E=f;y!==0&&(_<1?E=lC(b,y,v):E=0);const w=Math.abs(E)<=n,T=Math.abs(s-v)<=e;o.done=w&&T}return o.value=o.done?s:v,o}}}function L1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=S=>a!==void 0&&S<a||l!==void 0&&S>l,_=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let g=n*e;const m=h+g,p=o===void 0?m:o(m);p!==m&&(g=p-h);const b=S=>-g*Math.exp(-S/r),y=S=>p+b(S),v=S=>{const x=b(S),R=y(S);d.done=Math.abs(x)<=c,d.value=d.done?p:R};let E,w;const T=S=>{f(d.value)&&(E=S,w=s_({keyframes:[d.value,_(d.value)],velocity:lC(y,S,d.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:S=>{let x=!1;return!w&&E===void 0&&(x=!0,v(S),T(S)),E!==void 0&&S>=E?w.next(S-E):(!x&&v(S),d)}}}const cC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,CM=1e-7,xM=12;function AM(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=cC(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>CM&&++a<xM);return o}function to(t,e,n,r){if(t===e&&n===r)return ln;const i=s=>AM(s,0,1,t,n);return s=>s===0||s===1?s:cC(i(s),e,r)}const kM=to(.42,0,1,1),RM=to(0,0,.58,1),uC=to(.42,0,.58,1),hC=t=>Array.isArray(t)&&typeof t[0]!="number",dC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,fC=t=>e=>1-t(1-e),o_=t=>1-Math.sin(Math.acos(t)),pC=fC(o_),PM=dC(o_),mC=to(.33,1.53,.69,.99),a_=fC(mC),DM=dC(a_),OM=t=>(t*=2)<1?.5*a_(t):.5*(2-Math.pow(2,-10*(t-1))),M1={linear:ln,easeIn:kM,easeInOut:uC,easeOut:RM,circIn:o_,circInOut:PM,circOut:pC,backIn:a_,backInOut:DM,backOut:mC,anticipate:OM},N1=t=>{if(Array.isArray(t)){Rh(t.length===4);const[e,n,r,i]=t;return to(e,n,r,i)}else if(typeof t=="string")return Rh(M1[t]!==void 0),M1[t];return t},ta=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},yt=(t,e,n)=>t+(e-t)*n;function $f(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IM({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=$f(l,a,t+1/3),s=$f(l,a,t),o=$f(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ih(t,e){return n=>n>0?e:t}const qf=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},LM=[km,Ss,Ao],MM=t=>LM.find(e=>e.test(t));function B1(t){const e=MM(t);if(!e)return!1;let n=e.parse(t);return e===Ao&&(n=IM(n)),n}const F1=(t,e)=>{const n=B1(t),r=B1(e);if(!n||!r)return Ih(t,e);const i={...n};return s=>(i.red=qf(n.red,r.red,s),i.green=qf(n.green,r.green,s),i.blue=qf(n.blue,r.blue,s),i.alpha=yt(n.alpha,r.alpha,s),Ss.transform(i))},Dm=new Set(["none","hidden"]);function NM(t,e){return Dm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function BM(t,e){return n=>yt(t,e,n)}function l_(t){return typeof t=="number"?BM:typeof t=="string"?q0(t)?Ih:nn.test(t)?F1:UM:Array.isArray(t)?gC:typeof t=="object"?nn.test(t)?F1:FM:Ih}function gC(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>l_(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function FM(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=l_(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function HM(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const UM=(t,e)=>{const n=$i.createTransformer(e),r=Dl(t),i=Dl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Dm.has(t)&&!i.values.length||Dm.has(e)&&!r.values.length?NM(t,e):ai(gC(HM(r,i),i.values),n):Ih(t,e)};function _C(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):l_(t)(t,e)}function jM(t,e,n){const r=[],i=n||_C,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ln:e;a=ai(l,a)}r.push(a)}return r}function zM(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Rh(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=jM(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=ta(t[u],t[u+1],c);return o[u](h)};return n?c=>l(Gi(t[0],t[s-1],c)):l}function bC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ta(0,e,r);t.push(yt(n,1,i))}}function yC(t){const e=[0];return bC(e,t.length-1),e}function VM(t,e){return t.map(n=>n*e)}function WM(t,e){return t.map(()=>e||uC).splice(0,t.length-1)}function Lh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=hC(r)?r.map(N1):N1(r),s={done:!1,value:e[0]},o=VM(n&&n.length===e.length?n:yC(e),t),a=zM(o,e,{ease:Array.isArray(i)?i:WM(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Om=2e4;function vC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Om;)e+=n,r=t.next(e);return e>=Om?1/0:e}const GM=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>hi(e),now:()=>$t.isProcessing?$t.timestamp:ji.now()}},$M={decay:L1,inertia:L1,tween:Lh,keyframes:Lh,spring:s_},qM=t=>t/100;class c_ extends oC{constructor({KeyframeResolver:e=n_,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:r,motionValue:i,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(s,o,r,i):this.resolver=new e(s,o,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=$M[n]||Lh;let l,c;a!==Lh&&typeof e[0]!="number"&&(l=ai(qM,_C(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=vC(u));const{calculatedDuration:h}=u,d=h+i,f=d*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:d,repeat:f,repeatType:_,repeatDelay:g,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const p=this.currentTime-d*(this.speed>=0?1:-1),b=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let y=this.currentTime,v=s;if(f){const S=Math.min(this.currentTime,u)/h;let x=Math.floor(S),R=S%1;!R&&S>=1&&(R=1),R===1&&x--,x=Math.min(x,f+1),!!(x%2)&&(_==="reverse"?(R=1-R,g&&(R-=g/h)):_==="mirror"&&(v=o)),y=Gi(0,1,R)*h}const E=b?{done:!1,value:l[0]}:v.next(y);a&&(E.value=a(E.value));let{done:w}=E;!b&&c!==null&&(w=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return T&&i!==void 0&&(E.value=qd(l,this.options,i)),m&&m(E.value),T&&this.finish(),E}get duration(){const{resolved:e}=this;return e?$r(e.calculatedDuration):0}get time(){return $r(this.currentTime)}set time(e){e=li(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=$r(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=GM,onPlay:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=r),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const EC=t=>Array.isArray(t)&&typeof t[0]=="number";function wC(t){return!!(!t||typeof t=="string"&&t in u_||EC(t)||Array.isArray(t)&&t.every(wC))}const Xa=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,u_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xa([0,.65,.55,1]),circOut:Xa([.55,0,1,.45]),backIn:Xa([.31,.01,.66,-.59]),backOut:Xa([.33,1.53,.69,.99])};function KM(t){return SC(t)||u_.easeOut}function SC(t){if(t)return EC(t)?Xa(t):Array.isArray(t)?t.map(KM):u_[t]}function YM(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=SC(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const XM=sC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),QM=new Set(["opacity","clipPath","filter","transform"]),Mh=10,JM=2e4;function ZM(t){return t.type==="spring"||t.name==="backgroundColor"||!wC(t.ease)}function eN(t,e){const n=new c_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<JM;)r=n.sample(s),i.push(r.value),s+=Mh;return{times:void 0,keyframes:i,duration:s-Mh,ease:"linear"}}class H1 extends oC{constructor(e){super(e);const{name:n,motionValue:r,keyframes:i}=this.options;this.resolver=new iC(i,(s,o)=>this.onKeyframesResolved(s,o),n,r),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(ZM(this.options)){const{onComplete:h,onUpdate:d,motionValue:f,..._}=this.options,g=eN(e,_);e=g.keyframes,e.length===1&&(e[1]=e[0]),i=g.duration,s=g.times,o=g.ease,a="keyframes"}const u=YM(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return u.startTime=ji.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;l.set(qd(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return $r(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return $r(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=li(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ln;const{animation:r}=n;r.timeline=e,r.onfinish=null}return ln}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(!(n.playState==="idle"||n.playState==="finished")){if(this.time){const{motionValue:l,onUpdate:c,onComplete:u,...h}=this.options,d=new c_({...h,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),f=li(this.time);l.setWithVelocity(d.sample(f-Mh).value,d.sample(f).value,Mh)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return XM()&&r&&QM.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}function tN(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return at.update(r,!0),()=>hi(r)}const nN=sC(()=>window.ScrollTimeline!==void 0);class h_{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(nN()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),tN(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const d_=(t,e,n,r={},i,s)=>o=>{const a=t_(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-li(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};U3(a)||(u={...u,...H3(t,u)}),u.duration&&(u.duration=li(u.duration)),u.repeatDelay&&(u.repeatDelay=li(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const d=qd(u.keyframes,a);if(d!==void 0)return at.update(()=>{u.onUpdate(d),u.onComplete()}),new h_([])}return!s&&H1.supports(u)?new H1(u):new c_(u)};function Nh(t){return!!(Vt(t)&&t.add)}function f_(t,e){t.indexOf(e)===-1&&t.push(e)}function Kd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class p_{constructor(){this.subscriptions=[]}add(e){return f_(this.subscriptions,e),()=>Kd(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const U1=30,rN=t=>!isNaN(parseFloat(t));class iN{constructor(e,n={}){this.version="11.2.12",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ji.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ji.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new p_);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ji.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>U1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,U1);return aC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ol(t,e){return new iN(t,e)}function sN(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ol(n))}function oN(t,e){const n=$d(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=g3(s[o]);sN(t,o,a)}}function TC(t){return t.getProps()[wT]}function aN({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function m_(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;const c=t.getValue("willChange");r&&(o=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),_=l[d];if(_===void 0||h&&aN(h,d))continue;const g={delay:n,elapsed:0,...t_(o||{},d)};let m=!1;if(window.HandoffAppearAnimations){const b=TC(t);if(b){const y=window.HandoffAppearAnimations(b,d,f,at);y!==null&&(g.elapsed=y,m=!0)}}f.start(d_(d,f,_,t.shouldReduceMotion&&eo.has(d)?{type:!1}:g,t,m));const p=f.animation;p&&(Nh(c)&&(c.add(d),p.then(()=>c.remove(d))),u.push(p))}return a&&Promise.all(u).then(()=>{at.update(()=>{a&&oN(t,a)})}),u}function Im(t,e,n={}){var r;const i=$d(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(m_(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return lN(t,e,u+c,h,d,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function lN(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(cN).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Im(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function cN(t,e){return t.sortNodePosition(e)}function uN(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Im(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Im(t,e,n);else{const i=typeof e=="function"?$d(t,e,n.custom):e;r=Promise.all(m_(t,i,n))}return r.then(()=>{at.postRender(()=>{t.notify("AnimationComplete",e)})})}const hN=[...V0].reverse(),dN=V0.length;function fN(t){return e=>Promise.all(e.map(({animation:n,options:r})=>uN(t,n,r)))}function pN(t){let e=fN(t),n=j1(),r=!0;const i=l=>(c,u)=>{var h;const d=$d(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:_,...g}=d;c={...c,...g,..._}}return c};function s(l){e=l(t)}function o(l){const c=t.getProps(),u=t.getVariantContext(!0)||{},h=[],d=new Set;let f={},_=1/0;for(let m=0;m<dN;m++){const p=hN[m],b=n[p],y=c[p]!==void 0?c[p]:u[p],v=Pl(y),E=p===l?b.isActive:null;E===!1&&(_=m);let w=y===u[p]&&y!==c[p]&&v;if(w&&r&&t.manuallyAnimateOnMount&&(w=!1),b.protectedKeys={...f},!b.isActive&&E===null||!y&&!b.prevProp||Vd(y)||typeof y=="boolean")continue;let S=mN(b.prevProp,y)||p===l&&b.isActive&&!w&&v||m>_&&v,x=!1;const R=Array.isArray(y)?y:[y];let U=R.reduce(i(p),{});E===!1&&(U={});const{prevResolvedValues:P={}}=b,B={...P,...U},A=W=>{S=!0,d.has(W)&&(x=!0,d.delete(W)),b.needsAnimating[W]=!0;const ne=t.getValue(W);ne&&(ne.liveStyle=!1)};for(const W in B){const ne=U[W],Q=P[W];if(f.hasOwnProperty(W))continue;let ie=!1;Tm(ne)&&Tm(Q)?ie=!WT(ne,Q):ie=ne!==Q,ie?ne!=null?A(W):d.add(W):ne!==void 0&&d.has(W)?A(W):b.protectedKeys[W]=!0}b.prevProp=y,b.prevResolvedValues=U,b.isActive&&(f={...f,...U}),r&&t.blockInitialAnimation&&(S=!1),S&&(!w||x)&&h.push(...R.map(W=>({animation:W,options:{type:p}})))}if(d.size){const m={};d.forEach(p=>{const b=t.getBaseTarget(p),y=t.getValue(p);y&&(y.liveStyle=!0),m[p]=b??null}),h.push({animation:m})}let g=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const d in n)n[d].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=j1(),r=!0}}}function mN(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!WT(e,t):!1}function cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function j1(){return{animate:cs(!0),whileInView:cs(),whileHover:cs(),whileTap:cs(),whileDrag:cs(),whileFocus:cs(),exit:cs()}}class gN extends ns{constructor(e){super(e),e.animationState||(e.animationState=pN(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _N=0;class bN extends ns{constructor(){super(...arguments),this.id=_N++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yN={animation:{Feature:gN},exit:{Feature:bN}},z1=(t,e)=>Math.abs(t-e);function vN(t,e){const n=z1(t.x,e.x),r=z1(t.y,e.y);return Math.sqrt(n**2+r**2)}class CC{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Yf(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=vN(h.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:_}=h,{timestamp:g}=$t;this.history.push({..._,timestamp:g});const{onStart:m,onMove:p}=this.handlers;d||(m&&m(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,h)},this.handlePointerMove=(h,d)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Kf(d,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(h,d)=>{this.end();const{onEnd:f,onSessionEnd:_,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Yf(h.type==="pointercancel"?this.lastMoveEventInfo:Kf(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(h,m),_&&_(h,m)},!HT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Gd(e),a=Kf(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=$t;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Yf(a,this.history)),this.removeListeners=ai(oi(this.contextWindow,"pointermove",this.handlePointerMove),oi(this.contextWindow,"pointerup",this.handlePointerUp),oi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hi(this.updatePoint)}}function Kf(t,e){return e?{point:e(t.point)}:t}function V1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yf({point:t},e){return{point:t,delta:V1(t,xC(e)),offset:V1(t,EN(e)),velocity:wN(e,.1)}}function EN(t){return t[0]}function xC(t){return t[t.length-1]}function wN(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=xC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>li(e)));)n--;if(!r)return{x:0,y:0};const s=$r(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function zn(t){return t.max-t.min}function Lm(t,e=0,n=.01){return Math.abs(t-e)<=n}function W1(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=zn(n)/zn(e),(Lm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(Lm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ul(t,e,n,r){W1(t.x,e.x,n.x,r?r.originX:void 0),W1(t.y,e.y,n.y,r?r.originY:void 0)}function G1(t,e,n){t.min=n.min+e.min,t.max=t.min+zn(e)}function SN(t,e,n){G1(t.x,e.x,n.x),G1(t.y,e.y,n.y)}function $1(t,e,n){t.min=e.min-n.min,t.max=t.min+zn(e)}function hl(t,e,n){$1(t.x,e.x,n.x),$1(t.y,e.y,n.y)}function TN(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function q1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CN(t,{top:e,left:n,bottom:r,right:i}){return{x:q1(t.x,n,i),y:q1(t.y,e,r)}}function K1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xN(t,e){return{x:K1(t.x,e.x),y:K1(t.y,e.y)}}function AN(t,e){let n=.5;const r=zn(t),i=zn(e);return i>r?n=ta(e.min,e.max-r,t.min):r>i&&(n=ta(t.min,t.max-i,e.min)),Gi(0,1,n)}function kN(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mm=.35;function RN(t=Mm){return t===!1?t=0:t===!0&&(t=Mm),{x:Y1(t,"left","right"),y:Y1(t,"top","bottom")}}function Y1(t,e,n){return{min:X1(t,e),max:X1(t,n)}}function X1(t,e){return typeof t=="number"?t:t[e]||0}const Q1=()=>({translate:0,scale:1,origin:0,originPoint:0}),ko=()=>({x:Q1(),y:Q1()}),J1=()=>({min:0,max:0}),Tt=()=>({x:J1(),y:J1()});function $n(t){return[t("x"),t("y")]}function AC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function PN({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function DN(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Xf(t){return t===void 0||t===1}function Nm({scale:t,scaleX:e,scaleY:n}){return!Xf(t)||!Xf(e)||!Xf(n)}function ms(t){return Nm(t)||kC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function kC(t){return Z1(t.x)||Z1(t.y)}function Z1(t){return t&&t!=="0%"}function Bh(t,e,n){const r=t-n,i=e*r;return n+i}function ey(t,e,n,r,i){return i!==void 0&&(t=Bh(t,i,r)),Bh(t,n,r)+e}function Bm(t,e=0,n=1,r,i){t.min=ey(t.min,e,n,r,i),t.max=ey(t.max,e,n,r,i)}function RC(t,{x:e,y:n}){Bm(t.x,e.translate,e.scale,e.originPoint),Bm(t.y,n.translate,n.scale,n.originPoint)}function ON(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ro(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,RC(t,o)),r&&ms(s.latestValues)&&Ro(t,s.latestValues))}e.x=ty(e.x),e.y=ty(e.y)}function ty(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ki(t,e){t.min=t.min+e,t.max=t.max+e}function ny(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=yt(t.min,t.max,s);Bm(t,e[n],e[r],o,e.scale)}const IN=["x","scaleX","originX"],LN=["y","scaleY","originY"];function Ro(t,e){ny(t.x,e,IN),ny(t.y,e,LN)}function PC(t,e){return AC(DN(t.getBoundingClientRect(),e))}function MN(t,e,n){const r=PC(t,n),{scroll:i}=e;return i&&(ki(r.x,i.offset.x),ki(r.y,i.offset.y)),r}const DC=({current:t})=>t?t.ownerDocument.defaultView:null,NN=new WeakMap;class BN{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gd(u,"page").point)},s=(u,h)=>{const{drag:d,dragPropagation:f,onDragStart:_}=this.getProps();if(d&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=jT(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(m=>{let p=this.getAxisMotionValue(m).get()||0;if(Gr.test(p)){const{projection:b}=this.visualElement;if(b&&b.layout){const y=b.layout.layoutBox[m];y&&(p=zn(y)*(parseFloat(p)/100))}}this.originPoint[m]=p}),_&&at.postRender(()=>_(u,h));const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:_,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=h;if(f&&this.currentDirection===null){this.currentDirection=FN(m),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,m),this.updateAxis("y",h.point,m),this.visualElement.render(),g&&g(u,h)},a=(u,h)=>this.stop(u,h),l=()=>$n(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new CC(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:DC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&at.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!iu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=TN(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&xo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CN(i.layoutBox,n):this.constraints=!1,this.elastic=RN(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$n(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kN(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=MN(r,i.root,this.visualElement.getTransformPagePoint());let o=xN(i.layout.layoutBox,s);if(n){const a=n(PN(o));this.hasMutatedConstraints=!!a,a&&(o=AC(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=$n(u=>{if(!iu(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,_={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,_)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(d_(e,r,0,n,this.visualElement))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:r}=this.getProps();if(!iu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-yt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$n(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=AN({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$n(o=>{if(!iu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(yt(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;NN.set(this.visualElement,this);const e=this.visualElement.current,n=oi(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();xo(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),at.read(r);const o=ii(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&($n(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Mm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function iu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function FN(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class HN extends ns{constructor(e){super(e),this.removeGroupControls=ln,this.removeListeners=ln,this.controls=new BN(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const ry=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class UN extends ns{constructor(){super(...arguments),this.removePointerDownListener=ln}onPointerDown(e){this.session=new CC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ry(e),onStart:ry(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&at.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=oi(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jN(){const t=D.useContext(zd);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=D.useId();return D.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const n=iy(t,e.target.x),r=iy(t,e.target.y);return`${n}% ${r}%`}},zN={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$i.parse(t);if(i.length>5)return r;const s=$i.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=yt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class VN extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;$L(WN),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||at.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),z0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OC(t){const[e,n]=jN(),r=D.useContext(G0);return N.jsx(VN,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(TT),isPresent:e,safeToRemove:n})}const WN={borderRadius:{...Oa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oa,borderTopRightRadius:Oa,borderBottomLeftRadius:Oa,borderBottomRightRadius:Oa,boxShadow:zN},IC=["TopLeft","TopRight","BottomLeft","BottomRight"],GN=IC.length,sy=t=>typeof t=="string"?parseFloat(t):t,oy=t=>typeof t=="number"||Ue.test(t);function $N(t,e,n,r,i,s){i?(t.opacity=yt(0,n.opacity!==void 0?n.opacity:1,qN(r)),t.opacityExit=yt(e.opacity!==void 0?e.opacity:1,0,KN(r))):s&&(t.opacity=yt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<GN;o++){const a=`border${IC[o]}Radius`;let l=ay(e,a),c=ay(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||oy(l)===oy(c)?(t[a]=Math.max(yt(sy(l),sy(c),r),0),(Gr.test(c)||Gr.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function ay(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qN=LC(0,.5,pC),KN=LC(.5,.95,ln);function LC(t,e,n){return r=>r<t?0:r>e?1:n(ta(t,e,r))}function ly(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){ly(t.x,e.x),ly(t.y,e.y)}function cy(t,e,n,r,i){return t-=e,t=Bh(t,1/n,r),i!==void 0&&(t=Bh(t,1/i,r)),t}function YN(t,e=0,n=1,r=.5,i,s=t,o=t){if(Gr.test(e)&&(e=parseFloat(e),e=yt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=yt(s.min,s.max,r);t===s&&(a-=e),t.min=cy(t.min,e,n,a,i),t.max=cy(t.max,e,n,a,i)}function uy(t,e,[n,r,i],s,o){YN(t,e[n],e[r],e[i],e.scale,s,o)}const XN=["x","scaleX","originX"],QN=["y","scaleY","originY"];function hy(t,e,n,r){uy(t.x,e,XN,n?n.x:void 0,r?r.x:void 0),uy(t.y,e,QN,n?n.y:void 0,r?r.y:void 0)}function dy(t){return t.translate===0&&t.scale===1}function MC(t){return dy(t.x)&&dy(t.y)}function JN(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function NC(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function fy(t){return zn(t.x)/zn(t.y)}class ZN{constructor(){this.members=[]}add(e){f_(this.members,e),e.scheduleRender()}remove(e){if(Kd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function py(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:_}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),d&&(r+=`rotateY(${d}deg) `),f&&(r+=`skewX(${f}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const eB=(t,e)=>t.depth-e.depth;class tB{constructor(){this.children=[],this.isDirty=!1}add(e){f_(this.children,e),this.isDirty=!0}remove(e){Kd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eB),this.isDirty=!1,this.children.forEach(e)}}function nB(t,e){const n=ji.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(hi(r),t(s-e))};return at.read(r,!0),()=>hi(r)}function rB(t){window.MotionDebug&&window.MotionDebug.record(t)}function BC(t){return t instanceof SVGElement&&t.tagName!=="svg"}function g_(t,e,n){const r=Vt(t)?t:Ol(t);return r.start(d_("",r,e,n)),r.animation}const Qf=["","X","Y","Z"],iB={visibility:"hidden"},my=1e3;let sB=0;const gs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Jf(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function FC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return!1;const{visualElement:e}=t.options;return e?TC(e)?!0:t.parent&&!t.parent.hasCheckedOptimisedAppear?FC(t.parent):!1:!1}function HC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=sB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,gs.totalNodes=gs.resolvedTargetDeltas=gs.recalculatedProjection=0,this.nodes.forEach(lB),this.nodes.forEach(fB),this.nodes.forEach(pB),this.nodes.forEach(cB),rB(gs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tB)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new p_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BC(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=nB(d,250),oh.hasAnimatedSinceResize&&(oh.hasAnimatedSinceResize=!1,this.nodes.forEach(_y))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||yB,{onLayoutAnimationStart:m,onLayoutAnimationComplete:p}=u.getProps(),b=!this.targetLayout||!NC(this.targetLayout,_)||f,y=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const v={...t_(g,"layout"),onPlay:m,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v)}else d||_y(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&FC(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gy);return}this.isUpdating||this.nodes.forEach(hB),this.isUpdating=!1,this.nodes.forEach(dB),this.nodes.forEach(oB),this.nodes.forEach(aB),this.clearAllSnapshots();const a=ji.now();$t.delta=Gi(0,1e3/60,a-$t.timestamp),$t.timestamp=a,$t.isProcessing=!0,jf.update.process($t),jf.preRender.process($t),jf.render.process($t),$t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,z0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uB),this.sharedNodes.forEach(gB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!MC(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ms(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Tt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ki(a.x,l.offset.x),ki(a.y,l.offset.y)),a}removeElementScroll(o){const a=Tt();Gn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){Gn(a,o);const{scroll:d}=this.root;d&&(ki(a.x,-d.offset.x),ki(a.y,-d.offset.y))}ki(a.x,u.offset.x),ki(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=Tt();Gn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ro(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ms(u.latestValues)&&Ro(l,u.latestValues)}return ms(this.latestValues)&&Ro(l,this.latestValues),l}removeTransform(o){const a=Tt();Gn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ms(c.latestValues))continue;Nm(c.latestValues)&&c.updateSnapshot();const u=Tt(),h=c.measurePageBox();Gn(u,h),hy(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ms(this.latestValues)&&hy(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=$t.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),hl(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),RC(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),hl(this.relativeTargetOrigin,this.target,f.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}gs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nm(this.parent.latestValues)||kC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===$t.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Gn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;ON(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Tt());const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=ko(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ko(),this.projectionDeltaWithTransform=ko());const g=this.projectionTransform;ul(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=py(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==f)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),gs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=ko();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Tt(),f=l?l.source:void 0,_=this.layout?this.layout.source:void 0,g=f!==_,m=this.getStack(),p=!m||m.members.length<=1,b=!!(g&&!p&&this.options.crossfade===!0&&!this.path.some(bB));this.animationProgress=0;let y;this.mixTargetDelta=v=>{const E=v/1e3;by(h.x,o.x,E),by(h.y,o.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hl(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_B(this.relativeTarget,this.relativeTargetOrigin,d,E),y&&JN(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Tt()),Gn(y,this.relativeTarget)),g&&(this.animationValues=u,$N(u,c,this.latestValues,E,b,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{oh.hasAnimatedSinceResize=!0,this.currentAnimation=g_(0,my,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(my),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&UC(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Tt();const h=zn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=zn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Gn(a,l),Ro(a,u),ul(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ZN),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Jf("z",o,c,this.animationValues);for(let u=0;u<Qf.length;u++)Jf(`rotate${Qf[u]}`,o,c,this.animationValues),Jf(`skew${Qf[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iB;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ih(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=ih(o?.pointerEvents)||""),this.hasProjected&&!ms(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=py(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:f,y:_}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${_.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Ph){if(d[g]===void 0)continue;const{correct:m,applyTo:p}=Ph[g],b=c.transform==="none"?d[g]:m(d[g],h);if(p){const y=p.length;for(let v=0;v<y;v++)c[p[v]]=b}else c[g]=b}return this.options.layoutId&&(c.pointerEvents=h===this?ih(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(gy),this.root.sharedNodes.clear()}}}function oB(t){t.updateLayout()}function aB(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?$n(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=zn(d);d.min=r[h].min,d.max=d.min+f}):UC(s,n.layoutBox,r)&&$n(h=>{const d=o?n.measuredBox[h]:n.layoutBox[h],f=zn(r[h]);d.max=d.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+f)});const a=ko();ul(a,r,n.layoutBox);const l=ko();o?ul(l,t.applyTransform(i,!0),n.measuredBox):ul(l,r,n.layoutBox);const c=!MC(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const _=Tt();hl(_,n.layoutBox,d.layoutBox);const g=Tt();hl(g,r,f.layoutBox),NC(_,g)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function lB(t){gs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function uB(t){t.clearSnapshot()}function gy(t){t.clearMeasurements()}function hB(t){t.isLayoutDirty=!1}function dB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _y(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fB(t){t.resolveTargetDelta()}function pB(t){t.calcProjection()}function mB(t){t.resetSkewAndRotation()}function gB(t){t.removeLeadSnapshot()}function by(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yy(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function _B(t,e,n,r){yy(t.x,e.x,n.x,r),yy(t.y,e.y,n.y,r)}function bB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yB={duration:.45,ease:[.4,0,.1,1]},vy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ey=vy("applewebkit/")&&!vy("chrome/")?Math.round:ln;function wy(t){t.min=Ey(t.min),t.max=Ey(t.max)}function vB(t){wy(t.x),wy(t.y)}function UC(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lm(fy(e),fy(n),.2)}const EB=HC({attachResizeListener:(t,e)=>ii(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zf={current:void 0},jC=HC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zf.current){const t=new EB({});t.mount(window),t.setOptions({layoutScroll:!0}),Zf.current=t}return Zf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wB={pan:{Feature:UN},drag:{Feature:HN,ProjectionNode:jC,MeasureLayout:OC}},Fm={current:null},zC={current:!1};function SB(){if(zC.current=!0,!!H0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fm.current=t.matches;t.addListener(e),e()}else Fm.current=!1}function TB(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Vt(s))t.addValue(i,s),Nh(r)&&r.add(i);else if(Vt(o))t.addValue(i,Ol(s,{owner:t})),Nh(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ol(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Il=new WeakMap,CB=[...YT,nn,$i],xB=t=>CB.find(KT(t)),Sy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],AB=W0.length;class kB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.resolveKeyframes=(d,f,_,g)=>new this.KeyframeResolver(d,f,_,g,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=n_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>at.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Wd(n),this.isVariantNode=xT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Vt(f)&&(f.set(l[d],!1),Nh(u)&&u.add(d))}}mount(e){this.current=e,Il.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zC.current||SB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Il.delete(this.current),this.projection&&this.projection.unmount(),hi(this.notifyUpdate),hi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){const r=eo.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zo){const n=Zo[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Sy.length;r++){const i=Sy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=TB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<AB;r++){const i=W0[r],s=this.props[i];(Pl(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ol(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&($T(i)||GT(i))?i=parseFloat(i):!xB(i)&&$i.test(n)&&(i=rC(e,n)),this.setBaseTarget(e,Vt(i)?i.get():i)),Vt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=e_(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new p_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class VC extends kB{constructor(){super(...arguments),this.KeyframeResolver=iC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function RB(t){return window.getComputedStyle(t)}class WC extends VC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(eo.has(n)){const r=i_(n);return r&&r.default||0}else{const r=RB(e),i=(RT(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return PC(e,n)}build(e,n,r,i){Y0(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Z0(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){LT(e,n,r,i)}}class GC extends VC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(eo.has(n)){const r=i_(n);return r&&r.default||0}return n=MT.has(n)?n:j0(n),e.getAttribute(n)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,n,r){return BT(e,n,r)}build(e,n,r,i){Q0(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){NT(e,n,r,i)}mount(e){this.isSVGTag=J0(e.tagName),super.mount(e)}}const PB=(t,e)=>$0(t)?new GC(e,{enableHardwareAcceleration:!1}):new WC(e,{allowProjection:t!==D.Fragment,enableHardwareAcceleration:!0}),DB={layout:{ProjectionNode:jC,MeasureLayout:OC}},OB={...yN,...L3,...wB,...DB},rr=WL((t,e)=>E3(t,e,OB,PB));function $C(){const t=D.useRef(!1);return U0(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function IB(){const t=$C(),[e,n]=D.useState(0),r=D.useCallback(()=>{t.current&&n(e+1)},[e]);return[D.useCallback(()=>at.postRender(r),[r]),e]}class LB extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function MB({children:t,isPresent:e}){const n=D.useId(),r=D.useRef(null),i=D.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=D.useContext(F0);return D.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),N.jsx(LB,{isPresent:e,childRef:r,sizeRef:i,children:D.cloneElement(t,{ref:r})})}const ep=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Oh(NB),l=D.useId(),c=D.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?[Math.random()]:[n]);return D.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),D.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=N.jsx(MB,{isPresent:n,children:t})),N.jsx(zd.Provider,{value:c,children:t})};function NB(){return new Map}function qC(t){return D.useEffect(()=>()=>t(),[])}const _s=t=>t.key||"";function BB(t,e){t.forEach(n=>{const r=_s(n);e.set(r,n)})}function FB(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const Fh=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=D.useContext(G0).forceRender||IB()[0],l=$C(),c=FB(t);let u=c;const h=D.useRef(new Map).current,d=D.useRef(u),f=D.useRef(new Map).current,_=D.useRef(!0);if(U0(()=>{_.current=!1,BB(c,f),d.current=u}),qC(()=>{_.current=!0,f.clear(),h.clear()}),_.current)return N.jsx(N.Fragment,{children:u.map(b=>N.jsx(ep,{isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o,children:b},_s(b)))});u=[...u];const g=d.current.map(_s),m=c.map(_s),p=g.length;for(let b=0;b<p;b++){const y=g[b];m.indexOf(y)===-1&&!h.has(y)&&h.set(y,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((b,y)=>{if(m.indexOf(y)!==-1)return;const v=f.get(y);if(!v)return;const E=g.indexOf(y);let w=b;if(!w){const T=()=>{h.delete(y);const S=Array.from(f.keys()).filter(x=>!m.includes(x));if(S.forEach(x=>f.delete(x)),d.current=c.filter(x=>{const R=_s(x);return R===y||S.includes(R)}),!h.size){if(l.current===!1)return;a(),r&&r()}};w=N.jsx(ep,{isPresent:!1,onExitComplete:T,custom:e,presenceAffectsLayout:s,mode:o,children:v},_s(v)),h.set(y,w)}u.splice(E,0,w)}),u=u.map(b=>{const y=b.key;return h.has(y)?b:N.jsx(ep,{isPresent:!0,presenceAffectsLayout:s,mode:o,children:b},_s(b))}),N.jsx(N.Fragment,{children:h.size?u:u.map(b=>D.cloneElement(b))})};function KC(t,e,n){var r;if(typeof t=="string"){let i=document;e&&(Rh(!!e.current),i=e.current),n?((r=n[t])!==null&&r!==void 0||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}function HB(t){return typeof t=="object"&&!Array.isArray(t)}function UB(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=BC(t)?new GC(e,{enableHardwareAcceleration:!1}):new WC(e,{enableHardwareAcceleration:!0});n.mount(t),Il.set(t,n)}function jB(t,e=100){const n=s_({keyframes:[0,e],...t}),r=Math.min(vC(n),Om);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:$r(r)}}function Ty(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}const zB=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function VB(t,e){return hC(t)?t[zB(0,t.length,e)]:t}function WB(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(Kd(t,i),r--)}}function GB(t,e,n,r,i,s){WB(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:yt(i,s,r[o]),easing:VB(n,o)})}function $B(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const qB="easeInOut";function KB(t,{defaultTransition:e={},...n}={},r){const i=e.duration||.3,s=new Map,o=new Map,a={},l=new Map;let c=0,u=0,h=0;for(let d=0;d<t.length;d++){const f=t[d];if(typeof f=="string"){l.set(f,u);continue}else if(!Array.isArray(f)){l.set(f.name,Ty(u,f.at,c,l));continue}let[_,g,m={}]=f;m.at!==void 0&&(u=Ty(u,m.at,c,l));let p=0;const b=(y,v,E,w=0,T=0)=>{const S=YB(y),{delay:x=0,times:R=yC(S),type:U="keyframes",...P}=v;let{ease:B=e.ease||"easeOut",duration:A}=v;const W=typeof x=="function"?x(w,T):x,ne=S.length;if(ne<=2&&U==="spring"){let I=100;if(ne===2&&JB(S)){const F=S[1]-S[0];I=Math.abs(F)}const j={...P};A!==void 0&&(j.duration=li(A));const H=jB(j,I);B=H.ease,A=H.duration}A??(A=i);const Q=u+W,ie=Q+A;R.length===1&&R[0]===0&&(R[1]=1);const L=R.length-S.length;L>0&&bC(R,L),S.length===1&&S.unshift(null),GB(E,S,B,R,Q,ie),p=Math.max(W+A,p),h=Math.max(ie,h)};if(Vt(_)){const y=Cy(_,o);b(g,m,xy("default",y))}else{const y=KC(_,r,a),v=y.length;for(let E=0;E<v;E++){g=g,m=m;const w=y[E],T=Cy(w,o);for(const S in g)b(g[S],XB(m,S),xy(S,T),E,v)}}c=u,u+=p}return o.forEach((d,f)=>{for(const _ in d){const g=d[_];g.sort($B);const m=[],p=[],b=[];for(let v=0;v<g.length;v++){const{at:E,value:w,easing:T}=g[v];m.push(w),p.push(ta(0,h,E)),b.push(T||"easeOut")}p[0]!==0&&(p.unshift(0),m.unshift(m[0]),b.unshift(qB)),p[p.length-1]!==1&&(p.push(1),m.push(null)),s.has(f)||s.set(f,{keyframes:{},transition:{}});const y=s.get(f);y.keyframes[_]=m,y.transition[_]={...e,duration:h,ease:b,times:p,...n}}}),s}function Cy(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function xy(t,e){return e[t]||(e[t]=[]),e[t]}function YB(t){return Array.isArray(t)?t:[t]}function XB(t,e){return t[e]?{...t,...t[e]}:{...t}}const QB=t=>typeof t=="number",JB=t=>t.every(QB);function YC(t,e,n,r){const i=KC(t,r),s=i.length,o=[];for(let a=0;a<s;a++){const l=i[a];Il.has(l)||UB(l);const c=Il.get(l),u={...n};typeof u.delay=="function"&&(u.delay=u.delay(a,s)),o.push(...m_(c,{...e,transition:u},{}))}return new h_(o)}const ZB=t=>Array.isArray(t)&&Array.isArray(t[0]);function e6(t,e,n){const r=[];return KB(t,e,n).forEach(({keyframes:s,transition:o},a)=>{let l;Vt(a)?l=g_(a,s.default,o.default):l=YC(a,s,o),r.push(l)}),new h_(r)}const t6=t=>{function e(n,r,i){let s;return ZB(n)?s=e6(n,r,t):HB(r)?s=YC(n,r,i,t):s=g_(n,r,i),t&&t.animations.push(s),s}return e};function n6(){const t=Oh(()=>({current:null,animations:[]})),e=Oh(()=>t6(t));return qC(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function XC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=XC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bi(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=XC(t))&&(r&&(r+=" "),r+=e);return r}const Ll=t=>typeof t=="number"&&!isNaN(t),Ms=t=>typeof t=="string",Fn=t=>typeof t=="function",ah=t=>Ms(t)||Fn(t)?t:null,Hm=t=>D.isValidElement(t)||Ms(t)||Fn(t)||Ll(t);function r6(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Rc(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:h,isIn:d,playToast:f}=o;const _=r?`${e}--${l}`:e,g=r?`${n}--${l}`:n,m=D.useRef(0);return D.useLayoutEffect(()=>{const p=h.current,b=_.split(" "),y=v=>{v.target===h.current&&(f(),p.removeEventListener("animationend",y),p.removeEventListener("animationcancel",y),m.current===0&&v.type!=="animationcancel"&&p.classList.remove(...b))};p.classList.add(...b),p.addEventListener("animationend",y),p.addEventListener("animationcancel",y)},[]),D.useEffect(()=>{const p=h.current,b=()=>{p.removeEventListener("animationend",b),i?r6(p,u,s):u()};d||(c?b():(m.current=1,p.className+=` ${g}`,p.addEventListener("animationend",b)))},[d]),qe.createElement(qe.Fragment,null,a)}}function Ay(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const mn=new Map;let Ml=[];const Um=new Set,i6=t=>Um.forEach(e=>e(t)),QC=()=>mn.size>0;function JC(t,e){var n;if(e)return!((n=mn.get(e))==null||!n.isToastActive(t));let r=!1;return mn.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function ZC(t,e){Hm(t)&&(QC()||Ml.push({content:t,options:e}),mn.forEach(n=>{n.buildToast(t,e)}))}function ky(t,e){mn.forEach(n=>{e!=null&&e!=null&&e.containerId?e?.containerId===n.id&&n.toggle(t,e?.id):n.toggle(t,e?.id)})}function s6(t){const{subscribe:e,getSnapshot:n,setProps:r}=D.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,h,d){let f=1,_=0,g=[],m=[],p=[],b=h;const y=new Map,v=new Set,E=()=>{p=Array.from(y.values()),v.forEach(S=>S())},w=S=>{m=S==null?[]:m.filter(x=>x!==S),E()},T=S=>{const{toastId:x,onOpen:R,updateId:U,children:P}=S.props,B=U==null;S.staleId&&y.delete(S.staleId),y.set(x,S),m=[...m,S.props.toastId].filter(A=>A!==S.staleId),E(),d(Ay(S,B?"added":"updated")),B&&Fn(R)&&R(D.isValidElement(P)&&P.props)};return{id:u,props:b,observe:S=>(v.add(S),()=>v.delete(S)),toggle:(S,x)=>{y.forEach(R=>{x!=null&&x!==R.props.toastId||Fn(R.toggle)&&R.toggle(S)})},removeToast:w,toasts:y,clearQueue:()=>{_-=g.length,g=[]},buildToast:(S,x)=>{if((H=>{let{containerId:F,toastId:J,updateId:te}=H;const fe=F?F!==u:u!==1,Z=y.has(J)&&te==null;return fe||Z})(x))return;const{toastId:R,updateId:U,data:P,staleId:B,delay:A}=x,W=()=>{w(R)},ne=U==null;ne&&_++;const Q={...b,style:b.toastStyle,key:f++,...Object.fromEntries(Object.entries(x).filter(H=>{let[F,J]=H;return J!=null})),toastId:R,updateId:U,data:P,closeToast:W,isIn:!1,className:ah(x.className||b.toastClassName),bodyClassName:ah(x.bodyClassName||b.bodyClassName),progressClassName:ah(x.progressClassName||b.progressClassName),autoClose:!x.isLoading&&(ie=x.autoClose,L=b.autoClose,ie===!1||Ll(ie)&&ie>0?ie:L),deleteToast(){const H=y.get(R),{onClose:F,children:J}=H.props;Fn(F)&&F(D.isValidElement(J)&&J.props),d(Ay(H,"removed")),y.delete(R),_--,_<0&&(_=0),g.length>0?T(g.shift()):E()}};var ie,L;Q.closeButton=b.closeButton,x.closeButton===!1||Hm(x.closeButton)?Q.closeButton=x.closeButton:x.closeButton===!0&&(Q.closeButton=!Hm(b.closeButton)||b.closeButton);let I=S;D.isValidElement(S)&&!Ms(S.type)?I=D.cloneElement(S,{closeToast:W,toastProps:Q,data:P}):Fn(S)&&(I=S({closeToast:W,toastProps:Q,data:P}));const j={content:I,props:Q,staleId:B};b.limit&&b.limit>0&&_>b.limit&&ne?g.push(j):Ll(A)?setTimeout(()=>{T(j)},A):T(j)},setProps(S){b=S},setToggle:(S,x)=>{y.get(S).toggle=x},isToastActive:S=>m.some(x=>x===S),getSnapshot:()=>b.newestOnTop?p.reverse():p}}(o,s,i6);mn.set(o,l);const c=l.observe(a);return Ml.forEach(u=>ZC(u.content,u.options)),Ml=[],()=>{c(),mn.delete(o)}},setProps(a){var l;(l=mn.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=mn.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=D.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:JC,count:i?.length}}function o6(t){const[e,n]=D.useState(!1),[r,i]=D.useState(!1),s=D.useRef(null),o=D.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:h}=t;var d,f;function _(){n(!0)}function g(){n(!1)}function m(y){const v=s.current;o.canDrag&&v&&(o.didMove=!0,e&&g(),o.delta=t.draggableDirection==="x"?y.clientX-o.start:y.clientY-o.start,o.start!==y.clientX&&(o.canCloseOnClick=!1),v.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,v.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function p(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",p);const y=s.current;if(o.canDrag&&o.didMove&&y){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();y.style.transition="transform 0.2s, opacity 0.2s",y.style.removeProperty("transform"),y.style.removeProperty("opacity")}}(f=mn.get((d={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||f.setToggle(d.id,d.fn),D.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||g(),window.addEventListener("focus",_),window.addEventListener("blur",g),()=>{window.removeEventListener("focus",_),window.removeEventListener("blur",g)}},[t.pauseOnFocusLoss]);const b={onPointerDown:function(y){if(t.draggable===!0||t.draggable===y.pointerType){o.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",p);const v=s.current;o.canCloseOnClick=!0,o.canDrag=!0,v.style.transition="none",t.draggableDirection==="x"?(o.start=y.clientX,o.removalDistance=v.offsetWidth*(t.draggablePercent/100)):(o.start=y.clientY,o.removalDistance=v.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(y){const{top:v,bottom:E,left:w,right:T}=s.current.getBoundingClientRect();y.nativeEvent.type!=="touchend"&&t.pauseOnHover&&y.clientX>=w&&y.clientX<=T&&y.clientY>=v&&y.clientY<=E?g():_()}};return a&&l&&(b.onMouseEnter=g,t.stacked||(b.onMouseLeave=_)),h&&(b.onClick=y=>{u&&u(y),o.canCloseOnClick&&c()}),{playToast:_,pauseToast:g,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:b}}function a6(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:h,theme:d}=t;const f=s||l&&c===0,_={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(_.transform=`scaleX(${c})`);const g=Bi("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),m=Fn(o)?o({rtl:u,type:i,defaultClassName:g}):Bi(g,o),p={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{h&&r()}};return qe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},qe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${i}`}),qe.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:m,style:_,...p}))}let l6=1;const ex=()=>""+l6++;function c6(t){return t&&(Ms(t.toastId)||Ll(t.toastId))?t.toastId:ex()}function dl(t,e){return ZC(t,e),e.toastId}function Hh(t,e){return{...e,type:e&&e.type||t,toastId:c6(e)}}function su(t){return(e,n)=>dl(e,Hh(t,n))}function je(t,e){return dl(t,Hh("default",e))}je.loading=(t,e)=>dl(t,Hh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),je.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Ms(i)?je.loading(i,n):je.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,h,d)=>{if(h==null)return void je.dismiss(r);const f={type:u,...a,...n,data:d},_=Ms(h)?{render:h}:h;return r?je.update(r,{...f,..._}):je(_.render,{...f,..._}),d},c=Fn(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},je.success=su("success"),je.info=su("info"),je.error=su("error"),je.warning=su("warning"),je.warn=je.warning,je.dark=(t,e)=>dl(t,Hh("default",{theme:"dark",...e})),je.dismiss=function(t){(function(e){var n;if(QC()){if(e==null||Ms(n=e)||Ll(n))mn.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=mn.get(e.containerId);r?r.removeToast(e.id):mn.forEach(i=>{i.removeToast(e.id)})}}else Ml=Ml.filter(r=>e!=null&&r.options.toastId!==e)})(t)},je.clearWaitingQueue=function(t){t===void 0&&(t={}),mn.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},je.isActive=JC,je.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=mn.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:ex()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,dl(o,s)}},je.done=t=>{je.update(t,{progress:1})},je.onChange=function(t){return Um.add(t),()=>{Um.delete(t)}},je.play=t=>ky(!0,t),je.pause=t=>ky(!1,t);const u6=typeof window<"u"?D.useLayoutEffect:D.useEffect,ou=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return qe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},tp={info:function(t){return qe.createElement(ou,{...t},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return qe.createElement(ou,{...t},qe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return qe.createElement(ou,{...t},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return qe.createElement(ou,{...t},qe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return qe.createElement("div",{className:"Toastify__spinner"})}},h6=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=o6(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:d,transition:f,position:_,className:g,style:m,bodyClassName:p,bodyStyle:b,progressClassName:y,progressStyle:v,updateId:E,role:w,progress:T,rtl:S,toastId:x,deleteToast:R,isIn:U,isLoading:P,closeOnClick:B,theme:A}=t,W=Bi("Toastify__toast",`Toastify__toast-theme--${A}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":B}),ne=Fn(g)?g({rtl:S,position:_,type:u,defaultClassName:W}):Bi(W,g),Q=function(j){let{theme:H,type:F,isLoading:J,icon:te}=j,fe=null;const Z={theme:H,type:F};return te===!1||(Fn(te)?fe=te({...Z,isLoading:J}):D.isValidElement(te)?fe=D.cloneElement(te,Z):J?fe=tp.spinner():(V=>V in tp)(F)&&(fe=tp[F](Z))),fe}(t),ie=!!T||!l,L={closeToast:d,type:u,theme:A};let I=null;return o===!1||(I=Fn(o)?o(L):D.isValidElement(o)?D.cloneElement(o,L):function(j){let{closeToast:H,theme:F,ariaLabel:J="close"}=j;return qe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${F}`,type:"button",onClick:te=>{te.stopPropagation(),H(te)},"aria-label":J},qe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},qe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),qe.createElement(f,{isIn:U,done:R,position:_,preventExitTransition:n,nodeRef:r,playToast:s},qe.createElement("div",{id:x,onClick:c,"data-in":U,className:ne,...i,style:m,ref:r},qe.createElement("div",{...U&&{role:w},className:Fn(p)?p({type:u}):Bi("Toastify__toast-body",p),style:b},Q!=null&&qe.createElement("div",{className:Bi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},Q),qe.createElement("div",null,a)),I,qe.createElement(a6,{...E&&!ie?{key:`pb-${E}`}:{},rtl:S,theme:A,delay:l,isRunning:e,isIn:U,closeToast:d,hide:h,type:u,style:v,className:y,controlledProgress:ie,progress:T||0})))},Yd=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},d6=Rc(Yd("bounce",!0));Rc(Yd("slide",!0));Rc(Yd("zoom"));Rc(Yd("flip"));const f6={position:"top-right",transition:d6,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function p6(t){let e={...f6,...t};const n=t.stacked,[r,i]=D.useState(!0),s=D.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=s6(e),{className:c,style:u,rtl:h,containerId:d}=e;function f(g){const m=Bi("Toastify__toast-container",`Toastify__toast-container--${g}`,{"Toastify__toast-container--rtl":h});return Fn(c)?c({position:g,rtl:h,defaultClassName:m}):Bi(m,ah(c))}function _(){n&&(i(!0),je.play())}return u6(()=>{if(n){var g;const m=s.current.querySelectorAll('[data-in="true"]'),p=12,b=(g=e.position)==null?void 0:g.includes("top");let y=0,v=0;Array.from(m).reverse().forEach((E,w)=>{const T=E;T.classList.add("Toastify__toast--stacked"),w>0&&(T.dataset.collapsed=`${r}`),T.dataset.pos||(T.dataset.pos=b?"top":"bot");const S=y*(r?.2:1)+(r?0:p*w);T.style.setProperty("--y",`${b?S:-1*S}px`),T.style.setProperty("--g",`${p}`),T.style.setProperty("--s",""+(1-(r?v:0))),y+=T.offsetHeight,v+=.025})}},[r,l,n]),qe.createElement("div",{ref:s,className:"Toastify",id:d,onMouseEnter:()=>{n&&(i(!1),je.pause())},onMouseLeave:_},o((g,m)=>{const p=m.length?{...u}:{...u,pointerEvents:"none"};return qe.createElement("div",{className:f(g),style:p,key:`container-${g}`},m.map(b=>{let{content:y,props:v}=b;return qe.createElement(h6,{...v,stacked:n,collapseAll:_,isIn:a(v.toastId,v.containerId),style:v.style,key:`toast-${v.key}`},y)}))}))}function ze(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function m6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Xd(...t){return e=>t.forEach(n=>m6(n,e))}function St(...t){return D.useCallback(Xd(...t),t)}function g6(t,e){const n=D.createContext(e);function r(s){const{children:o,...a}=s,l=D.useMemo(()=>a,Object.values(a));return N.jsx(n.Provider,{value:l,children:o})}function i(s){const o=D.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return r.displayName=t+"Provider",[r,i]}function pa(t,e=[]){let n=[];function r(s,o){const a=D.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:d,children:f,..._}=h,g=d?.[t][l]||a,m=D.useMemo(()=>_,Object.values(_));return N.jsx(g.Provider,{value:m,children:f})}function u(h,d){const f=d?.[t][l]||a,_=D.useContext(f);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>D.createContext(o));return function(a){const l=a?.[t]||s;return D.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,_6(i,...e)]}function _6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Kr=globalThis?.document?D.useLayoutEffect:()=>{},b6=L0.useId||(()=>{}),y6=0;function Ns(t){const[e,n]=D.useState(b6());return Kr(()=>{t||n(r=>r??String(y6++))},[t]),t||(e?`radix-${e}`:"")}function Vn(t){const e=D.useRef(t);return D.useEffect(()=>{e.current=t}),D.useMemo(()=>(...n)=>e.current?.(...n),[])}function Qd({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=v6({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Vn(n),l=D.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function v6({defaultProp:t,onChange:e}){const n=D.useState(t),[r]=n,i=D.useRef(r),s=Vn(e);return D.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var na=D.forwardRef((t,e)=>{const{children:n,...r}=t,i=D.Children.toArray(n),s=i.find(E6);if(s){const o=s.props.children,a=i.map(l=>l===s?D.Children.count(o)>1?D.Children.only(null):D.isValidElement(o)?o.props.children:null:l);return N.jsx(jm,{...r,ref:e,children:D.isValidElement(o)?D.cloneElement(o,void 0,a):null})}return N.jsx(jm,{...r,ref:e,children:n})});na.displayName="Slot";var jm=D.forwardRef((t,e)=>{const{children:n,...r}=t;if(D.isValidElement(n)){const i=S6(n);return D.cloneElement(n,{...w6(r,n.props),ref:e?Xd(e,i):i})}return D.Children.count(n)>1?D.Children.only(null):null});jm.displayName="SlotClone";var tx=({children:t})=>N.jsx(N.Fragment,{children:t});function E6(t){return D.isValidElement(t)&&t.type===tx}function w6(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function S6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var T6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gt=T6.reduce((t,e)=>{const n=D.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?na:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),N.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function __(t,e){t&&M0.flushSync(()=>t.dispatchEvent(e))}function nx(t,e=globalThis?.document){const n=Vn(t);D.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var C6="DismissableLayer",zm="dismissableLayer.update",x6="dismissableLayer.pointerDownOutside",A6="dismissableLayer.focusOutside",Ry,rx=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),b_=D.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=D.useContext(rx),[u,h]=D.useState(null),d=u?.ownerDocument??globalThis?.document,[,f]=D.useState({}),_=St(e,T=>h(T)),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),p=g.indexOf(m),b=u?g.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,v=b>=p,E=P6(T=>{const S=T.target,x=[...c.branches].some(R=>R.contains(S));!v||x||(i?.(T),o?.(T),T.defaultPrevented||a?.())},d),w=D6(T=>{const S=T.target;[...c.branches].some(R=>R.contains(S))||(s?.(T),o?.(T),T.defaultPrevented||a?.())},d);return nx(T=>{b===c.layers.size-1&&(r?.(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},d),D.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Ry=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Py(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=Ry)}},[u,d,n,c]),D.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Py())},[u,c]),D.useEffect(()=>{const T=()=>f({});return document.addEventListener(zm,T),()=>document.removeEventListener(zm,T)},[]),N.jsx(gt.div,{...l,ref:_,style:{pointerEvents:y?v?"auto":"none":void 0,...t.style},onFocusCapture:ze(t.onFocusCapture,w.onFocusCapture),onBlurCapture:ze(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:ze(t.onPointerDownCapture,E.onPointerDownCapture)})});b_.displayName=C6;var k6="DismissableLayerBranch",R6=D.forwardRef((t,e)=>{const n=D.useContext(rx),r=D.useRef(null),i=St(e,r);return D.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),N.jsx(gt.div,{...t,ref:i})});R6.displayName=k6;function P6(t,e=globalThis?.document){const n=Vn(t),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){ix(x6,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function D6(t,e=globalThis?.document){const n=Vn(t),r=D.useRef(!1);return D.useEffect(()=>{const i=s=>{s.target&&!r.current&&ix(A6,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Py(){const t=new CustomEvent(zm);document.dispatchEvent(t)}function ix(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?__(i,s):i.dispatchEvent(s)}var np="focusScope.autoFocusOnMount",rp="focusScope.autoFocusOnUnmount",Dy={bubbles:!1,cancelable:!0},O6="FocusScope",y_=D.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=D.useState(null),c=Vn(i),u=Vn(s),h=D.useRef(null),d=St(e,g=>l(g)),f=D.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;D.useEffect(()=>{if(r){let g=function(y){if(f.paused||!a)return;const v=y.target;a.contains(v)?h.current=v:Ci(h.current,{select:!0})},m=function(y){if(f.paused||!a)return;const v=y.relatedTarget;v!==null&&(a.contains(v)||Ci(h.current,{select:!0}))},p=function(y){if(document.activeElement===document.body)for(const E of y)E.removedNodes.length>0&&Ci(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",m);const b=new MutationObserver(p);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",m),b.disconnect()}}},[r,a,f.paused]),D.useEffect(()=>{if(a){Iy.add(f);const g=document.activeElement;if(!a.contains(g)){const p=new CustomEvent(np,Dy);a.addEventListener(np,c),a.dispatchEvent(p),p.defaultPrevented||(I6(F6(sx(a)),{select:!0}),document.activeElement===g&&Ci(a))}return()=>{a.removeEventListener(np,c),setTimeout(()=>{const p=new CustomEvent(rp,Dy);a.addEventListener(rp,u),a.dispatchEvent(p),p.defaultPrevented||Ci(g??document.body,{select:!0}),a.removeEventListener(rp,u),Iy.remove(f)},0)}}},[a,c,u,f]);const _=D.useCallback(g=>{if(!n&&!r||f.paused)return;const m=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,p=document.activeElement;if(m&&p){const b=g.currentTarget,[y,v]=L6(b);y&&v?!g.shiftKey&&p===v?(g.preventDefault(),n&&Ci(y,{select:!0})):g.shiftKey&&p===y&&(g.preventDefault(),n&&Ci(v,{select:!0})):p===b&&g.preventDefault()}},[n,r,f.paused]);return N.jsx(gt.div,{tabIndex:-1,...o,ref:d,onKeyDown:_})});y_.displayName=O6;function I6(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ci(r,{select:e}),document.activeElement!==n)return}function L6(t){const e=sx(t),n=Oy(e,t),r=Oy(e.reverse(),t);return[n,r]}function sx(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Oy(t,e){for(const n of t)if(!M6(n,{upTo:e}))return n}function M6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function N6(t){return t instanceof HTMLInputElement&&"select"in t}function Ci(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&N6(t)&&e&&t.select()}}var Iy=B6();function B6(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Ly(t,e),t.unshift(e)},remove(e){t=Ly(t,e),t[0]?.resume()}}}function Ly(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function F6(t){return t.filter(e=>e.tagName!=="A")}var H6="Portal",v_=D.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=D.useState(!1);Kr(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?vT.createPortal(N.jsx(gt.div,{...r,ref:e}),o):null});v_.displayName=H6;function U6(t,e){return D.useReducer((n,r)=>e[n][r]??n,t)}var rs=t=>{const{present:e,children:n}=t,r=j6(e),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),s=St(r.ref,z6(i));return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:s}):null};rs.displayName="Presence";function j6(t){const[e,n]=D.useState(),r=D.useRef({}),i=D.useRef(t),s=D.useRef("none"),o=t?"mounted":"unmounted",[a,l]=U6(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=au(r.current);s.current=a==="mounted"?c:"none"},[a]),Kr(()=>{const c=r.current,u=i.current;if(u!==t){const d=s.current,f=au(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Kr(()=>{if(e){const c=h=>{const f=au(r.current).includes(h.animationName);h.target===e&&f&&M0.flushSync(()=>l("ANIMATION_END"))},u=h=>{h.target===e&&(s.current=au(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function au(t){return t?.animationName||"none"}function z6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ip=0;function ox(){D.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??My()),document.body.insertAdjacentElement("beforeend",t[1]??My()),ip++,()=>{ip===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ip--}},[])}function My(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Lr=function(){return Lr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lr.apply(this,arguments)};function ax(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function V6(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var lh="right-scroll-bar-position",ch="width-before-scroll-bar",W6="with-scroll-bars-hidden",G6="--removed-body-scroll-bar-size";function sp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function $6(t,e){var n=D.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var q6=typeof window<"u"?D.useLayoutEffect:D.useEffect,Ny=new WeakMap;function K6(t,e){var n=$6(null,function(r){return t.forEach(function(i){return sp(i,r)})});return q6(function(){var r=Ny.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||sp(a,null)}),s.forEach(function(a){i.has(a)||sp(a,o)})}Ny.set(n,t)},[t]),n}function Y6(t){return t}function X6(t,e){e===void 0&&(e=Y6);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Q6(t){t===void 0&&(t={});var e=X6(null);return e.options=Lr({async:!0,ssr:!1},t),e}var lx=function(t){var e=t.sideCar,n=ax(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return D.createElement(r,Lr({},n))};lx.isSideCarExport=!0;function J6(t,e){return t.useMedium(e),lx}var cx=Q6(),op=function(){},Jd=D.forwardRef(function(t,e){var n=D.useRef(null),r=D.useState({onScrollCapture:op,onWheelCapture:op,onTouchMoveCapture:op}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,d=t.sideCar,f=t.noIsolation,_=t.inert,g=t.allowPinchZoom,m=t.as,p=m===void 0?"div":m,b=t.gapMode,y=ax(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=d,E=K6([n,e]),w=Lr(Lr({},y),i);return D.createElement(D.Fragment,null,u&&D.createElement(v,{sideCar:cx,removeScrollBar:c,shards:h,noIsolation:f,inert:_,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?D.cloneElement(D.Children.only(a),Lr(Lr({},w),{ref:E})):D.createElement(p,Lr({},w,{className:l,ref:E}),a))});Jd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jd.classNames={fullWidth:ch,zeroRight:lh};var Z6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function e4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Z6();return e&&t.setAttribute("nonce",e),t}function t4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function n4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var r4=function(){var t=0,e=null;return{add:function(n){t==0&&(e=e4())&&(t4(e,n),n4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},i4=function(){var t=r4();return function(e,n){D.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ux=function(){var t=i4(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},s4={left:0,top:0,right:0,gap:0},ap=function(t){return parseInt(t||"",10)||0},o4=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[ap(n),ap(r),ap(i)]},a4=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return s4;var e=o4(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},l4=ux(),Fo="data-scroll-locked",c4=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(W6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Fo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ch,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lh," .").concat(lh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ch," .").concat(ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fo,`] {
    `).concat(G6,": ").concat(a,`px;
  }
`)},By=function(){var t=parseInt(document.body.getAttribute(Fo)||"0",10);return isFinite(t)?t:0},u4=function(){D.useEffect(function(){return document.body.setAttribute(Fo,(By()+1).toString()),function(){var t=By()-1;t<=0?document.body.removeAttribute(Fo):document.body.setAttribute(Fo,t.toString())}},[])},h4=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;u4();var s=D.useMemo(function(){return a4(i)},[i]);return D.createElement(l4,{styles:c4(s,!e,i,n?"":"!important")})},Vm=!1;if(typeof window<"u")try{var lu=Object.defineProperty({},"passive",{get:function(){return Vm=!0,!0}});window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Vm=!1}var lo=Vm?{passive:!1}:!1,d4=function(t){return t.tagName==="TEXTAREA"},hx=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!d4(t)&&n[e]==="visible")},f4=function(t){return hx(t,"overflowY")},p4=function(t){return hx(t,"overflowX")},Fy=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=dx(t,r);if(i){var s=fx(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m4=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},g4=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},dx=function(t,e){return t==="v"?f4(e):p4(e)},fx=function(t,e){return t==="v"?m4(e):g4(e)},_4=function(t,e){return t==="h"&&e==="rtl"?-1:1},b4=function(t,e,n,r,i){var s=_4(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,d=0;do{var f=fx(t,a),_=f[0],g=f[1],m=f[2],p=g-m-s*_;(_||p)&&dx(t,a)&&(h+=p,d+=_),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(h)<1||!i)||!u&&(Math.abs(d)<1||!i))&&(c=!0),c},cu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Hy=function(t){return[t.deltaX,t.deltaY]},Uy=function(t){return t&&"current"in t?t.current:t},y4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},v4=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},E4=0,co=[];function w4(t){var e=D.useRef([]),n=D.useRef([0,0]),r=D.useRef(),i=D.useState(E4++)[0],s=D.useState(ux)[0],o=D.useRef(t);D.useEffect(function(){o.current=t},[t]),D.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=V6([t.lockRef.current],(t.shards||[]).map(Uy),!0).filter(Boolean);return g.forEach(function(m){return m.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=D.useCallback(function(g,m){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var p=cu(g),b=n.current,y="deltaX"in g?g.deltaX:b[0]-p[0],v="deltaY"in g?g.deltaY:b[1]-p[1],E,w=g.target,T=Math.abs(y)>Math.abs(v)?"h":"v";if("touches"in g&&T==="h"&&w.type==="range")return!1;var S=Fy(T,w);if(!S)return!0;if(S?E=T:(E=T==="v"?"h":"v",S=Fy(T,w)),!S)return!1;if(!r.current&&"changedTouches"in g&&(y||v)&&(r.current=E),!E)return!0;var x=r.current||E;return b4(x,m,g,x==="h"?y:v,!0)},[]),l=D.useCallback(function(g){var m=g;if(!(!co.length||co[co.length-1]!==s)){var p="deltaY"in m?Hy(m):cu(m),b=e.current.filter(function(E){return E.name===m.type&&(E.target===m.target||m.target===E.shadowParent)&&y4(E.delta,p)})[0];if(b&&b.should){m.cancelable&&m.preventDefault();return}if(!b){var y=(o.current.shards||[]).map(Uy).filter(Boolean).filter(function(E){return E.contains(m.target)}),v=y.length>0?a(m,y[0]):!o.current.noIsolation;v&&m.cancelable&&m.preventDefault()}}},[]),c=D.useCallback(function(g,m,p,b){var y={name:g,delta:m,target:p,should:b,shadowParent:S4(p)};e.current.push(y),setTimeout(function(){e.current=e.current.filter(function(v){return v!==y})},1)},[]),u=D.useCallback(function(g){n.current=cu(g),r.current=void 0},[]),h=D.useCallback(function(g){c(g.type,Hy(g),g.target,a(g,t.lockRef.current))},[]),d=D.useCallback(function(g){c(g.type,cu(g),g.target,a(g,t.lockRef.current))},[]);D.useEffect(function(){return co.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:d}),document.addEventListener("wheel",l,lo),document.addEventListener("touchmove",l,lo),document.addEventListener("touchstart",u,lo),function(){co=co.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,lo),document.removeEventListener("touchmove",l,lo),document.removeEventListener("touchstart",u,lo)}},[]);var f=t.removeScrollBar,_=t.inert;return D.createElement(D.Fragment,null,_?D.createElement(s,{styles:v4(i)}):null,f?D.createElement(h4,{gapMode:t.gapMode}):null)}function S4(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const T4=J6(cx,w4);var E_=D.forwardRef(function(t,e){return D.createElement(Jd,Lr({},t,{ref:e,sideCar:T4}))});E_.classNames=Jd.classNames;var C4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uo=new WeakMap,uu=new WeakMap,hu={},lp=0,px=function(t){return t&&(t.host||px(t.parentNode))},x4=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=px(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},A4=function(t,e,n,r){var i=x4(e,Array.isArray(t)?t:[t]);hu[n]||(hu[n]=new WeakMap);var s=hu[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(d){if(a.has(d))u(d);else try{var f=d.getAttribute(r),_=f!==null&&f!=="false",g=(uo.get(d)||0)+1,m=(s.get(d)||0)+1;uo.set(d,g),s.set(d,m),o.push(d),g===1&&_&&uu.set(d,!0),m===1&&d.setAttribute(n,"true"),_||d.setAttribute(r,"true")}catch(p){console.error("aria-hidden: cannot operate on ",d,p)}})};return u(e),a.clear(),lp++,function(){o.forEach(function(h){var d=uo.get(h)-1,f=s.get(h)-1;uo.set(h,d),s.set(h,f),d||(uu.has(h)||h.removeAttribute(r),uu.delete(h)),f||h.removeAttribute(n)}),lp--,lp||(uo=new WeakMap,uo=new WeakMap,uu=new WeakMap,hu={})}},mx=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=C4(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),A4(r,i,n,"aria-hidden")):function(){return null}},w_="Dialog",[gx,tue]=pa(w_),[k4,Er]=gx(w_),_x=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=D.useRef(null),l=D.useRef(null),[c=!1,u]=Qd({prop:r,defaultProp:i,onChange:s});return N.jsx(k4,{scope:e,triggerRef:a,contentRef:l,contentId:Ns(),titleId:Ns(),descriptionId:Ns(),open:c,onOpenChange:u,onOpenToggle:D.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};_x.displayName=w_;var bx="DialogTrigger",yx=D.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Er(bx,n),s=St(e,i.triggerRef);return N.jsx(gt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":C_(i.open),...r,ref:s,onClick:ze(t.onClick,i.onOpenToggle)})});yx.displayName=bx;var S_="DialogPortal",[R4,vx]=gx(S_,{forceMount:void 0}),Ex=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Er(S_,e);return N.jsx(R4,{scope:e,forceMount:n,children:D.Children.map(r,o=>N.jsx(rs,{present:n||s.open,children:N.jsx(v_,{asChild:!0,container:i,children:o})}))})};Ex.displayName=S_;var Uh="DialogOverlay",wx=D.forwardRef((t,e)=>{const n=vx(Uh,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Er(Uh,t.__scopeDialog);return s.modal?N.jsx(rs,{present:r||s.open,children:N.jsx(P4,{...i,ref:e})}):null});wx.displayName=Uh;var P4=D.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Er(Uh,n);return N.jsx(E_,{as:na,allowPinchZoom:!0,shards:[i.contentRef],children:N.jsx(gt.div,{"data-state":C_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),js="DialogContent",Sx=D.forwardRef((t,e)=>{const n=vx(js,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Er(js,t.__scopeDialog);return N.jsx(rs,{present:r||s.open,children:s.modal?N.jsx(D4,{...i,ref:e}):N.jsx(O4,{...i,ref:e})})});Sx.displayName=js;var D4=D.forwardRef((t,e)=>{const n=Er(js,t.__scopeDialog),r=D.useRef(null),i=St(e,n.contentRef,r);return D.useEffect(()=>{const s=r.current;if(s)return mx(s)},[]),N.jsx(Tx,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:ze(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ze(t.onFocusOutside,s=>s.preventDefault())})}),O4=D.forwardRef((t,e)=>{const n=Er(js,t.__scopeDialog),r=D.useRef(!1),i=D.useRef(!1);return N.jsx(Tx,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;n.triggerRef.current?.contains(o)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Tx=D.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Er(js,n),l=D.useRef(null),c=St(e,l);return ox(),N.jsxs(N.Fragment,{children:[N.jsx(y_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:N.jsx(b_,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":C_(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),N.jsxs(N.Fragment,{children:[N.jsx(I4,{titleId:a.titleId}),N.jsx(M4,{contentRef:l,descriptionId:a.descriptionId})]})]})}),T_="DialogTitle",Cx=D.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Er(T_,n);return N.jsx(gt.h2,{id:i.titleId,...r,ref:e})});Cx.displayName=T_;var xx="DialogDescription",Ax=D.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Er(xx,n);return N.jsx(gt.p,{id:i.descriptionId,...r,ref:e})});Ax.displayName=xx;var kx="DialogClose",Rx=D.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Er(kx,n);return N.jsx(gt.button,{type:"button",...r,ref:e,onClick:ze(t.onClick,()=>i.onOpenChange(!1))})});Rx.displayName=kx;function C_(t){return t?"open":"closed"}var Px="DialogTitleWarning",[nue,Dx]=g6(Px,{contentName:js,titleName:T_,docsSlug:"dialog"}),I4=({titleId:t})=>{const e=Dx(Px),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return D.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},L4="DialogDescriptionWarning",M4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Dx(L4).contentName}}.`;return D.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},N4=_x,B4=yx,F4=Ex,H4=wx,U4=Sx,j4=Cx,z4=Ax,V4=Rx;function We(...t){let e="";for(const n of t)e=Ox(e,W4(n));return e}function W4(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return We(...t);let e="";for(const n in t)t[n]&&(e=Ox(e,n));return e}function Ox(t,e){return e?t?t+" "+e:t+e:t}const ir=to(.4,0,.2,1),Hn=D.memo(({icon:t,size:e="xl",className:n,iconClassName:r,disabledClassName:i,disabled:s=!1,title:o,onClick:a,children:l})=>N.jsx("button",{className:We("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[We("opacity-30",i)]:s},n),title:o,disabled:s,onClick:c=>{s||a?.(c)},children:l||N.jsx("div",{className:We(t,G4(e),r)})}));function G4(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const jh={duration:.15,ease:ir},$4={closed:{opacity:0,transition:jh},open:{opacity:1,transition:jh}},q4={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:jh},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:jh}},jy=D.memo(({type:t,children:e,onClick:n})=>N.jsx("button",{className:We("inline-flex h-[35px] items-center justify-center rounded-lg px-4 text-sm leading-none focus:outline-none",{"bg-bolt-elements-button-primary-background text-bolt-elements-button-primary-text hover:bg-bolt-elements-button-primary-backgroundHover":t==="primary","bg-bolt-elements-button-secondary-background text-bolt-elements-button-secondary-text hover:bg-bolt-elements-button-secondary-backgroundHover":t==="secondary","bg-bolt-elements-button-danger-background text-bolt-elements-button-danger-text hover:bg-bolt-elements-button-danger-backgroundHover":t==="danger"}),onClick:n,children:e})),K4=D.memo(({className:t,children:e,...n})=>N.jsx(j4,{className:We("px-5 py-4 flex items-center justify-between border-b border-bolt-elements-borderColor text-lg font-semibold leading-6 text-bolt-elements-textPrimary",t),...n,children:e})),Y4=D.memo(({className:t,children:e,...n})=>N.jsx(z4,{className:We("px-5 py-4 text-bolt-elements-textPrimary text-md",t),...n,children:e})),X4=D.memo(({className:t,children:e,onBackdrop:n,onClose:r})=>N.jsxs(F4,{children:[N.jsx(H4,{onClick:n,asChild:!0,children:N.jsx(rr.div,{className:"bg-black/50 fixed inset-0 z-max",initial:"closed",animate:"open",exit:"closed",variants:$4})}),N.jsx(U4,{asChild:!0,children:N.jsxs(rr.div,{className:We("fixed top-[50%] left-[50%] z-max max-h-[85vh] w-[90vw] max-w-[450px] translate-x-[-50%] translate-y-[-50%] border border-bolt-elements-borderColor rounded-lg bg-bolt-elements-background-depth-2 shadow-lg focus:outline-none overflow-hidden",t),initial:"closed",animate:"open",exit:"closed",variants:q4,children:[e,N.jsx(V4,{asChild:!0,onClick:r,children:N.jsx(Hn,{icon:"i-ph:x",className:"absolute top-[10px] right-[10px]"})})]})})]})),Q4=D.memo(({className:t})=>{const e=Dt(Sm),[n,r]=D.useState(!1);return D.useEffect(()=>{r(!0)},[]),n&&N.jsx(Hn,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:vL})});let Ix="debug";const J4="HTMLRewriter"in globalThis,Z4=!J4,Lx={trace:(...t)=>Mr("trace",void 0,t),debug:(...t)=>Mr("debug",void 0,t),info:(...t)=>Mr("info",void 0,t),warn:(...t)=>Mr("warn",void 0,t),error:(...t)=>Mr("error",void 0,t),setLevel:Mx};function Wn(t){return{trace:(...e)=>Mr("trace",t,e),debug:(...e)=>Mr("debug",t,e),info:(...e)=>Mr("info",t,e),warn:(...e)=>Mr("warn",t,e),error:(...e)=>Mr("error",t,e),setLevel:Mx}}function Mx(t){t==="trace"||t==="debug"||(Ix=t)}function Mr(t,e,n){const r=["trace","debug","info","warn","error"];if(r.indexOf(t)<r.indexOf(Ix))return;const i=n.reduce((u,h)=>u.endsWith(`
`)?u+h:u?`${u} ${h}`:h,"");if(!Z4){console.log(`[${t.toUpperCase()}]`,i);return}const s=e5(t),a=zy(s,t==="warn"?"black":"white"),l=zy("#77828D","white"),c=[a];typeof e=="string"&&c.push("",l),console.log(`%c${t.toUpperCase()}${e?`%c %c${e}`:""}`,...c,i)}function zy(t,e){return`background-color: ${t}; color: white; border: 4px solid ${t}; color: ${e};`}function e5(t){switch(t){case"trace":case"debug":return"#77828D";case"info":return"#1389FD";case"warn":return"#FFDB6C";case"error":return"#EE4744";default:return"black"}}const ma=Wn("Render"),t5=Wn("ChatHistory");async function n5(){return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("chats")){const i=r.createObjectStore("chats",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=n=>{t(n.target.result)},e.onerror=n=>{t(void 0),t5.error(n.target.error)}})}async function r5(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAll();s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})}async function Nx(t,e,n,r,i){return new Promise((s,o)=>{const c=t.transaction("chats","readwrite").objectStore("chats").put({id:e,messages:n,urlId:r,description:i,timestamp:new Date().toISOString()});c.onsuccess=()=>s(),c.onerror=()=>o(c.error)})}async function zh(t,e){return await s5(t,e)||await i5(t,e)}async function i5(t,e){return new Promise((n,r)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async function s5(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>n(o.result),o.onerror=()=>r(o.error)})}async function o5(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>n(void 0),o.onerror=()=>r(o.error)})}async function Bx(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats").getAllKeys();s.onsuccess=()=>{const o=s.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},s.onerror=()=>n(s.error)})}async function Fx(t,e){const n=await a5(t);if(n.includes(e)){let r=2;for(;n.includes(`${e}-${r}`);)r++;return`${e}-${r}`}else return e}async function a5(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats"),s=[],o=i.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(s.push(l.value.urlId),l.continue()):e(s)},o.onerror=()=>{n(o.error)}})}async function l5(t,e,n){const r=await zh(t,e);if(!r)throw new Error("Chat not found");const i=r.messages.findIndex(o=>o.id===n);if(i===-1)throw new Error("Message not found");const s=r.messages.slice(0,i+1);return x_(t,r.description?`${r.description} (fork)`:"Forked chat",s)}async function c5(t,e){const n=await zh(t,e);if(!n)throw new Error("Chat not found");return x_(t,`${n.description||"Chat"} (copy)`,n.messages)}async function x_(t,e,n){const r=await Bx(t),i=await Fx(t,r);return await Nx(t,r,n,i,e),i}var A_={},Zd={};Zd.byteLength=d5;Zd.toByteArray=p5;Zd.fromByteArray=_5;var Nr=[],qn=[],u5=typeof Uint8Array<"u"?Uint8Array:Array,cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ho=0,h5=cp.length;ho<h5;++ho)Nr[ho]=cp[ho],qn[cp.charCodeAt(ho)]=ho;qn[45]=62;qn[95]=63;function Hx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function d5(t){var e=Hx(t),n=e[0],r=e[1];return(n+r)*3/4-r}function f5(t,e,n){return(e+n)*3/4-n}function p5(t){var e,n=Hx(t),r=n[0],i=n[1],s=new u5(f5(t,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=qn[t.charCodeAt(l)]<<18|qn[t.charCodeAt(l+1)]<<12|qn[t.charCodeAt(l+2)]<<6|qn[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=qn[t.charCodeAt(l)]<<2|qn[t.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=qn[t.charCodeAt(l)]<<10|qn[t.charCodeAt(l+1)]<<4|qn[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function m5(t){return Nr[t>>18&63]+Nr[t>>12&63]+Nr[t>>6&63]+Nr[t&63]}function g5(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(m5(r));return i.join("")}function _5(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(g5(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(Nr[e>>2]+Nr[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Nr[e>>10]+Nr[e>>4&63]+Nr[e<<2&63]+"=")),i.join("")}var k_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */k_.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+h],h+=d,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-c}return(f?-1:1)*o*Math.pow(2,s-r)};k_.write=function(t,e,n,r,i,s){var o,a,l,c=s*8-i-1,u=(1<<c)-1,h=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,_=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=a&255,f+=_,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[n+f]=o&255,f+=_,o/=256,c-=8);t[n+f-_]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Zd,n=k_,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const z=new s(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,s.prototype),Object.setPrototypeOf(z,k),z.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(z){if(z>i)throw new RangeError('The value "'+z+'" is invalid for option "size"');const k=new s(z);return Object.setPrototypeOf(k,u.prototype),k}function u(z,k,O){if(typeof z=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(z)}return h(z,k,O)}u.poolSize=8192;function h(z,k,O){if(typeof z=="string")return g(z,k);if(o.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(Te(z,o)||z&&Te(z.buffer,o)||typeof a<"u"&&(Te(z,a)||z&&Te(z.buffer,a)))return b(z,k,O);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=z.valueOf&&z.valueOf();if(K!=null&&K!==z)return u.from(K,k,O);const oe=y(z);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return u.from(z[Symbol.toPrimitive]("string"),k,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}u.from=function(z,k,O){return h(z,k,O)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function d(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function f(z,k,O){return d(z),z<=0?c(z):k!==void 0?typeof O=="string"?c(z).fill(k,O):c(z).fill(k):c(z)}u.alloc=function(z,k,O){return f(z,k,O)};function _(z){return d(z),c(z<0?0:v(z)|0)}u.allocUnsafe=function(z){return _(z)},u.allocUnsafeSlow=function(z){return _(z)};function g(z,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const O=w(z,k)|0;let K=c(O);const oe=K.write(z,k);return oe!==O&&(K=K.slice(0,oe)),K}function m(z){const k=z.length<0?0:v(z.length)|0,O=c(k);for(let K=0;K<k;K+=1)O[K]=z[K]&255;return O}function p(z){if(Te(z,s)){const k=new s(z);return b(k.buffer,k.byteOffset,k.byteLength)}return m(z)}function b(z,k,O){if(k<0||z.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<k+(O||0))throw new RangeError('"length" is outside of buffer bounds');let K;return k===void 0&&O===void 0?K=new s(z):O===void 0?K=new s(z,k):K=new s(z,k,O),Object.setPrototypeOf(K,u.prototype),K}function y(z){if(u.isBuffer(z)){const k=v(z.length)|0,O=c(k);return O.length===0||z.copy(O,0,0,k),O}if(z.length!==void 0)return typeof z.length!="number"||ce(z.length)?c(0):m(z);if(z.type==="Buffer"&&Array.isArray(z.data))return m(z.data)}function v(z){if(z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return z|0}function E(z){return+z!=z&&(z=0),u.alloc(+z)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,O){if(Te(k,s)&&(k=u.from(k,k.offset,k.byteLength)),Te(O,s)&&(O=u.from(O,O.offset,O.byteLength)),!u.isBuffer(k)||!u.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===O)return 0;let K=k.length,oe=O.length;for(let pe=0,ye=Math.min(K,oe);pe<ye;++pe)if(k[pe]!==O[pe]){K=k[pe],oe=O[pe];break}return K<oe?-1:oe<K?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,O){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let K;if(O===void 0)for(O=0,K=0;K<k.length;++K)O+=k[K].length;const oe=u.allocUnsafe(O);let pe=0;for(K=0;K<k.length;++K){let ye=k[K];if(Te(ye,s))pe+ye.length>oe.length?(u.isBuffer(ye)||(ye=u.from(ye)),ye.copy(oe,pe)):s.prototype.set.call(oe,ye,pe);else if(u.isBuffer(ye))ye.copy(oe,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=ye.length}return oe};function w(z,k){if(u.isBuffer(z))return z.length;if(o.isView(z)||Te(z,o))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const O=z.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&O===0)return 0;let oe=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return _e(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return xe(z).length;default:if(oe)return K?-1:_e(z).length;k=(""+k).toLowerCase(),oe=!0}}u.byteLength=w;function T(z,k,O){let K=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,k>>>=0,O<=k))return"";for(z||(z="utf8");;)switch(z){case"hex":return H(this,k,O);case"utf8":case"utf-8":return Q(this,k,O);case"ascii":return I(this,k,O);case"latin1":case"binary":return j(this,k,O);case"base64":return ne(this,k,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,k,O);default:if(K)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),K=!0}}u.prototype._isBuffer=!0;function S(z,k,O){const K=z[k];z[k]=z[O],z[O]=K}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<k;O+=2)S(this,O,O+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<k;O+=4)S(this,O,O+3),S(this,O+1,O+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<k;O+=8)S(this,O,O+7),S(this,O+1,O+6),S(this,O+2,O+5),S(this,O+3,O+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?Q(this,0,k):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const O=t.INSPECT_MAX_BYTES;return k=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(k+=" ... "),"<Buffer "+k+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(k,O,K,oe,pe){if(Te(k,s)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(O===void 0&&(O=0),K===void 0&&(K=k?k.length:0),oe===void 0&&(oe=0),pe===void 0&&(pe=this.length),O<0||K>k.length||oe<0||pe>this.length)throw new RangeError("out of range index");if(oe>=pe&&O>=K)return 0;if(oe>=pe)return-1;if(O>=K)return 1;if(O>>>=0,K>>>=0,oe>>>=0,pe>>>=0,this===k)return 0;let ye=pe-oe,Ve=K-O;const et=Math.min(ye,Ve),dt=this.slice(oe,pe),_t=k.slice(O,K);for(let ot=0;ot<et;++ot)if(dt[ot]!==_t[ot]){ye=dt[ot],Ve=_t[ot];break}return ye<Ve?-1:Ve<ye?1:0};function x(z,k,O,K,oe){if(z.length===0)return-1;if(typeof O=="string"?(K=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,ce(O)&&(O=oe?0:z.length-1),O<0&&(O=z.length+O),O>=z.length){if(oe)return-1;O=z.length-1}else if(O<0)if(oe)O=0;else return-1;if(typeof k=="string"&&(k=u.from(k,K)),u.isBuffer(k))return k.length===0?-1:R(z,k,O,K,oe);if(typeof k=="number")return k=k&255,typeof s.prototype.indexOf=="function"?oe?s.prototype.indexOf.call(z,k,O):s.prototype.lastIndexOf.call(z,k,O):R(z,[k],O,K,oe);throw new TypeError("val must be string, number or Buffer")}function R(z,k,O,K,oe){let pe=1,ye=z.length,Ve=k.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(z.length<2||k.length<2)return-1;pe=2,ye/=2,Ve/=2,O/=2}function et(_t,ot){return pe===1?_t[ot]:_t.readUInt16BE(ot*pe)}let dt;if(oe){let _t=-1;for(dt=O;dt<ye;dt++)if(et(z,dt)===et(k,_t===-1?0:dt-_t)){if(_t===-1&&(_t=dt),dt-_t+1===Ve)return _t*pe}else _t!==-1&&(dt-=dt-_t),_t=-1}else for(O+Ve>ye&&(O=ye-Ve),dt=O;dt>=0;dt--){let _t=!0;for(let ot=0;ot<Ve;ot++)if(et(z,dt+ot)!==et(k,ot)){_t=!1;break}if(_t)return dt}return-1}u.prototype.includes=function(k,O,K){return this.indexOf(k,O,K)!==-1},u.prototype.indexOf=function(k,O,K){return x(this,k,O,K,!0)},u.prototype.lastIndexOf=function(k,O,K){return x(this,k,O,K,!1)};function U(z,k,O,K){O=Number(O)||0;const oe=z.length-O;K?(K=Number(K),K>oe&&(K=oe)):K=oe;const pe=k.length;K>pe/2&&(K=pe/2);let ye;for(ye=0;ye<K;++ye){const Ve=parseInt(k.substr(ye*2,2),16);if(ce(Ve))return ye;z[O+ye]=Ve}return ye}function P(z,k,O,K){return Re(_e(k,z.length-O),z,O,K)}function B(z,k,O,K){return Re(ve(k),z,O,K)}function A(z,k,O,K){return Re(xe(k),z,O,K)}function W(z,k,O,K){return Re(he(k,z.length-O),z,O,K)}u.prototype.write=function(k,O,K,oe){if(O===void 0)oe="utf8",K=this.length,O=0;else if(K===void 0&&typeof O=="string")oe=O,K=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(K)?(K=K>>>0,oe===void 0&&(oe="utf8")):(oe=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const pe=this.length-O;if((K===void 0||K>pe)&&(K=pe),k.length>0&&(K<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");let ye=!1;for(;;)switch(oe){case"hex":return U(this,k,O,K);case"utf8":case"utf-8":return P(this,k,O,K);case"ascii":case"latin1":case"binary":return B(this,k,O,K);case"base64":return A(this,k,O,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,k,O,K);default:if(ye)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),ye=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(z,k,O){return k===0&&O===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(k,O))}function Q(z,k,O){O=Math.min(z.length,O);const K=[];let oe=k;for(;oe<O;){const pe=z[oe];let ye=null,Ve=pe>239?4:pe>223?3:pe>191?2:1;if(oe+Ve<=O){let et,dt,_t,ot;switch(Ve){case 1:pe<128&&(ye=pe);break;case 2:et=z[oe+1],(et&192)===128&&(ot=(pe&31)<<6|et&63,ot>127&&(ye=ot));break;case 3:et=z[oe+1],dt=z[oe+2],(et&192)===128&&(dt&192)===128&&(ot=(pe&15)<<12|(et&63)<<6|dt&63,ot>2047&&(ot<55296||ot>57343)&&(ye=ot));break;case 4:et=z[oe+1],dt=z[oe+2],_t=z[oe+3],(et&192)===128&&(dt&192)===128&&(_t&192)===128&&(ot=(pe&15)<<18|(et&63)<<12|(dt&63)<<6|_t&63,ot>65535&&ot<1114112&&(ye=ot))}}ye===null?(ye=65533,Ve=1):ye>65535&&(ye-=65536,K.push(ye>>>10&1023|55296),ye=56320|ye&1023),K.push(ye),oe+=Ve}return L(K)}const ie=4096;function L(z){const k=z.length;if(k<=ie)return String.fromCharCode.apply(String,z);let O="",K=0;for(;K<k;)O+=String.fromCharCode.apply(String,z.slice(K,K+=ie));return O}function I(z,k,O){let K="";O=Math.min(z.length,O);for(let oe=k;oe<O;++oe)K+=String.fromCharCode(z[oe]&127);return K}function j(z,k,O){let K="";O=Math.min(z.length,O);for(let oe=k;oe<O;++oe)K+=String.fromCharCode(z[oe]);return K}function H(z,k,O){const K=z.length;(!k||k<0)&&(k=0),(!O||O<0||O>K)&&(O=K);let oe="";for(let pe=k;pe<O;++pe)oe+=Ce[z[pe]];return oe}function F(z,k,O){const K=z.slice(k,O);let oe="";for(let pe=0;pe<K.length-1;pe+=2)oe+=String.fromCharCode(K[pe]+K[pe+1]*256);return oe}u.prototype.slice=function(k,O){const K=this.length;k=~~k,O=O===void 0?K:~~O,k<0?(k+=K,k<0&&(k=0)):k>K&&(k=K),O<0?(O+=K,O<0&&(O=0)):O>K&&(O=K),O<k&&(O=k);const oe=this.subarray(k,O);return Object.setPrototypeOf(oe,u.prototype),oe};function J(z,k,O){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+k>O)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,O,K){k=k>>>0,O=O>>>0,K||J(k,O,this.length);let oe=this[k],pe=1,ye=0;for(;++ye<O&&(pe*=256);)oe+=this[k+ye]*pe;return oe},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,O,K){k=k>>>0,O=O>>>0,K||J(k,O,this.length);let oe=this[k+--O],pe=1;for(;O>0&&(pe*=256);)oe+=this[k+--O]*pe;return oe},u.prototype.readUint8=u.prototype.readUInt8=function(k,O){return k=k>>>0,O||J(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,O){return k=k>>>0,O||J(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,O){return k=k>>>0,O||J(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,O){return k=k>>>0,O||J(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,O){return k=k>>>0,O||J(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=ke(function(k){k=k>>>0,le(k,"offset");const O=this[k],K=this[k+7];(O===void 0||K===void 0)&&G(k,this.length-8);const oe=O+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,pe=this[++k]+this[++k]*2**8+this[++k]*2**16+K*2**24;return BigInt(oe)+(BigInt(pe)<<BigInt(32))}),u.prototype.readBigUInt64BE=ke(function(k){k=k>>>0,le(k,"offset");const O=this[k],K=this[k+7];(O===void 0||K===void 0)&&G(k,this.length-8);const oe=O*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],pe=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+K;return(BigInt(oe)<<BigInt(32))+BigInt(pe)}),u.prototype.readIntLE=function(k,O,K){k=k>>>0,O=O>>>0,K||J(k,O,this.length);let oe=this[k],pe=1,ye=0;for(;++ye<O&&(pe*=256);)oe+=this[k+ye]*pe;return pe*=128,oe>=pe&&(oe-=Math.pow(2,8*O)),oe},u.prototype.readIntBE=function(k,O,K){k=k>>>0,O=O>>>0,K||J(k,O,this.length);let oe=O,pe=1,ye=this[k+--oe];for(;oe>0&&(pe*=256);)ye+=this[k+--oe]*pe;return pe*=128,ye>=pe&&(ye-=Math.pow(2,8*O)),ye},u.prototype.readInt8=function(k,O){return k=k>>>0,O||J(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,O){k=k>>>0,O||J(k,2,this.length);const K=this[k]|this[k+1]<<8;return K&32768?K|4294901760:K},u.prototype.readInt16BE=function(k,O){k=k>>>0,O||J(k,2,this.length);const K=this[k+1]|this[k]<<8;return K&32768?K|4294901760:K},u.prototype.readInt32LE=function(k,O){return k=k>>>0,O||J(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,O){return k=k>>>0,O||J(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=ke(function(k){k=k>>>0,le(k,"offset");const O=this[k],K=this[k+7];(O===void 0||K===void 0)&&G(k,this.length-8);const oe=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(K<<24);return(BigInt(oe)<<BigInt(32))+BigInt(O+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=ke(function(k){k=k>>>0,le(k,"offset");const O=this[k],K=this[k+7];(O===void 0||K===void 0)&&G(k,this.length-8);const oe=(O<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(oe)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+K)}),u.prototype.readFloatLE=function(k,O){return k=k>>>0,O||J(k,4,this.length),n.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,O){return k=k>>>0,O||J(k,4,this.length),n.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,O){return k=k>>>0,O||J(k,8,this.length),n.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,O){return k=k>>>0,O||J(k,8,this.length),n.read(this,k,!1,52,8)};function te(z,k,O,K,oe,pe){if(!u.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>oe||k<pe)throw new RangeError('"value" argument is out of bounds');if(O+K>z.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,O,K,oe){if(k=+k,O=O>>>0,K=K>>>0,!oe){const Ve=Math.pow(2,8*K)-1;te(this,k,O,K,Ve,0)}let pe=1,ye=0;for(this[O]=k&255;++ye<K&&(pe*=256);)this[O+ye]=k/pe&255;return O+K},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,O,K,oe){if(k=+k,O=O>>>0,K=K>>>0,!oe){const Ve=Math.pow(2,8*K)-1;te(this,k,O,K,Ve,0)}let pe=K-1,ye=1;for(this[O+pe]=k&255;--pe>=0&&(ye*=256);)this[O+pe]=k/ye&255;return O+K},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,1,255,0),this[O]=k&255,O+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,2,65535,0),this[O]=k&255,this[O+1]=k>>>8,O+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,2,65535,0),this[O]=k>>>8,this[O+1]=k&255,O+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,4,4294967295,0),this[O+3]=k>>>24,this[O+2]=k>>>16,this[O+1]=k>>>8,this[O]=k&255,O+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,4,4294967295,0),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=k&255,O+4};function fe(z,k,O,K,oe){se(k,K,oe,z,O,7);let pe=Number(k&BigInt(4294967295));z[O++]=pe,pe=pe>>8,z[O++]=pe,pe=pe>>8,z[O++]=pe,pe=pe>>8,z[O++]=pe;let ye=Number(k>>BigInt(32)&BigInt(4294967295));return z[O++]=ye,ye=ye>>8,z[O++]=ye,ye=ye>>8,z[O++]=ye,ye=ye>>8,z[O++]=ye,O}function Z(z,k,O,K,oe){se(k,K,oe,z,O,7);let pe=Number(k&BigInt(4294967295));z[O+7]=pe,pe=pe>>8,z[O+6]=pe,pe=pe>>8,z[O+5]=pe,pe=pe>>8,z[O+4]=pe;let ye=Number(k>>BigInt(32)&BigInt(4294967295));return z[O+3]=ye,ye=ye>>8,z[O+2]=ye,ye=ye>>8,z[O+1]=ye,ye=ye>>8,z[O]=ye,O+8}u.prototype.writeBigUInt64LE=ke(function(k,O=0){return fe(this,k,O,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ke(function(k,O=0){return Z(this,k,O,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,O,K,oe){if(k=+k,O=O>>>0,!oe){const et=Math.pow(2,8*K-1);te(this,k,O,K,et-1,-et)}let pe=0,ye=1,Ve=0;for(this[O]=k&255;++pe<K&&(ye*=256);)k<0&&Ve===0&&this[O+pe-1]!==0&&(Ve=1),this[O+pe]=(k/ye>>0)-Ve&255;return O+K},u.prototype.writeIntBE=function(k,O,K,oe){if(k=+k,O=O>>>0,!oe){const et=Math.pow(2,8*K-1);te(this,k,O,K,et-1,-et)}let pe=K-1,ye=1,Ve=0;for(this[O+pe]=k&255;--pe>=0&&(ye*=256);)k<0&&Ve===0&&this[O+pe+1]!==0&&(Ve=1),this[O+pe]=(k/ye>>0)-Ve&255;return O+K},u.prototype.writeInt8=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,1,127,-128),k<0&&(k=255+k+1),this[O]=k&255,O+1},u.prototype.writeInt16LE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,2,32767,-32768),this[O]=k&255,this[O+1]=k>>>8,O+2},u.prototype.writeInt16BE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,2,32767,-32768),this[O]=k>>>8,this[O+1]=k&255,O+2},u.prototype.writeInt32LE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,4,2147483647,-2147483648),this[O]=k&255,this[O+1]=k>>>8,this[O+2]=k>>>16,this[O+3]=k>>>24,O+4},u.prototype.writeInt32BE=function(k,O,K){return k=+k,O=O>>>0,K||te(this,k,O,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[O]=k>>>24,this[O+1]=k>>>16,this[O+2]=k>>>8,this[O+3]=k&255,O+4},u.prototype.writeBigInt64LE=ke(function(k,O=0){return fe(this,k,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ke(function(k,O=0){return Z(this,k,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function V(z,k,O,K,oe,pe){if(O+K>z.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ue(z,k,O,K,oe){return k=+k,O=O>>>0,oe||V(z,k,O,4),n.write(z,k,O,K,23,4),O+4}u.prototype.writeFloatLE=function(k,O,K){return ue(this,k,O,!0,K)},u.prototype.writeFloatBE=function(k,O,K){return ue(this,k,O,!1,K)};function ge(z,k,O,K,oe){return k=+k,O=O>>>0,oe||V(z,k,O,8),n.write(z,k,O,K,52,8),O+8}u.prototype.writeDoubleLE=function(k,O,K){return ge(this,k,O,!0,K)},u.prototype.writeDoubleBE=function(k,O,K){return ge(this,k,O,!1,K)},u.prototype.copy=function(k,O,K,oe){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(K||(K=0),!oe&&oe!==0&&(oe=this.length),O>=k.length&&(O=k.length),O||(O=0),oe>0&&oe<K&&(oe=K),oe===K||k.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),k.length-O<oe-K&&(oe=k.length-O+K);const pe=oe-K;return this===k&&typeof s.prototype.copyWithin=="function"?this.copyWithin(O,K,oe):s.prototype.set.call(k,this.subarray(K,oe),O),pe},u.prototype.fill=function(k,O,K,oe){if(typeof k=="string"){if(typeof O=="string"?(oe=O,O=0,K=this.length):typeof K=="string"&&(oe=K,K=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!u.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(k.length===1){const ye=k.charCodeAt(0);(oe==="utf8"&&ye<128||oe==="latin1")&&(k=ye)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(O<0||this.length<O||this.length<K)throw new RangeError("Out of range index");if(K<=O)return this;O=O>>>0,K=K===void 0?this.length:K>>>0,k||(k=0);let pe;if(typeof k=="number")for(pe=O;pe<K;++pe)this[pe]=k;else{const ye=u.isBuffer(k)?k:u.from(k,oe),Ve=ye.length;if(Ve===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(pe=0;pe<K-O;++pe)this[pe+O]=ye[pe%Ve]}return this};const Ee={};function me(z,k,O){Ee[z]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:oe,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(z,k){return`The "${z}" argument must be of type number. Received type ${typeof k}`},TypeError),me("ERR_OUT_OF_RANGE",function(z,k,O){let K=`The value of "${z}" is out of range.`,oe=O;return Number.isInteger(O)&&Math.abs(O)>2**32?oe=we(String(O)):typeof O=="bigint"&&(oe=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(oe=we(oe)),oe+="n"),K+=` It must be ${k}. Received ${oe}`,K},RangeError);function we(z){let k="",O=z.length;const K=z[0]==="-"?1:0;for(;O>=K+4;O-=3)k=`_${z.slice(O-3,O)}${k}`;return`${z.slice(0,O)}${k}`}function M(z,k,O){le(k,"offset"),(z[k]===void 0||z[k+O]===void 0)&&G(k,z.length-(O+1))}function se(z,k,O,K,oe,pe){if(z>O||z<k){const ye=typeof k=="bigint"?"n":"";let Ve;throw k===0||k===BigInt(0)?Ve=`>= 0${ye} and < 2${ye} ** ${(pe+1)*8}${ye}`:Ve=`>= -(2${ye} ** ${(pe+1)*8-1}${ye}) and < 2 ** ${(pe+1)*8-1}${ye}`,new Ee.ERR_OUT_OF_RANGE("value",Ve,z)}M(K,oe,pe)}function le(z,k){if(typeof z!="number")throw new Ee.ERR_INVALID_ARG_TYPE(k,"number",z)}function G(z,k,O){throw Math.floor(z)!==z?(le(z,O),new Ee.ERR_OUT_OF_RANGE("offset","an integer",z)):k<0?new Ee.ERR_BUFFER_OUT_OF_BOUNDS:new Ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,z)}const q=/[^+/0-9A-Za-z-_]/g;function re(z){if(z=z.split("=")[0],z=z.trim().replace(q,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function _e(z,k){k=k||1/0;let O;const K=z.length;let oe=null;const pe=[];for(let ye=0;ye<K;++ye){if(O=z.charCodeAt(ye),O>55295&&O<57344){if(!oe){if(O>56319){(k-=3)>-1&&pe.push(239,191,189);continue}else if(ye+1===K){(k-=3)>-1&&pe.push(239,191,189);continue}oe=O;continue}if(O<56320){(k-=3)>-1&&pe.push(239,191,189),oe=O;continue}O=(oe-55296<<10|O-56320)+65536}else oe&&(k-=3)>-1&&pe.push(239,191,189);if(oe=null,O<128){if((k-=1)<0)break;pe.push(O)}else if(O<2048){if((k-=2)<0)break;pe.push(O>>6|192,O&63|128)}else if(O<65536){if((k-=3)<0)break;pe.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((k-=4)<0)break;pe.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return pe}function ve(z){const k=[];for(let O=0;O<z.length;++O)k.push(z.charCodeAt(O)&255);return k}function he(z,k){let O,K,oe;const pe=[];for(let ye=0;ye<z.length&&!((k-=2)<0);++ye)O=z.charCodeAt(ye),K=O>>8,oe=O%256,pe.push(oe),pe.push(K);return pe}function xe(z){return e.toByteArray(re(z))}function Re(z,k,O,K){let oe;for(oe=0;oe<K&&!(oe+O>=k.length||oe>=z.length);++oe)k[oe+O]=z[oe];return oe}function Te(z,k){return z instanceof k||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===k.name}function ce(z){return z!==z}const Ce=function(){const z="0123456789abcdef",k=new Array(256);for(let O=0;O<16;++O){const K=O*16;for(let oe=0;oe<16;++oe)k[K+oe]=z[O]+z[oe]}return k}();function ke(z){return typeof BigInt>"u"?Be:z}function Be(){throw new Error("BigInt not supported")}})(A_);const tn=A_.Buffer,b5=A_.Buffer,y5="https://stackblitz.com",v5=new Error;v5.stack="";function E5(){let t,e;function n(){e=new Promise(r=>t=r)}return n(),{get promise(){return e},resolve(r){return t(r)},reset:n}}let du;const w5={initialized:!1,forwardAuth:!0,redirectUri:"",authComplete:E5(),clientId:"",oauthScope:"",broadcastChannel:null,get editorOrigin(){return du==null&&(du=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??y5).origin),du},set editorOrigin(t){du=t},tokens:null,cleanup:[]};function Ux(t){const e={d:{}};for(const n of Object.keys(t)){const r=t[n];if("file"in r){const s=r.file.contents,o=typeof s=="string"?s:S5(s),a=typeof s=="string"?{}:{b:!0};e.d[n]={f:{c:o,...a}};continue}const i=Ux(r.directory);e.d[n]=i}return e}function S5(t){let e="";for(const n of t)e+=String.fromCharCode(n);return e}var fl;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(fl||(fl={}));var T5=Object.defineProperty,C5=(t,e)=>{for(var n in e)T5(t,n,{get:e[n],enumerable:!0})},Zn={};C5(Zn,{createEndpoint:()=>jx,expose:()=>D_,proxy:()=>Kx,proxyMarker:()=>R_,releaseProxy:()=>zx,transfer:()=>qx,transferHandlers:()=>P_,windowEndpoint:()=>P5,wrap:()=>Gx});var R_=Symbol("Comlink.proxy"),jx=Symbol("Comlink.endpoint"),zx=Symbol("Comlink.releaseProxy"),Wm=Symbol("Comlink.thrown"),Vx=t=>typeof t=="object"&&t!==null||typeof t=="function",x5={canHandle:t=>Vx(t)&&t[R_],serialize(t){const{port1:e,port2:n}=new MessageChannel;return D_(t,e),[n,[n]]},deserialize(t){return t.start(),Gx(t)}},A5={canHandle:t=>Vx(t)&&Wm in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},P_=new Map([["proxy",x5],["throw",A5]]);function D_(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:i,type:s,path:o}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(ys);let l;try{const c=o.slice(0,-1).reduce((h,d)=>h[d],t),u=o.reduce((h,d)=>h[d],t);switch(s){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=ys(r.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const h=new u(...a);l=Kx(h)}break;case 4:{const{port1:h,port2:d}=new MessageChannel;D_(t,d),l=qx(h,[h])}break;case 5:l=void 0;break}}catch(c){l={value:c,[Wm]:0}}Promise.resolve(l).catch(c=>({value:c,[Wm]:0})).then(c=>{const[u,h]=O_(c);e.postMessage(Object.assign(Object.assign({},u),{id:i}),h),s===5&&(e.removeEventListener("message",n),Wx(e))})}),e.start&&e.start()}function k5(t){return t.constructor.name==="MessagePort"}function Wx(t){k5(t)&&t.close()}function Gx(t,e){return Gm(t,[],e)}function fu(t){if(t)throw new Error("Proxy has been released and is not useable")}function Gm(t,e=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(s,o){if(fu(r),o===zx)return()=>fo(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{Wx(t),r=!0});if(o==="then"){if(e.length===0)return{then:()=>i};const a=fo(t,{type:0,path:e.map(l=>l.toString())}).then(ys);return a.then.bind(a)}return Gm(t,[...e,o])},set(s,o,a){fu(r);const[l,c]=O_(a);return fo(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(ys)},apply(s,o,a){fu(r);const l=e[e.length-1];if(l===jx)return fo(t,{type:4}).then(ys);if(l==="bind")return Gm(t,e.slice(0,-1));const[c,u]=Vy(a);return fo(t,{type:2,path:e.map(h=>h.toString()),argumentList:c},u).then(ys)},construct(s,o){fu(r);const[a,l]=Vy(o);return fo(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(ys)}});return i}function R5(t){return Array.prototype.concat.apply([],t)}function Vy(t){const e=t.map(O_);return[e.map(n=>n[0]),R5(e.map(n=>n[1]))]}var $x=new WeakMap;function qx(t,e){return $x.set(t,e),t}function Kx(t){return Object.assign(t,{[R_]:!0})}function P5(t,e=self,n="*"){return{postMessage:(r,i)=>t.postMessage(r,n,i),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function O_(t){for(const[e,n]of P_)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:3,name:e,value:r},i]}return[{type:0,value:t},$x.get(t)||[]]}function ys(t){switch(t.type){case 3:return P_.get(t.name).deserialize(t.value);case 0:return t.value}}function fo(t,e,n){return new Promise(r=>{const i=D5();t.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(t.removeEventListener("message",s),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:i},e),n)})}function D5(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const O5=[fl.ConsoleError,fl.UncaughtException,fl.UnhandledRejection];function I5(t){return!(t==null||typeof t!="object"||!("type"in t)||!O5.includes(t.type))}let pu=null,mu=null,up={};const L5=new TextDecoder,M5=new TextEncoder;class Ts{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,n,r){this._instance=e,this._runtimeInfo=r,this.fs=new z5(n),this.internal=new N5(e)}async spawn(e,n,r){let i=[];Array.isArray(n)?i=n:r=n;let s,o=new ReadableStream;if(r?.output!==!1){const g=dp();s=g.push,o=g.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,r?.stdout){const g=dp();a=g.push,l=g.stream}if(r?.stderr){const g=dp();c=g.push,u=g.stream}const h=uh(hp(s)),d=uh(hp(a)),f=uh(hp(c)),_=await this._instance.run({command:e,args:i,cwd:r?.cwd,env:r?.env,terminal:r?.terminal},d,f,h);return new j5(_,o,l,u)}on(e,n){if(e==="preview-message"){const s=n;n=o=>{I5(o)&&s(o)}}const{listener:r,subscribe:i}=$m(n);return i(this._instance.on(e,Zn.proxy(r)))}mount(e,n){const r=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):M5.encode(JSON.stringify(Ux(e)));return this._instance.loadFiles(Zn.transfer(r,[r.buffer]),{mountPoints:n?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[Zn.releaseProxy](),Ts._instance===this&&(Ts._instance=null)}static async boot(e={}){const{workdirName:n}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),n?.includes("/")||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;pu;)await pu;if(Ts._instance)throw new Error("Only a single WebContainer instance can be booted");const r=V5(e);pu=r.catch(()=>{});try{const i=await r;return Ts._instance=i,i}finally{pu=null}}}class N5{_instance;constructor(e){this._instance=e}watchPaths(e,n){const{listener:r,subscribe:i}=$m(n);return i(this._instance.watchPaths(e,Zn.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:n,subscribe:r}=$m(e);return r(this._instance.onProcessesRemove(Zn.proxy(n)))}serialize(e,n){return this._instance.serialize(e,n)}}const B5=1,F5=2;class H5{name;_type;constructor(e,n){this.name=e,this._type=n}isFile(){return this._type===B5}isDirectory(){return this._type===F5}}class U5{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,n,r,i){this._apiClient=e,this._path=n,this._options=r,this._listener=i,this._apiClient._watchers.add(this),this._wrappedListener=(s,o)=>{this._listener&&!this._closed&&this._listener(s,o)},this._apiClient._fs.watch(this._path,this._options,uh(this._wrappedListener)).then(s=>{this._watcher=s,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[Zn.releaseProxy]()})}}class j5{output;input;exit;_process;stdout;stderr;constructor(e,n,r,i){this.output=n,this._process=e,this.input=new WritableStream({write:s=>{this._getProcess()?.write(s).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=i}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[Zn.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class z5{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,n){return await this._fs.readFile(e,n)}async rename(e,n){return await this._fs.rename(e,n)}async writeFile(e,n,r){if(n instanceof Uint8Array){const i=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=Zn.transfer(new Uint8Array(i),[i])}await this._fs.writeFile(e,n,r)}async readdir(e,n){const r=await this._fs.readdir(e,n);return G5(r)||$5(r)?r:r.map(s=>new H5(s.name,s["Symbol(type)"]))}async mkdir(e,n){return await this._fs.mkdir(e,n)}watch(e,n,r){return typeof n=="function"&&(r=n,n=null),new U5(this,e,n,r)}_teardown(){this._fs[Zn.releaseProxy]();for(const e of this._watchers)e.close()}}async function V5(t){const{serverPromise:e}=W5(t),r=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),i=await r.fs(),s=await r.runtimeInfo();return new Ts(r,i,s)}function hp(t){if(t!=null)return e=>{e instanceof Uint8Array?t(L5.decode(e)):e==null&&t(null)}}function uh(t){if(t!=null)return Zn.proxy(t)}function W5(t){if(mu!=null)return t.coep!==up.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${up.coep}', new settings will not take effect!`)),{serverPromise:mu};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const n=q5();t.coep&&n.searchParams.set("coep",t.coep),e.src=n.toString();const{origin:r}=n;return up={...t},mu=new Promise(i=>{const s=o=>{if(o.origin!==r)return;const{data:a}=o;if(a.type==="init"){i(Zn.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",s)}),document.body.insertBefore(e,null),{serverPromise:mu}}function G5(t){return typeof t[0]=="string"}function $5(t){return t[0]instanceof Uint8Array}function q5(){const t=new URL(w5.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function dp(){let t=null;return{stream:new ReadableStream({start(r){t=r}}),push:r=>{r!=null?t?.enqueue(r):(t?.close(),t=null)}}}function $m(t){let e=!1,n=()=>{};return{subscribe(i){return i.then(s=>{n=s,e&&n()}),()=>{e=!0,n()}},listener:(...i)=>{e||t(...i)}}}function K5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yx={exports:{}},At=Yx.exports={},Pr,Dr;function qm(){throw new Error("setTimeout has not been defined")}function Km(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Pr=setTimeout:Pr=qm}catch{Pr=qm}try{typeof clearTimeout=="function"?Dr=clearTimeout:Dr=Km}catch{Dr=Km}})();function Xx(t){if(Pr===setTimeout)return setTimeout(t,0);if((Pr===qm||!Pr)&&setTimeout)return Pr=setTimeout,setTimeout(t,0);try{return Pr(t,0)}catch{try{return Pr.call(null,t,0)}catch{return Pr.call(this,t,0)}}}function Y5(t){if(Dr===clearTimeout)return clearTimeout(t);if((Dr===Km||!Dr)&&clearTimeout)return Dr=clearTimeout,clearTimeout(t);try{return Dr(t)}catch{try{return Dr.call(null,t)}catch{return Dr.call(this,t)}}}var si=[],Ho=!1,Cs,hh=-1;function X5(){!Ho||!Cs||(Ho=!1,Cs.length?si=Cs.concat(si):hh=-1,si.length&&Qx())}function Qx(){if(!Ho){var t=Xx(X5);Ho=!0;for(var e=si.length;e;){for(Cs=si,si=[];++hh<e;)Cs&&Cs[hh].run();hh=-1,e=si.length}Cs=null,Ho=!1,Y5(t)}}At.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];si.push(new Jx(t,e)),si.length===1&&!Ho&&Xx(Qx)};function Jx(t,e){this.fun=t,this.array=e}Jx.prototype.run=function(){this.fun.apply(null,this.array)};At.title="browser";At.browser=!0;At.env={};At.argv=[];At.version="";At.versions={};function bi(){}At.on=bi;At.addListener=bi;At.once=bi;At.off=bi;At.removeListener=bi;At.removeAllListeners=bi;At.emit=bi;At.prependListener=bi;At.prependOnceListener=bi;At.listeners=function(t){return[]};At.binding=function(t){throw new Error("process.binding is not supported")};At.cwd=function(){return"/"};At.chdir=function(t){throw new Error("process.chdir is not supported")};At.umask=function(){return 0};var Q5=Yx.exports;const ei=K5(Q5);function Tr(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Wy(t,e){for(var n="",r=0,i=-1,s=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}function J5(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var Uo={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var s;i>=0?s=arguments[i]:(r===void 0&&(r=ei.cwd()),s=r),Tr(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=Wy(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Tr(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Wy(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Tr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Tr(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Uo.normalize(e)},relative:function(e,n){if(Tr(e),Tr(n),e===n||(e=Uo.resolve(e),n=Uo.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,s=i-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,c=s<l?s:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(n.charCodeAt(o+h)===47)return n.slice(o+h+1);if(h===0)return n.slice(o+h)}else s>c&&(e.charCodeAt(r+h)===47?u=h:h===0&&(u=0));break}var d=e.charCodeAt(r+h),f=n.charCodeAt(o+h);if(d!==f)break;d===47&&(u=h)}var _="";for(h=r+u+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+n.slice(o+u):(o+=u,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Tr(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!s){i=o;break}}else s=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Tr(e);var r=0,i=-1,s=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!s){r=o+1;break}}else l===-1&&(s=!1,l=o+1),a>=0&&(c===n.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=l))}return r===i?i=l:i===-1&&(i=e.length),e.slice(r,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){r=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Tr(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){r=a+1;break}continue}i===-1&&(s=!1,i=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||i===-1||o===0||o===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return J5("/",e)},parse:function(e){Tr(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,s;i?(n.root="/",s=1):s=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,h=0;u>=s;--u){if(r=e.charCodeAt(u),r===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?o===-1?o=u:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||l===-1||h===0||h===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&i?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&i?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Uo.posix=Uo;var I_=Uo;function cr(t){throw new Error(`Unreachable: ${t}`)}const us=Wn("ActionRunner");class Z5{#t;#n=Promise.resolve();#e;runnerId=Jn(`${Date.now()}`);actions=Zs({});constructor(e,n){this.#t=e,this.#e=n}addAction(e){const{actionId:n}=e;if(this.actions.get()[n])return;const s=new AbortController;this.actions.setKey(n,{...e.action,status:"pending",executed:!1,abort:()=>{s.abort(),this.#o(n,{status:"aborted"})},abortSignal:s.signal}),this.#n.then(()=>{this.#o(n,{status:"running"})})}async runAction(e,n=!1){const{actionId:r}=e,i=this.actions.get()[r];if(i||cr(`Action ${r} not found`),!i.executed&&!(n&&i.type!=="file"))return this.#o(r,{...i,...e.action,executed:!n}),this.#n=this.#n.then(()=>{this.#r(r,n)}).catch(s=>{console.error("Action failed:",s)})}async#r(e,n=!1){const r=this.actions.get()[e];this.#o(e,{status:"running"});try{switch(r.type){case"shell":{await this.#s(r);break}case"file":{await this.#a(r);break}case"start":{this.#i(r).then(()=>this.#o(e,{status:"complete"})).catch(()=>this.#o(e,{status:"failed",error:"Action failed"})),await new Promise(i=>setTimeout(i,2e3));return}}this.#o(e,{status:n?"running":r.abortSignal.aborted?"aborted":"complete"})}catch(i){throw this.#o(e,{status:"failed",error:"Action failed"}),us.error(`[${r.type}]:Action failed

`,i),i}}async#s(e){e.type!=="shell"&&cr("Expected shell action");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&cr("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content);if(us.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new Error("Failed To Execute Shell Command")}async#i(e){e.type!=="start"&&cr("Expected shell action"),this.#e||cr("Shell terminal not found");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&cr("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content);if(us.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new Error("Failed To Start Application");return r}async#a(e){e.type!=="file"&&cr("Expected file action");const n=await this.#t;let r=I_.dirname(e.filePath);if(r=r.replace(/\/+$/g,""),r!==".")try{await n.fs.mkdir(r,{recursive:!0}),us.debug("Created folder",r)}catch(i){us.error(`Failed to create folder

`,i)}try{await n.fs.writeFile(e.filePath,e.content),us.debug(`File written ${e.filePath}`)}catch(i){us.error(`Failed to write file

`,i)}}#o(e,n){const r=this.actions.get();this.actions.setKey(e,{...r[e],...n})}}var eF={};const Zx="project",Pc=`/home/${Zx}`,Vh="bolt_file_modifications",tF=/^\[Model: (.*?)\]\n\n/,nF=/\[Provider: (.*?)\]\n\n/,rF="claude-3-5-sonnet-latest",Dc=[{name:"Anthropic",staticModels:[{name:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (old)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-haiku-latest",label:"Claude 3.5 Haiku (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-opus-latest",label:"Claude 3 Opus",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-haiku-20240307",label:"Claude 3 Haiku",provider:"Anthropic",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.anthropic.com/settings/keys"},{name:"Ollama",staticModels:[],getDynamicModels:oF,getApiKeyLink:"https://ollama.com/download",labelForGetApiKey:"Download Ollama",icon:"i-ph:cloud-arrow-down"},{name:"OpenAILike",staticModels:[],getDynamicModels:aF},{name:"Cohere",staticModels:[{name:"command-r-plus-08-2024",label:"Command R plus Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-08-2024",label:"Command R Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-plus",label:"Command R plus",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r",label:"Command R",provider:"Cohere",maxTokenAllowed:4096},{name:"command",label:"Command",provider:"Cohere",maxTokenAllowed:4096},{name:"command-nightly",label:"Command Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light",label:"Command Light",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light-nightly",label:"Command Light Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-8b",label:"c4AI Aya Expanse 8b",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-32b",label:"c4AI Aya Expanse 32b",provider:"Cohere",maxTokenAllowed:4096}],getApiKeyLink:"https://dashboard.cohere.com/api-keys"},{name:"OpenRouter",staticModels:[{name:"gpt-4o",label:"GPT-4o",provider:"OpenAI",maxTokenAllowed:8e3},{name:"anthropic/claude-3.5-sonnet",label:"Anthropic: Claude 3.5 Sonnet (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"anthropic/claude-3-haiku",label:"Anthropic: Claude 3 Haiku (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"deepseek/deepseek-coder",label:"Deepseek-Coder V2 236B (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-flash-1.5",label:"Google Gemini Flash 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-pro-1.5",label:"Google Gemini Pro 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"x-ai/grok-beta",label:"xAI Grok Beta (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"mistralai/mistral-nemo",label:"OpenRouter Mistral Nemo (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"qwen/qwen-110b-chat",label:"OpenRouter Qwen 110b Chat (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"cohere/command",label:"Cohere Command (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:4096}],getDynamicModels:lF,getApiKeyLink:"https://openrouter.ai/settings/keys"},{name:"Google",staticModels:[{name:"gemini-1.5-flash-latest",label:"Gemini 1.5 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-002",label:"Gemini 1.5 Flash-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-8b",label:"Gemini 1.5 Flash-8b",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-latest",label:"Gemini 1.5 Pro",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-002",label:"Gemini 1.5 Pro-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-exp-1121",label:"Gemini exp-1121",provider:"Google",maxTokenAllowed:8192}],getApiKeyLink:"https://aistudio.google.com/app/apikey"},{name:"Groq",staticModels:[{name:"llama-3.1-70b-versatile",label:"Llama 3.1 70b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.1-8b-instant",label:"Llama 3.1 8b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-11b-vision-preview",label:"Llama 3.2 11b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-3b-preview",label:"Llama 3.2 3b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-1b-preview",label:"Llama 3.2 1b (Groq)",provider:"Groq",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.groq.com/keys"},{name:"HuggingFace",staticModels:[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-70B-Instruct",label:"Llama-3.1-70B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-405B",label:"Llama-3.1-405B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3}],getApiKeyLink:"https://huggingface.co/settings/tokens"},{name:"OpenAI",staticModels:[{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"OpenAI",maxTokenAllowed:8e3}],getApiKeyLink:"https://platform.openai.com/api-keys"},{name:"xAI",staticModels:[{name:"grok-beta",label:"xAI Grok Beta",provider:"xAI",maxTokenAllowed:8e3}],getApiKeyLink:"https://docs.x.ai/docs/quickstart#creating-an-api-key"},{name:"Deepseek",staticModels:[{name:"deepseek-coder",label:"Deepseek-Coder",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-chat",label:"Deepseek-Chat",provider:"Deepseek",maxTokenAllowed:8e3}],getApiKeyLink:"https://platform.deepseek.com/apiKeys"},{name:"Mistral",staticModels:[{name:"open-mistral-7b",label:"Mistral 7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x7b",label:"Mistral 8x7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x22b",label:"Mistral 8x22B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-codestral-mamba",label:"Codestral Mamba",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mistral-nemo",label:"Mistral Nemo",provider:"Mistral",maxTokenAllowed:8e3},{name:"ministral-8b-latest",label:"Mistral 8B",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-small-latest",label:"Mistral Small",provider:"Mistral",maxTokenAllowed:8e3},{name:"codestral-latest",label:"Codestral",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-large-latest",label:"Mistral Large Latest",provider:"Mistral",maxTokenAllowed:8e3}],getApiKeyLink:"https://console.mistral.ai/api-keys/"},{name:"LMStudio",staticModels:[],getDynamicModels:cF,getApiKeyLink:"https://lmstudio.ai/",labelForGetApiKey:"Get LMStudio",icon:"i-ph:cloud-arrow-down"}],iF=Dc[0],eA=Dc.map(t=>t.staticModels).flat();let Ym=[...eA];const sF=()=>{const t="http://localhost:11434";return typeof window<"u"?t:eF.RUNNING_IN_DOCKER==="true"?t.replace("localhost","host.docker.internal"):t};async function oF(){try{const t=sF();return(await(await fetch(`${t}/api/tags`)).json()).models.map(r=>({name:r.name,label:`${r.name} (${r.details.parameter_size})`,provider:"Ollama",maxTokenAllowed:8e3}))}catch{return[]}}async function aF(){try{const t="";return t?(await(await fetch(`${t}/models`,{headers:{Authorization:"Bearer "}})).json()).data.map(i=>({name:i.id,label:i.id,provider:"OpenAILike"})):[]}catch{return[]}}async function lF(){return(await(await fetch("https://openrouter.ai/api/v1/models",{headers:{"Content-Type":"application/json"}})).json()).data.sort((e,n)=>e.name.localeCompare(n.name)).map(e=>({name:e.id,label:`${e.name} - in:$${(e.pricing.prompt*1e6).toFixed(2)} out:$${(e.pricing.completion*1e6).toFixed(2)} - context ${Math.floor(e.context_length/1e3)}k`,provider:"OpenRouter",maxTokenAllowed:8e3}))}async function cF(){try{return(await(await fetch("http://localhost:1234/v1/models")).json()).data.map(r=>({name:r.id,label:r.id,provider:"LMStudio"}))}catch{return[]}}async function uF(){return Ym=[...(await Promise.all(Dc.filter(t=>!!t.getDynamicModels).map(t=>t.getDynamicModels()))).flat(),...eA],Ym}let vo=new Promise(()=>{});vo=Promise.resolve().then(()=>Ts.boot({workdirName:Zx})).then(t=>t);class hF{#t;selectedFile=Jn();documents=Zs({});currentDocument=B0([this.documents,this.selectedFile],(e,n)=>{if(n)return e[n]});constructor(e){this.#t=e}setDocuments(e){const n=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([r,i])=>{if(i===void 0||i.type==="folder")return;const s=n?.[r];return[r,{value:i.content,filePath:r,scroll:s?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,n){const i=this.documents.get()[e];i&&this.documents.setKey(e,{...i,scroll:n})}updateFile(e,n){const i=this.documents.get()[e];if(!i)return;i.value!==n&&this.documents.setKey(e,{...i,value:n})}}function dh(t,e){if(!t)return null;const n="utf8",r="binary",i=e?.chunkLength??24;let s=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=dh(t,{chunkLength:i,chunkBegin:s});return o===n&&(s=Math.max(0,Math.floor(t.length/2)-i),o=dh(t,{chunkLength:i,chunkBegin:s}),o===n&&(s=Math.max(0,t.length-i),o=dh(t,{chunkLength:i,chunkBegin:s}))),o}else{if(s=dF(t,s),s===-1)return r;const o=fF(t,Math.min(t.length,s+i));if(o>t.length)return r;const a=t.toString(n,s,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return r}return n}}function dF(t,e){if(e===0)return 0;if(!pF(t[e]))return e;let n=e-3;return n>=0&&jo(t[n])||(n=e-2,n>=0&&(jo(t[n])||Wh(t[n])))||(n=e-1,n>=0&&(jo(t[n])||Wh(t[n])||tA(t[n])))?n:-1}function fF(t,e){if(e===t.length)return e;let n=e-3;if(n>=0&&jo(t[n]))return e+1;if(n=e-2,n>=0){if(jo(t[n]))return e+2;if(Wh(t[n]))return e+1}if(n=e-1,n>=0){if(jo(t[n]))return e+3;if(Wh(t[n]))return e+2;if(tA(t[n]))return e+1}return e}function jo(t){return t>>3===30}function Wh(t){return t>>4===14}function tA(t){return t>>5===6}function pF(t){return t>>6===2}function mF(t,e){let n,r=[],i=Promise.resolve();const s=()=>{n=self.setTimeout(async()=>{await i,r.length>0&&(i=Promise.resolve(e(r))),n=void 0,r=[]},t)};return(...o)=>{r.push(o),n||s()}}function is(){}is.prototype={diff:function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;var o=this;function a(v){return s?(setTimeout(function(){s(void 0,v)},0),!0):v}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,h=l+c;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));var d=(r=i.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+d,_=[{oldPos:-1,lastComponent:void 0}],g=this.extractCommon(_[0],n,e,0);if(_[0].oldPos+1>=c&&g+1>=l)return a([{value:this.join(n),count:n.length}]);var m=-1/0,p=1/0;function b(){for(var v=Math.max(m,-u);v<=Math.min(p,u);v+=2){var E=void 0,w=_[v-1],T=_[v+1];w&&(_[v-1]=void 0);var S=!1;if(T){var x=T.oldPos-v;S=T&&0<=x&&x<l}var R=w&&w.oldPos+1<c;if(!S&&!R){_[v]=void 0;continue}if(!R||S&&w.oldPos+1<T.oldPos?E=o.addToPath(T,!0,void 0,0):E=o.addToPath(w,void 0,!0,1),g=o.extractCommon(E,n,e,v),E.oldPos+1>=c&&g+1>=l)return a(gF(o,E.lastComponent,n,e,o.useLongestToken));_[v]=E,E.oldPos+1>=c&&(p=Math.min(p,v-1)),g+1>=l&&(m=Math.max(m,v+1))}u++}if(s)(function v(){setTimeout(function(){if(u>h||Date.now()>f)return s();b()||v()},0)})();else for(;u<=h&&Date.now()<=f;){var y=b();if(y)return y}},addToPath:function(e,n,r,i){var s=e.lastComponent;return s&&s.added===n&&s.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:s.count+1,added:n,removed:r,previousComponent:s.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:s}}},extractCommon:function(e,n,r,i){for(var s=n.length,o=r.length,a=e.oldPos,l=a-i,c=0;l+1<s&&a+1<o&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function gF(t,e,n,r,i){for(var s=[],o;e;)s.push(e),o=e.previousComponent,delete e.previousComponent,e=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var h=s[a];if(h.removed){if(h.value=t.join(r.slice(u,u+h.count)),u+=h.count,a&&s[a-1].added){var f=s[a-1];s[a-1]=s[a],s[a]=f}}else{if(!h.added&&i){var d=n.slice(c,c+h.count);d=d.map(function(g,m){var p=r[u+m];return p.length>g.length?p:g}),h.value=t.join(d)}else h.value=t.join(n.slice(c,c+h.count));c+=h.count,h.added||(u+=h.count)}}var _=s[l-1];return l>1&&typeof _.value=="string"&&(_.added||_.removed)&&t.equals("",_.value)&&(s[l-2].value+=_.value,s.pop()),s}var Gy=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,$y=/\S/,nA=new is;nA.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!$y.test(t)&&!$y.test(e)};nA.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Gy.test(e[n])&&Gy.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var L_=new is;L_.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function _F(t,e,n){return L_.diff(t,e,n)}var bF=new is;bF.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var yF=new is;yF.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function fh(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fh=function(e){return typeof e}:fh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function fp(t){return vF(t)||EF(t)||wF(t)||SF()}function vF(t){if(Array.isArray(t))return Xm(t)}function EF(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function wF(t,e){if(t){if(typeof t=="string")return Xm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xm(t,e)}}function Xm(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var TF=Object.prototype.toString,Nl=new is;Nl.useLongestToken=!0;Nl.tokenize=L_.tokenize;Nl.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(s,o){return typeof o>"u"?n:o}:r;return typeof t=="string"?t:JSON.stringify(Qm(t,null,null,i),i,"  ")};Nl.equals=function(t,e){return is.prototype.equals.call(Nl,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Qm(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var s;for(s=0;s<e.length;s+=1)if(e[s]===t)return n[s];var o;if(TF.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),n.push(o),s=0;s<t.length;s+=1)o[s]=Qm(t[s],e,n,r,i);return e.pop(),n.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),fh(t)==="object"&&t!==null){e.push(t),o={},n.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),s=0;s<a.length;s+=1)l=a[s],o[l]=Qm(t[l],e,n,r,l);e.pop(),n.pop()}else o=t;return o}var Jm=new is;Jm.tokenize=function(t){return t.slice()};Jm.join=Jm.removeEmpty=function(t){return t};function CF(t,e,n,r,i,s,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=_F(n,r,o);if(!a)return;a.push({value:"",lines:[]});function l(p){return p.map(function(b){return" "+b})}for(var c=[],u=0,h=0,d=[],f=1,_=1,g=function(b){var y=a[b],v=y.lines||y.value.replace(/\n$/,"").split(`
`);if(y.lines=v,y.added||y.removed){var E;if(!u){var w=a[b-1];u=f,h=_,w&&(d=o.context>0?l(w.lines.slice(-o.context)):[],u-=d.length,h-=d.length)}(E=d).push.apply(E,fp(v.map(function(A){return(y.added?"+":"-")+A}))),y.added?_+=v.length:f+=v.length}else{if(u)if(v.length<=o.context*2&&b<a.length-2){var T;(T=d).push.apply(T,fp(l(v)))}else{var S,x=Math.min(v.length,o.context);(S=d).push.apply(S,fp(l(v.slice(0,x))));var R={oldStart:u,oldLines:f-u+x,newStart:h,newLines:_-h+x,lines:d};if(b>=a.length-2&&v.length<=o.context){var U=/\n$/.test(n),P=/\n$/.test(r),B=v.length==0&&d.length>R.oldLines;!U&&B&&n.length>0&&d.splice(R.oldLines,0,"\\ No newline at end of file"),(!U&&!B||!P)&&d.push("\\ No newline at end of file")}c.push(R),u=0,h=0,d=[]}f+=v.length,_+=v.length}},m=0;m<a.length;m++)g(m);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:s,hunks:c}}function rA(t){if(Array.isArray(t))return t.map(rA).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}function xF(t,e,n,r,i,s,o){return rA(CF(t,e,n,r,i,s,o))}const AF=new RegExp(`^<${Vh}>[\\s\\S]*?<\\/${Vh}>\\s+`,"g");function kF(t,e){const n={};let r=!1;for(const[i,s]of e){const o=t[i];if(o?.type!=="file")continue;const a=RF(i,s,o.content);a&&(r=!0,a.length>o.content.length?n[i]={type:"file",content:o.content}:n[i]={type:"diff",content:a})}if(r)return n}function RF(t,e,n){let r=xF(t,t,e,n);const i=`--- ${t}
+++ ${t}
`,s=r.indexOf(i);if(s>=0&&(r=r.slice(s+i.length)),r!=="")return r}const PF=new RegExp(`^${Pc}/`);function pp(t){return t.replace(PF,"")}function DF(t){const e=Object.entries(t);if(e.length===0)return;const n=[`<${Vh}>`];for(const[r,{type:i,content:s}]of e)n.push(`<${i} path=${JSON.stringify(r)}>`,s,`</${i}>`);return n.push(`</${Vh}>`),n.join(`
`)}const qy=Wn("FilesStore"),OF=new TextDecoder("utf8",{fatal:!0});class IF{#t;#n=0;#e=new Map;files=Zs({});get filesCount(){return this.#n}constructor(e){this.#t=e,this.#r()}getFile(e){const n=this.files.get()[e];if(n?.type==="file")return n}getFileModifications(){return kF(this.files.get(),this.#e)}resetFileModifications(){this.#e.clear()}async saveFile(e,n){const r=await this.#t;try{const i=I_.relative(r.workdir,e);if(!i)throw new Error(`EINVAL: invalid file path, write '${i}'`);const s=this.getFile(e)?.content;s||cr("Expected content to be defined"),await r.fs.writeFile(i,n),this.#e.has(e)||this.#e.set(e,s),this.files.setKey(e,{type:"file",content:n,isBinary:!1}),qy.info("File updated")}catch(i){throw qy.error(`Failed to update file content

`,i),i}}async#r(){(await this.#t).internal.watchPaths({include:[`${Pc}/**`],exclude:["**/node_modules",".git"],includeContent:!0},mF(100,this.#s.bind(this)))}#s(e){const n=e.flat(2);for(const{type:r,path:i,buffer:s}of n){const o=i.replace(/\/+$/g,"");switch(r){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{r==="add_file"&&this.#n++;let a="";const l=LF(s);l||(a=this.#i(s)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#n--,this.files.setKey(o,void 0);break}}}}#i(e){if(!e||e.byteLength===0)return"";try{return OF.decode(e)}catch(n){return console.log(n),""}}}function LF(t){return t===void 0?!1:dh(MF(t),{chunkLength:100})==="binary"}function MF(t){const e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return Object.setPrototypeOf(e,b5.prototype),e}class NF{#t=new Map;#n;previews=Jn([]);constructor(e){this.#n=e,this.#e()}async#e(){(await this.#n).on("port",(n,r,i)=>{let s=this.#t.get(n);if(r==="close"&&s){this.#t.delete(n),this.previews.set(this.previews.get().filter(a=>a.port!==n));return}const o=this.previews.get();s||(s={port:n,ready:r==="open",baseUrl:i},this.#t.set(n,s),o.push(s)),s.ready=r==="open",s.baseUrl=i,this.previews.set([...o])})}}function iA(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const n=new Promise((r,i)=>{t=r,e=i});return{resolve:t,reject:e,promise:n}}async function BF(t,e){const n=[],r=await t.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:e.cols??80,rows:e.rows??15}}),i=r.input.getWriter(),s=r.output,o=iA();let a=!1;return s.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&i.write(l)}),await o.promise,r}class FF{#t;#n;#e;#r;#s;executionState=Jn();#i;#a;constructor(){this.#n=new Promise(e=>{this.#t=e})}ready(){return this.#n}async init(e,n){this.#e=e,this.#r=n;const{process:r,output:i}=await this.newBoltShellProcess(e,n);this.#s=r,this.#i=i.getReader(),await this.waitTillOscCode("interactive"),this.#t?.()}get terminal(){return this.#r}get process(){return this.#s}async executeCommand(e,n){if(!this.process||!this.terminal)return;const r=this.executionState.get();this.terminal.input(""),r&&r.executionPrms&&await r.executionPrms,this.terminal.input(n.trim()+`
`);const i=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:i});const s=await i;return this.executionState.set({sessionId:e,active:!1}),s}async newBoltShellProcess(e,n){const r=[],i=await e.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:n.cols??80,rows:n.rows??15}}),s=i.input.getWriter();this.#a=s;const[o,a]=i.output.tee(),l=iA();let c=!1;return a.pipeTo(new WritableStream({write(u){if(!c){const[,h]=u.match(/\x1b\]654;([^\x07]+)\x07/)||[];h==="interactive"&&(c=!0,l.resolve())}n.write(u)}})),n.onData(u=>{c&&s.write(u)}),await l.promise,{process:i,output:o}}async getCurrentExecutionResult(){const{output:e,exitCode:n}=await this.waitTillOscCode("exit");return{output:e,exitCode:n}}async waitTillOscCode(e){let n="",r=0;if(!this.#i)return{output:n,exitCode:r};const i=this.#i;for(;;){const{value:s,done:o}=await i.read();if(o)break;const a=s||"";n+=a;const[,l,,,c]=a.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(l==="exit"&&(r=parseInt(c,10)),l===e)break}return{output:n,exitCode:r}}}function HF(){return new FF}const sA="\x1B[0m",UF={reset:sA,clear:"\x1B[g",red:"\x1B[1;31m"},Ky={red:t=>`${UF.red}${t}${sA}`};class jF{#t;#n=[];#e=HF();showTerminal=Jn(!0);constructor(e){this.#t=e}get boltTerminal(){return this.#e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const n=await this.#t;await this.#e.init(n,e)}catch(n){e.write(Ky.red(`Failed to spawn bolt shell

`)+n.message);return}}async attachTerminal(e){try{const n=await BF(await this.#t,e);this.#n.push({terminal:e,process:n})}catch(n){e.write(Ky.red(`Failed to spawn shell

`)+n.message);return}}onTerminalResize(e,n){for(const{process:r}of this.#n)r.resize({cols:e,rows:n})}}function gu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oA={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var h=typeof gu=="function"&&gu;if(!u&&h)return h(c,!0);if(a)return a(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[c]={exports:{}};r[c][0].call(f.exports,function(_){var g=r[c][1][_];return o(g||_)},f,f.exports,n,r,i,s)}return i[c].exports}for(var a=typeof gu=="function"&&gu,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,h,d,f,_,g,m=[],p=0,b=l.length,y=b,v=s.getTypeOf(l)!=="string";p<l.length;)y=b-p,h=v?(c=l[p++],u=p<b?l[p++]:0,p<b?l[p++]:0):(c=l.charCodeAt(p++),u=p<b?l.charCodeAt(p++):0,p<b?l.charCodeAt(p++):0),d=c>>2,f=(3&c)<<4|u>>4,_=1<y?(15&u)<<2|h>>6:64,g=2<y?63&h:64,m.push(a.charAt(d)+a.charAt(f)+a.charAt(_)+a.charAt(g));return m.join("")},i.decode=function(l){var c,u,h,d,f,_,g=0,m=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var b,y=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&y--,l.charAt(l.length-2)===a.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|y):new Array(0|y);g<l.length;)c=a.indexOf(l.charAt(g++))<<2|(d=a.indexOf(l.charAt(g++)))>>4,u=(15&d)<<4|(f=a.indexOf(l.charAt(g++)))>>2,h=(3&f)<<6|(_=a.indexOf(l.charAt(g++))),b[m++]=c,f!==64&&(b[m++]=u),_!==64&&(b[m++]=h);return b}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,h,d,f,_){this.compressedSize=u,this.uncompressedSize=h,this.crc32=d,this.compression=f,this.compressedContent=_}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,d){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,h,d){var f=o,_=d+h;c^=-1;for(var g=d;g<_;g++)c=c>>>8^f[255&(c^u[g])];return-1^c}(0|l,a,a.length,0):function(c,u,h,d){var f=o,_=d+h;c^=-1;for(var g=d;g<_;g++)c=c>>>8^f[255&(c^u.charCodeAt(g))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},i.compressWorker=function(h){return new u("Deflate",h)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(f,_){var g,m="";for(g=0;g<_;g++)m+=String.fromCharCode(255&f),f>>>=8;return m}function o(f,_,g,m,p,b){var y,v,E=f.file,w=f.compression,T=b!==c.utf8encode,S=a.transformTo("string",b(E.name)),x=a.transformTo("string",c.utf8encode(E.name)),R=E.comment,U=a.transformTo("string",b(R)),P=a.transformTo("string",c.utf8encode(R)),B=x.length!==E.name.length,A=P.length!==R.length,W="",ne="",Q="",ie=E.dir,L=E.date,I={crc32:0,compressedSize:0,uncompressedSize:0};_&&!g||(I.crc32=f.crc32,I.compressedSize=f.compressedSize,I.uncompressedSize=f.uncompressedSize);var j=0;_&&(j|=8),T||!B&&!A||(j|=2048);var H=0,F=0;ie&&(H|=16),p==="UNIX"?(F=798,H|=function(te,fe){var Z=te;return te||(Z=fe?16893:33204),(65535&Z)<<16}(E.unixPermissions,ie)):(F=20,H|=function(te){return 63&(te||0)}(E.dosPermissions)),y=L.getUTCHours(),y<<=6,y|=L.getUTCMinutes(),y<<=5,y|=L.getUTCSeconds()/2,v=L.getUTCFullYear()-1980,v<<=4,v|=L.getUTCMonth()+1,v<<=5,v|=L.getUTCDate(),B&&(ne=s(1,1)+s(u(S),4)+x,W+="up"+s(ne.length,2)+ne),A&&(Q=s(1,1)+s(u(U),4)+P,W+="uc"+s(Q.length,2)+Q);var J="";return J+=`
\0`,J+=s(j,2),J+=w.magic,J+=s(y,2),J+=s(v,2),J+=s(I.crc32,4),J+=s(I.compressedSize,4),J+=s(I.uncompressedSize,4),J+=s(S.length,2),J+=s(W.length,2),{fileRecord:h.LOCAL_FILE_HEADER+J+S+W,dirRecord:h.CENTRAL_FILE_HEADER+s(F,2)+J+s(U.length,2)+"\0\0\0\0"+s(H,4)+s(m,4)+S+W+U}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),h=n("../signature");function d(f,_,g,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(f){var _=f.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(_+100*(g-m-1))/g:100}}))},d.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var _=this.streamFiles&&!f.file.dir;if(_){var g=o(f,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(f){this.accumulate=!1;var _=this.streamFiles&&!f.file.dir,g=o(f,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),_)this.push({data:function(m){return h.DATA_DESCRIPTOR+s(m.crc32,4)+s(m.compressedSize,4)+s(m.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var f=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var g=this.bytesWritten-f,m=function(p,b,y,v,E){var w=a.transformTo("string",E(v));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(b,4)+s(y,4)+s(w.length,2)+w}(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(f){this._sources.push(f);var _=this;return f.on("data",function(g){_.processChunk(g)}),f.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),f.on("error",function(g){_.error(g)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(f){var _=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var g=0;g<_.length;g++)try{_[g].error(f)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,_=0;_<f.length;_++)f[_].lock()},r.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{a.forEach(function(d,f){h++;var _=function(b,y){var v=b||y,E=s[v];if(!E)throw new Error(v+" is not a valid compression method !");return E}(f.options.compression,l.compression),g=f.options.compressionOptions||l.compressionOptions||{},m=f.dir,p=f.date;f._compressWorker(_,g).withStreamInfo("file",{name:d,dir:m,date:p,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function h(d){return new o.Promise(function(f,_){var g=d.decompressed.getContentWorker().pipe(new c);g.on("error",function(m){_(m)}).on("end",function(){g.streamInfo.crc32!==d.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(d,f){var _=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,f.optimizedBinaryString,f.base64).then(function(g){var m=new l(f);return m.load(g),m}).then(function(g){var m=[o.Promise.resolve(g)],p=g.files;if(f.checkCRC32)for(var b=0;b<p.length;b++)m.push(h(p[b]));return o.Promise.all(m)}).then(function(g){for(var m=g.shift(),p=m.files,b=0;b<p.length;b++){var y=p[b],v=y.fileNameStr,E=s.resolve(y.fileNameStr);_.file(E,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:f.createFolders}),y.dir||(_.file(E).unsafeOriginalName=v)}return m.zipComment.length&&(_.comment=m.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(h,d){u.push(h)||u._helper.pause(),c&&c(d)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof tn<"u",newBufferFrom:function(s,o){if(tn.from&&tn.from!==Uint8Array.from)return tn.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new tn(s,o)},allocBuffer:function(s){if(tn.alloc)return tn.alloc(s);var o=new tn(s);return o.fill(0),o},isBuffer:function(s){return tn.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(E,w,T){var S,x=a.getTypeOf(w),R=a.extend(T||{},u);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(E=p(E)),R.createFolders&&(S=m(E))&&b.call(this,S,!0);var U=x==="string"&&R.binary===!1&&R.base64===!1;T&&T.binary!==void 0||(R.binary=!U),(w instanceof h&&w.uncompressedSize===0||R.dir||!w||w.length===0)&&(R.base64=!1,R.binary=!0,w="",R.compression="STORE",x="string");var P=null;P=w instanceof h||w instanceof l?w:_.isNode&&_.isStream(w)?new g(E,w):a.prepareContent(E,w,R.binary,R.optimizedBinaryString,R.base64);var B=new d(E,P,R);this.files[E]=B}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),h=n("./compressedObject"),d=n("./zipObject"),f=n("./generate"),_=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),m=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var w=E.lastIndexOf("/");return 0<w?E.substring(0,w):""},p=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},b=function(E,w){return w=w!==void 0?w:u.createFolders,E=p(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:w}),this.files[E]};function y(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var w,T,S;for(w in this.files)S=this.files[w],(T=w.slice(this.root.length,w.length))&&w.slice(0,this.root.length)===this.root&&E(T,S)},filter:function(E){var w=[];return this.forEach(function(T,S){E(T,S)&&w.push(S)}),w},file:function(E,w,T){if(arguments.length!==1)return E=this.root+E,s.call(this,E,w,T),this;if(y(E)){var S=E;return this.filter(function(R,U){return!U.dir&&S.test(R)})}var x=this.files[this.root+E];return x&&!x.dir?x:null},folder:function(E){if(!E)return this;if(y(E))return this.filter(function(x,R){return R.dir&&E.test(x)});var w=this.root+E,T=b.call(this,w),S=this.clone();return S.root=T.name,S},remove:function(E){E=this.root+E;var w=this.files[E];if(w||(E.slice(-1)!=="/"&&(E+="/"),w=this.files[E]),w&&!w.dir)delete this.files[E];else for(var T=this.filter(function(x,R){return R.name.slice(0,E.length)===E}),S=0;S<T.length;S++)delete this.files[T[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var w,T={};try{if((T=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var S=T.comment||this.comment||"";w=f.generateWorker(this,T,S)}catch(x){(w=new l("error")).error(x)}return new c(w,T.type||"string",T.mimeType)},generateAsync:function(E,w){return this.generateInternalStream(E).accumulate(w)},generateNodeStream:function(E,w){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(w)}};r.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===h)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),h=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&h===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(h){var d=s.getTypeOf(h);return s.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new c(h):o.uint8array?new u(s.transformTo("uint8array",h)):new a(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(_,g){return new u.Promise(function(m,p){var b=[],y=_._internalType,v=_._outputType,E=_._mimeType;_.on("data",function(w,T){b.push(w),g&&g(T)}).on("error",function(w){b=[],p(w)}).on("end",function(){try{var w=function(T,S,x){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",S),x);case"base64":return l.encode(S);default:return s.transformTo(T,S)}}(v,function(T,S){var x,R=0,U=null,P=0;for(x=0;x<S.length;x++)P+=S[x].length;switch(T){case"string":return S.join("");case"array":return Array.prototype.concat.apply([],S);case"uint8array":for(U=new Uint8Array(P),x=0;x<S.length;x++)U.set(S[x],R),R+=S[x].length;return U;case"nodebuffer":return tn.concat(S);default:throw new Error("concat : unsupported type '"+T+"'")}}(y,b),E);m(w)}catch(T){p(T)}b=[]}).resume()})}function f(_,g,m){var p=g;switch(g){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=g,this._mimeType=m,s.checkSupport(p),this._worker=_.pipe(new o(p)),_.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}f.prototype={accumulate:function(_){return d(this,_)},on:function(_,g){var m=this;return _==="data"?this._worker.on(_,function(p){g.call(m,p.data,p.meta)}):this._worker.on(_,function(){s.delay(g,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof tn<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(_){var g,m,p,b,y,v=_.length,E=0;for(b=0;b<v;b++)(64512&(m=_.charCodeAt(b)))==55296&&b+1<v&&(64512&(p=_.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),b++),E+=m<128?1:m<2048?2:m<65536?3:4;for(g=o.uint8array?new Uint8Array(E):new Array(E),b=y=0;y<E;b++)(64512&(m=_.charCodeAt(b)))==55296&&b+1<v&&(64512&(p=_.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),b++),m<128?g[y++]=m:(m<2048?g[y++]=192|m>>>6:(m<65536?g[y++]=224|m>>>12:(g[y++]=240|m>>>18,g[y++]=128|m>>>12&63),g[y++]=128|m>>>6&63),g[y++]=128|63&m);return g}(f)},i.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(_){var g,m,p,b,y=_.length,v=new Array(2*y);for(g=m=0;g<y;)if((p=_[g++])<128)v[m++]=p;else if(4<(b=c[p]))v[m++]=65533,g+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&g<y;)p=p<<6|63&_[g++],b--;1<b?v[m++]=65533:p<65536?v[m++]=p:(p-=65536,v[m++]=55296|p>>10&1023,v[m++]=56320|1023&p)}return v.length!==m&&(v.subarray?v=v.subarray(0,m):v.length=m),s.applyFromCharCode(v)}(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(h,l),h.prototype.processChunk=function(f){var _=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=_;(_=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),_.set(g,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var m=function(b,y){var v;for((y=y||b.length)>b.length&&(y=b.length),v=y-1;0<=v&&(192&b[v])==128;)v--;return v<0||v===0?y:v+c[b[v]]>y?v:y}(_),p=_;m!==_.length&&(o.uint8array?(p=_.subarray(0,m),this.leftOver=_.subarray(m,_.length)):(p=_.slice(0,m),this.leftOver=_.slice(m,_.length))),this.push({data:i.utf8decode(p),meta:f.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,s.inherits(d,l),d.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(g){return g}function u(g,m){for(var p=0;p<g.length;++p)m[p]=255&g.charCodeAt(p);return m}n("setimmediate"),i.newBlob=function(g,m){i.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(g),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,m,p){var b=[],y=0,v=g.length;if(v<=p)return String.fromCharCode.apply(null,g);for(;y<v;)m==="array"||m==="nodebuffer"?b.push(String.fromCharCode.apply(null,g.slice(y,Math.min(y+p,v)))):b.push(String.fromCharCode.apply(null,g.subarray(y,Math.min(y+p,v)))),y+=p;return b.join("")},stringifyByChar:function(g){for(var m="",p=0;p<g.length;p++)m+=String.fromCharCode(g[p]);return m},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(g){var m=65536,p=i.getTypeOf(g),b=!0;if(p==="uint8array"?b=h.applyCanBeUsed.uint8array:p==="nodebuffer"&&(b=h.applyCanBeUsed.nodebuffer),b)for(;1<m;)try{return h.stringifyByChunk(g,p,m)}catch{m=Math.floor(m/2)}return h.stringifyByChar(g)}function f(g,m){for(var p=0;p<g.length;p++)m[p]=g[p];return m}i.applyFromCharCode=d;var _={};_.string={string:c,array:function(g){return u(g,new Array(g.length))},arraybuffer:function(g){return _.string.uint8array(g).buffer},uint8array:function(g){return u(g,new Uint8Array(g.length))},nodebuffer:function(g){return u(g,a.allocBuffer(g.length))}},_.array={string:d,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},_.arraybuffer={string:function(g){return d(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},_.uint8array={string:d,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return a.newBufferFrom(g)}},_.nodebuffer={string:d,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return _.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:c},i.transformTo=function(g,m){if(m=m||"",!g)return m;i.checkSupport(g);var p=i.getTypeOf(m);return _[p][g](m)},i.resolve=function(g){for(var m=g.split("/"),p=[],b=0;b<m.length;b++){var y=m[b];y==="."||y===""&&b!==0&&b!==m.length-1||(y===".."?p.pop():p.push(y))}return p.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var m,p,b="";for(p=0;p<(g||"").length;p++)b+="\\x"+((m=g.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return b},i.delay=function(g,m,p){setImmediate(function(){g.apply(p||null,m||[])})},i.inherits=function(g,m){function p(){}p.prototype=m.prototype,g.prototype=new p},i.extend=function(){var g,m,p={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&p[m]===void 0&&(p[m]=arguments[g][m]);return p},i.prepareContent=function(g,m,p,b,y){return l.Promise.resolve(m).then(function(v){return s.blob&&(v instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(v))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,w){var T=new FileReader;T.onload=function(S){E(S.target.result)},T.onerror=function(S){w(S.target.error)},T.readAsArrayBuffer(v)}):v}).then(function(v){var E=i.getTypeOf(v);return E?(E==="arraybuffer"?v=i.transformTo("uint8array",v):E==="string"&&(y?v=o.decode(v):p&&b!==!0&&(v=function(w){return u(w,s.uint8array?new Uint8Array(w.length):new Array(w.length))}(v))),v):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(h)+")")}},isSignature:function(h,d){var f=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===d;return this.reader.setIndex(f),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",f=o.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,f,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),d=this.reader.readInt(4),f=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var _=d-f;if(0<_)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),h=n("./support");function d(f,_){this.options=f,this.loadOptions=_}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var _,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(m){for(var p in u)if(Object.prototype.hasOwnProperty.call(u,p)&&u[p].magic===m)return u[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var _=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(_),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var _,g,m,p=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<p;)_=f.readInt(2),g=f.readInt(2),m=f.readData(g),this.extraFields[_]={id:_,length:g,value:m};f.setIndex(p)},handleUTF8:function(){var f=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var g=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var _=s(f.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:c.utf8decode(_.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var _=s(f.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:c.utf8decode(_.readData(f.length-5))}return null}},r.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(_,g,m){this.name=_,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(_){var g=null,m="string";try{if(!_)throw new Error("No output type specified.");var p=(m=_.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var b=!this._dataBinary;b&&!p&&(g=g.pipe(new l.Utf8EncodeWorker)),!b&&p&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(y){(g=new u("error")).error(y)}return new o(g,m,"")},async:function(_,g){return this.internalStream(_).accumulate(g)},nodeStream:function(_,g){return this.internalStream(_||"nodebuffer").toNodejsStream(g)},_compressWorker:function(_,g){if(this._data instanceof c&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(m,_,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<h.length;f++)s.prototype[h[f]]=d;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(_),h=s.document.createTextNode("");u.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){_(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(_,0)};else{var d=new s.MessageChannel;d.port1.onmessage=_,o=function(){d.port2.postMessage(0)}}var f=[];function _(){var g,m;a=!0;for(var p=f.length;p;){for(m=f,f=[],g=-1;++g<p;)m[g]();p=f.length}a=!1}r.exports=function(g){f.push(g)!==1||a||o()}}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,p!==o&&g(this,p)}function d(p,b,y){this.promise=p,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function f(p,b,y){s(function(){var v;try{v=b(y)}catch(E){return a.reject(p,E)}v===p?a.reject(p,new TypeError("Cannot resolve promise with itself")):a.resolve(p,v)})}function _(p){var b=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof b=="function")return function(){b.apply(p,arguments)}}function g(p,b){var y=!1;function v(T){y||(y=!0,a.reject(p,T))}function E(T){y||(y=!0,a.resolve(p,T))}var w=m(function(){b(E,v)});w.status==="error"&&v(w.value)}function m(p,b){var y={};try{y.value=p(b),y.status="success"}catch(v){y.status="error",y.value=v}return y}(r.exports=h).prototype.finally=function(p){if(typeof p!="function")return this;var b=this.constructor;return this.then(function(y){return b.resolve(p()).then(function(){return y})},function(y){return b.resolve(p()).then(function(){throw y})})},h.prototype.catch=function(p){return this.then(null,p)},h.prototype.then=function(p,b){if(typeof p!="function"&&this.state===c||typeof b!="function"&&this.state===l)return this;var y=new this.constructor(o);return this.state!==u?f(y,this.state===c?p:b,this.outcome):this.queue.push(new d(y,p,b)),y},d.prototype.callFulfilled=function(p){a.resolve(this.promise,p)},d.prototype.otherCallFulfilled=function(p){f(this.promise,this.onFulfilled,p)},d.prototype.callRejected=function(p){a.reject(this.promise,p)},d.prototype.otherCallRejected=function(p){f(this.promise,this.onRejected,p)},a.resolve=function(p,b){var y=m(_,b);if(y.status==="error")return a.reject(p,y.value);var v=y.value;if(v)g(p,v);else{p.state=c,p.outcome=b;for(var E=-1,w=p.queue.length;++E<w;)p.queue[E].callFulfilled(b)}return p},a.reject=function(p,b){p.state=l,p.outcome=b;for(var y=-1,v=p.queue.length;++y<v;)p.queue[y].callRejected(b);return p},h.resolve=function(p){return p instanceof this?p:a.resolve(new this(o),p)},h.reject=function(p){var b=new this(o);return a.reject(b,p)},h.all=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,v=!1;if(!y)return this.resolve([]);for(var E=new Array(y),w=0,T=-1,S=new this(o);++T<y;)x(p[T],T);return S;function x(R,U){b.resolve(R).then(function(P){E[U]=P,++w!==y||v||(v=!0,a.resolve(S,E))},function(P){v||(v=!0,a.reject(S,P))})}},h.race=function(p){var b=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,v=!1;if(!y)return this.resolve([]);for(var E=-1,w=new this(o);++E<y;)T=p[E],b.resolve(T).then(function(S){v||(v=!0,a.resolve(w,S))},function(S){v||(v=!0,a.reject(w,S))});var T;return w}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,f=0,_=8;function g(p){if(!(this instanceof g))return new g(p);this.options=o.assign({level:d,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},p||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var y=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(y!==h)throw new Error(l[y]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var v;if(v=typeof b.dictionary=="string"?a.string2buf(b.dictionary):u.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(y=s.deflateSetDictionary(this.strm,v))!==h)throw new Error(l[y]);this._dict_set=!0}}function m(p,b){var y=new g(b);if(y.push(p,!0),y.err)throw y.msg||l[y.err];return y.result}g.prototype.push=function(p,b){var y,v,E=this.strm,w=this.options.chunkSize;if(this.ended)return!1;v=b===~~b?b:b===!0?4:0,typeof p=="string"?E.input=a.string2buf(p):u.call(p)==="[object ArrayBuffer]"?E.input=new Uint8Array(p):E.input=p,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(w),E.next_out=0,E.avail_out=w),(y=s.deflate(E,v))!==1&&y!==h)return this.onEnd(y),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||v!==4&&v!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&y!==1);return v===4?(y=s.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===h):v!==2||(this.onEnd(h),!(E.avail_out=0))},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=g,i.deflate=m,i.deflateRaw=function(p,b){return(b=b||{}).raw=!0,m(p,b)},i.gzip=function(p,b){return(b=b||{}).gzip=!0,m(p,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),h=n("./zlib/gzheader"),d=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,m.windowBits);if(p!==l.Z_OK)throw new Error(c[p]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function _(g,m){var p=new f(m);if(p.push(g,!0),p.err)throw p.msg||c[p.err];return p.result}f.prototype.push=function(g,m){var p,b,y,v,E,w,T=this.strm,S=this.options.chunkSize,x=this.options.dictionary,R=!1;if(this.ended)return!1;b=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?T.input=a.binstring2buf(g):d.call(g)==="[object ArrayBuffer]"?T.input=new Uint8Array(g):T.input=g,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(S),T.next_out=0,T.avail_out=S),(p=s.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&x&&(w=typeof x=="string"?a.string2buf(x):d.call(x)==="[object ArrayBuffer]"?new Uint8Array(x):x,p=s.inflateSetDictionary(this.strm,w)),p===l.Z_BUF_ERROR&&R===!0&&(p=l.Z_OK,R=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&p!==l.Z_STREAM_END&&(T.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=a.utf8border(T.output,T.next_out),v=T.next_out-y,E=a.buf2string(T.output,y),T.next_out=v,T.avail_out=S-v,v&&o.arraySet(T.output,T.output,y,v,0),this.onData(E)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(R=!0)}while((0<T.avail_in||T.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=f,i.inflate=_,i.inflateRaw=function(g,m){return(m=m||{}).raw=!0,_(g,m)},i.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,h,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),d);else for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){var c,u,h,d,f,_;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(_=new Uint8Array(h),c=d=0,u=l.length;c<u;c++)f=l[c],_.set(f,d),d+=f.length;return _}},a={arraySet:function(l,c,u,h,d){for(var f=0;f<h;f++)l[d+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,d){if(d<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,d));for(var f="",_=0;_<d;_++)f+=String.fromCharCode(h[_]);return f}l[254]=l[254]=1,i.string2buf=function(h){var d,f,_,g,m,p=h.length,b=0;for(g=0;g<p;g++)(64512&(f=h.charCodeAt(g)))==55296&&g+1<p&&(64512&(_=h.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(_-56320),g++),b+=f<128?1:f<2048?2:f<65536?3:4;for(d=new s.Buf8(b),g=m=0;m<b;g++)(64512&(f=h.charCodeAt(g)))==55296&&g+1<p&&(64512&(_=h.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(_-56320),g++),f<128?d[m++]=f:(f<2048?d[m++]=192|f>>>6:(f<65536?d[m++]=224|f>>>12:(d[m++]=240|f>>>18,d[m++]=128|f>>>12&63),d[m++]=128|f>>>6&63),d[m++]=128|63&f);return d},i.buf2binstring=function(h){return u(h,h.length)},i.binstring2buf=function(h){for(var d=new s.Buf8(h.length),f=0,_=d.length;f<_;f++)d[f]=h.charCodeAt(f);return d},i.buf2string=function(h,d){var f,_,g,m,p=d||h.length,b=new Array(2*p);for(f=_=0;f<p;)if((g=h[f++])<128)b[_++]=g;else if(4<(m=l[g]))b[_++]=65533,f+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&f<p;)g=g<<6|63&h[f++],m--;1<m?b[_++]=65533:g<65536?b[_++]=g:(g-=65536,b[_++]=55296|g>>10&1023,b[_++]=56320|1023&g)}return u(b,_)},i.utf8border=function(h,d){var f;for((d=d||h.length)>h.length&&(d=h.length),f=d-1;0<=f&&(192&h[f])==128;)f--;return f<0||f===0?d:f+l[h[f]]>d?f:d}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=s,h=c+l;o^=-1;for(var d=c;d<h;d++)o=o>>>8^u[255&(o^a[d])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),h=0,d=4,f=0,_=-2,g=-1,m=4,p=2,b=8,y=9,v=286,E=30,w=19,T=2*v+1,S=15,x=3,R=258,U=R+x+1,P=42,B=113,A=1,W=2,ne=3,Q=4;function ie(M,se){return M.msg=u[se],se}function L(M){return(M<<1)-(4<M?9:0)}function I(M){for(var se=M.length;0<=--se;)M[se]=0}function j(M){var se=M.state,le=se.pending;le>M.avail_out&&(le=M.avail_out),le!==0&&(o.arraySet(M.output,se.pending_buf,se.pending_out,le,M.next_out),M.next_out+=le,se.pending_out+=le,M.total_out+=le,M.avail_out-=le,se.pending-=le,se.pending===0&&(se.pending_out=0))}function H(M,se){a._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,se),M.block_start=M.strstart,j(M.strm)}function F(M,se){M.pending_buf[M.pending++]=se}function J(M,se){M.pending_buf[M.pending++]=se>>>8&255,M.pending_buf[M.pending++]=255&se}function te(M,se){var le,G,q=M.max_chain_length,re=M.strstart,_e=M.prev_length,ve=M.nice_match,he=M.strstart>M.w_size-U?M.strstart-(M.w_size-U):0,xe=M.window,Re=M.w_mask,Te=M.prev,ce=M.strstart+R,Ce=xe[re+_e-1],ke=xe[re+_e];M.prev_length>=M.good_match&&(q>>=2),ve>M.lookahead&&(ve=M.lookahead);do if(xe[(le=se)+_e]===ke&&xe[le+_e-1]===Ce&&xe[le]===xe[re]&&xe[++le]===xe[re+1]){re+=2,le++;do;while(xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&xe[++re]===xe[++le]&&re<ce);if(G=R-(ce-re),re=ce-R,_e<G){if(M.match_start=se,ve<=(_e=G))break;Ce=xe[re+_e-1],ke=xe[re+_e]}}while((se=Te[se&Re])>he&&--q!=0);return _e<=M.lookahead?_e:M.lookahead}function fe(M){var se,le,G,q,re,_e,ve,he,xe,Re,Te=M.w_size;do{if(q=M.window_size-M.lookahead-M.strstart,M.strstart>=Te+(Te-U)){for(o.arraySet(M.window,M.window,Te,Te,0),M.match_start-=Te,M.strstart-=Te,M.block_start-=Te,se=le=M.hash_size;G=M.head[--se],M.head[se]=Te<=G?G-Te:0,--le;);for(se=le=Te;G=M.prev[--se],M.prev[se]=Te<=G?G-Te:0,--le;);q+=Te}if(M.strm.avail_in===0)break;if(_e=M.strm,ve=M.window,he=M.strstart+M.lookahead,xe=q,Re=void 0,Re=_e.avail_in,xe<Re&&(Re=xe),le=Re===0?0:(_e.avail_in-=Re,o.arraySet(ve,_e.input,_e.next_in,Re,he),_e.state.wrap===1?_e.adler=l(_e.adler,ve,Re,he):_e.state.wrap===2&&(_e.adler=c(_e.adler,ve,Re,he)),_e.next_in+=Re,_e.total_in+=Re,Re),M.lookahead+=le,M.lookahead+M.insert>=x)for(re=M.strstart-M.insert,M.ins_h=M.window[re],M.ins_h=(M.ins_h<<M.hash_shift^M.window[re+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[re+x-1])&M.hash_mask,M.prev[re&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=re,re++,M.insert--,!(M.lookahead+M.insert<x)););}while(M.lookahead<U&&M.strm.avail_in!==0)}function Z(M,se){for(var le,G;;){if(M.lookahead<U){if(fe(M),M.lookahead<U&&se===h)return A;if(M.lookahead===0)break}if(le=0,M.lookahead>=x&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+x-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),le!==0&&M.strstart-le<=M.w_size-U&&(M.match_length=te(M,le)),M.match_length>=x)if(G=a._tr_tally(M,M.strstart-M.match_start,M.match_length-x),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=x){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+x-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else G=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(G&&(H(M,!1),M.strm.avail_out===0))return A}return M.insert=M.strstart<x-1?M.strstart:x-1,se===d?(H(M,!0),M.strm.avail_out===0?ne:Q):M.last_lit&&(H(M,!1),M.strm.avail_out===0)?A:W}function V(M,se){for(var le,G,q;;){if(M.lookahead<U){if(fe(M),M.lookahead<U&&se===h)return A;if(M.lookahead===0)break}if(le=0,M.lookahead>=x&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+x-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=x-1,le!==0&&M.prev_length<M.max_lazy_match&&M.strstart-le<=M.w_size-U&&(M.match_length=te(M,le),M.match_length<=5&&(M.strategy===1||M.match_length===x&&4096<M.strstart-M.match_start)&&(M.match_length=x-1)),M.prev_length>=x&&M.match_length<=M.prev_length){for(q=M.strstart+M.lookahead-x,G=a._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-x),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=q&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+x-1])&M.hash_mask,le=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=x-1,M.strstart++,G&&(H(M,!1),M.strm.avail_out===0))return A}else if(M.match_available){if((G=a._tr_tally(M,0,M.window[M.strstart-1]))&&H(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return A}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(G=a._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<x-1?M.strstart:x-1,se===d?(H(M,!0),M.strm.avail_out===0?ne:Q):M.last_lit&&(H(M,!1),M.strm.avail_out===0)?A:W}function ue(M,se,le,G,q){this.good_length=M,this.max_lazy=se,this.nice_length=le,this.max_chain=G,this.func=q}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*w+1)),I(this.dyn_ltree),I(this.dyn_dtree),I(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(S+1),this.heap=new o.Buf16(2*v+1),I(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*v+1),I(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ee(M){var se;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=p,(se=M.state).pending=0,se.pending_out=0,se.wrap<0&&(se.wrap=-se.wrap),se.status=se.wrap?P:B,M.adler=se.wrap===2?0:1,se.last_flush=h,a._tr_init(se),f):ie(M,_)}function me(M){var se=Ee(M);return se===f&&function(le){le.window_size=2*le.w_size,I(le.head),le.max_lazy_match=s[le.level].max_lazy,le.good_match=s[le.level].good_length,le.nice_match=s[le.level].nice_length,le.max_chain_length=s[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=x-1,le.match_available=0,le.ins_h=0}(M.state),se}function we(M,se,le,G,q,re){if(!M)return _;var _e=1;if(se===g&&(se=6),G<0?(_e=0,G=-G):15<G&&(_e=2,G-=16),q<1||y<q||le!==b||G<8||15<G||se<0||9<se||re<0||m<re)return ie(M,_);G===8&&(G=9);var ve=new ge;return(M.state=ve).strm=M,ve.wrap=_e,ve.gzhead=null,ve.w_bits=G,ve.w_size=1<<ve.w_bits,ve.w_mask=ve.w_size-1,ve.hash_bits=q+7,ve.hash_size=1<<ve.hash_bits,ve.hash_mask=ve.hash_size-1,ve.hash_shift=~~((ve.hash_bits+x-1)/x),ve.window=new o.Buf8(2*ve.w_size),ve.head=new o.Buf16(ve.hash_size),ve.prev=new o.Buf16(ve.w_size),ve.lit_bufsize=1<<q+6,ve.pending_buf_size=4*ve.lit_bufsize,ve.pending_buf=new o.Buf8(ve.pending_buf_size),ve.d_buf=1*ve.lit_bufsize,ve.l_buf=3*ve.lit_bufsize,ve.level=se,ve.strategy=re,ve.method=le,me(M)}s=[new ue(0,0,0,0,function(M,se){var le=65535;for(le>M.pending_buf_size-5&&(le=M.pending_buf_size-5);;){if(M.lookahead<=1){if(fe(M),M.lookahead===0&&se===h)return A;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var G=M.block_start+le;if((M.strstart===0||M.strstart>=G)&&(M.lookahead=M.strstart-G,M.strstart=G,H(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-U&&(H(M,!1),M.strm.avail_out===0))return A}return M.insert=0,se===d?(H(M,!0),M.strm.avail_out===0?ne:Q):(M.strstart>M.block_start&&(H(M,!1),M.strm.avail_out),A)}),new ue(4,4,8,4,Z),new ue(4,5,16,8,Z),new ue(4,6,32,32,Z),new ue(4,4,16,16,V),new ue(8,16,32,32,V),new ue(8,16,128,128,V),new ue(8,32,128,256,V),new ue(32,128,258,1024,V),new ue(32,258,258,4096,V)],i.deflateInit=function(M,se){return we(M,se,b,15,8,0)},i.deflateInit2=we,i.deflateReset=me,i.deflateResetKeep=Ee,i.deflateSetHeader=function(M,se){return M&&M.state?M.state.wrap!==2?_:(M.state.gzhead=se,f):_},i.deflate=function(M,se){var le,G,q,re;if(!M||!M.state||5<se||se<0)return M?ie(M,_):_;if(G=M.state,!M.output||!M.input&&M.avail_in!==0||G.status===666&&se!==d)return ie(M,M.avail_out===0?-5:_);if(G.strm=M,le=G.last_flush,G.last_flush=se,G.status===P)if(G.wrap===2)M.adler=0,F(G,31),F(G,139),F(G,8),G.gzhead?(F(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),F(G,255&G.gzhead.time),F(G,G.gzhead.time>>8&255),F(G,G.gzhead.time>>16&255),F(G,G.gzhead.time>>24&255),F(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),F(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(F(G,255&G.gzhead.extra.length),F(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(M.adler=c(M.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(F(G,0),F(G,0),F(G,0),F(G,0),F(G,0),F(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),F(G,3),G.status=B);else{var _e=b+(G.w_bits-8<<4)<<8;_e|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(_e|=32),_e+=31-_e%31,G.status=B,J(G,_e),G.strstart!==0&&(J(G,M.adler>>>16),J(G,65535&M.adler)),M.adler=1}if(G.status===69)if(G.gzhead.extra){for(q=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),j(M),q=G.pending,G.pending!==G.pending_buf_size));)F(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){q=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),j(M),q=G.pending,G.pending===G.pending_buf_size)){re=1;break}re=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,F(G,re)}while(re!==0);G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),re===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){q=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),j(M),q=G.pending,G.pending===G.pending_buf_size)){re=1;break}re=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,F(G,re)}while(re!==0);G.gzhead.hcrc&&G.pending>q&&(M.adler=c(M.adler,G.pending_buf,G.pending-q,q)),re===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&j(M),G.pending+2<=G.pending_buf_size&&(F(G,255&M.adler),F(G,M.adler>>8&255),M.adler=0,G.status=B)):G.status=B),G.pending!==0){if(j(M),M.avail_out===0)return G.last_flush=-1,f}else if(M.avail_in===0&&L(se)<=L(le)&&se!==d)return ie(M,-5);if(G.status===666&&M.avail_in!==0)return ie(M,-5);if(M.avail_in!==0||G.lookahead!==0||se!==h&&G.status!==666){var ve=G.strategy===2?function(he,xe){for(var Re;;){if(he.lookahead===0&&(fe(he),he.lookahead===0)){if(xe===h)return A;break}if(he.match_length=0,Re=a._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++,Re&&(H(he,!1),he.strm.avail_out===0))return A}return he.insert=0,xe===d?(H(he,!0),he.strm.avail_out===0?ne:Q):he.last_lit&&(H(he,!1),he.strm.avail_out===0)?A:W}(G,se):G.strategy===3?function(he,xe){for(var Re,Te,ce,Ce,ke=he.window;;){if(he.lookahead<=R){if(fe(he),he.lookahead<=R&&xe===h)return A;if(he.lookahead===0)break}if(he.match_length=0,he.lookahead>=x&&0<he.strstart&&(Te=ke[ce=he.strstart-1])===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]){Ce=he.strstart+R;do;while(Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&Te===ke[++ce]&&ce<Ce);he.match_length=R-(Ce-ce),he.match_length>he.lookahead&&(he.match_length=he.lookahead)}if(he.match_length>=x?(Re=a._tr_tally(he,1,he.match_length-x),he.lookahead-=he.match_length,he.strstart+=he.match_length,he.match_length=0):(Re=a._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++),Re&&(H(he,!1),he.strm.avail_out===0))return A}return he.insert=0,xe===d?(H(he,!0),he.strm.avail_out===0?ne:Q):he.last_lit&&(H(he,!1),he.strm.avail_out===0)?A:W}(G,se):s[G.level].func(G,se);if(ve!==ne&&ve!==Q||(G.status=666),ve===A||ve===ne)return M.avail_out===0&&(G.last_flush=-1),f;if(ve===W&&(se===1?a._tr_align(G):se!==5&&(a._tr_stored_block(G,0,0,!1),se===3&&(I(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),j(M),M.avail_out===0))return G.last_flush=-1,f}return se!==d?f:G.wrap<=0?1:(G.wrap===2?(F(G,255&M.adler),F(G,M.adler>>8&255),F(G,M.adler>>16&255),F(G,M.adler>>24&255),F(G,255&M.total_in),F(G,M.total_in>>8&255),F(G,M.total_in>>16&255),F(G,M.total_in>>24&255)):(J(G,M.adler>>>16),J(G,65535&M.adler)),j(M),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?f:1)},i.deflateEnd=function(M){var se;return M&&M.state?(se=M.state.status)!==P&&se!==69&&se!==73&&se!==91&&se!==103&&se!==B&&se!==666?ie(M,_):(M.state=null,se===B?ie(M,-3):f):_},i.deflateSetDictionary=function(M,se){var le,G,q,re,_e,ve,he,xe,Re=se.length;if(!M||!M.state||(re=(le=M.state).wrap)===2||re===1&&le.status!==P||le.lookahead)return _;for(re===1&&(M.adler=l(M.adler,se,Re,0)),le.wrap=0,Re>=le.w_size&&(re===0&&(I(le.head),le.strstart=0,le.block_start=0,le.insert=0),xe=new o.Buf8(le.w_size),o.arraySet(xe,se,Re-le.w_size,le.w_size,0),se=xe,Re=le.w_size),_e=M.avail_in,ve=M.next_in,he=M.input,M.avail_in=Re,M.next_in=0,M.input=se,fe(le);le.lookahead>=x;){for(G=le.strstart,q=le.lookahead-(x-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[G+x-1])&le.hash_mask,le.prev[G&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=G,G++,--q;);le.strstart=G,le.lookahead=x-1,fe(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=x-1,le.match_available=0,M.next_in=ve,M.input=he,M.avail_in=_e,le.wrap=re,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,h,d,f,_,g,m,p,b,y,v,E,w,T,S,x,R,U,P,B,A,W;a=s.state,l=s.next_in,A=s.input,c=l+(s.avail_in-5),u=s.next_out,W=s.output,h=u-(o-s.avail_out),d=u+(s.avail_out-257),f=a.dmax,_=a.wsize,g=a.whave,m=a.wnext,p=a.window,b=a.hold,y=a.bits,v=a.lencode,E=a.distcode,w=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;e:do{y<15&&(b+=A[l++]<<y,y+=8,b+=A[l++]<<y,y+=8),S=v[b&w];t:for(;;){if(b>>>=x=S>>>24,y-=x,(x=S>>>16&255)===0)W[u++]=65535&S;else{if(!(16&x)){if(!(64&x)){S=v[(65535&S)+(b&(1<<x)-1)];continue t}if(32&x){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}R=65535&S,(x&=15)&&(y<x&&(b+=A[l++]<<y,y+=8),R+=b&(1<<x)-1,b>>>=x,y-=x),y<15&&(b+=A[l++]<<y,y+=8,b+=A[l++]<<y,y+=8),S=E[b&T];n:for(;;){if(b>>>=x=S>>>24,y-=x,!(16&(x=S>>>16&255))){if(!(64&x)){S=E[(65535&S)+(b&(1<<x)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(U=65535&S,y<(x&=15)&&(b+=A[l++]<<y,(y+=8)<x&&(b+=A[l++]<<y,y+=8)),f<(U+=b&(1<<x)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(b>>>=x,y-=x,(x=u-h)<U){if(g<(x=U-x)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(B=p,(P=0)===m){if(P+=_-x,x<R){for(R-=x;W[u++]=p[P++],--x;);P=u-U,B=W}}else if(m<x){if(P+=_+m-x,(x-=m)<R){for(R-=x;W[u++]=p[P++],--x;);if(P=0,m<R){for(R-=x=m;W[u++]=p[P++],--x;);P=u-U,B=W}}}else if(P+=m-x,x<R){for(R-=x;W[u++]=p[P++],--x;);P=u-U,B=W}for(;2<R;)W[u++]=B[P++],W[u++]=B[P++],W[u++]=B[P++],R-=3;R&&(W[u++]=B[P++],1<R&&(W[u++]=B[P++]))}else{for(P=u-U;W[u++]=W[P++],W[u++]=W[P++],W[u++]=W[P++],2<(R-=3););R&&(W[u++]=W[P++],1<R&&(W[u++]=W[P++]))}break}}break}}while(l<c&&u<d);l-=R=y>>3,b&=(1<<(y-=R<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<d?d-u+257:257-(u-d),a.hold=b,a.bits=y}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,h=2,d=0,f=-2,_=1,g=852,m=592;function p(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(P){var B;return P&&P.state?(B=P.state,P.total_in=P.total_out=B.total=0,P.msg="",B.wrap&&(P.adler=1&B.wrap),B.mode=_,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new s.Buf32(g),B.distcode=B.distdyn=new s.Buf32(m),B.sane=1,B.back=-1,d):f}function v(P){var B;return P&&P.state?((B=P.state).wsize=0,B.whave=0,B.wnext=0,y(P)):f}function E(P,B){var A,W;return P&&P.state?(W=P.state,B<0?(A=0,B=-B):(A=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?f:(W.window!==null&&W.wbits!==B&&(W.window=null),W.wrap=A,W.wbits=B,v(P))):f}function w(P,B){var A,W;return P?(W=new b,(P.state=W).window=null,(A=E(P,B))!==d&&(P.state=null),A):f}var T,S,x=!0;function R(P){if(x){var B;for(T=new s.Buf32(512),S=new s.Buf32(32),B=0;B<144;)P.lens[B++]=8;for(;B<256;)P.lens[B++]=9;for(;B<280;)P.lens[B++]=7;for(;B<288;)P.lens[B++]=8;for(c(u,P.lens,0,288,T,0,P.work,{bits:9}),B=0;B<32;)P.lens[B++]=5;c(h,P.lens,0,32,S,0,P.work,{bits:5}),x=!1}P.lencode=T,P.lenbits=9,P.distcode=S,P.distbits=5}function U(P,B,A,W){var ne,Q=P.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new s.Buf8(Q.wsize)),W>=Q.wsize?(s.arraySet(Q.window,B,A-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(W<(ne=Q.wsize-Q.wnext)&&(ne=W),s.arraySet(Q.window,B,A-W,ne,Q.wnext),(W-=ne)?(s.arraySet(Q.window,B,A-W,W,0),Q.wnext=W,Q.whave=Q.wsize):(Q.wnext+=ne,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=ne))),0}i.inflateReset=v,i.inflateReset2=E,i.inflateResetKeep=y,i.inflateInit=function(P){return w(P,15)},i.inflateInit2=w,i.inflate=function(P,B){var A,W,ne,Q,ie,L,I,j,H,F,J,te,fe,Z,V,ue,ge,Ee,me,we,M,se,le,G,q=0,re=new s.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return f;(A=P.state).mode===12&&(A.mode=13),ie=P.next_out,ne=P.output,I=P.avail_out,Q=P.next_in,W=P.input,L=P.avail_in,j=A.hold,H=A.bits,F=L,J=I,se=d;e:for(;;)switch(A.mode){case _:if(A.wrap===0){A.mode=13;break}for(;H<16;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(2&A.wrap&&j===35615){re[A.check=0]=255&j,re[1]=j>>>8&255,A.check=a(A.check,re,2,0),H=j=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&j)<<8)+(j>>8))%31){P.msg="incorrect header check",A.mode=30;break}if((15&j)!=8){P.msg="unknown compression method",A.mode=30;break}if(H-=4,M=8+(15&(j>>>=4)),A.wbits===0)A.wbits=M;else if(M>A.wbits){P.msg="invalid window size",A.mode=30;break}A.dmax=1<<M,P.adler=A.check=1,A.mode=512&j?10:12,H=j=0;break;case 2:for(;H<16;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(A.flags=j,(255&A.flags)!=8){P.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){P.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=j>>8&1),512&A.flags&&(re[0]=255&j,re[1]=j>>>8&255,A.check=a(A.check,re,2,0)),H=j=0,A.mode=3;case 3:for(;H<32;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.head&&(A.head.time=j),512&A.flags&&(re[0]=255&j,re[1]=j>>>8&255,re[2]=j>>>16&255,re[3]=j>>>24&255,A.check=a(A.check,re,4,0)),H=j=0,A.mode=4;case 4:for(;H<16;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.head&&(A.head.xflags=255&j,A.head.os=j>>8),512&A.flags&&(re[0]=255&j,re[1]=j>>>8&255,A.check=a(A.check,re,2,0)),H=j=0,A.mode=5;case 5:if(1024&A.flags){for(;H<16;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.length=j,A.head&&(A.head.extra_len=j),512&A.flags&&(re[0]=255&j,re[1]=j>>>8&255,A.check=a(A.check,re,2,0)),H=j=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(L<(te=A.length)&&(te=L),te&&(A.head&&(M=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),s.arraySet(A.head.extra,W,Q,te,M)),512&A.flags&&(A.check=a(A.check,W,te,Q)),L-=te,Q+=te,A.length-=te),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(L===0)break e;for(te=0;M=W[Q+te++],A.head&&M&&A.length<65536&&(A.head.name+=String.fromCharCode(M)),M&&te<L;);if(512&A.flags&&(A.check=a(A.check,W,te,Q)),L-=te,Q+=te,M)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(L===0)break e;for(te=0;M=W[Q+te++],A.head&&M&&A.length<65536&&(A.head.comment+=String.fromCharCode(M)),M&&te<L;);if(512&A.flags&&(A.check=a(A.check,W,te,Q)),L-=te,Q+=te,M)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;H<16;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(j!==(65535&A.check)){P.msg="header crc mismatch",A.mode=30;break}H=j=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),P.adler=A.check=0,A.mode=12;break;case 10:for(;H<32;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}P.adler=A.check=p(j),H=j=0,A.mode=11;case 11:if(A.havedict===0)return P.next_out=ie,P.avail_out=I,P.next_in=Q,P.avail_in=L,A.hold=j,A.bits=H,2;P.adler=A.check=1,A.mode=12;case 12:if(B===5||B===6)break e;case 13:if(A.last){j>>>=7&H,H-=7&H,A.mode=27;break}for(;H<3;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}switch(A.last=1&j,H-=1,3&(j>>>=1)){case 0:A.mode=14;break;case 1:if(R(A),A.mode=20,B!==6)break;j>>>=2,H-=2;break e;case 2:A.mode=17;break;case 3:P.msg="invalid block type",A.mode=30}j>>>=2,H-=2;break;case 14:for(j>>>=7&H,H-=7&H;H<32;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if((65535&j)!=(j>>>16^65535)){P.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&j,H=j=0,A.mode=15,B===6)break e;case 15:A.mode=16;case 16:if(te=A.length){if(L<te&&(te=L),I<te&&(te=I),te===0)break e;s.arraySet(ne,W,Q,te,ie),L-=te,Q+=te,I-=te,ie+=te,A.length-=te;break}A.mode=12;break;case 17:for(;H<14;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(A.nlen=257+(31&j),j>>>=5,H-=5,A.ndist=1+(31&j),j>>>=5,H-=5,A.ncode=4+(15&j),j>>>=4,H-=4,286<A.nlen||30<A.ndist){P.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;H<3;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.lens[_e[A.have++]]=7&j,j>>>=3,H-=3}for(;A.have<19;)A.lens[_e[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,le={bits:A.lenbits},se=c(0,A.lens,0,19,A.lencode,0,A.work,le),A.lenbits=le.bits,se){P.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;ue=(q=A.lencode[j&(1<<A.lenbits)-1])>>>16&255,ge=65535&q,!((V=q>>>24)<=H);){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(ge<16)j>>>=V,H-=V,A.lens[A.have++]=ge;else{if(ge===16){for(G=V+2;H<G;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(j>>>=V,H-=V,A.have===0){P.msg="invalid bit length repeat",A.mode=30;break}M=A.lens[A.have-1],te=3+(3&j),j>>>=2,H-=2}else if(ge===17){for(G=V+3;H<G;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}H-=V,M=0,te=3+(7&(j>>>=V)),j>>>=3,H-=3}else{for(G=V+7;H<G;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}H-=V,M=0,te=11+(127&(j>>>=V)),j>>>=7,H-=7}if(A.have+te>A.nlen+A.ndist){P.msg="invalid bit length repeat",A.mode=30;break}for(;te--;)A.lens[A.have++]=M}}if(A.mode===30)break;if(A.lens[256]===0){P.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,le={bits:A.lenbits},se=c(u,A.lens,0,A.nlen,A.lencode,0,A.work,le),A.lenbits=le.bits,se){P.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,le={bits:A.distbits},se=c(h,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,le),A.distbits=le.bits,se){P.msg="invalid distances set",A.mode=30;break}if(A.mode=20,B===6)break e;case 20:A.mode=21;case 21:if(6<=L&&258<=I){P.next_out=ie,P.avail_out=I,P.next_in=Q,P.avail_in=L,A.hold=j,A.bits=H,l(P,J),ie=P.next_out,ne=P.output,I=P.avail_out,Q=P.next_in,W=P.input,L=P.avail_in,j=A.hold,H=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;ue=(q=A.lencode[j&(1<<A.lenbits)-1])>>>16&255,ge=65535&q,!((V=q>>>24)<=H);){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(ue&&!(240&ue)){for(Ee=V,me=ue,we=ge;ue=(q=A.lencode[we+((j&(1<<Ee+me)-1)>>Ee)])>>>16&255,ge=65535&q,!(Ee+(V=q>>>24)<=H);){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}j>>>=Ee,H-=Ee,A.back+=Ee}if(j>>>=V,H-=V,A.back+=V,A.length=ge,ue===0){A.mode=26;break}if(32&ue){A.back=-1,A.mode=12;break}if(64&ue){P.msg="invalid literal/length code",A.mode=30;break}A.extra=15&ue,A.mode=22;case 22:if(A.extra){for(G=A.extra;H<G;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.length+=j&(1<<A.extra)-1,j>>>=A.extra,H-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;ue=(q=A.distcode[j&(1<<A.distbits)-1])>>>16&255,ge=65535&q,!((V=q>>>24)<=H);){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(!(240&ue)){for(Ee=V,me=ue,we=ge;ue=(q=A.distcode[we+((j&(1<<Ee+me)-1)>>Ee)])>>>16&255,ge=65535&q,!(Ee+(V=q>>>24)<=H);){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}j>>>=Ee,H-=Ee,A.back+=Ee}if(j>>>=V,H-=V,A.back+=V,64&ue){P.msg="invalid distance code",A.mode=30;break}A.offset=ge,A.extra=15&ue,A.mode=24;case 24:if(A.extra){for(G=A.extra;H<G;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}A.offset+=j&(1<<A.extra)-1,j>>>=A.extra,H-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){P.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(I===0)break e;if(te=J-I,A.offset>te){if((te=A.offset-te)>A.whave&&A.sane){P.msg="invalid distance too far back",A.mode=30;break}fe=te>A.wnext?(te-=A.wnext,A.wsize-te):A.wnext-te,te>A.length&&(te=A.length),Z=A.window}else Z=ne,fe=ie-A.offset,te=A.length;for(I<te&&(te=I),I-=te,A.length-=te;ne[ie++]=Z[fe++],--te;);A.length===0&&(A.mode=21);break;case 26:if(I===0)break e;ne[ie++]=A.length,I--,A.mode=21;break;case 27:if(A.wrap){for(;H<32;){if(L===0)break e;L--,j|=W[Q++]<<H,H+=8}if(J-=I,P.total_out+=J,A.total+=J,J&&(P.adler=A.check=A.flags?a(A.check,ne,J,ie-J):o(A.check,ne,J,ie-J)),J=I,(A.flags?j:p(j))!==A.check){P.msg="incorrect data check",A.mode=30;break}H=j=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;H<32;){if(L===0)break e;L--,j+=W[Q++]<<H,H+=8}if(j!==(4294967295&A.total)){P.msg="incorrect length check",A.mode=30;break}H=j=0}A.mode=29;case 29:se=1;break e;case 30:se=-3;break e;case 31:return-4;case 32:default:return f}return P.next_out=ie,P.avail_out=I,P.next_in=Q,P.avail_in=L,A.hold=j,A.bits=H,(A.wsize||J!==P.avail_out&&A.mode<30&&(A.mode<27||B!==4))&&U(P,P.output,P.next_out,J-P.avail_out)?(A.mode=31,-4):(F-=P.avail_in,J-=P.avail_out,P.total_in+=F,P.total_out+=J,A.total+=J,A.wrap&&J&&(P.adler=A.check=A.flags?a(A.check,ne,J,P.next_out-J):o(A.check,ne,J,P.next_out-J)),P.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(F==0&&J===0||B===4)&&se===d&&(se=-5),se)},i.inflateEnd=function(P){if(!P||!P.state)return f;var B=P.state;return B.window&&(B.window=null),P.state=null,d},i.inflateGetHeader=function(P,B){var A;return P&&P.state&&2&(A=P.state).wrap?((A.head=B).done=!1,d):f},i.inflateSetDictionary=function(P,B){var A,W=B.length;return P&&P.state?(A=P.state).wrap!==0&&A.mode!==11?f:A.mode===11&&o(1,B,W,0)!==A.check?-3:U(P,B,W,W)?(A.mode=31,-4):(A.havedict=1,d):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,h,d,f,_,g,m,p){var b,y,v,E,w,T,S,x,R,U=p.bits,P=0,B=0,A=0,W=0,ne=0,Q=0,ie=0,L=0,I=0,j=0,H=null,F=0,J=new s.Buf16(16),te=new s.Buf16(16),fe=null,Z=0;for(P=0;P<=15;P++)J[P]=0;for(B=0;B<f;B++)J[h[d+B]]++;for(ne=U,W=15;1<=W&&J[W]===0;W--);if(W<ne&&(ne=W),W===0)return _[g++]=20971520,_[g++]=20971520,p.bits=1,0;for(A=1;A<W&&J[A]===0;A++);for(ne<A&&(ne=A),P=L=1;P<=15;P++)if(L<<=1,(L-=J[P])<0)return-1;if(0<L&&(u===0||W!==1))return-1;for(te[1]=0,P=1;P<15;P++)te[P+1]=te[P]+J[P];for(B=0;B<f;B++)h[d+B]!==0&&(m[te[h[d+B]]++]=B);if(T=u===0?(H=fe=m,19):u===1?(H=o,F-=257,fe=a,Z-=257,256):(H=l,fe=c,-1),P=A,w=g,ie=B=j=0,v=-1,E=(I=1<<(Q=ne))-1,u===1&&852<I||u===2&&592<I)return 1;for(;;){for(S=P-ie,R=m[B]<T?(x=0,m[B]):m[B]>T?(x=fe[Z+m[B]],H[F+m[B]]):(x=96,0),b=1<<P-ie,A=y=1<<Q;_[w+(j>>ie)+(y-=b)]=S<<24|x<<16|R|0,y!==0;);for(b=1<<P-1;j&b;)b>>=1;if(b!==0?(j&=b-1,j+=b):j=0,B++,--J[P]==0){if(P===W)break;P=h[d+m[B]]}if(ne<P&&(j&E)!==v){for(ie===0&&(ie=ne),w+=A,L=1<<(Q=P-ie);Q+ie<W&&!((L-=J[Q+ie])<=0);)Q++,L<<=1;if(I+=1<<Q,u===1&&852<I||u===2&&592<I)return 1;_[v=j&E]=ne<<24|Q<<16|w-g|0}}return j!==0&&(_[w+j]=P-ie<<24|64<<16|0),p.bits=ne,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(q){for(var re=q.length;0<=--re;)q[re]=0}var c=0,u=29,h=256,d=h+1+u,f=30,_=19,g=2*d+1,m=15,p=16,b=7,y=256,v=16,E=17,w=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(d+2));l(U);var P=new Array(2*f);l(P);var B=new Array(512);l(B);var A=new Array(256);l(A);var W=new Array(u);l(W);var ne,Q,ie,L=new Array(f);function I(q,re,_e,ve,he){this.static_tree=q,this.extra_bits=re,this.extra_base=_e,this.elems=ve,this.max_length=he,this.has_stree=q&&q.length}function j(q,re){this.dyn_tree=q,this.max_code=0,this.stat_desc=re}function H(q){return q<256?B[q]:B[256+(q>>>7)]}function F(q,re){q.pending_buf[q.pending++]=255&re,q.pending_buf[q.pending++]=re>>>8&255}function J(q,re,_e){q.bi_valid>p-_e?(q.bi_buf|=re<<q.bi_valid&65535,F(q,q.bi_buf),q.bi_buf=re>>p-q.bi_valid,q.bi_valid+=_e-p):(q.bi_buf|=re<<q.bi_valid&65535,q.bi_valid+=_e)}function te(q,re,_e){J(q,_e[2*re],_e[2*re+1])}function fe(q,re){for(var _e=0;_e|=1&q,q>>>=1,_e<<=1,0<--re;);return _e>>>1}function Z(q,re,_e){var ve,he,xe=new Array(m+1),Re=0;for(ve=1;ve<=m;ve++)xe[ve]=Re=Re+_e[ve-1]<<1;for(he=0;he<=re;he++){var Te=q[2*he+1];Te!==0&&(q[2*he]=fe(xe[Te]++,Te))}}function V(q){var re;for(re=0;re<d;re++)q.dyn_ltree[2*re]=0;for(re=0;re<f;re++)q.dyn_dtree[2*re]=0;for(re=0;re<_;re++)q.bl_tree[2*re]=0;q.dyn_ltree[2*y]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function ue(q){8<q.bi_valid?F(q,q.bi_buf):0<q.bi_valid&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function ge(q,re,_e,ve){var he=2*re,xe=2*_e;return q[he]<q[xe]||q[he]===q[xe]&&ve[re]<=ve[_e]}function Ee(q,re,_e){for(var ve=q.heap[_e],he=_e<<1;he<=q.heap_len&&(he<q.heap_len&&ge(re,q.heap[he+1],q.heap[he],q.depth)&&he++,!ge(re,ve,q.heap[he],q.depth));)q.heap[_e]=q.heap[he],_e=he,he<<=1;q.heap[_e]=ve}function me(q,re,_e){var ve,he,xe,Re,Te=0;if(q.last_lit!==0)for(;ve=q.pending_buf[q.d_buf+2*Te]<<8|q.pending_buf[q.d_buf+2*Te+1],he=q.pending_buf[q.l_buf+Te],Te++,ve===0?te(q,he,re):(te(q,(xe=A[he])+h+1,re),(Re=T[xe])!==0&&J(q,he-=W[xe],Re),te(q,xe=H(--ve),_e),(Re=S[xe])!==0&&J(q,ve-=L[xe],Re)),Te<q.last_lit;);te(q,y,re)}function we(q,re){var _e,ve,he,xe=re.dyn_tree,Re=re.stat_desc.static_tree,Te=re.stat_desc.has_stree,ce=re.stat_desc.elems,Ce=-1;for(q.heap_len=0,q.heap_max=g,_e=0;_e<ce;_e++)xe[2*_e]!==0?(q.heap[++q.heap_len]=Ce=_e,q.depth[_e]=0):xe[2*_e+1]=0;for(;q.heap_len<2;)xe[2*(he=q.heap[++q.heap_len]=Ce<2?++Ce:0)]=1,q.depth[he]=0,q.opt_len--,Te&&(q.static_len-=Re[2*he+1]);for(re.max_code=Ce,_e=q.heap_len>>1;1<=_e;_e--)Ee(q,xe,_e);for(he=ce;_e=q.heap[1],q.heap[1]=q.heap[q.heap_len--],Ee(q,xe,1),ve=q.heap[1],q.heap[--q.heap_max]=_e,q.heap[--q.heap_max]=ve,xe[2*he]=xe[2*_e]+xe[2*ve],q.depth[he]=(q.depth[_e]>=q.depth[ve]?q.depth[_e]:q.depth[ve])+1,xe[2*_e+1]=xe[2*ve+1]=he,q.heap[1]=he++,Ee(q,xe,1),2<=q.heap_len;);q.heap[--q.heap_max]=q.heap[1],function(ke,Be){var z,k,O,K,oe,pe,ye=Be.dyn_tree,Ve=Be.max_code,et=Be.stat_desc.static_tree,dt=Be.stat_desc.has_stree,_t=Be.stat_desc.extra_bits,ot=Be.stat_desc.extra_base,Da=Be.stat_desc.max_length,Zc=0;for(K=0;K<=m;K++)ke.bl_count[K]=0;for(ye[2*ke.heap[ke.heap_max]+1]=0,z=ke.heap_max+1;z<g;z++)Da<(K=ye[2*ye[2*(k=ke.heap[z])+1]+1]+1)&&(K=Da,Zc++),ye[2*k+1]=K,Ve<k||(ke.bl_count[K]++,oe=0,ot<=k&&(oe=_t[k-ot]),pe=ye[2*k],ke.opt_len+=pe*(K+oe),dt&&(ke.static_len+=pe*(et[2*k+1]+oe)));if(Zc!==0){do{for(K=Da-1;ke.bl_count[K]===0;)K--;ke.bl_count[K]--,ke.bl_count[K+1]+=2,ke.bl_count[Da]--,Zc-=2}while(0<Zc);for(K=Da;K!==0;K--)for(k=ke.bl_count[K];k!==0;)Ve<(O=ke.heap[--z])||(ye[2*O+1]!==K&&(ke.opt_len+=(K-ye[2*O+1])*ye[2*O],ye[2*O+1]=K),k--)}}(q,re),Z(xe,Ce,q.bl_count)}function M(q,re,_e){var ve,he,xe=-1,Re=re[1],Te=0,ce=7,Ce=4;for(Re===0&&(ce=138,Ce=3),re[2*(_e+1)+1]=65535,ve=0;ve<=_e;ve++)he=Re,Re=re[2*(ve+1)+1],++Te<ce&&he===Re||(Te<Ce?q.bl_tree[2*he]+=Te:he!==0?(he!==xe&&q.bl_tree[2*he]++,q.bl_tree[2*v]++):Te<=10?q.bl_tree[2*E]++:q.bl_tree[2*w]++,xe=he,Ce=(Te=0)===Re?(ce=138,3):he===Re?(ce=6,3):(ce=7,4))}function se(q,re,_e){var ve,he,xe=-1,Re=re[1],Te=0,ce=7,Ce=4;for(Re===0&&(ce=138,Ce=3),ve=0;ve<=_e;ve++)if(he=Re,Re=re[2*(ve+1)+1],!(++Te<ce&&he===Re)){if(Te<Ce)for(;te(q,he,q.bl_tree),--Te!=0;);else he!==0?(he!==xe&&(te(q,he,q.bl_tree),Te--),te(q,v,q.bl_tree),J(q,Te-3,2)):Te<=10?(te(q,E,q.bl_tree),J(q,Te-3,3)):(te(q,w,q.bl_tree),J(q,Te-11,7));xe=he,Ce=(Te=0)===Re?(ce=138,3):he===Re?(ce=6,3):(ce=7,4)}}l(L);var le=!1;function G(q,re,_e,ve){J(q,(c<<1)+(ve?1:0),3),function(he,xe,Re,Te){ue(he),F(he,Re),F(he,~Re),s.arraySet(he.pending_buf,he.window,xe,Re,he.pending),he.pending+=Re}(q,re,_e)}i._tr_init=function(q){le||(function(){var re,_e,ve,he,xe,Re=new Array(m+1);for(he=ve=0;he<u-1;he++)for(W[he]=ve,re=0;re<1<<T[he];re++)A[ve++]=he;for(A[ve-1]=he,he=xe=0;he<16;he++)for(L[he]=xe,re=0;re<1<<S[he];re++)B[xe++]=he;for(xe>>=7;he<f;he++)for(L[he]=xe<<7,re=0;re<1<<S[he]-7;re++)B[256+xe++]=he;for(_e=0;_e<=m;_e++)Re[_e]=0;for(re=0;re<=143;)U[2*re+1]=8,re++,Re[8]++;for(;re<=255;)U[2*re+1]=9,re++,Re[9]++;for(;re<=279;)U[2*re+1]=7,re++,Re[7]++;for(;re<=287;)U[2*re+1]=8,re++,Re[8]++;for(Z(U,d+1,Re),re=0;re<f;re++)P[2*re+1]=5,P[2*re]=fe(re,5);ne=new I(U,T,h+1,d,m),Q=new I(P,S,0,f,m),ie=new I(new Array(0),x,0,_,b)}(),le=!0),q.l_desc=new j(q.dyn_ltree,ne),q.d_desc=new j(q.dyn_dtree,Q),q.bl_desc=new j(q.bl_tree,ie),q.bi_buf=0,q.bi_valid=0,V(q)},i._tr_stored_block=G,i._tr_flush_block=function(q,re,_e,ve){var he,xe,Re=0;0<q.level?(q.strm.data_type===2&&(q.strm.data_type=function(Te){var ce,Ce=4093624447;for(ce=0;ce<=31;ce++,Ce>>>=1)if(1&Ce&&Te.dyn_ltree[2*ce]!==0)return o;if(Te.dyn_ltree[18]!==0||Te.dyn_ltree[20]!==0||Te.dyn_ltree[26]!==0)return a;for(ce=32;ce<h;ce++)if(Te.dyn_ltree[2*ce]!==0)return a;return o}(q)),we(q,q.l_desc),we(q,q.d_desc),Re=function(Te){var ce;for(M(Te,Te.dyn_ltree,Te.l_desc.max_code),M(Te,Te.dyn_dtree,Te.d_desc.max_code),we(Te,Te.bl_desc),ce=_-1;3<=ce&&Te.bl_tree[2*R[ce]+1]===0;ce--);return Te.opt_len+=3*(ce+1)+5+5+4,ce}(q),he=q.opt_len+3+7>>>3,(xe=q.static_len+3+7>>>3)<=he&&(he=xe)):he=xe=_e+5,_e+4<=he&&re!==-1?G(q,re,_e,ve):q.strategy===4||xe===he?(J(q,2+(ve?1:0),3),me(q,U,P)):(J(q,4+(ve?1:0),3),function(Te,ce,Ce,ke){var Be;for(J(Te,ce-257,5),J(Te,Ce-1,5),J(Te,ke-4,4),Be=0;Be<ke;Be++)J(Te,Te.bl_tree[2*R[Be]+1],3);se(Te,Te.dyn_ltree,ce-1),se(Te,Te.dyn_dtree,Ce-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,Re+1),me(q,q.dyn_ltree,q.dyn_dtree)),V(q),ve&&ue(q)},i._tr_tally=function(q,re,_e){return q.pending_buf[q.d_buf+2*q.last_lit]=re>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&re,q.pending_buf[q.l_buf+q.last_lit]=255&_e,q.last_lit++,re===0?q.dyn_ltree[2*_e]++:(q.matches++,re--,q.dyn_ltree[2*(A[_e]+h+1)]++,q.dyn_dtree[2*H(re)]++),q.last_lit===q.lit_bufsize-1},i._tr_align=function(q){J(q,2,3),te(q,y,U),function(re){re.bi_valid===16?(F(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)}(q)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,h,d=1,f={},_=!1,g=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,l={}.toString.call(o.process)==="[object process]"?function(v){ei.nextTick(function(){b(v)})}:function(){if(o.postMessage&&!o.importScripts){var v=!0,E=o.onmessage;return o.onmessage=function(){v=!1},o.postMessage("","*"),o.onmessage=E,v}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",y,!1):o.attachEvent("onmessage",y),function(v){o.postMessage(h+v,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(v){b(v.data)},function(v){u.port2.postMessage(v)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(v){var E=g.createElement("script");E.onreadystatechange=function(){b(v),E.onreadystatechange=null,c.removeChild(E),E=null},c.appendChild(E)}):function(v){setTimeout(b,0,v)},m.setImmediate=function(v){typeof v!="function"&&(v=new Function(""+v));for(var E=new Array(arguments.length-1),w=0;w<E.length;w++)E[w]=arguments[w+1];var T={callback:v,args:E};return f[d]=T,l(d),d++},m.clearImmediate=p}function p(v){delete f[v]}function b(v){if(_)setTimeout(b,0,v);else{var E=f[v];if(E){_=!0;try{(function(w){var T=w.callback,S=w.args;switch(S.length){case 0:T();break;case 1:T(S[0]);break;case 2:T(S[0],S[1]);break;case 3:T(S[0],S[1],S[2]);break;default:T.apply(a,S)}})(E)}finally{p(v),_=!1}}}}function y(v){v.source===o&&typeof v.data=="string"&&v.data.indexOf(h)===0&&b(+v.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof hr<"u"?hr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(oA);var zF=oA.exports;const VF=N0(zF);var aA={exports:{}};(function(t,e){(function(n,r){r()})(hr,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,h){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,u,h)},d.onerror=function(){console.error("could not download file")},d.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof hr=="object"&&hr.global===hr?hr:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,h){var d=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):i(f.href)?r(c,u,h):s(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,h),u);else if(i(c))r(c,u,h);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){s(d)})}}:function(c,u,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,h);var f=c.type==="application/octet-stream",_=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||f&&_||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var y=m.result;y=g?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=y:location=y,d=null},m.readAsDataURL(c)}else{var p=o.URL||o.webkitURL,b=p.createObjectURL(c);d?d.location=b:location.href=b,d=null,setTimeout(function(){p.revokeObjectURL(b)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(aA);var WF=aA.exports;function ef(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof ei=="object"&&ei.version!==void 0?`Node.js/${ei.version.substr(1)} (${ei.platform}; ${ei.arch})`:"<environment undetectable>"}function M_(t,e,n,r){if(typeof n!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>M_.bind(null,t,s,i,r),n)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),n)():n(r))}function GF(t,e,n,r){const i=r;t.registry[n]||(t.registry[n]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(l=>(a=l,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),t.registry[n].push({hook:r,orig:i})}function $F(t,e,n){if(!t.registry[e])return;const r=t.registry[e].map(i=>i.orig).indexOf(n);r!==-1&&t.registry[e].splice(r,1)}const Yy=Function.bind,Xy=Yy.bind(Yy);function lA(t,e,n){const r=Xy($F,null).apply(null,n?[e,n]:[e]);t.api={remove:r},t.remove=r,["before","error","after","wrap"].forEach(i=>{const s=n?[e,i,n]:[e,i];t[i]=t.api[i]=Xy(GF,null).apply(null,s)})}function qF(){const t=Symbol("Singular"),e={registry:{}},n=M_.bind(null,e,t);return lA(n,e,t),n}function KF(){const t={registry:{}},e=M_.bind(null,t);return lA(e,t),e}const YF={Singular:qF,Collection:KF};var XF="0.0.0-development",QF=`octokit-endpoint.js/${XF} ${ef()}`,JF={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":QF},mediaType:{format:""}};function ZF(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function e8(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}function cA(t,e){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{e8(e[r])?r in t?n[r]=cA(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function Qy(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function Zm(t,e,n){if(typeof e=="string"){let[i,s]=e.split(" ");n=Object.assign(s?{method:i,url:s}:{url:i},n)}else n=Object.assign({},e);n.headers=ZF(n.headers),Qy(n),Qy(n.headers);const r=cA(t||{},n);return n.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(r.mediaType.previews=t.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function t8(t,e){const n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var n8=/\{[^}]+\}/g;function r8(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function i8(t){const e=t.match(n8);return e?e.map(r8).reduce((n,r)=>n.concat(r),[]):[]}function Jy(t,e){const n={__proto__:null};for(const r of Object.keys(t))e.indexOf(r)===-1&&(n[r]=t[r]);return n}function uA(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Po(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ia(t,e,n){return e=t==="+"||t==="#"?uA(e):Po(e),n?Po(n)+"="+e:e}function po(t){return t!=null}function mp(t){return t===";"||t==="&"||t==="?"}function s8(t,e,n,r){var i=t[n],s=[];if(po(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Ia(e,i,mp(e)?n:""));else if(r==="*")Array.isArray(i)?i.filter(po).forEach(function(o){s.push(Ia(e,o,mp(e)?n:""))}):Object.keys(i).forEach(function(o){po(i[o])&&s.push(Ia(e,i[o],o))});else{const o=[];Array.isArray(i)?i.filter(po).forEach(function(a){o.push(Ia(e,a))}):Object.keys(i).forEach(function(a){po(i[a])&&(o.push(Po(a)),o.push(Ia(e,i[a].toString())))}),mp(e)?s.push(Po(n)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?po(i)&&s.push(Po(n)):i===""&&(e==="&"||e==="?")?s.push(Po(n)+"="):i===""&&s.push("");return s}function o8(t){return{expand:a8.bind(null,t)}}function a8(t,e){var n=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="";const l=[];if(n.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(s8(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return uA(s)}),t==="/"?t:t.replace(/\/$/,"")}function hA(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),i,s=Jy(t,["method","baseUrl","url","headers","request","mediaType"]);const o=i8(n);n=o8(n).expand(s),/^http/.test(n)||(n=t.baseUrl+n);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=Jy(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),n.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=u.concat(t.mediaType.previews).map(h=>{const d=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${d}`}).join(",")}return["GET","HEAD"].includes(e)?n=t8(n,l):"data"in l?i=l.data:Object.keys(l).length&&(i=l),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:n,headers:r},typeof i<"u"?{body:i}:null,t.request?{request:t.request}:null)}function l8(t,e,n){return hA(Zm(t,e,n))}function dA(t,e){const n=Zm(t,e),r=l8.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:dA.bind(null,n),merge:Zm.bind(null,n),parse:hA})}var c8=dA(null,JF);class _u extends Error{name;status;request;response;constructor(e,n,r){super(e),this.name="HttpError",this.status=Number.parseInt(n),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);const i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}var u8="0.0.0-development",h8={headers:{"user-agent":`octokit-request.js/${u8} ${ef()}`}};function d8(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}async function Zy(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const n=t.request?.log||console,r=t.request?.parseSuccessResponseBody!==!1,i=d8(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,s=Object.fromEntries(Object.entries(t.headers).map(([h,d])=>[h,String(d)]));let o;try{o=await e(t.url,{method:t.method,body:i,redirect:t.request?.redirect,headers:s,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(h){let d="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;d=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?d=h.cause.message:typeof h.cause=="string"&&(d=h.cause))}const f=new _u(d,500,{request:t});throw f.cause=h,f}const a=o.status,l=o.url,c={};for(const[h,d]of o.headers)c[h]=d;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const h=c.link&&c.link.match(/<([^>]+)>; rel="deprecation"/),d=h&&h.pop();n.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${d?`. See ${d}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new _u(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await gp(o),new _u("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await gp(o),new _u(f8(u.data),a,{response:u,request:t});return u.data=r?await gp(o):o.body,u}async function gp(t){const e=t.headers.get("content-type");return/application\/json/.test(e)?t.json().catch(()=>t.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?t.text():t.arrayBuffer()}function f8(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(n=>JSON.stringify(n)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function eg(t,e){const n=t.defaults(e);return Object.assign(function(i,s){const o=n.merge(i,s);if(!o.request||!o.request.hook)return Zy(n.parse(o));const a=(l,c)=>Zy(n.parse(n.merge(l,c)));return Object.assign(a,{endpoint:n,defaults:eg.bind(null,n)}),o.request.hook(a,o)},{endpoint:n,defaults:eg.bind(null,n)})}var tg=eg(c8,h8),p8="0.0.0-development";function m8(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var g8=class extends Error{constructor(t,e,n){super(m8(n)),this.request=t,this.headers=e,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},_8=["method","baseUrl","url","headers","request","query","mediaType"],b8=["query","method","url"],ev=/\/api\/v3\/?$/;function y8(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in n)if(b8.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},n):e,i=Object.keys(r).reduce((o,a)=>_8.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return ev.test(s)&&(i.url=s.replace(ev,"/api/graphql")),t(i).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new g8(i,a,o.data)}return o.data.data})}function N_(t,e){const n=t.defaults(e);return Object.assign((i,s)=>y8(n,i,s),{defaults:N_.bind(null,n),endpoint:n.endpoint})}N_(tg,{headers:{"user-agent":`octokit-graphql.js/${p8} ${ef()}`},method:"POST",url:"/graphql"});function v8(t){return N_(t,{method:"POST",url:"/graphql"})}var E8=/^v1\./,w8=/^ghs_/,S8=/^ghu_/;async function T8(t){const e=t.split(/\./).length===3,n=E8.test(t)||w8.test(t),r=S8.test(t);return{type:"token",token:t,tokenType:e?"app":n?"installation":r?"user-to-server":"oauth"}}function C8(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function x8(t,e,n,r){const i=e.endpoint.merge(n,r);return i.headers.authorization=C8(t),e(i)}var A8=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(T8.bind(null,e),{hook:x8.bind(null,e)})};const fA="6.1.2",tv=()=>{},k8=console.warn.bind(console),R8=console.error.bind(console),nv=`octokit-core.js/${fA} ${ef()}`;let P8=class{static VERSION=fA;static defaults(e){return class extends this{constructor(...r){const i=r[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const n=this.plugins;return class extends this{static plugins=n.concat(e.filter(i=>!n.includes(i)))}}constructor(e={}){const n=new YF.Collection,r={baseUrl:tg.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${nv}`:nv,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=tg.defaults(r),this.graphql=v8(this.request).defaults(r),this.log=Object.assign({debug:tv,info:tv,warn:k8,error:R8},e.log),this.hook=n,e.authStrategy){const{authStrategy:s,...o}=e,a=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));n.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=A8(e.auth);n.wrap("request",s.hook),this.auth=s}const i=this.constructor;for(let s=0;s<i.plugins.length;++s)Object.assign(this,i.plugins[s](this,e))}request;graphql;log;hook;auth};const D8="5.3.1";function pA(t){t.hook.wrap("request",(e,n)=>{t.log.debug("request",n);const r=Date.now(),i=t.request.endpoint.parse(n),s=i.url.replace(n.baseUrl,"");return e(n).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${i.method} ${s} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o})})}pA.VERSION=D8;var O8="0.0.0-development";function I8(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const n=t.data.incomplete_results,r=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],o=t.data[s];return t.data=o,typeof n<"u"&&(t.data.incomplete_results=n),typeof r<"u"&&(t.data.repository_selection=r),t.data.total_count=i,t}function B_(t,e,n){const r=typeof e=="function"?e.endpoint(n):t.request.endpoint(e,n),i=typeof e=="function"?e:t.request,s=r.method,o=r.headers;let a=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await i({method:s,url:a,headers:o}),c=I8(l);return a=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function mA(t,e,n,r){return typeof n=="function"&&(r=n,n=void 0),gA(t,[],B_(t,e,n)[Symbol.asyncIterator](),r)}function gA(t,e,n,r){return n.next().then(i=>{if(i.done)return e;let s=!1;function o(){s=!0}return e=e.concat(r?r(i.value,o):i.value.data),s?e:gA(t,e,n,r)})}Object.assign(mA,{iterator:B_});function _A(t){return{paginate:Object.assign(mA.bind(null,t),{iterator:B_.bind(null,t)})}}_A.VERSION=O8;const L8="13.2.6",M8={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForEnterprise:["GET /enterprises/{enterprise}/copilot/usage"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}"],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createCustomOrganizationRole:["POST /orgs/{org}/organization-roles"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteCustomOrganizationRole:["DELETE /orgs/{org}/organization-roles/{role_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}"],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers"],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],patchCustomOrganizationRole:["PATCH /orgs/{org}/organization-roles/{role_id}"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}"],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createTagProtection:["POST /repos/{owner}/{repo}/tags/protection"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteTagProtection:["DELETE /repos/{owner}/{repo}/tags/protection/{tag_protection_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTagProtection:["GET /repos/{owner}/{repo}/tags/protection"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var N8=M8;const Bs=new Map;for(const[t,e]of Object.entries(N8))for(const[n,r]of Object.entries(e)){const[i,s,o]=r,[a,l]=i.split(/ /),c=Object.assign({method:a,url:l},s);Bs.has(t)||Bs.set(t,new Map),Bs.get(t).set(n,{scope:t,methodName:n,endpointDefaults:c,decorations:o})}const B8={has({scope:t},e){return Bs.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,n){return Object.defineProperty(t.cache,e,n),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...Bs.get(t).keys()]},set(t,e,n){return t.cache[e]=n},get({octokit:t,scope:e,cache:n},r){if(n[r])return n[r];const i=Bs.get(e).get(r);if(!i)return;const{endpointDefaults:s,decorations:o}=i;return o?n[r]=H8(t,e,r,s,o):n[r]=t.request.defaults(s),n[r]}};function F8(t){const e={};for(const n of Bs.keys())e[n]=new Proxy({octokit:t,scope:n,cache:{}},B8);return e}function H8(t,e,n,r,i){const s=t.request.defaults(r);function o(...a){let l=s.endpoint.merge(...a);if(i.mapToData)return l=Object.assign({},l,{data:l[i.mapToData],[i.mapToData]:void 0}),s(l);if(i.renamed){const[c,u]=i.renamed;t.log.warn(`octokit.${e}.${n}() has been renamed to octokit.${c}.${u}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const c=s.endpoint.merge(...a);for(const[u,h]of Object.entries(i.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${n}()". Use "${h}" instead`),h in c||(c[h]=c[u]),delete c[u]);return s(c)}return s(...a)}return Object.assign(o,s)}function bA(t){const e=F8(t);return{...e,rest:e}}bA.VERSION=L8;const U8="21.0.2",j8=P8.plugin(pA,bA,_A).defaults({userAgent:`octokit-rest.js/${U8}`});class z8{#t=new NF(vo);#n=new IF(vo);#e=new hF(this.#n);#r=new jF(vo);artifacts=Zs({});showWorkbench=Jn(!1);currentView=Jn("code");unsavedFiles=Jn(new Set);modifiedFiles=new Set;artifactIdList=[];#s=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#s=this.#s.then(()=>e())}get previews(){return this.#t.previews}get files(){return this.#n.files}get currentDocument(){return this.#e.currentDocument}get selectedFile(){return this.#e.selectedFile}get firstArtifact(){return this.#i(this.artifactIdList[0])}get filesCount(){return this.#n.filesCount}get showTerminal(){return this.#r.showTerminal}get boltTerminal(){return this.#r.boltTerminal}toggleTerminal(e){this.#r.toggleTerminal(e)}attachTerminal(e){this.#r.attachTerminal(e)}attachBoltTerminal(e){this.#r.attachBoltTerminal(e)}onTerminalResize(e,n){this.#r.onTerminalResize(e,n)}setDocuments(e){if(this.#e.setDocuments(e),this.#n.filesCount>0&&this.currentDocument.get()===void 0){for(const[n,r]of Object.entries(e))if(r?.type==="file"){this.setSelectedFile(n);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const n=this.currentDocument.get()?.filePath;if(!n)return;const r=this.#n.getFile(n)?.content,i=r!==void 0&&r!==e;this.#e.updateFile(n,e);const s=this.currentDocument.get();if(s){const o=this.unsavedFiles.get();if(i&&o.has(s.filePath))return;const a=new Set(o);i?a.add(s.filePath):a.delete(s.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const n=this.currentDocument.get();if(!n)return;const{filePath:r}=n;this.#e.updateScrollPosition(r,e)}setSelectedFile(e){this.#e.setSelectedFile(e)}async saveFile(e){const r=this.#e.documents.get()[e];if(r===void 0)return;await this.#n.saveFile(e,r.value);const i=new Set(this.unsavedFiles.get());i.delete(e),this.unsavedFiles.set(i)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:n}=e,r=this.#n.getFile(n);r&&this.setCurrentDocumentContent(r.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#n.getFileModifications()}resetAllFileModifications(){this.#n.resetFileModifications()}abortAllActions(){}addArtifact({messageId:e,title:n,id:r}){this.#i(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:r,title:n,closed:!1,runner:new Z5(vo,()=>this.boltTerminal)}))}updateArtifact({messageId:e},n){const r=this.#i(e);r&&this.artifacts.setKey(e,{...r,...n})}addAction(e){this._addAction(e)}async _addAction(e){const{messageId:n}=e,r=this.#i(n);return r||cr("Artifact not found"),r.runner.addAction(e)}runAction(e,n=!1){n?this._runAction(e,n):this.addToExecutionQueue(()=>this._runAction(e,n))}async _runAction(e,n=!1){const{messageId:r}=e,i=this.#i(r);if(i||cr("Artifact not found"),e.action.type==="file"){const s=await vo,o=I_.join(s.workdir,e.action.filePath);this.selectedFile.value!==o&&this.setSelectedFile(o),this.currentView.value!=="code"&&this.currentView.set("code"),this.#e.documents.get()[o]||await i.runner.runAction(e,n),this.#e.updateFile(o,e.action.content),n||(await i.runner.runAction(e),this.resetAllFileModifications())}else await i.runner.runAction(e)}#i(e){return this.artifacts.get()[e]}async downloadZip(){const e=new VF,n=this.files.get();for(const[i,s]of Object.entries(n))if(s?.type==="file"&&!s.isBinary){const o=pp(i),a=o.split("/");if(a.length>1){let l=e;for(let c=0;c<a.length-1;c++)l=l.folder(a[c]);l.file(a[a.length-1],s.content)}else e.file(o,s.content)}const r=await e.generateAsync({type:"blob"});WF.saveAs(r,"project.zip")}async syncFiles(e){const n=this.files.get(),r=[];for(const[i,s]of Object.entries(n))if(s?.type==="file"&&!s.isBinary){const o=pp(i),a=o.split("/");let l=e;for(let h=0;h<a.length-1;h++)l=await l.getDirectoryHandle(a[h],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(s.content),await u.close(),r.push(o)}return r}async pushToGitHub(e,n,r){try{const i=r,s=n;if(!i)throw new Error("GitHub token is not set in environment variables");const o=new j8({auth:i});let a;try{a=(await o.repos.get({owner:s,repo:e})).data}catch(g){if(g instanceof Error&&"status"in g&&g.status===404){const{data:m}=await o.repos.createForAuthenticatedUser({name:e,private:!1,auto_init:!0});a=m}else throw console.log("cannot create repo!"),g}const l=this.files.get();if(!l||Object.keys(l).length===0)throw new Error("No files found to push");const u=(await Promise.all(Object.entries(l).map(async([g,m])=>{if(m?.type==="file"&&m.content){const{data:p}=await o.git.createBlob({owner:a.owner.login,repo:a.name,content:tn.from(m.content).toString("base64"),encoding:"base64"});return{path:pp(g),sha:p.sha}}return null}))).filter(Boolean);if(u.length===0)throw new Error("No valid files to push");const{data:h}=await o.git.getRef({owner:a.owner.login,repo:a.name,ref:`heads/${a.default_branch||"main"}`}),d=h.object.sha,{data:f}=await o.git.createTree({owner:a.owner.login,repo:a.name,base_tree:d,tree:u.map(g=>({path:g.path,mode:"100644",type:"blob",sha:g.sha}))}),{data:_}=await o.git.createCommit({owner:a.owner.login,repo:a.name,message:"Initial commit from your app",tree:f.sha,parents:[d]});await o.git.updateRef({owner:a.owner.login,repo:a.name,ref:`heads/${a.default_branch||"main"}`,sha:_.sha}),alert(`Repository created and code pushed: ${a.html_url}`)}catch(i){console.error("Error pushing to GitHub:",i instanceof Error?i.message:String(i))}}}const He=new z8;var V8={OLLAMA_API_BASE_URL:"",OPENAI_LIKE_API_BASE_URL:"",OPENAI_LIKE_API_KEY:"",LMSTUDIO_API_BASE_URL:"",VITE_LOG_LEVEL:"debug",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const yA=!V8.VITE_DISABLE_PERSISTENCE,Ht=yA?await n5():void 0,xs=Jn(void 0),Do=Jn(void 0);function vA(){const t=gL(),{id:e}=_L(),[n]=bL(),[r,i]=D.useState([]),[s,o]=D.useState(!1),[a,l]=D.useState();return D.useEffect(()=>{if(!Ht){o(!0),yA&&je.error("Chat persistence is unavailable");return}e&&zh(Ht,e).then(c=>{if(c&&c.messages.length>0){const u=n.get("rewindTo"),h=u?c.messages.slice(0,c.messages.findIndex(d=>d.id===u)+1):c.messages;i(h),l(c.urlId),Do.set(c.description),xs.set(c.id)}else t("/",{replace:!0});o(!0)}).catch(c=>{je.error(c.message)})},[]),{ready:!e||s,initialMessages:r,storeMessageHistory:async c=>{if(!Ht||c.length===0)return;const{firstArtifact:u}=He;if(!a&&u?.id){const h=await Fx(Ht,u.id);rv(h),l(h)}if(!Do.get()&&u?.title&&Do.set(u?.title),r.length===0&&!xs.get()){const h=await Bx(Ht);xs.set(h),a||rv(h)}await Nx(Ht,xs.get(),c,a,Do.get())},duplicateCurrentChat:async c=>{if(!(!Ht||!e&&!c))try{const u=await c5(Ht,e||c);t(`/chat/${u}`),je.success("Chat duplicated successfully")}catch(u){je.error("Failed to duplicate chat"),console.log(u)}},importChat:async(c,u)=>{if(Ht)try{const h=await x_(Ht,c,u);window.location.href=`/chat/${h}`,je.success("Chat imported successfully")}catch(h){h instanceof Error?je.error("Failed to import chat: "+h.message):je.error("Failed to import chat")}},exportChat:async(c=a)=>{if(!Ht||!c)return;const u=await zh(Ht,c),h={messages:u.messages,description:u.description,exportDate:new Date().toISOString()},d=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),f=URL.createObjectURL(d),_=document.createElement("a");_.href=f,_.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(f)}}}function rv(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function W8(t,e=[]){let n=[];function r(s,o){const a=D.createContext(o),l=n.length;n=[...n,o];const c=h=>{const{scope:d,children:f,..._}=h,g=d?.[t]?.[l]||a,m=D.useMemo(()=>_,Object.values(_));return N.jsx(g.Provider,{value:m,children:f})};c.displayName=s+"Provider";function u(h,d){const f=d?.[t]?.[l]||a,_=D.useContext(f);if(_)return _;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>D.createContext(o));return function(a){const l=a?.[t]||s;return D.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,G8(i,...e)]}function G8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return D.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var $8="DismissableLayer",ng="dismissableLayer.update",q8="dismissableLayer.pointerDownOutside",K8="dismissableLayer.focusOutside",iv,EA=D.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wA=D.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=D.useContext(EA),[u,h]=D.useState(null),d=u?.ownerDocument??globalThis?.document,[,f]=D.useState({}),_=St(e,T=>h(T)),g=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),p=g.indexOf(m),b=u?g.indexOf(u):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,v=b>=p,E=Q8(T=>{const S=T.target,x=[...c.branches].some(R=>R.contains(S));!v||x||(i?.(T),o?.(T),T.defaultPrevented||a?.())},d),w=J8(T=>{const S=T.target;[...c.branches].some(R=>R.contains(S))||(s?.(T),o?.(T),T.defaultPrevented||a?.())},d);return nx(T=>{b===c.layers.size-1&&(r?.(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},d),D.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(iv=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),sv(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=iv)}},[u,d,n,c]),D.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),sv())},[u,c]),D.useEffect(()=>{const T=()=>f({});return document.addEventListener(ng,T),()=>document.removeEventListener(ng,T)},[]),N.jsx(gt.div,{...l,ref:_,style:{pointerEvents:y?v?"auto":"none":void 0,...t.style},onFocusCapture:ze(t.onFocusCapture,w.onFocusCapture),onBlurCapture:ze(t.onBlurCapture,w.onBlurCapture),onPointerDownCapture:ze(t.onPointerDownCapture,E.onPointerDownCapture)})});wA.displayName=$8;var Y8="DismissableLayerBranch",X8=D.forwardRef((t,e)=>{const n=D.useContext(EA),r=D.useRef(null),i=St(e,r);return D.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),N.jsx(gt.div,{...t,ref:i})});X8.displayName=Y8;function Q8(t,e=globalThis?.document){const n=Vn(t),r=D.useRef(!1),i=D.useRef(()=>{});return D.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){SA(q8,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function J8(t,e=globalThis?.document){const n=Vn(t),r=D.useRef(!1);return D.useEffect(()=>{const i=s=>{s.target&&!r.current&&SA(K8,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sv(){const t=new CustomEvent(ng);document.dispatchEvent(t)}function SA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?__(i,s):i.dispatchEvent(s)}const Z8=["top","right","bottom","left"],Ur=Math.min,Mn=Math.max,Gh=Math.round,bu=Math.floor,qi=t=>({x:t,y:t}),eH={left:"right",right:"left",bottom:"top",top:"bottom"},tH={start:"end",end:"start"};function rg(t,e,n){return Mn(t,Ur(e,n))}function di(t,e){return typeof t=="function"?t(e):t}function fi(t){return t.split("-")[0]}function ga(t){return t.split("-")[1]}function F_(t){return t==="x"?"y":"x"}function H_(t){return t==="y"?"height":"width"}function Ki(t){return["top","bottom"].includes(fi(t))?"y":"x"}function U_(t){return F_(Ki(t))}function nH(t,e,n){n===void 0&&(n=!1);const r=ga(t),i=U_(t),s=H_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=$h(o)),[o,$h(o)]}function rH(t){const e=$h(t);return[ig(t),e,ig(e)]}function ig(t){return t.replace(/start|end/g,e=>tH[e])}function iH(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function sH(t,e,n,r){const i=ga(t);let s=iH(fi(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ig)))),s}function $h(t){return t.replace(/left|right|bottom|top/g,e=>eH[e])}function oH(t){return{top:0,right:0,bottom:0,left:0,...t}}function TA(t){return typeof t!="number"?oH(t):{top:t,right:t,bottom:t,left:t}}function qh(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function ov(t,e,n){let{reference:r,floating:i}=t;const s=Ki(e),o=U_(e),a=H_(o),l=fi(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(ga(e)){case"start":f[o]-=d*(n&&c?-1:1);break;case"end":f[o]+=d*(n&&c?-1:1);break}return f}const aH=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=ov(c,r,l),d=r,f={},_=0;for(let g=0;g<a.length;g++){const{name:m,fn:p}=a[g],{x:b,y,data:v,reset:E}=await p({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,h=y??h,f={...f,[m]:{...f[m],...v}},E&&_<=50&&(_++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:h}=ov(c,d,l)),g=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}};async function Bl(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=di(e,t),_=TA(f),m=a[d?h==="floating"?"reference":"floating":h],p=qh(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},E=qh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:y,strategy:l}):b);return{top:(p.top-E.top+_.top)/v.y,bottom:(E.bottom-p.bottom+_.bottom)/v.y,left:(p.left-E.left+_.left)/v.x,right:(E.right-p.right+_.right)/v.x}}const lH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=di(t,e)||{};if(c==null)return{};const h=TA(u),d={x:n,y:r},f=U_(i),_=H_(f),g=await o.getDimensions(c),m=f==="y",p=m?"top":"left",b=m?"bottom":"right",y=m?"clientHeight":"clientWidth",v=s.reference[_]+s.reference[f]-d[f]-s.floating[_],E=d[f]-s.reference[f],w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let T=w?w[y]:0;(!T||!await(o.isElement==null?void 0:o.isElement(w)))&&(T=a.floating[y]||s.floating[_]);const S=v/2-E/2,x=T/2-g[_]/2-1,R=Ur(h[p],x),U=Ur(h[b],x),P=R,B=T-g[_]-U,A=T/2-g[_]/2+S,W=rg(P,A,B),ne=!l.arrow&&ga(i)!=null&&A!==W&&s.reference[_]/2-(A<P?R:U)-g[_]/2<0,Q=ne?A<P?A-P:A-B:0;return{[f]:d[f]+Q,data:{[f]:W,centerOffset:A-W-Q,...ne&&{alignmentOffset:Q}},reset:ne}}}),cH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:g=!0,...m}=di(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const p=fi(i),b=Ki(a),y=fi(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=d||(y||!g?[$h(a)]:rH(a)),w=_!=="none";!d&&w&&E.push(...sH(a,g,_,v));const T=[a,...E],S=await Bl(e,m),x=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&x.push(S[p]),h){const A=nH(i,o,v);x.push(S[A[0]],S[A[1]])}if(R=[...R,{placement:i,overflows:x}],!x.every(A=>A<=0)){var U,P;const A=(((U=s.flip)==null?void 0:U.index)||0)+1,W=T[A];if(W)return{data:{index:A,overflows:R},reset:{placement:W}};let ne=(P=R.filter(Q=>Q.overflows[0]<=0).sort((Q,ie)=>Q.overflows[1]-ie.overflows[1])[0])==null?void 0:P.placement;if(!ne)switch(f){case"bestFit":{var B;const Q=(B=R.filter(ie=>{if(w){const L=Ki(ie.placement);return L===b||L==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(L=>L>0).reduce((L,I)=>L+I,0)]).sort((ie,L)=>ie[1]-L[1])[0])==null?void 0:B[0];Q&&(ne=Q);break}case"initialPlacement":ne=a;break}if(i!==ne)return{reset:{placement:ne}}}return{}}}};function av(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function lv(t){return Z8.some(e=>t[e]>=0)}const uH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=di(t,e);switch(r){case"referenceHidden":{const s=await Bl(e,{...i,elementContext:"reference"}),o=av(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lv(o)}}}case"escaped":{const s=await Bl(e,{...i,altBoundary:!0}),o=av(s,n.floating);return{data:{escapedOffsets:o,escaped:lv(o)}}}default:return{}}}}};async function hH(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=fi(n),a=ga(n),l=Ki(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=di(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof _=="number"&&(f=a==="end"?_*-1:_),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}const dH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await hH(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},fH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:p,y:b}=m;return{x:p,y:b}}},...l}=di(t,e),c={x:n,y:r},u=await Bl(e,l),h=Ki(fi(i)),d=F_(h);let f=c[d],_=c[h];if(s){const m=d==="y"?"top":"left",p=d==="y"?"bottom":"right",b=f+u[m],y=f-u[p];f=rg(b,f,y)}if(o){const m=h==="y"?"top":"left",p=h==="y"?"bottom":"right",b=_+u[m],y=_-u[p];_=rg(b,_,y)}const g=a.fn({...e,[d]:f,[h]:_});return{...g,data:{x:g.x-n,y:g.y-r}}}}},pH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=di(t,e),u={x:n,y:r},h=Ki(i),d=F_(h);let f=u[d],_=u[h];const g=di(a,e),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const y=d==="y"?"height":"width",v=s.reference[d]-s.floating[y]+m.mainAxis,E=s.reference[d]+s.reference[y]-m.mainAxis;f<v?f=v:f>E&&(f=E)}if(c){var p,b;const y=d==="y"?"width":"height",v=["top","left"].includes(fi(i)),E=s.reference[h]-s.floating[y]+(v&&((p=o.offset)==null?void 0:p[h])||0)+(v?0:m.crossAxis),w=s.reference[h]+s.reference[y]+(v?0:((b=o.offset)==null?void 0:b[h])||0)-(v?m.crossAxis:0);_<E?_=E:_>w&&(_=w)}return{[d]:f,[h]:_}}}},mH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=di(t,e),l=await Bl(e,a),c=fi(n),u=ga(n),h=Ki(n)==="y",{width:d,height:f}=r.floating;let _,g;c==="top"||c==="bottom"?(_=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,_=u==="end"?"top":"bottom");const m=f-l.top-l.bottom,p=d-l.left-l.right,b=Ur(f-l[_],m),y=Ur(d-l[g],p),v=!e.middlewareData.shift;let E=b,w=y;if(h?w=u||v?Ur(y,p):p:E=u||v?Ur(b,m):m,v&&!u){const S=Mn(l.left,0),x=Mn(l.right,0),R=Mn(l.top,0),U=Mn(l.bottom,0);h?w=d-2*(S!==0||x!==0?S+x:Mn(l.left,l.right)):E=f-2*(R!==0||U!==0?R+U:Mn(l.top,l.bottom))}await o({...e,availableWidth:w,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||f!==T.height?{reset:{rects:!0}}:{}}}};function _a(t){return CA(t)?(t.nodeName||"").toLowerCase():"#document"}function jn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yi(t){var e;return(e=(CA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function CA(t){return t instanceof Node||t instanceof jn(t).Node}function _r(t){return t instanceof Element||t instanceof jn(t).Element}function Yr(t){return t instanceof HTMLElement||t instanceof jn(t).HTMLElement}function cv(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jn(t).ShadowRoot}function Oc(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=br(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function gH(t){return["table","td","th"].includes(_a(t))}function tf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function j_(t){const e=z_(),n=_r(t)?br(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function _H(t){let e=Yi(t);for(;Yr(e)&&!ra(e);){if(j_(e))return e;if(tf(e))return null;e=Yi(e)}return null}function z_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ra(t){return["html","body","#document"].includes(_a(t))}function br(t){return jn(t).getComputedStyle(t)}function nf(t){return _r(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yi(t){if(_a(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cv(t)&&t.host||yi(t);return cv(e)?e.host:e}function xA(t){const e=Yi(t);return ra(e)?t.ownerDocument?t.ownerDocument.body:t.body:Yr(e)&&Oc(e)?e:xA(e)}function Fl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=xA(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=jn(i);if(s){const a=sg(o);return e.concat(o,o.visualViewport||[],Oc(i)?i:[],a&&n?Fl(a):[])}return e.concat(i,Fl(i,[],n))}function sg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function AA(t){const e=br(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Yr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Gh(n)!==s||Gh(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function V_(t){return _r(t)?t:t.contextElement}function zo(t){const e=V_(t);if(!Yr(e))return qi(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=AA(e);let o=(s?Gh(n.width):n.width)/r,a=(s?Gh(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const bH=qi(0);function kA(t){const e=jn(t);return!z_()||!e.visualViewport?bH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yH(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==jn(t)?!1:e}function zs(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=V_(t);let o=qi(1);e&&(r?_r(r)&&(o=zo(r)):o=zo(t));const a=yH(s,n,r)?kA(s):qi(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const d=jn(s),f=r&&_r(r)?jn(r):r;let _=d,g=sg(_);for(;g&&r&&f!==_;){const m=zo(g),p=g.getBoundingClientRect(),b=br(g),y=p.left+(g.clientLeft+parseFloat(b.paddingLeft))*m.x,v=p.top+(g.clientTop+parseFloat(b.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,h*=m.y,l+=y,c+=v,_=jn(g),g=sg(_)}}return qh({width:u,height:h,x:l,y:c})}function vH(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=yi(r),a=e?tf(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=qi(1);const u=qi(0),h=Yr(r);if((h||!h&&!s)&&((_a(r)!=="body"||Oc(o))&&(l=nf(r)),Yr(r))){const d=zs(r);c=zo(r),u.x=d.x+r.clientLeft,u.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function EH(t){return Array.from(t.getClientRects())}function RA(t){return zs(yi(t)).left+nf(t).scrollLeft}function wH(t){const e=yi(t),n=nf(t),r=t.ownerDocument.body,i=Mn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Mn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+RA(t);const a=-n.scrollTop;return br(r).direction==="rtl"&&(o+=Mn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function SH(t,e){const n=jn(t),r=yi(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=z_();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function TH(t,e){const n=zs(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Yr(t)?zo(t):qi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function uv(t,e,n){let r;if(e==="viewport")r=SH(t,n);else if(e==="document")r=wH(yi(t));else if(_r(e))r=TH(e,n);else{const i=kA(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return qh(r)}function PA(t,e){const n=Yi(t);return n===e||!_r(n)||ra(n)?!1:br(n).position==="fixed"||PA(n,e)}function CH(t,e){const n=e.get(t);if(n)return n;let r=Fl(t,[],!1).filter(a=>_r(a)&&_a(a)!=="body"),i=null;const s=br(t).position==="fixed";let o=s?Yi(t):t;for(;_r(o)&&!ra(o);){const a=br(o),l=j_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Oc(o)&&!l&&PA(t,o))?r=r.filter(u=>u!==o):i=a,o=Yi(o)}return e.set(t,r),r}function xH(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?tf(e)?[]:CH(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=uv(e,u,i);return c.top=Mn(h.top,c.top),c.right=Ur(h.right,c.right),c.bottom=Ur(h.bottom,c.bottom),c.left=Mn(h.left,c.left),c},uv(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function AH(t){const{width:e,height:n}=AA(t);return{width:e,height:n}}function kH(t,e,n){const r=Yr(e),i=yi(e),s=n==="fixed",o=zs(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=qi(0);if(r||!r&&!s)if((_a(e)!=="body"||Oc(i))&&(a=nf(e)),r){const h=zs(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=RA(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function _p(t){return br(t).position==="static"}function hv(t,e){return!Yr(t)||br(t).position==="fixed"?null:e?e(t):t.offsetParent}function DA(t,e){const n=jn(t);if(tf(t))return n;if(!Yr(t)){let i=Yi(t);for(;i&&!ra(i);){if(_r(i)&&!_p(i))return i;i=Yi(i)}return n}let r=hv(t,e);for(;r&&gH(r)&&_p(r);)r=hv(r,e);return r&&ra(r)&&_p(r)&&!j_(r)?n:r||_H(t)||n}const RH=async function(t){const e=this.getOffsetParent||DA,n=this.getDimensions,r=await n(t.floating);return{reference:kH(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PH(t){return br(t).direction==="rtl"}const DH={convertOffsetParentRelativeRectToViewportRelativeRect:vH,getDocumentElement:yi,getClippingRect:xH,getOffsetParent:DA,getElementRects:RH,getClientRects:EH,getDimensions:AH,getScale:zo,isElement:_r,isRTL:PH};function OH(t,e){let n=null,r;const i=yi(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:h,height:d}=t.getBoundingClientRect();if(a||e(),!h||!d)return;const f=bu(u),_=bu(i.clientWidth-(c+h)),g=bu(i.clientHeight-(u+d)),m=bu(c),b={rootMargin:-f+"px "+-_+"px "+-g+"px "+-m+"px",threshold:Mn(0,Ur(1,l))||1};let y=!0;function v(E){const w=E[0].intersectionRatio;if(w!==l){if(!y)return o();w?o(!1,w):r=setTimeout(()=>{o(!1,1e-7)},1e3)}y=!1}try{n=new IntersectionObserver(v,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(v,b)}n.observe(t)}return o(!0),s}function IH(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=V_(t),u=i||s?[...c?Fl(c):[],...Fl(e)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",n,{passive:!0}),s&&p.addEventListener("resize",n)});const h=c&&a?OH(c,n):null;let d=-1,f=null;o&&(f=new ResizeObserver(p=>{let[b]=p;b&&b.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let _,g=l?zs(t):null;l&&m();function m(){const p=zs(t);g&&(p.x!==g.x||p.y!==g.y||p.width!==g.width||p.height!==g.height)&&n(),g=p,_=requestAnimationFrame(m)}return n(),()=>{var p;u.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),h?.(),(p=f)==null||p.disconnect(),f=null,l&&cancelAnimationFrame(_)}}const LH=dH,MH=fH,NH=cH,BH=mH,FH=uH,dv=lH,HH=pH,UH=(t,e,n)=>{const r=new Map,i={platform:DH,...n},s={...i.platform,_c:r};return aH(t,e,{...i,platform:s})};var ph=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Kh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Kh(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Kh(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function OA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fv(t,e){const n=OA(t);return Math.round(e*n)/n}function pv(t){const e=D.useRef(t);return ph(()=>{e.current=t}),e}function jH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=D.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,f]=D.useState(r);Kh(d,r)||f(r);const[_,g]=D.useState(null),[m,p]=D.useState(null),b=D.useCallback(Q=>{Q!==w.current&&(w.current=Q,g(Q))},[]),y=D.useCallback(Q=>{Q!==T.current&&(T.current=Q,p(Q))},[]),v=s||_,E=o||m,w=D.useRef(null),T=D.useRef(null),S=D.useRef(u),x=l!=null,R=pv(l),U=pv(i),P=D.useCallback(()=>{if(!w.current||!T.current)return;const Q={placement:e,strategy:n,middleware:d};U.current&&(Q.platform=U.current),UH(w.current,T.current,Q).then(ie=>{const L={...ie,isPositioned:!0};B.current&&!Kh(S.current,L)&&(S.current=L,M0.flushSync(()=>{h(L)}))})},[d,e,n,U]);ph(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(Q=>({...Q,isPositioned:!1})))},[c]);const B=D.useRef(!1);ph(()=>(B.current=!0,()=>{B.current=!1}),[]),ph(()=>{if(v&&(w.current=v),E&&(T.current=E),v&&E){if(R.current)return R.current(v,E,P);P()}},[v,E,P,R,x]);const A=D.useMemo(()=>({reference:w,floating:T,setReference:b,setFloating:y}),[b,y]),W=D.useMemo(()=>({reference:v,floating:E}),[v,E]),ne=D.useMemo(()=>{const Q={position:n,left:0,top:0};if(!W.floating)return Q;const ie=fv(W.floating,u.x),L=fv(W.floating,u.y);return a?{...Q,transform:"translate("+ie+"px, "+L+"px)",...OA(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:L}},[n,a,W.floating,u.x,u.y]);return D.useMemo(()=>({...u,update:P,refs:A,elements:W,floatingStyles:ne}),[u,P,A,W,ne])}const zH=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?dv({element:r.current,padding:i}).fn(n):{}:r?dv({element:r,padding:i}).fn(n):{}}}},VH=(t,e)=>({...LH(t),options:[t,e]}),WH=(t,e)=>({...MH(t),options:[t,e]}),GH=(t,e)=>({...HH(t),options:[t,e]}),$H=(t,e)=>({...NH(t),options:[t,e]}),qH=(t,e)=>({...BH(t),options:[t,e]}),KH=(t,e)=>({...FH(t),options:[t,e]}),YH=(t,e)=>({...zH(t),options:[t,e]});var XH="Arrow",IA=D.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return N.jsx(gt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:N.jsx("polygon",{points:"0,0 30,0 15,10"})})});IA.displayName=XH;var QH=IA;function JH(t){const[e,n]=D.useState(void 0);return Kr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var W_="Popper",[LA,rf]=pa(W_),[ZH,MA]=LA(W_),NA=t=>{const{__scopePopper:e,children:n}=t,[r,i]=D.useState(null);return N.jsx(ZH,{scope:e,anchor:r,onAnchorChange:i,children:n})};NA.displayName=W_;var BA="PopperAnchor",FA=D.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=MA(BA,n),o=D.useRef(null),a=St(e,o);return D.useEffect(()=>{s.onAnchorChange(r?.current||o.current)}),r?null:N.jsx(gt.div,{...i,ref:a})});FA.displayName=BA;var G_="PopperContent",[eU,tU]=LA(G_),HA=D.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:d=!1,updatePositionStrategy:f="optimized",onPlaced:_,...g}=t,m=MA(G_,n),[p,b]=D.useState(null),y=St(e,Z=>b(Z)),[v,E]=D.useState(null),w=JH(v),T=w?.width??0,S=w?.height??0,x=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},U=Array.isArray(c)?c:[c],P=U.length>0,B={padding:R,boundary:U.filter(rU),altBoundary:P},{refs:A,floatingStyles:W,placement:ne,isPositioned:Q,middlewareData:ie}=jH({strategy:"fixed",placement:x,whileElementsMounted:(...Z)=>IH(...Z,{animationFrame:f==="always"}),elements:{reference:m.anchor},middleware:[VH({mainAxis:i+S,alignmentAxis:o}),l&&WH({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?GH():void 0,...B}),l&&$H({...B}),qH({...B,apply:({elements:Z,rects:V,availableWidth:ue,availableHeight:ge})=>{const{width:Ee,height:me}=V.reference,we=Z.floating.style;we.setProperty("--radix-popper-available-width",`${ue}px`),we.setProperty("--radix-popper-available-height",`${ge}px`),we.setProperty("--radix-popper-anchor-width",`${Ee}px`),we.setProperty("--radix-popper-anchor-height",`${me}px`)}}),v&&YH({element:v,padding:a}),iU({arrowWidth:T,arrowHeight:S}),d&&KH({strategy:"referenceHidden",...B})]}),[L,I]=zA(ne),j=Vn(_);Kr(()=>{Q&&j?.()},[Q,j]);const H=ie.arrow?.x,F=ie.arrow?.y,J=ie.arrow?.centerOffset!==0,[te,fe]=D.useState();return Kr(()=>{p&&fe(window.getComputedStyle(p).zIndex)},[p]),N.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:Q?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[ie.transformOrigin?.x,ie.transformOrigin?.y].join(" "),...ie.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:N.jsx(eU,{scope:n,placedSide:L,onArrowChange:E,arrowX:H,arrowY:F,shouldHideArrow:J,children:N.jsx(gt.div,{"data-side":L,"data-align":I,...g,ref:y,style:{...g.style,animation:Q?void 0:"none"}})})})});HA.displayName=G_;var UA="PopperArrow",nU={top:"bottom",right:"left",bottom:"top",left:"right"},jA=D.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=tU(UA,r),o=nU[s.placedSide];return N.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:N.jsx(QH,{...i,ref:n,style:{...i.style,display:"block"}})})});jA.displayName=UA;function rU(t){return t!==null}var iU=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=zA(n),h={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+a/2,f=(i.arrow?.y??0)+l/2;let _="",g="";return c==="bottom"?(_=o?h:`${d}px`,g=`${-l}px`):c==="top"?(_=o?h:`${d}px`,g=`${r.floating.height+l}px`):c==="right"?(_=`${-l}px`,g=o?h:`${f}px`):c==="left"&&(_=`${r.floating.width+l}px`,g=o?h:`${f}px`),{data:{x:_,y:g}}}});function zA(t){const[e,n="center"]=t.split("-");return[e,n]}var VA=NA,WA=FA,GA=HA,$A=jA,sU="Portal",qA=D.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=D.useState(!1);Kr(()=>s(!0),[]);const o=n||i&&globalThis?.document?.body;return o?vT.createPortal(N.jsx(gt.div,{...r,ref:e}),o):null});qA.displayName=sU;function oU(t,e){return D.useReducer((n,r)=>e[n][r]??n,t)}var $_=t=>{const{present:e,children:n}=t,r=aU(e),i=typeof n=="function"?n({present:r.isPresent}):D.Children.only(n),s=St(r.ref,lU(i));return typeof n=="function"||r.isPresent?D.cloneElement(i,{ref:s}):null};$_.displayName="Presence";function aU(t){const[e,n]=D.useState(),r=D.useRef({}),i=D.useRef(t),s=D.useRef("none"),o=t?"mounted":"unmounted",[a,l]=oU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return D.useEffect(()=>{const c=yu(r.current);s.current=a==="mounted"?c:"none"},[a]),Kr(()=>{const c=r.current,u=i.current;if(u!==t){const d=s.current,f=yu(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Kr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=f=>{const g=yu(r.current).includes(f.animationName);if(f.target===e&&g&&(l("ANIMATION_END"),!i.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},d=f=>{f.target===e&&(s.current=yu(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:D.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function yu(t){return t?.animationName||"none"}function lU(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var cU="VisuallyHidden",KA=D.forwardRef((t,e)=>N.jsx(gt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));KA.displayName=cU;var uU=KA,[sf,sue]=W8("Tooltip",[rf]),of=rf(),YA="TooltipProvider",hU=700,og="tooltip.open",[dU,q_]=sf(YA),XA=t=>{const{__scopeTooltip:e,delayDuration:n=hU,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,[o,a]=D.useState(!0),l=D.useRef(!1),c=D.useRef(0);return D.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),N.jsx(dU,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:D.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:D.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:D.useCallback(u=>{l.current=u},[]),disableHoverableContent:i,children:s})};XA.displayName=YA;var af="Tooltip",[fU,Ic]=sf(af),QA=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=t,l=q_(af,t.__scopeTooltip),c=of(e),[u,h]=D.useState(null),d=Ns(),f=D.useRef(0),_=o??l.disableHoverableContent,g=a??l.delayDuration,m=D.useRef(!1),[p=!1,b]=Qd({prop:r,defaultProp:i,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(og))):l.onClose(),s?.(T)}}),y=D.useMemo(()=>p?m.current?"delayed-open":"instant-open":"closed",[p]),v=D.useCallback(()=>{window.clearTimeout(f.current),f.current=0,m.current=!1,b(!0)},[b]),E=D.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b(!1)},[b]),w=D.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m.current=!0,b(!0),f.current=0},g)},[g,b]);return D.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),N.jsx(VA,{...c,children:N.jsx(fU,{scope:e,contentId:d,open:p,stateAttribute:y,trigger:u,onTriggerChange:h,onTriggerEnter:D.useCallback(()=>{l.isOpenDelayed?w():v()},[l.isOpenDelayed,w,v]),onTriggerLeave:D.useCallback(()=>{_?E():(window.clearTimeout(f.current),f.current=0)},[E,_]),onOpen:v,onClose:E,disableHoverableContent:_,children:n})})};QA.displayName=af;var ag="TooltipTrigger",JA=D.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Ic(ag,n),s=q_(ag,n),o=of(n),a=D.useRef(null),l=St(e,a,i.onTriggerChange),c=D.useRef(!1),u=D.useRef(!1),h=D.useCallback(()=>c.current=!1,[]);return D.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),N.jsx(WA,{asChild:!0,...o,children:N.jsx(gt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:ze(t.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ze(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ze(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ze(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:ze(t.onBlur,i.onClose),onClick:ze(t.onClick,i.onClose)})})});JA.displayName=ag;var K_="TooltipPortal",[pU,mU]=sf(K_,{forceMount:void 0}),ZA=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:i}=t,s=Ic(K_,e);return N.jsx(pU,{scope:e,forceMount:n,children:N.jsx($_,{present:n||s.open,children:N.jsx(qA,{asChild:!0,container:i,children:r})})})};ZA.displayName=K_;var ia="TooltipContent",ek=D.forwardRef((t,e)=>{const n=mU(ia,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Ic(ia,t.__scopeTooltip);return N.jsx($_,{present:r||o.open,children:o.disableHoverableContent?N.jsx(tk,{side:i,...s,ref:e}):N.jsx(gU,{side:i,...s,ref:e})})}),gU=D.forwardRef((t,e)=>{const n=Ic(ia,t.__scopeTooltip),r=q_(ia,t.__scopeTooltip),i=D.useRef(null),s=St(e,i),[o,a]=D.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:h}=r,d=D.useCallback(()=>{a(null),h(!1)},[h]),f=D.useCallback((_,g)=>{const m=_.currentTarget,p={x:_.clientX,y:_.clientY},b=yU(p,m.getBoundingClientRect()),y=vU(p,b),v=EU(g.getBoundingClientRect()),E=SU([...y,...v]);a(E),h(!0)},[h]);return D.useEffect(()=>()=>d(),[d]),D.useEffect(()=>{if(l&&u){const _=m=>f(m,u),g=m=>f(m,l);return l.addEventListener("pointerleave",_),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",g)}}},[l,u,f,d]),D.useEffect(()=>{if(o){const _=g=>{const m=g.target,p={x:g.clientX,y:g.clientY},b=l?.contains(m)||u?.contains(m),y=!wU(p,o);b?d():y&&(d(),c())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[l,u,o,c,d]),N.jsx(tk,{...t,ref:s})}),[_U,bU]=sf(af,{isInside:!1}),tk=D.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=Ic(ia,n),c=of(n),{onClose:u}=l;return D.useEffect(()=>(document.addEventListener(og,u),()=>document.removeEventListener(og,u)),[u]),D.useEffect(()=>{if(l.trigger){const h=d=>{d.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),N.jsx(wA,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:N.jsxs(GA,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[N.jsx(tx,{children:r}),N.jsx(_U,{scope:n,isInside:!0,children:N.jsx(uU,{id:l.contentId,role:"tooltip",children:i||r})})]})})});ek.displayName=ia;var nk="TooltipArrow",rk=D.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=of(n);return bU(nk,n).isInside?null:N.jsx($A,{...i,...r,ref:e})});rk.displayName=nk;function yU(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vU(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function EU(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function wU(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function SU(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),TU(e)}function TU(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var CU=XA,xU=QA,AU=JA,kU=ZA,RU=ek,PU=rk;const Vo=({tooltip:t,children:e,sideOffset:n=5,className:r="",arrowClassName:i="",tooltipStyle:s={}})=>N.jsxs(xU,{children:[N.jsx(AU,{asChild:!0,children:e}),N.jsx(kU,{children:N.jsxs(RU,{className:`bg-bolt-elements-tooltip-background text-bolt-elements-textPrimary px-3 py-2 rounded-lg text-sm shadow-lg ${r}`,sideOffset:n,style:{zIndex:2e3,backgroundColor:"white",...s},children:[t,N.jsx(PU,{className:`fill-bolt-elements-tooltip-background ${i}`})]})})]});function DU({item:t,onDelete:e,onDuplicate:n,exportChat:r}){const[i,s]=D.useState(!1),o=D.useRef(null);return D.useEffect(()=>{function a(){s(!0)}function l(){s(!1)}return o.current?.addEventListener("mouseenter",a),o.current?.addEventListener("mouseleave",l),()=>{o.current?.removeEventListener("mouseenter",a),o.current?.removeEventListener("mouseleave",l)}},[]),N.jsx("div",{ref:o,className:"group rounded-md text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 overflow-hidden flex justify-between items-center px-2 py-1",children:N.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[t.description,N.jsx("div",{className:"absolute right-0 z-1 top-0 bottom-0 bg-gradient-to-l from-bolt-elements-background-depth-2 group-hover:from-bolt-elements-background-depth-3 box-content pl-3 to-transparent w-10 flex justify-end group-hover:w-15 group-hover:from-99%",children:i&&N.jsxs("div",{className:"flex items-center p-1 text-bolt-elements-textSecondary",children:[N.jsx(Vo,{tooltip:"Export chat",children:N.jsx("button",{className:"i-ph:download-simple scale-110 mr-2",onClick:a=>{a.preventDefault(),r(t.id)},title:"Export chat"})}),n&&N.jsx(Vo,{tooltip:"Duplicate chat",children:N.jsx("button",{className:"i-ph:copy scale-110 mr-2",onClick:()=>n?.(t.id),title:"Duplicate chat"})}),N.jsx(B4,{asChild:!0,children:N.jsx(Vo,{tooltip:"Delete chat",children:N.jsx("button",{className:"i-ph:trash scale-110",onClick:a=>{a.preventDefault(),e?.(a)}})})})]})})]})})}function un(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function pi(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function OU(t,e){const n=un(t);return isNaN(e)?pi(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const ik=6048e5,IU=864e5;let LU={};function lf(){return LU}function Vs(t,e){const n=lf(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=un(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Yh(t){return Vs(t,{weekStartsOn:1})}function sk(t){const e=un(t),n=e.getFullYear(),r=pi(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Yh(r),s=pi(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Yh(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Xh(t){const e=un(t);return e.setHours(0,0,0,0),e}function mv(t){const e=un(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function MU(t,e){const n=Xh(t),r=Xh(e),i=+n-mv(n),s=+r-mv(r);return Math.round((i-s)/IU)}function NU(t){const e=sk(t),n=pi(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Yh(n)}function cf(t){return pi(t,Date.now())}function ok(t,e){const n=Xh(t),r=Xh(e);return+n==+r}function BU(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function FU(t){if(!BU(t)&&typeof t!="number")return!1;const e=un(t);return!isNaN(Number(e))}function HU(t){const e=un(t),n=pi(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const UU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jU=(t,e,n)=>{let r;const i=UU[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function bp(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const zU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GU={date:bp({formats:zU,defaultWidth:"full"}),time:bp({formats:VU,defaultWidth:"full"}),dateTime:bp({formats:WU,defaultWidth:"full"})},$U={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qU=(t,e,n,r)=>$U[t];function La(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const KU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},YU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},XU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},QU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},e9=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},t9={ordinalNumber:e9,era:La({values:KU,defaultWidth:"wide"}),quarter:La({values:YU,defaultWidth:"wide",argumentCallback:t=>t-1}),month:La({values:XU,defaultWidth:"wide"}),day:La({values:QU,defaultWidth:"wide"}),dayPeriod:La({values:JU,defaultWidth:"wide",formattingValues:ZU,defaultFormattingWidth:"wide"})};function Ma(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?r9(a,h=>h.test(o)):n9(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function n9(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function r9(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function i9(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const s9=/^(\d+)(th|st|nd|rd)?/i,o9=/\d+/i,a9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},l9={any:[/^b/i,/^(a|c)/i]},c9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},u9={any:[/1/i,/2/i,/3/i,/4/i]},h9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},d9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},p9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},g9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_9={ordinalNumber:i9({matchPattern:s9,parsePattern:o9,valueCallback:t=>parseInt(t,10)}),era:Ma({matchPatterns:a9,defaultMatchWidth:"wide",parsePatterns:l9,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:c9,defaultMatchWidth:"wide",parsePatterns:u9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ma({matchPatterns:h9,defaultMatchWidth:"wide",parsePatterns:d9,defaultParseWidth:"any"}),day:Ma({matchPatterns:f9,defaultMatchWidth:"wide",parsePatterns:p9,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:m9,defaultMatchWidth:"any",parsePatterns:g9,defaultParseWidth:"any"})},b9={code:"en-US",formatDistance:jU,formatLong:GU,formatRelative:qU,localize:t9,match:_9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function y9(t){const e=un(t);return MU(e,HU(e))+1}function v9(t){const e=un(t),n=+Yh(e)-+NU(e);return Math.round(n/ik)+1}function ak(t,e){const n=un(t),r=n.getFullYear(),i=lf(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=pi(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Vs(o,e),l=pi(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Vs(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function E9(t,e){const n=lf(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=ak(t,e),s=pi(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Vs(s,e)}function w9(t,e){const n=un(t),r=+Vs(n,e)-+E9(n,e);return Math.round(r/ik)+1}function lt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const wi={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return lt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):lt(n+1,2)},d(t,e){return lt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return lt(t.getHours()%12||12,e.length)},H(t,e){return lt(t.getHours(),e.length)},m(t,e){return lt(t.getMinutes(),e.length)},s(t,e){return lt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return lt(i,e.length)}},mo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return wi.y(t,e)},Y:function(t,e,n,r){const i=ak(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return lt(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):lt(s,e.length)},R:function(t,e){const n=sk(t);return lt(n,e.length)},u:function(t,e){const n=t.getFullYear();return lt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return lt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return lt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return wi.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return lt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=w9(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):lt(i,e.length)},I:function(t,e,n){const r=v9(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):lt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):wi.d(t,e)},D:function(t,e,n){const r=y9(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return lt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return lt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return lt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=mo.noon:r===0?i=mo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=mo.evening:r>=12?i=mo.afternoon:r>=4?i=mo.morning:i=mo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return wi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):wi.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):lt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):wi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):wi.s(t,e)},S:function(t,e){return wi.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bv(r);case"XXXX":case"XX":return bs(r);case"XXXXX":case"XXX":default:return bs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return bv(r);case"xxxx":case"xx":return bs(r);case"xxxxx":case"xxx":default:return bs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_v(r,":");case"OOOO":default:return"GMT"+bs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_v(r,":");case"zzzz":default:return"GMT"+bs(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return lt(r,e.length)},T:function(t,e,n){const r=t.getTime();return lt(r,e.length)}};function _v(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+lt(s,2)}function bv(t,e){return t%60===0?(t>0?"-":"+")+lt(Math.abs(t)/60,2):bs(t,e)}function bs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=lt(Math.trunc(r/60),2),s=lt(r%60,2);return n+i+e+s}const yv=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lk=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},S9=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return yv(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",yv(r,e)).replace("{{time}}",lk(i,e))},T9={p:lk,P:S9},C9=/^D+$/,x9=/^Y+$/,A9=["D","DD","YY","YYYY"];function k9(t){return C9.test(t)}function R9(t){return x9.test(t)}function P9(t,e,n){const r=D9(t,e,n);if(console.warn(r),A9.includes(t))throw new RangeError(r)}function D9(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,L9=/^'([^]*?)'?$/,M9=/''/g,N9=/[a-zA-Z]/;function yp(t,e,n){const r=lf(),i=r.locale??b9,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=un(t);if(!FU(a))throw new RangeError("Invalid time value");let l=e.match(I9).map(u=>{const h=u[0];if(h==="p"||h==="P"){const d=T9[h];return d(u,i.formatLong)}return u}).join("").match(O9).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:B9(u)};if(gv[h])return{isToken:!0,value:u};if(h.match(N9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;(R9(h)||k9(h))&&P9(h,e,String(t));const d=gv[h[0]];return d(a,h,i.localize,c)}).join("")}function B9(t){const e=t.match(L9);return e?e[1].replace(M9,"'"):t}function F9(t,e){const n=un(t),r=un(e);return n.getTime()>r.getTime()}function H9(t,e,n){const r=Vs(t,n),i=Vs(e,n);return+r==+i}function U9(t,e){const n=un(t),r=un(e);return n.getFullYear()===r.getFullYear()}function j9(t,e){return H9(t,cf(t),e)}function z9(t){return U9(t,cf(t))}function V9(t){return ok(t,cf(t))}function ck(t,e){return OU(t,-e)}function W9(t){return ok(t,ck(cf(t),1))}function G9(t){const e=t.toSorted((i,s)=>Date.parse(s.timestamp)-Date.parse(i.timestamp)),n={},r=[];return e.forEach(i=>{const s=$9(new Date(i.timestamp));if(s in n)n[s].items.push(i);else{const o={category:s,items:[i]};n[s]=o,r.push(o)}}),r}function $9(t){if(V9(t))return"Today";if(W9(t))return"Yesterday";if(j9(t))return yp(t,"eeee");const e=ck(new Date,30);return F9(t,e)?"Last 30 Days":z9(t)?yp(t,"MMMM"):yp(t,"MMMM yyyy")}const q9={closed:{opacity:0,visibility:"hidden",left:"-150px",transition:{duration:.2,ease:ir}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:ir}}};function K9(){const{duplicateCurrentChat:t,exportChat:e}=vA(),n=D.useRef(null),[r,i]=D.useState([]),[s,o]=D.useState(!1),[a,l]=D.useState(null),c=D.useCallback(()=>{Ht&&r5(Ht).then(_=>_.filter(g=>g.urlId&&g.description)).then(i).catch(_=>je.error(_.message))},[]),u=D.useCallback((_,g)=>{_.preventDefault(),Ht&&o5(Ht,g.id).then(()=>{c(),xs.get()===g.id&&(window.location.pathname="/")}).catch(m=>{je.error("Failed to delete conversation"),Lx.error(m)})},[]),h=()=>{l(null)};D.useEffect(()=>{s&&c()},[s]),D.useEffect(()=>{function m(p){p.pageX<40&&o(!0),n.current&&p.clientX>n.current.getBoundingClientRect().right+40&&o(!1)}return window.addEventListener("mousemove",m),()=>{window.removeEventListener("mousemove",m)}},[]);const d=(_,g)=>{_.preventDefault(),l({type:"delete",item:g})},f=async _=>{await t(_),c()};return N.jsxs(rr.div,{ref:n,initial:"closed",animate:s?"open":"closed",variants:q9,className:"flex flex-col side-menu fixed top-0 w-[350px] h-full bg-bolt-elements-background-depth-2 border-r rounded-r-3xl border-bolt-elements-borderColor z-sidebar shadow-xl shadow-bolt-elements-sidebar-dropdownShadow text-sm",children:[N.jsx("div",{className:"flex items-center h-[var(--header-height)]"}),N.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[N.jsx("div",{className:"p-4",children:N.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-bolt-elements-sidebar-buttonBackgroundDefault text-bolt-elements-sidebar-buttonText hover:bg-bolt-elements-sidebar-buttonBackgroundHover rounded-md p-2 transition-theme",children:[N.jsx("span",{className:"inline-block i-bolt:chat scale-110"}),"Start new chat"]})}),N.jsx("div",{className:"text-bolt-elements-textPrimary font-medium pl-6 pr-5 my-2",children:"Your Chats"}),N.jsxs("div",{className:"flex-1 overflow-scroll pl-4 pr-5 pb-5",children:[r.length===0&&N.jsx("div",{className:"pl-2 text-bolt-elements-textTertiary",children:"No previous conversations"}),N.jsxs(N4,{open:a!==null,children:[G9(r).map(({category:_,items:g})=>N.jsxs("div",{className:"mt-4 first:mt-0 space-y-1",children:[N.jsx("div",{className:"text-bolt-elements-textTertiary sticky top-0 z-1 bg-bolt-elements-background-depth-2 pl-2 pt-2 pb-1",children:_}),g.map(m=>N.jsx(DU,{item:m,exportChat:e,onDelete:p=>d(p,m),onDuplicate:()=>f(m.id)},m.id))]},_)),N.jsx(X4,{onBackdrop:h,onClose:h,children:a?.type==="delete"&&N.jsxs(N.Fragment,{children:[N.jsx(K4,{children:"Delete Chat?"}),N.jsx(Y4,{asChild:!0,children:N.jsxs("div",{children:[N.jsxs("p",{children:["You are about to delete ",N.jsx("strong",{children:a.item.description}),"."]}),N.jsx("p",{className:"mt-1",children:"Are you sure you want to delete this chat?"})]})}),N.jsxs("div",{className:"px-5 pb-4 bg-bolt-elements-background-depth-2 flex gap-2 justify-end",children:[N.jsx(jy,{type:"secondary",onClick:h,children:"Cancel"}),N.jsx(jy,{type:"danger",onClick:_=>{u(_,a.item),h()},children:"Delete"})]})]})})]})]}),N.jsx("div",{className:"flex items-center border-t border-bolt-elements-borderColor p-4",children:N.jsx(Q4,{className:"ml-auto"})})]})]})}let st=class uk{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=sa(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Br.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=sa(this,e,n);let r=[];return this.decompose(e,n,r,0),Br.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new pl(this),s=new pl(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new pl(this,e)}iterRange(e,n=this.length){return new hk(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new dk(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?uk.empty:e.length<=32?new Ct(e):Br.from(Ct.split(e,[]))}};class Ct extends st{constructor(e,n=Y9(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new X9(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new Ct(vv(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=mh(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Ct(a,o.length+s.length));else{let l=a.length>>1;r.push(new Ct(a.slice(0,l)),new Ct(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof Ct))return super.replace(e,n,r);[e,n]=sa(this,e,n);let i=mh(this.text,mh(r.text,vv(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new Ct(i,s):Br.from(Ct.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=sa(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new Ct(r,i)),r=[],i=-1);return i>-1&&n.push(new Ct(r,i)),n}}class Br extends st{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=sa(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Br(u,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=sa(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Br))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let _ of e)_.flatten(f);return new Ct(f,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function h(f){let _;if(f.lines>s&&f instanceof Br)for(let g of f.children)h(g);else f.lines>o&&(l>o||!l)?(d(),a.push(f)):f instanceof Ct&&l&&(_=u[u.length-1])instanceof Ct&&f.lines+_.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Ct(_.text.concat(f.text),_.length+1+f.length)):(l+f.lines>i&&d(),l+=f.lines,c+=f.length+1,u.push(f))}function d(){l!=0&&(a.push(u.length==1?u[0]:Br.from(u,c)),c=-1,l=u.length=0)}for(let f of e)h(f);return d(),a.length==1?a[0]:new Br(a,n)}}st.empty=new Ct([""],0);function Y9(t){let e=-1;for(let n of t)e+=n.length+1;return e}function mh(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function vv(t,e,n){return mh(t,[""],e,n)}class pl{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Ct?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Ct?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ct){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Ct?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class hk{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new pl(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class dk{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(st.prototype[Symbol.iterator]=function(){return this.iter()},pl.prototype[Symbol.iterator]=hk.prototype[Symbol.iterator]=dk.prototype[Symbol.iterator]=function(){return this});class X9{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}}function sa(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Wo="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Wo.length;t++)Wo[t]+=Wo[t-1];function Q9(t){for(let e=1;e<Wo.length;e+=2)if(Wo[e]>t)return Wo[e-1]<=t;return!1}function Ev(t){return t>=127462&&t<=127487}const wv=8205;function Xt(t,e,n=!0,r=!0){return(n?fk:J9)(t,e,r)}function fk(t,e,n){if(e==t.length)return e;e&&pk(t.charCodeAt(e))&&mk(t.charCodeAt(e-1))&&e--;let r=Sn(t,e);for(e+=dr(r);e<t.length;){let i=Sn(t,e);if(r==wv||i==wv||n&&Q9(i))e+=dr(i),r=i;else if(Ev(i)){let s=0,o=e-2;for(;o>=0&&Ev(Sn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function J9(t,e,n){for(;e>0;){let r=fk(t,e-2,n);if(r<e)return r;e--}return 0}function pk(t){return t>=56320&&t<57344}function mk(t){return t>=55296&&t<56320}function Sn(t,e){let n=t.charCodeAt(e);if(!mk(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return pk(r)?(n-55296<<10)+(r-56320)+65536:n}function Y_(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function dr(t){return t<65536?1:2}const lg=/\r\n?|\n/;var sn=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(sn||(sn={}));class qr{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){cg(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new qr(e)}composeDesc(e){return this.empty?e:e.empty?this:gk(this,e)}mapDesc(e,n=!1){return e.empty?this:ug(this,e,n)}mapPos(e,n=-1,r=sn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=sn.Simple&&c>=e&&(r==sn.TrackDel&&i<e&&c>e||r==sn.TrackBefore&&i<e||r==sn.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qr(e)}static create(e){return new qr(e)}}class Lt extends qr{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cg(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return ug(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(st.empty);r.push(o?e.slice(s,s+o):st.empty)}s+=o}return new Lt(n,r)}compose(e){return this.empty?e:e.empty?this:gk(this,e,!0)}map(e,n=!1){return e.empty?this:ug(this,e,n,!0)}iterChanges(e,n=!1){cg(this,e,n)}get desc(){return qr.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new Hl(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);rn(i,u,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;rn(n,u,h),h>0&&Fi(r,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);rn(n,u,-1),rn(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new Lt(n,r),filtered:qr.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<n&&rn(i,n-o,-1);let h=new Lt(i,s);a=a?a.compose(h.map(a)):h,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof Lt){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:d=h,insert:f}=u;if(h>d||h<0||d>n)throw new RangeError(`Invalid change range ${h} to ${d} (in doc of length ${n})`);let _=f?typeof f=="string"?st.of(f.split(r||lg)):f:st.empty,g=_.length;if(h==d&&g==0)return;h<o&&l(),h>o&&rn(i,h-o,-1),rn(i,d-h,g),Fi(s,i,_),o=d}}return c(e),l(!a),a}static empty(e){return new Lt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(st.empty);r[i]=st.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Lt(n,r)}static createSet(e,n){return new Lt(e,n)}}function rn(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Fi(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(st.empty);t.push(n)}}function cg(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,h=st.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,c,s,u,h),i=c,s=u}}}function ug(t,e,n,r=!1){let i=[],s=r?[]:null,o=new Hl(t),a=new Hl(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);rn(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(rn(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(rn(i,0,o.ins),s&&Fi(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;rn(i,c,l<o.i?o.ins:0),s&&l<o.i&&Fi(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?Lt.createSet(i,s):qr.create(i);throw new Error("Mismatched change set lengths")}}function gk(t,e,n=!1){let r=[],i=n?[]:null,s=new Hl(t),o=new Hl(e);for(let a=!1;;){if(s.done&&o.done)return i?Lt.createSet(r,i):qr.create(r);if(s.ins==0)rn(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)rn(r,0,o.ins,a),i&&Fi(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;rn(r,l,u,a),i&&u&&Fi(i,r,o.text)}else o.ins==-1?(rn(r,s.off?0:s.len,l,a),i&&Fi(i,r,s.textBit(l))):(rn(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Fi(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class Hl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?st.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?st.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class As{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new As(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return Ae.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return Ae.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ae.range(e.anchor,e.head)}static create(e,n,r){return new As(e,n,r)}}class Ae{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:Ae.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ae([this.main],0)}addRange(e,n=!0){return Ae.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,Ae.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ae(e.ranges.map(n=>As.fromJSON(n)),e.main)}static single(e,n=e){return new Ae([Ae.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Ae.normalized(e.slice(),n);r=s.to}return new Ae(e,n)}static cursor(e,n=0,r,i){return As.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?As.create(n,e,48|s):As.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?Ae.range(l,a):Ae.range(a,l))}}return new Ae(e,n)}}function _k(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let X_=0;class Ne{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=X_++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ne(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:Q_),!!e.static,e.enables)}of(e){return new gh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new gh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new gh(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function Q_(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class gh{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=X_++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=r(h),1},update(h,d){if(l&&d.docChanged||c&&(d.docChanged||d.selection)||hg(h,u)){let f=r(h);if(a?!Sv(f,h.values[o],i):!i(f,h.values[o]))return h.values[o]=f,1}return 0},reconfigure:(h,d)=>{let f,_=d.config.address[s];if(_!=null){let g=Jh(d,_);if(this.dependencies.every(m=>m instanceof Ne?d.facet(m)===h.facet(m):m instanceof Wt?d.field(m,!1)==h.field(m,!1):!0)||(a?Sv(f=r(h),g,i):i(f=r(h),g)))return h.values[o]=g,0}else f=r(h);return h.values[o]=f,1}}}}function Sv(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function hg(t,e){let n=!1;for(let r of e)ml(t,r)&1&&(n=!0);return n}function Z9(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let h=Jh(l,r[u]);if(i[u]==2)for(let d of h)c.push(d);else c.push(h)}return e.combine(c)}return{create(l){for(let c of r)ml(l,c);return l.values[o]=a(l),1},update(l,c){if(!hg(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=hg(l,r),h=c.config.facets[e.id],d=c.facet(e);if(h&&!u&&Q_(n,h))return l.values[o]=d,0;let f=a(l);return e.compare(f,d)?(l.values[o]=d,0):(l.values[o]=f,1)}}}const Tv=Ne.define({static:!0});class Wt{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Wt(X_++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Tv).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}init(e){return[this,Tv.of({field:this,create:e})]}get extension(){return this}}const vs={lowest:4,low:3,default:2,high:1,highest:0};function Na(t){return e=>new bk(e,t)}const ss={highest:Na(vs.highest),high:Na(vs.high),default:Na(vs.default),low:Na(vs.low),lowest:Na(vs.lowest)};class bk{constructor(e,n){this.inner=e,this.prec=n}}class ba{of(e){return new dg(this,e)}reconfigure(e){return ba.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dg{constructor(e,n){this.compartment=e,this.inner=n}}class Qh{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let d of e7(e,n,o))d instanceof Wt?i.push(d):(s[d.facet.id]||(s[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],c=[];for(let d of i)a[d.id]=c.length<<1,c.push(f=>d.slot(f));let u=r?.config.facets;for(let d in s){let f=s[d],_=f[0].facet,g=u&&u[d]||[];if(f.every(m=>m.type==0))if(a[_.id]=l.length<<1|1,Q_(g,f))l.push(r.facet(_));else{let m=_.combine(f.map(p=>p.value));l.push(r&&_.compare(m,r.facet(_))?r.facet(_):m)}else{for(let m of f)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=c.length<<1,c.push(p=>m.dynamicSlot(p)));a[_.id]=c.length<<1,c.push(m=>Z9(m,_,f))}}let h=c.map(d=>d(a));return new Qh(e,o,h,a,l,s)}}function e7(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof dg&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof dg){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof bk)s(o.inner,o.prec);else if(o instanceof Wt)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof gh)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,vs.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,vs.default),r.reduce((o,a)=>o.concat(a))}function ml(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Jh(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yk=Ne.define(),fg=Ne.define({combine:t=>t.some(e=>e),static:!0}),vk=Ne.define({combine:t=>t.length?t[0]:void 0,static:!0}),Ek=Ne.define(),wk=Ne.define(),Sk=Ne.define(),Tk=Ne.define({combine:t=>t.length?t[0]:!1});class vi{constructor(e,n){this.type=e,this.value=n}static define(){return new t7}}class t7{of(e){return new vi(this,e)}}class n7{constructor(e){this.map=e}of(e){return new Xe(this,e)}}class Xe{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Xe(this.type,n)}is(e){return this.type==e}static define(e={}){return new n7(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Xe.reconfigure=Xe.define();Xe.appendConfig=Xe.define();class Ot{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&_k(r,n.newLength),s.some(a=>a.type==Ot.time)||(this.annotations=s.concat(Ot.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Ot(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ot.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ot.time=vi.define();Ot.userEvent=vi.define();Ot.addToHistory=vi.define();Ot.remote=vi.define();function r7(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Ck(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Lt.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Xe.mapEffects(t.effects,i).concat(Xe.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function pg(t,e,n){let r=e.selection,i=Go(e.annotations);return e.userEvent&&(i=i.concat(Ot.userEvent.of(e.userEvent))),{changes:e.changes instanceof Lt?e.changes:Lt.of(e.changes||[],n,t.facet(vk)),selection:r&&(r instanceof Ae?r:Ae.single(r.anchor,r.head)),effects:Go(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function xk(t,e,n){let r=pg(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=Ck(r,pg(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Ot.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return s7(n?i7(i):i)}function i7(t){let e=t.startState,n=!0;for(let i of e.facet(Ek)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:r7(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Lt.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ot.create(e,i,t.selection&&t.selection.map(s),Xe.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(wk);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Ot?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ot?t=s[0]:t=xk(e,Go(s),!1)}return t}function s7(t){let e=t.startState,n=e.facet(Sk),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=Ck(r,pg(e,s,t.changes.newLength),!0))}return r==t?t:Ot.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const o7=[];function Go(t){return t==null?o7:Array.isArray(t)?t:[t]}var It=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(It||(It={}));const a7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let mg;try{mg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function l7(t){if(mg)return mg.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||a7.test(n)))return!0}return!1}function c7(t){return e=>{if(!/\S/.test(e))return It.Space;if(l7(e))return It.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return It.Word;return It.Other}}class tt{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)ml(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return ml(this,r),Jh(this,r)}update(...e){return xk(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(ba.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,c)=>i.set(c,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Xe.reconfigure)?(n=null,r=a.value):a.is(Xe.appendConfig)&&(n=null,r=Go(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=Qh.resolve(r,i,this),s=new tt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(fg)?e.newSelection:e.newSelection.asSingle();new tt(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:Ae.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=Go(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let d=0;d<a;d++)s[d]=s[d].map(u);let h=i.mapDesc(c,!0);s.push(l.range.map(h)),i=i.compose(u),o=Xe.mapEffects(o,u).concat(Xe.mapEffects(Go(l.effects),h))}return{changes:i,selection:Ae.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Lt?e:Lt.of(e,this.doc.length,this.facet(tt.lineSeparator))}toText(e){return st.of(e.split(this.facet(tt.lineSeparator)||lg))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ml(this,n),Jh(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Wt&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return tt.create({doc:e.doc,selection:Ae.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=Qh.resolve(e.extensions||[],new Map),r=e.doc instanceof st?e.doc:st.of((e.doc||"").split(n.staticFacet(tt.lineSeparator)||lg)),i=e.selection?e.selection instanceof Ae?e.selection:Ae.single(e.selection.anchor,e.selection.head):Ae.single(0);return _k(i,r.length),n.staticFacet(fg)||(i=i.asSingle()),new tt(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(tt.tabSize)}get lineBreak(){return this.facet(tt.lineSeparator)||`
`}get readOnly(){return this.facet(Tk)}phrase(e,...n){for(let r of this.facet(tt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(yk))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return c7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Xt(n,o,!1);if(s(n.slice(l,o))!=It.Word)break;o=l}for(;a<i;){let l=Xt(n,a);if(s(n.slice(a,l))!=It.Word)break;a=l}return o==a?null:Ae.range(o+r,a+r)}}tt.allowMultipleSelections=fg;tt.tabSize=Ne.define({combine:t=>t.length?t[0]:4});tt.lineSeparator=vk;tt.readOnly=Tk;tt.phrases=Ne.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});tt.languageData=yk;tt.changeFilter=Ek;tt.transactionFilter=wk;tt.transactionExtender=Sk;ba.reconfigure=Xe.define();function no(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ws{eq(e){return this==e}range(e,n=e){return gg.create(e,n,this)}}Ws.prototype.startSide=Ws.prototype.endSide=0;Ws.prototype.point=!1;Ws.prototype.mapMode=sn.TrackDel;let gg=class Ak{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Ak(e,n,r)}};function _g(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class J_{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,d,f;if(u==h){let _=n.mapPos(u,c.startSide,c.mapMode);if(_==null||(d=f=_,c.startSide!=c.endSide&&(f=n.mapPos(u,c.endSide),f<d)))continue}else if(d=n.mapPos(u,c.startSide),f=n.mapPos(h,c.endSide),d>f||d==f&&c.startSide>0&&c.endSide<=0)continue;(f-d||c.endSide-c.startSide)<0||(o<0&&(o=d),c.point&&(a=Math.max(a,f-d)),r.push(c),i.push(d-o),s.push(f-o))}return{mapped:r.length?new J_(i,s,r,a):null,pos:o}}}class rt{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new rt(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(_g)),this.isEmpty)return n.length?rt.of(n):this;let a=new kk(this,null,-1).goto(0),l=0,c=[],u=new Gs;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let h=n[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(gg.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?rt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),n.push(u),r.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new rt(r,n,s||rt.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return Ul.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Ul.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=Cv(o,a,r),c=new Ba(o,l,s),u=new Ba(a,l,s);r.iterGaps((h,d,f)=>xv(c,h,u,d,f,i)),r.empty&&r.length==0&&xv(c,0,u,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Cv(s,o),l=new Ba(s,a,0).goto(r),c=new Ba(o,a,0).goto(r);for(;;){if(l.to!=c.to||!bg(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,n,r,i,s=-1){let o=new Ba(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Gs;for(let i of e instanceof gg?[e]:n?u7(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return rt.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=rt.empty;i=i.nextLayer)n=new rt(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}rt.empty=new rt([],[],null,-1);function u7(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(_g(e,r)>0)return t.slice().sort(_g);e=r}return t}rt.empty.nextLayer=rt.empty;class Gs{finishChunk(e){this.chunks.push(new J_(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Gs)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(rt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=rt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Cv(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class kk{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ul{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new kk(o,n,r,s));return i.length==1?i[0]:new Ul(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)vp(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)vp(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vp(this.heap,0)}}}function vp(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class Ba{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ul.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){vu(this.active,e),vu(this.activeTo,e),vu(this.activeRank,e),this.minActive=Av(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;Eu(this.active,n,r),Eu(this.activeTo,n,i),Eu(this.activeRank,n,s),e&&Eu(e,n,this.cursor.from),this.minActive=Av(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&vu(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function xv(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,h=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&bg(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,h,t.point,n.point):h>a&&!bg(t.active,n.active)&&s.compareRange(a,h,t.active,n.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function bg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function vu(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Eu(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function Av(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function uf(t,e,n=t.length){let r=0;for(let i=0;i<n;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Xt(t,i));return r}function h7(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=Xt(t,i)}return r===!0?-1:t.length}const yg="",kv=typeof Symbol>"u"?"__"+yg:Symbol.for(yg),vg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Xi{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),d=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let f in a){let _=a[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),_,l);else if(_&&typeof _=="object"){if(!h)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),_,u,d)}else _!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+_+";")}(u.length||d)&&l.push((r&&!h&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Rv[kv]||1;return Rv[kv]=e+1,yg+e.toString(36)}static mount(e,n,r){let i=e[vg],s=r&&r.nonce;i?s&&i.setNonce(s):i=new d7(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let Pv=new Map;class d7{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=Pv.get(r);if(s)return e[vg]=s;this.sheet=new i.CSSStyleSheet,Pv.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[vg]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Qi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},jl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},f7=typeof navigator<"u"&&/Mac/.test(navigator.platform),p7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Kt=0;Kt<10;Kt++)Qi[48+Kt]=Qi[96+Kt]=String(Kt);for(var Kt=1;Kt<=24;Kt++)Qi[Kt+111]="F"+Kt;for(var Kt=65;Kt<=90;Kt++)Qi[Kt]=String.fromCharCode(Kt+32),jl[Kt]=String.fromCharCode(Kt);for(var Ep in Qi)jl.hasOwnProperty(Ep)||(jl[Ep]=Qi[Ep]);function m7(t){var e=f7&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||p7&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?jl:Qi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function zl(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Eg(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function g7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function _h(t,e){if(!e.anchorNode)return!1;try{return Eg(t,e.anchorNode)}catch{return!1}}function Vl(t){return t.nodeType==3?qs(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function gl(t,e,n,r){return n?Dv(t,e,n,r,-1)||Dv(t,e,n,r,1):!1}function $s(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Zh(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function Dv(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:mi(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=$s(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?mi(t):0}else return!1}}function mi(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Z_(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function _7(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Rk(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function b7(t,e,n,r,i,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let d,f=u==l.body,_=1,g=1;if(f)d=_7(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:_,scaleY:g}=Rk(u,b)),d={left:b.left,right:b.left+u.clientWidth*_,top:b.top,bottom:b.top+u.clientHeight*g}}let m=0,p=0;if(i=="nearest")e.top<d.top?(p=-(d.top-e.top+o),n>0&&e.bottom>d.bottom+p&&(p=e.bottom-d.bottom+p+o)):e.bottom>d.bottom&&(p=e.bottom-d.bottom+o,n<0&&e.top-p<d.top&&(p=-(d.top+p-e.top+o)));else{let b=e.bottom-e.top,y=d.bottom-d.top;p=(i=="center"&&b<=y?e.top+b/2-y/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-y+o)-d.top}if(r=="nearest"?e.left<d.left?(m=-(d.left-e.left+s),n>0&&e.right>d.right+m&&(m=e.right-d.right+m+s)):e.right>d.right&&(m=e.right-d.right+s,n<0&&e.left<d.left+m&&(m=-(d.left+m-e.left+s))):m=(r=="center"?e.left+(e.right-e.left)/2-(d.right-d.left)/2:r=="start"==a?e.left-s:e.right-(d.right-d.left)+s)-d.left,m||p)if(f)c.scrollBy(m,p);else{let b=0,y=0;if(p){let v=u.scrollTop;u.scrollTop+=p/g,y=(u.scrollTop-v)*g}if(m){let v=u.scrollLeft;u.scrollLeft+=m/_,b=(u.scrollLeft-v)*_}e={left:e.left-b,top:e.top-y,right:e.right-b,bottom:e.bottom-y},b&&Math.abs(b-m)<1&&(r="nearest"),y&&Math.abs(y-p)<1&&(i="nearest")}if(f)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function y7(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class v7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?mi(n):0),r,Math.min(e.focusOffset,r?mi(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let go=null;function Pk(t){if(t.setActive)return t.setActive();if(go)return t.focus(go);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(go==null?{get preventScroll(){return go={preventScroll:!0},!0}}:void 0),!go){go=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Ov;function qs(t,e,n=e){let r=Ov||(Ov=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function $o(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function E7(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Dk(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function w7(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,mi(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=mi(n))}else{if(n==t)return!0;r=$s(n),n=n.parentNode}}function Ok(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Ik(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=mi(n)}else if(n.parentNode&&!Zh(n))r=$s(n),n=n.parentNode;else return null}}function Lk(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!Zh(n))r=$s(n)+1,n=n.parentNode;else return null}}class on{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new on(e.parentNode,$s(e),n)}static after(e,n){return new on(e.parentNode,$s(e)+1,n)}}const eb=[];class ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=ut.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=Iv(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=Iv(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=mi(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ut.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let h=this.children[l],d=c+h.length;if(c<e&&d>n)return h.domBoundsAround(e,n,c);if(d>=e&&i==-1&&(i=l,s=c),c>n&&h.dom.parentNode==this.dom){o=l,a=u;break}u=d,c=d+h.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=eb){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Mk(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ut.prototype.breakAfter=0;function Iv(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Mk{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Nk(t,e,n,r,i,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,h=s.length?s[s.length-1]:null,d=h?h.breakAfter:o;if(!(e==r&&u&&!o&&!d&&s.length<2&&u.merge(n,i,s.length?h:null,n==0,a,l))){if(r<c.length){let f=c[r];f&&(i<f.length||f.breakAfter&&h?.breakAfter)?(e==r&&(f=f.split(i),i=0),!d&&h&&f.merge(0,i,h,!0,0,l)?s[s.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,l),s.push(f))):f?.breakAfter&&(h?h.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function Bk(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),h=e-n;for(let d of r)h+=d.length;t.length+=h,Nk(t,c,u,a,l,r,0,i,s)}let Tn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wg=typeof document<"u"?document:{documentElement:{style:{}}};const Sg=/Edge\/(\d+)/.exec(Tn.userAgent),Fk=/MSIE \d/.test(Tn.userAgent),Tg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tn.userAgent),hf=!!(Fk||Tg||Sg),Lv=!hf&&/gecko\/(\d+)/i.test(Tn.userAgent),wp=!hf&&/Chrome\/(\d+)/.exec(Tn.userAgent),Mv="webkitFontSmoothing"in wg.documentElement.style,Hk=!hf&&/Apple Computer/.test(Tn.vendor),Nv=Hk&&(/Mobile\/\w+/.test(Tn.userAgent)||Tn.maxTouchPoints>2);var Le={mac:Nv||/Mac/.test(Tn.platform),windows:/Win/.test(Tn.platform),linux:/Linux|X11/.test(Tn.platform),ie:hf,ie_version:Fk?wg.documentMode||6:Tg?+Tg[1]:Sg?+Sg[1]:0,gecko:Lv,gecko_version:Lv?+(/Firefox\/(\d+)/.exec(Tn.userAgent)||[0,0])[1]:0,chrome:!!wp,chrome_version:wp?+wp[1]:0,ios:Nv,android:/Android\b/.test(Tn.userAgent),webkit:Mv,safari:Hk,webkit_version:Mv?+(/\bAppleWebKit\/(\d+)/.exec(Tn.userAgent)||[0,0])[1]:0,tabSize:wg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const S7=256;class yr extends ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof yr)||this.length-(n-e)+r.length>S7||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new yr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new on(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return T7(this.dom,e,n)}}class gi extends ut{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Dk(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof gi&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Bk(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new gi(this.mark,n,o)}domAtPos(e){return Uk(this,e)}coordsAt(e,n){return zk(this,e,n)}}function T7(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?Le.chrome||Le.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=qs(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Le.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Z_(l,o<0):l||null}class ks extends ut{static create(e,n,r){return new ks(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=ks.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof ks)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof ks&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return st.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):st.empty}domAtPos(e){return(this.length?e==0:this.side>0)?on.before(this.dom):on.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Z_(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class oa extends ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof oa&&e.side==this.side}split(){return new oa(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?on.before(this.dom):on.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return st.empty}get isHidden(){return!0}}yr.prototype.children=ks.prototype.children=oa.prototype.children=eb;function Uk(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new on(n,0)}function jk(t,e,n){let r,{children:i}=t;n>0&&e instanceof gi&&i.length&&(r=i[i.length-1])instanceof gi&&r.mark.eq(e.mark)?jk(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function zk(t,e,n){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let h=0,d=0;h<c.children.length&&d<=u;h++){let f=c.children[h],_=d+f.length;_>=u&&(f.children.length?a(f,u-d):(!s||s.isHidden&&n>0)&&(_>u||d==_&&f.getSide()>0)?(s=f,o=u-d):(d<u||d==_&&f.getSide()<0&&!f.isHidden)&&(r=f,i=u-d)),d=_}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):C7(t)}function C7(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Vl(e);return n[n.length-1]||null}function Cg(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Bv=Object.create(null);function ed(t,e,n){if(t==e)return!0;t||(t=Bv),e||(e=Bv);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function xg(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function x7(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Pt extends ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof Pt))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Bk(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new Pt;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ed(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){jk(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=Cg(n,this.attrs||{})),r&&(this.attrs=Cg({class:r},this.attrs||{}))}domAtPos(e){return Uk(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Dk(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(xg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&ut.get(i)instanceof gi;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=ut.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Le.ios||!this.children.some(s=>s instanceof yr))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof yr)||/[^ -~]/.test(r.text))return null;let i=Vl(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=zk(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof Pt&&this.children.length==0&&e.children.length==0&&ed(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof Pt)return s;if(o>n)break}i=o+s.breakAfter}return null}}class ci extends ut{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof ci)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?on.before(this.dom):on.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new ci(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return eb}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):st.empty}domBoundsAround(){return null}become(e){return e instanceof ci&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class ya{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var _n=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(_n||(_n={}));class Ze extends Ws{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Lc(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Ji(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=Vk(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new Ji(e,r,i,n,e.widget||null,!0)}static line(e){return new Mc(e)}static set(e,n=!1){return rt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ze.none=rt.empty;class Lc extends Ze{constructor(e){let{start:n,end:r}=Vk(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Lc&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&ed(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Lc.prototype.point=!1;class Mc extends Ze{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Mc&&this.spec.class==e.spec.class&&ed(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Mc.prototype.mapMode=sn.TrackBefore;Mc.prototype.point=!0;class Ji extends Ze{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?sn.TrackBefore:sn.TrackAfter:sn.TrackDel}get type(){return this.startSide!=this.endSide?_n.WidgetRange:this.startSide<=0?_n.WidgetBefore:_n.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ji&&A7(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Ji.prototype.point=!0;function Vk(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function A7(t,e){return t==e||!!(t&&e&&t.compare(e))}function Ag(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class _l{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ci&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Pt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wu(new oa(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ci)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(wu(new yr(this.text.slice(this.textOff,this.textOff+i)),n),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Ji){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof Ji)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ci(r.widget||aa.block,a,r));else{let l=ks.create(r.widget||aa.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(h.append(wu(new oa(1),i),s),s=i.length+Math.max(0,s-i.length)),h.append(wu(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new _l(e,n,r,s);return o.openEnd=rt.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function wu(t,e){for(let n of e)t=new gi(n,[t],t.length);return t}class aa extends ya{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}aa.inline=new aa("span");aa.block=new aa("div");var vt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(vt||(vt={}));const Ks=vt.LTR,tb=vt.RTL;function Wk(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const k7=Wk("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),R7=Wk("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),kg=Object.create(null),Cr=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);kg[e]=n,kg[n]=-e}function Gk(t){return t<=247?k7[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?R7[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const P7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Hi{get dir(){return this.level%2?tb:Ks}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function $k(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!$k(r.inner,i.inner))return!1}return!0}const ct=[];function D7(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let c=o,u=l,h=l;c<a;c++){let d=Gk(t.charCodeAt(c));d==512?d=u:d==8&&h==4&&(d=16),ct[c]=d==4?2:d,d&7&&(h=d),u=d}for(let c=o,u=l,h=l;c<a;c++){let d=ct[c];if(d==128)c<a-1&&u==ct[c+1]&&u&24?d=ct[c]=u:ct[c]=256;else if(d==64){let f=c+1;for(;f<a&&ct[f]==64;)f++;let _=c&&u==8||f<n&&ct[f]==8?h==1?1:8:256;for(let g=c;g<f;g++)ct[g]=_;c=f-1}else d==8&&h==1&&(ct[c]=1);u=d,d&7&&(h=d)}}}function O7(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let h=c,d,f,_;h<u;h++)if(f=kg[d=t.charCodeAt(h)])if(f<0){for(let g=a-3;g>=0;g-=3)if(Cr[g+1]==-f){let m=Cr[g+2],p=m&2?i:m&4?m&1?s:i:0;p&&(ct[h]=ct[Cr[g]]=p),a=g;break}}else{if(Cr.length==189)break;Cr[a++]=h,Cr[a++]=d,Cr[a++]=l}else if((_=ct[h])==2||_==1){let g=_==i;l=g?0:1;for(let m=a-3;m>=0;m-=3){let p=Cr[m+2];if(p&2)break;if(g)Cr[m+2]|=2;else{if(p&4)break;Cr[m+2]|=4}}}}}function I7(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let c=ct[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==n.length)break;u=n[i++].to,a=i<n.length?n[i].from:e}else if(ct[u]==256)u++;else break;let h=s==1,d=(u<e?ct[u]:r)==1,f=h==d?h?1:2:r;for(let _=u,g=i,m=g?n[g-1].to:t;_>l;)_==m&&(_=n[--g].from,m=g?n[g-1].to:t),ct[--_]=f;l=u}else s=c,l++}}}function Rg(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,c=0;l<n;){let u=!0,h=!1;if(c==s.length||l<s[c].from){let g=ct[l];g!=a&&(u=!1,h=g==16)}let d=!u&&a==1?[]:null,f=u?r:r+1,_=l;e:for(;;)if(c<s.length&&_==s[c].from){if(h)break e;let g=s[c];if(!u)for(let m=g.to,p=c+1;;){if(m==n)break e;if(p<s.length&&s[p].from==m)m=s[p++].to;else{if(ct[m]==a)break e;break}}if(c++,d)d.push(g);else{g.from>l&&o.push(new Hi(l,g.from,f));let m=g.direction==Ks!=!(f%2);Pg(t,m?r+1:r,i,g.inner,g.from,g.to,o),l=g.to}_=g.to}else{if(_==n||(u?ct[_]!=a:ct[_]==a))break;_++}d?Rg(t,l,_,r+1,i,d,o):l<_&&o.push(new Hi(l,_,f)),l=_}else for(let l=n,c=s.length;l>e;){let u=!0,h=!1;if(!c||l>s[c-1].to){let g=ct[l-1];g!=a&&(u=!1,h=g==16)}let d=!u&&a==1?[]:null,f=u?r:r+1,_=l;e:for(;;)if(c&&_==s[c-1].to){if(h)break e;let g=s[--c];if(!u)for(let m=g.from,p=c;;){if(m==e)break e;if(p&&s[p-1].to==m)m=s[--p].from;else{if(ct[m-1]==a)break e;break}}if(d)d.push(g);else{g.to<l&&o.push(new Hi(g.to,l,f));let m=g.direction==Ks!=!(f%2);Pg(t,m?r+1:r,i,g.inner,g.from,g.to,o),l=g.from}_=g.from}else{if(_==e||(u?ct[_-1]!=a:ct[_-1]==a))break;_--}d?Rg(t,_,l,r+1,i,d,o):_<l&&o.push(new Hi(_,l,f)),l=_}}function Pg(t,e,n,r,i,s,o){let a=e%2?2:1;D7(t,i,s,r,a),O7(t,i,s,r,a),I7(i,s,r,a),Rg(t,i,s,e,n,r,o)}function L7(t,e,n){if(!t)return[new Hi(0,0,e==tb?1:0)];if(e==Ks&&!n.length&&!P7.test(t))return qk(t.length);if(n.length)for(;t.length>ct.length;)ct[ct.length]=256;let r=[],i=e==Ks?0:1;return Pg(t,i,i,n,0,t.length,r),r}function qk(t){return[new Hi(0,t,0)]}let Kk="";function M7(t,e,n,r,i){var s;let o=r.head-t.from,a=Hi.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],c=l.side(i,n);if(o==c){let d=a+=i?1:-1;if(d<0||d>=e.length)return null;l=e[a=d],o=l.side(!i,n),c=l.side(i,n)}let u=Xt(t.text,o,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),Kk=t.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?Ae.cursor(h.side(!i,n)+t.from,h.forward(i,n)?1:-1,h.level):Ae.cursor(u+t.from,l.forward(i,n)?-1:1,l.level)}function N7(t,e,n){for(let r=e;r<n;r++){let i=Gk(t.charCodeAt(r));if(i==1)return Ks;if(i==2||i==4)return tb}return Ks}const Yk=Ne.define(),Xk=Ne.define(),Qk=Ne.define(),Jk=Ne.define(),Dg=Ne.define(),Zk=Ne.define(),e2=Ne.define(),t2=Ne.define({combine:t=>t.some(e=>e)}),n2=Ne.define({combine:t=>t.some(e=>e)}),r2=Ne.define();class qo{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new qo(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new qo(Ae.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Su=Xe.define({map:(t,e)=>t.map(e)}),i2=Xe.define();function Un(t,e,n){let r=t.facet(Jk);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Ii=Ne.define({combine:t=>t.length?t[0]:!0});let B7=0;const Qa=Ne.define();class Qt{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Qt(B7++,e,r,i,a=>{let l=[Qa.of(a)];return o&&l.push(Wl.of(c=>{let u=c.plugin(a);return u?o(u):Ze.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Qt.define(r=>new e(r),n)}}class Sp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Un(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Un(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Un(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const s2=Ne.define(),df=Ne.define(),Wl=Ne.define(),o2=Ne.define(),nb=Ne.define(),a2=Ne.define();function Fv(t,e){let n=t.state.facet(a2);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return rt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,h=i;for(let d=a.length-1;d>=0;d--,l--){let f=a[d].spec.bidiIsolate,_;if(f==null&&(f=N7(e.text,c,u)),l>0&&h.length&&(_=h[h.length-1]).to==c&&_.direction==f)_.to=u,h=_.inner;else{let g={from:c,to:u,direction:f,inner:[]};h.push(g),h=g.inner}}}}),i}const l2=Ne.define();function c2(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(l2)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const Ja=Ne.define();class er{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new er(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let h=n[s],d=n[s+1],f=Math.max(a,h),_=Math.min(u,d);if(f<=_&&new er(f+c,_+c,f,_).addToSet(r),d>u)break;s+=2}if(!l)return r;new er(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class td{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Lt.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new er(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new td(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Hv extends ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ze.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new er(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!W7(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?H7(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new er(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Le.ie||Le.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=z7(o,a,e.changes);return r=er.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Le.chrome||Le.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ci&&o.widget instanceof Uv&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:h}=a,d,f,_,g;if(r&&r.range.fromB<h&&r.range.toB>u){let v=_l.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),E=_l.build(this.view.state.doc,r.range.toB,h,this.decorations,this.dynamicDecorationMap);f=v.breakAtStart,_=v.openStart,g=E.openEnd;let w=this.compositionView(r);E.breakAtStart?w.breakAfter=1:E.content.length&&w.merge(w.length,w.length,E.content[0],!1,E.openStart,0)&&(w.breakAfter=E.content[0].breakAfter,E.content.shift()),v.content.length&&w.merge(0,0,v.content[v.content.length-1],!0,0,v.openEnd)&&v.content.pop(),d=v.content.concat(w).concat(E.content)}else({content:d,breakAtStart:f,openStart:_,openEnd:g}=_l.build(this.view.state.doc,u,h,this.decorations,this.dynamicDecorationMap));let{i:m,off:p}=s.findPos(c,1),{i:b,off:y}=s.findPos(l,-1);Nk(this,b,y,m,p,d,f,_,g)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(i2)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new yr(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new gi(i,[n],n.length);let r=new Pt;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=ut.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&_h(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Le.gecko&&a.empty&&!this.hasComposition&&F7(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=c=new on(h,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!gl(l.node,l.offset,u.anchorNode,u.anchorOffset)||!gl(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Le.android&&Le.chrome&&this.dom.contains(u.focusNode)&&V7(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=zl(this.view.root);if(h)if(a.empty){if(Le.gecko){let d=U7(l.node,l.offset);if(d&&d!=3){let f=(d==1?Ik:Lk)(l.node,l.offset);f&&(l=new on(f.node,f.offset))}}h.collapse(l.node,l.offset),a.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=a.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(c.node,c.offset)}catch{}}else{let d=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),d.setEnd(c.node,c.offset),d.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(d)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new on(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new on(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&gl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=zl(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=Pt.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=ut.get(n.childNodes[i]);s instanceof Pt&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=ut.get(n.childNodes[i]);s instanceof Pt&&(r=s.domAtPos(s.length))}return r?new on(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=ut.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof Pt)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof Pt&&!(r instanceof Pt&&n>=0)))r=a,i=c;else if(r&&c==e&&l==e&&a instanceof ci&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=c}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof Pt))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof yr))return null;let s=Xt(i.text,r);if(s==r)return null;let o=qs(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==vt.LTR;for(let c=0,u=0;u<this.children.length;u++){let h=this.children[u],d=c+h.length;if(d>i)break;if(c>=r){let f=h.dom.getBoundingClientRect();if(n.push(f.height),o){let _=h.dom.lastChild,g=_?Vl(_):[];if(g.length){let m=g[g.length-1],p=l?m.right-f.left:f.right-m.left;p>a&&(a=p,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=d)}}}c=d+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?vt.RTL:vt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Pt){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Vl(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Mk(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Ze.replace({widget:new Uv(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ze.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Wl).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(o2).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(rt.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(r2))try{if(c(this.view,e.range,e))return!0}catch(u){Un(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=c2(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;b7(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==vt.LTR)}}function F7(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class Uv extends ya{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function u2(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Ik(n.focusNode,n.focusOffset),i=Lk(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=ut.get(i.node);if(!a||a instanceof yr&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=ut.get(r.node);!l||l instanceof yr&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function H7(t,e,n){let r=u2(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new er(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let h=i.parentNode;;h=h.parentNode){let d=ut.get(h);if(d instanceof gi)u.push({node:h,deco:d.mark});else{if(d instanceof Pt||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:h};if(h!=t.contentDOM)u.push({node:h,deco:new Lc({inclusive:!0,attributes:x7(h),tagName:h.tagName.toLowerCase()})});else return null}}}function U7(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let j7=class{constructor(){this.changes=[]}compareRange(e,n){Ag(e,n,this.changes)}comparePoint(e,n){Ag(e,n,this.changes)}};function z7(t,e,n){let r=new j7;return rt.compare(t,e,n,r),r.changes}function V7(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function W7(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function G7(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return Ae.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=Xt(i.text,s,!1):a=Xt(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Xt(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Xt(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return Ae.range(o+i.from,a+i.from)}function $7(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function q7(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Tp(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function jv(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function zv(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Og(t,e,n){let r,i,s,o,a=!1,l,c,u,h;for(let _=t.firstChild;_;_=_.nextSibling){let g=Vl(_);for(let m=0;m<g.length;m++){let p=g[m];i&&Tp(i,p)&&(p=jv(zv(p,i.bottom),i.top));let b=$7(e,p),y=q7(n,p);if(b==0&&y==0)return _.nodeType==3?Vv(_,e,n):Og(_,e,n);if(!r||o>y||o==y&&s>b){r=_,i=p,s=b,o=y;let v=y?n<p.top?-1:1:b?e<p.left?-1:1:0;a=!v||(v>0?m<g.length-1:m>0)}b==0?n>p.bottom&&(!u||u.bottom<p.bottom)?(l=_,u=p):n<p.top&&(!h||h.top>p.top)&&(c=_,h=p):u&&Tp(u,p)?u=zv(u,p.bottom):h&&Tp(h,p)&&(h=jv(h,p.top))}}if(u&&u.bottom>=n?(r=l,i=u):h&&h.top<=n&&(r=c,i=h),!r)return{node:t,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Vv(r,d,n);if(a&&r.contentEditable!="false")return Og(r,d,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:f}}function Vv(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=qs(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let h=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&h<s){let d=e>=(u.left+u.right)/2,f=d;if((Le.chrome||Le.gecko)&&qs(t,a).getBoundingClientRect().left==u.right&&(f=!d),h<=0)return{node:t,offset:a+(f?1:0)};i=a+(f?1:0),s=h}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function h2(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:h}=e,d=h-a;if(d<0)return 0;if(d>c)return t.state.doc.length;for(let v=t.viewState.heightOracle.textHeight/2,E=!1;l=t.elementAtHeight(d),l.type!=_n.Text;)for(;d=r>0?l.bottom+v:l.top-v,!(d>=0&&d<=c);){if(E)return n?null:0;E=!0,r=-r}h=a+d;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:Wv(t,o,l,u,h);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Wv(t,o,l,u,h);let _=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:_,m=g.elementFromPoint(u,h);m&&!t.contentDOM.contains(m)&&(m=null),m||(u=Math.max(o.left+1,Math.min(o.right-1,u)),m=g.elementFromPoint(u,h),m&&!t.contentDOM.contains(m)&&(m=null));let p,b=-1;if(m&&((i=t.docView.nearest(m))===null||i===void 0?void 0:i.isEditable)!=!1){if(_.caretPositionFromPoint){let v=_.caretPositionFromPoint(u,h);v&&({offsetNode:p,offset:b}=v)}else if(_.caretRangeFromPoint){let v=_.caretRangeFromPoint(u,h);v&&({startContainer:p,startOffset:b}=v,(!t.contentDOM.contains(p)||Le.safari&&K7(p,b,u)||Le.chrome&&Y7(p,b,u))&&(p=void 0))}}if(!p||!t.docView.dom.contains(p)){let v=Pt.find(t.docView,f);if(!v)return d>l.top+l.height/2?l.to:l.from;({node:p,offset:b}=Og(v.dom,u,h))}let y=t.docView.nearest(p);if(!y)return null;if(y.isWidget&&((s=y.dom)===null||s===void 0?void 0:s.nodeType)==1){let v=y.dom.getBoundingClientRect();return e.y<v.top||e.y<=v.bottom&&e.x<=(v.left+v.right)/2?y.posAtStart:y.posAtEnd}else return y.localPosFromDOM(p,b)+y.posAtStart}function Wv(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+h7(o,s,t.state.tabSize)}function K7(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let i=t.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return qs(t,r-1,r).getBoundingClientRect().left>n}function Y7(t,e,n){if(e!=0)return!1;for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():qs(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function Ig(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==_n.Text))return r}return n}function X7(t,e,n,r){let i=Ig(t,e.head),s=!r||i.type!=_n.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==vt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return Ae.cursor(l,n?-1:1)}return Ae.cursor(n?i.to:i.from,n?-1:1)}function Gv(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let c=M7(i,s,o,a,n),u=Kk;if(!c){if(i.number==(n?t.state.doc.lines:1))return a;u=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),c=t.visualLineSide(i,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function Q7(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==It.Space&&(i=o),i==o}}function J7(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return Ae.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let f=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-f.from))),a=(s<0?f.top:f.bottom)+u}let h=l.left+o,d=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let _=a+(d+f)*s,g=h2(t,{x:h,y:_},!1,s);if(_<l.top||_>l.bottom||(s<0?g<i:g>i)){let m=t.docView.coordsForChar(g),p=!m||_<m.top?-1:1;return Ae.cursor(g,p,void 0,o)}}}function bh(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Cp(t,e,n){let r=bh(t.state.facet(nb).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:Ae.cursor(r,r<n.from?1:-1)}class Z7{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Le.safari&&e.contentDOM.addEventListener("input",()=>null),Le.gecko&&mj(e.contentDOM.ownerDocument)}handleEvent(e){!aj(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=ej(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&f2.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Le.android&&Le.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Le.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=d2.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||tj.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,$o(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Le.safari&&!Le.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function $v(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Un(n.state,i)}}}function ej(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&n(s).handlers.push($v(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&n(s).observers.push($v(r.value,o))}}for(let r in vr)n(r).handlers.push(vr[r]);for(let r in sr)n(r).observers.push(sr[r]);return e}const d2=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tj="dthko",f2=[16,17,18,20,91,92,224,225],Tu=6;function Cu(t){return Math.max(0,t)*.7+8}function nj(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class rj{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=y7(e.contentDOM),this.atoms=e.state.facet(nb).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(tt.allowMultipleSelections)&&ij(e,n),this.dragging=oj(e,n)&&_2(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&nj(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let r=0,i=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=c2(this.view);e.clientX-o.left<=s.left+Tu?r=-Cu(s.left-e.clientX):e.clientX+o.right>=s.right-Tu&&(r=Cu(e.clientX-s.right)),e.clientY-o.top<=s.top+Tu?i=-Cu(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-Tu&&(i=Cu(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=bh(this.atoms,i.from,0);o!=i.from&&(s=Ae.cursor(o,-1))}else{let o=bh(this.atoms,i.from,-1),a=bh(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=Ae.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?Ae.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ij(t,e){let n=t.state.facet(Yk);return n.length?n[0](e):Le.mac?e.metaKey:e.ctrlKey}function sj(t,e){let n=t.state.facet(Xk);return n.length?n[0](e):Le.mac?!e.altKey:!e.ctrlKey}function oj(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=zl(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function aj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=ut.get(n))&&r.ignoreEvent(e))return!1;return!0}const vr=Object.create(null),sr=Object.create(null),p2=Le.ie&&Le.ie_version<15||Le.ios&&Le.webkit_version<604;function lj(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),m2(t,n.value)},50)}function m2(t,e){let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Lg!=null&&n.selection.ranges.every(l=>l.empty)&&Lg==s.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:h},range:Ae.cursor(c.from+h.length)}})}else o?r=n.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Ae.cursor(l.from+c.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}sr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};vr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);sr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};sr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};vr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(Qk))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=hj(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new rj(t,e,n,r)),r&&t.observer.ignore(()=>{Pk(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function qv(t,e,n,r){if(r==1)return Ae.cursor(e,n);if(r==2)return G7(t.state,e,n);{let i=Pt.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,Ae.range(o,a)}}let g2=(t,e)=>t>=e.top&&t<=e.bottom,Kv=(t,e,n)=>g2(e,n)&&t>=n.left&&t<=n.right;function cj(t,e,n,r){let i=Pt.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&Kv(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&Kv(n,r,a)?1:o&&g2(r,o)?-1:1}function Yv(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:cj(t,n,e.clientX,e.clientY)}}const uj=Le.ie&&Le.ie_version<=11;let Xv=null,Qv=0,Jv=0;function _2(t){if(!uj)return t.detail;let e=Xv,n=Jv;return Xv=t,Jv=Date.now(),Qv=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Qv+1)%3:1}function hj(t,e){let n=Yv(t,e),r=_2(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=Yv(t,s),c,u=qv(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let h=qv(t,n.pos,n.bias,r),d=Math.min(h.from,u.from),f=Math.max(h.to,u.to);u=d<u.from?Ae.range(d,f):Ae.range(f,d)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=dj(i,l.pos))?c:a?i.addRange(u):Ae.create([u])}}}function dj(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return Ae.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}vr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=Ae.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};vr.dragend=t=>(t.inputState.draggedContent=null,!1);function Zv(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&sj(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}vr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&Zv(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return Zv(t,e,r,!0),!0}return!1};vr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=p2?null:e.clipboardData;return n?(m2(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(lj(t),!1)};function fj(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function pj(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}let Lg=null;vr.copy=vr.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=pj(t.state);if(!n&&!i)return!1;Lg=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=p2?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(fj(t,n),!1)};const b2=vi.define();function y2(t,e){let n=[];for(let r of t.facet(e2)){let i=r(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:b2.of(!0)}):null}function v2(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=y2(t.state,e);n?t.dispatch(n):t.update([])}},10)}sr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),v2(t)};sr.blur=t=>{t.observer.clearSelectionRange(),v2(t)};sr.compositionstart=sr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};sr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Le.chrome&&Le.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};sr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};vr.beforeinput=(t,e)=>{var n;let r;if(Le.chrome&&Le.android&&(r=d2.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Le.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Le.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>sr.compositionend(t,e),20),!1};const eE=new Set;function mj(t){eE.has(t)||(eE.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const tE=["pre-wrap","normal","pre-line","break-spaces"];class gj{constructor(e){this.lineWrapping=e,this.doc=st.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=tE.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class _j{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Fr{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?_n.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ji?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Fr(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var mt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(mt||(mt={}));const yh=.001;class bn{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>yh&&(e.heightChanged=!0),this.height=n)}replace(e,n,r){return bn.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=i[a],d=s.lineAt(l,mt.ByPosNoHeight,r.setDoc(n),0,0),f=d.to>=c?d:s.lineAt(c,mt.ByPosNoHeight,r,0,0);for(h+=f.to-c,c=f.to;a>0&&d.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<d.from&&(d=s.lineAt(l,mt.ByPosNoHeight,r,0,0));u+=d.from-l,l=d.from;let _=rb.build(r.setDoc(o),e,u,h);s=s.replace(l,c,_)}return s.updateHeight(r,0)}static empty(){return new In(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new bj(bn.of(e.slice(0,n)),o,bn.of(e.slice(r)))}}bn.prototype.size=1;class E2 extends bn{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Fr(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class In extends E2{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Fr(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof In||i instanceof qt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof qt?i=new In(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bn.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qt extends bn{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let c=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),h=a+u.length*l,d=Math.max(r,e-h/2);return new Fr(u.from,u.length,d,h,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:h}=n.doc.line(s+c);return new Fr(u,h,r+a*c,a,0)}}lineAt(e,n,r,i,s){if(n==mt.ByHeight)return this.blockAt(e,r,i,s);if(n==mt.ByPosNoHeight){let{from:f,to:_}=r.doc.lineAt(e);return new Fr(f,_-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,h=c.number-o,d=i+a*h+l*(c.from-s-h);return new Fr(c.from,c.length,Math.max(i,Math.min(d,i+this.height-u)),u,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,h=i;u<=n;){let d=r.doc.lineAt(u);if(u==e){let _=d.number-a;h+=l*_+c*(e-s-_)}let f=l+c*d.length;o(new Fr(d.from,d.length,h,f,0)),h+=f,u=d.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof qt?r[r.length-1]=new qt(s.length+i):r.push(null,new qt(i-1))}if(e>0){let s=r[0];s instanceof qt?r[0]=new qt(e+s.length):r.unshift(new qt(e-1),null)}return bn.of(r)}decomposeLeft(e,n){n.push(new qt(e-1),null)}decomposeRight(e,n){n.push(null,new qt(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new qt(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=i.heights[i.index++];l==-1?l=h:Math.abs(h-l)>=yh&&(l=-2);let d=new In(u,h);d.outdated=!1,o.push(d),a+=u+1}a<=s&&o.push(null,new qt(s-a).updateHeight(e,a));let c=bn.of(o);return(l<0||Math.abs(c.height-this.height)>=yh||Math.abs(l-this.heightMetrics(e,n).perLine)>=yh)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class bj extends bn{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==mt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==mt.ByPosNoHeight?mt.ByPosNoHeight:mt.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,mt.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&nE(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),nE(s,a)}return bn.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bn.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function nE(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof qt&&(r=t[e+1])instanceof qt&&t.splice(e-1,3,new qt(n.length+1+r.length))}const yj=5;class rb{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof In?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new In(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new E2(o,i,r)):(o||s||i>=yj)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new In(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new qt(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof In)return e;let n=new In(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof In)&&!this.isCovered?this.nodes.push(new In(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof In&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new rb(r,e);return rt.spans(n,r,i,s,0),s.finish(r)}}function vj(t,e,n){let r=new Ej;return rt.compare(t,e,n,r,0),r.changes}class Ej{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&Ag(e,n,this.changes,5)}}function wj(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let d=u.getBoundingClientRect();s=Math.max(s,d.left),o=Math.min(o,d.right),a=Math.max(a,d.top),l=c==t.parentNode?d.bottom:Math.min(l,d.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Sj(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class xp{constructor(e,n,r){this.from=e,this.to=n,this.size=r}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Ze.replace({widget:new Tj(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Tj extends ya{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class rE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=iE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(df).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new gj(n),this.stateDeco=e.facet(Wl).filter(r=>typeof r!="function"),this.heightMap=bn.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle.setDoc(e.doc),[new er(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ze.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new xu(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?iE:new ib(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Za(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Wl).filter(u=>typeof u!="function");let i=e.changedRanges,s=er.extendWithRanges(i,vj(r,this.stateDeco,e?e.changes:Lt.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(n2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?vt.RTL:vt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:v,scaleY:E}=Rk(n,a);(v>.005&&Math.abs(this.scaleX-v)>.005||E>.005&&Math.abs(this.scaleY-E)>.005)&&(this.scaleX=v,this.scaleY=E,c|=8,o=l=!0)}let h=(parseInt(r.paddingTop)||0)*this.scaleY,d=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=d)&&(this.paddingTop=h,this.paddingBottom=d,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Ok(e.scrollDOM);let _=(this.printing?Sj:wj)(n,this.paddingTop),g=_.top-this.pixelViewport.top,m=_.bottom-this.pixelViewport.bottom;this.pixelViewport=_;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let v=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(v)&&(o=!0),o||i.lineWrapping&&Math.abs(b-this.contentDOMWidth)>i.charWidth){let{lineHeight:E,charWidth:w,textHeight:T}=e.docView.measureTextSize();o=E>0&&i.refresh(s,E,w,T,b/w,v),o&&(e.docView.minWidth=0,c|=8)}g>0&&m>0?u=Math.max(g,m):g<0&&m<0&&(u=Math.min(g,m)),i.heightChanged=!1;for(let E of this.viewports){let w=E.from==this.viewport.from?v:e.docView.measureVisibleLineHeights(E);this.heightMap=(o?bn.empty().applyChanges(this.stateDeco,st.empty,this.heightOracle,[new er(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new _j(E.from,w))}i.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new xu(i.lineAt(o-r*1e3,mt.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,mt.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=i.lineAt(c,mt.ByPos,s,0,0),d;n.y=="center"?d=(h.top+h.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?d=h.top:d=h.bottom-u,l=new xu(i.lineAt(d-1e3/2,mt.ByHeight,s,0,0).from,i.lineAt(d+u+1e3/2,mt.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new xu(this.heightMap.lineAt(r,mt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,mt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,mt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new xp(n.mapPos(i.from),n.mapPos(i.to),i.size));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=vt.LTR&&!r)return[];let a=[],l=(u,h,d,f)=>{if(h-u<s)return;let _=this.state.selection.main,g=[_.from];_.empty||g.push(_.to);for(let p of g)if(p>u&&p<h){l(u,p-10,d,f),l(p+10,h,d,f);return}let m=xj(e,p=>p.from>=d.from&&p.to<=d.to&&Math.abs(p.from-u)<s&&Math.abs(p.to-h)<s&&!g.some(b=>p.from<b&&p.to>b));if(!m){if(h<d.to&&n&&r&&n.visibleRanges.some(p=>p.from<=h&&p.to>=h)){let p=n.moveToLineBoundary(Ae.cursor(h),!1,!0).head;p>u&&(h=p)}m=new xp(u,h,this.gapSize(d,u,h,f))}a.push(m)},c=u=>{if(u.length<o||u.type!=_n.Text)return;let h=Cj(u.from,u.to,this.stateDeco);if(h.total<o)return;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,_;if(r){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,p;if(d!=null){let b=ku(h,d),y=((this.visibleBottom-this.visibleTop)/2+g)/u.height;m=b-y,p=b+y}else m=(this.visibleTop-u.top-g)/u.height,p=(this.visibleBottom-u.top+g)/u.height;f=Au(h,m),_=Au(h,p)}else{let g=h.total*this.heightOracle.charWidth,m=i*this.heightOracle.charWidth,p,b;if(d!=null){let y=ku(h,d),v=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/g;p=y-v,b=y+v}else p=(this.pixelViewport.left-m)/g,b=(this.pixelViewport.right+m)/g;f=Au(h,p),_=Au(h,b)}f>u.from&&l(u.from,f,u,h),_<u.to&&l(_,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,i){let s=ku(i,r)-ku(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){xp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ze.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];rt.spans(e,this.viewport.from,this.viewport.to,{span(i,s){n.push({from:i,to:s})},point(){}},20);let r=n.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=n[s].from||i.to!=n[s].to);return this.visibleRanges=n,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Za(this.heightMap.lineAt(e,mt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Za(this.heightMap.lineAt(this.scaler.fromDOM(e),mt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Za(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class xu{constructor(e,n){this.from=e,this.to=n}}function Cj(t,e,n){let r=[],i=t,s=0;return rt.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Au({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function ku(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function xj(t,e){for(let n of t)if(e(n))return n}const iE={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class ib{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,mt.ByPos,e,0,0).top,u=n.lineAt(l,mt.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof ib?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Za(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Fr(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>Za(i,e)):t._content)}const Ru=Ne.define({combine:t=>t.join(" ")}),Mg=Ne.define({combine:t=>t.indexOf(!0)>-1}),Ng=Xi.newName(),w2=Xi.newName(),S2=Xi.newName(),T2={"&light":"."+w2,"&dark":"."+S2};function Bg(t,e,n){return new Xi(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Aj=Bg("."+Ng,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},T2),el="";class kj{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(tt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=el}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=ut.get(i),l=ut.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Zh(i))||Zh(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=ut.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Rj(e,r.node,r.offset)?n:0))}}function Rj(t,e,n){for(;;){if(!e||n<mi(e))return!1;if(e==t)return!0;n=$s(e)+1,e=e.parentNode}}class sE{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Pj{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:Ij(e),l=new kj(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Lj(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Eg(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Eg(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Le.ios||Le.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),d=Math.max(l,c),f=u.from-h,_=u.to-d;(f==0||f==1||h==0)&&(_==0||_==-1||d==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=Ae.single(c,l)}}}function C2(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||Le.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=Oj(t.state.doc.sliceString(o,a,el),e.text,l-o,c);u&&(Le.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==el+el&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:st.of(e.text.slice(u.from,u.toB).split(el))})}else r&&(!t.hasFocus&&t.state.facet(Ii)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Le.mac||Le.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=Ae.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:st.of([" "])}):Le.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=Ae.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:st.of([" "])}),n)return x2(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function x2(t,e,n,r=-1){if(Le.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(Le.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&$o(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&$o(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&$o(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=Dj(t,e,n));return t.state.facet(Zk).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function Dj(t,e,n){let r,i=t.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=i.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,h=n&&u2(t,n.main.head);if(h){let _=e.insert.length-(e.to-e.from);u={from:h.from,to:h.to-_}}else u=t.state.doc.lineAt(s.head);let d=s.to-e.to,f=s.to-s.from;r=i.changeByRange(_=>{if(_.from==s.from&&_.to==s.to)return{changes:a,range:l||_.map(a)};let g=_.to-d,m=g-c.length;if(_.to-_.from!=f||t.state.sliceDoc(m,g)!=c||_.to>=u.from&&_.from<=u.to)return{range:_};let p=i.changes({from:m,to:g,insert:e.insert}),b=_.to-s.to;return{changes:p,range:l?Ae.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):_.map(p)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Oj(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Ij(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new sE(n,r)),(i!=n||s!=r)&&e.push(new sE(i,s))),e}function Lj(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?Ae.single(n+e,r+e):null}const Mj={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ap=Le.ie&&Le.ie_version<=11;class Nj{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new v7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(Le.ie&&Le.ie_version<=11||Le.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Le.chrome&&Le.chrome_version<126)&&(this.editContext=new Fj(e),e.state.facet(Ii)&&(e.contentDOM.editContext=this.editContext.editContext)),Ap&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Ii)?r.root.activeElement!=this.dom:!_h(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Le.ie&&Le.ie_version<=11||Le.android&&Le.chrome)&&!r.state.selection.main.empty&&i.focusNode&&gl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=zl(e.root);if(!n)return!1;let r=Le.safari&&e.root.nodeType==11&&g7(this.dom.ownerDocument)==this.dom&&Bj(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=_h(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&w7(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Mj),Ap&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Ap&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&$o(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&_h(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new Pj(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=C2(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=oE(n,e.previousSibling||e.target.previousSibling,-1),i=oE(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ii)!=e.state.facet(Ii)&&(e.view.contentDOM.editContext=e.state.facet(Ii)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function oE(t,e,n){for(;e;){let r=ut.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function aE(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return gl(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Bj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return aE(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?aE(t,n):null}class Fj{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});n.addEventListener("textupdate",r=>{let{anchor:i}=e.state.selection.main,s={from:this.toEditorPos(r.updateRangeStart),to:this.toEditorPos(r.updateRangeEnd),insert:st.of(r.text.split(`
`))};s.from==this.from&&i<this.from?s.from=i:s.to==this.to&&i>this.to&&(s.to=i),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,x2(e,s,Ae.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd))),this.pendingContextChange&&this.revertPending(e.state))}),n.addEventListener("characterboundsupdate",r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)}),n.addEventListener("textformatupdate",r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Ze.mark({attributes:{style:l}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:i2.of(Ze.set(i))})}),n.addEventListener("compositionstart",()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)}),n.addEventListener("compositionend",()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null}),this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=zl(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(r)return;let u=c.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,n+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),i&&!r&&this.revertPending(e.state),!r}update(e){!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.to+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}}class Me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(r=>r.forEach(i=>n(i,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||E7(e.parent)||document,this.viewState=new rE(e.state||tt.create(e)),e.scrollTo&&e.scrollTo.is(Su)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qa).map(r=>new Sp(r));for(let r of this.plugins)r.update(this);this.observer=new Nj(this),this.inputState=new Z7(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Hv(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof Ot?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let d of e){if(d.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=d.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(d=>d.annotation(b2))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=y2(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(tt.phrases)!=this.state.facet(tt.phrases))return this.setState(s);i=td.create(this,s,e),i.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let d of e){if(h&&(h=h.map(d.changes)),d.scrollIntoView){let{main:f}=d.state.selection;h=new qo(f.empty?f:Ae.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of d.effects)f.is(Su)&&(h=f.value.clip(this.state))}this.viewState.update(i,h),this.bidiCache=nd.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(Ja)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(d=>d.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Ru)!=i.state.facet(Ru)&&(this.viewState.mustMeasureContent=!0),(n||r||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let d of this.state.facet(Dg))try{d(i)}catch(f){Un(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!C2(this,u)&&c.force&&$o(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new rE(e),this.plugins=e.facet(Qa).map(r=>new Sp(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new Hv(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Qa),r=e.state.facet(Qa);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new Sp(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Un(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Ok(r))s=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(_){return Un(this.state,_),lE}}),h=td.create(this,this.state,[]),d=!1;h.flags|=l,n?n.flags|=l:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),d=this.docView.update(h),d&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=lE)try{let _=c[f];_.write&&_.write(u[f],this)}catch(_){Un(this.state,_)}if(d&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let _=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(_>1||_<-1){i=i+_,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Dg))a(n)}get themeClasses(){return Ng+" "+(this.state.facet(Mg)?S2:w2)+" "+this.state.facet(Ru)}updateAttrs(){let e=cE(this,s2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ii)?"true":"false",class:"cm-content",style:`${Le.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),cE(this,df,n);let r=this.observer.ignore(()=>{let i=xg(this.contentDOM,this.contentAttrs,n),s=xg(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Me.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ja);let e=this.state.facet(Me.cspNonce);Xi.mount(this.root,this.styleModules.concat(Aj).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return Cp(this,e,Gv(this,e,n,r))}moveByGroup(e,n){return Cp(this,e,Gv(this,e,n,r=>Q7(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return Ae.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return X7(this,e,n,r)}moveVertically(e,n,r){return Cp(this,e,J7(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),h2(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Hi.find(s,e-i.from,-1,n)];return Z_(r,o.dir==vt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(t2)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Hj)return qk(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||$k(s.isolates,r=Fv(this,e))))return s.order;r||(r=Fv(this,e));let i=L7(e.text,n,r);return this.bidiCache.push(new nd(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Le.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Pk(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Su.of(new qo(typeof e=="number"?Ae.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Su.of(new qo(Ae.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Qt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Qt.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Xi.newName(),i=[Ru.of(r),Ja.of(Bg(`.${r}`,e))];return n&&n.dark&&i.push(Mg.of(!0)),i}static baseTheme(e){return ss.lowest(Ja.of(Bg("."+Ng,e,T2)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&ut.get(r)||ut.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}Me.styleModule=Ja;Me.inputHandler=Zk;Me.scrollHandler=r2;Me.focusChangeEffect=e2;Me.perLineTextDirection=t2;Me.exceptionSink=Jk;Me.updateListener=Dg;Me.editable=Ii;Me.mouseSelectionStyle=Qk;Me.dragMovesSelection=Xk;Me.clickAddsSelectionRange=Yk;Me.decorations=Wl;Me.outerDecorations=o2;Me.atomicRanges=nb;Me.bidiIsolatedRanges=a2;Me.scrollMargins=l2;Me.darkTheme=Mg;Me.cspNonce=Ne.define({combine:t=>t.length?t[0]:""});Me.contentAttributes=df;Me.editorAttributes=s2;Me.lineWrapping=Me.contentAttributes.of({class:"cm-lineWrapping"});Me.announce=Xe.define();const Hj=4096,lE={};class nd{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:vt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new nd(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function cE(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&Cg(o,n)}return n}const Uj=Le.mac?"mac":Le.windows?"win":Le.linux?"linux":"key";function jj(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function Pu(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const zj=ss.default(Me.domEventHandlers({keydown(t,e){return k2(A2(e.state),t,e,"editor")}})),ff=Ne.define({enables:zj}),uE=new WeakMap;function A2(t){let e=t.facet(ff),n=uE.get(e);return n||uE.set(e,n=Gj(e.reduce((r,i)=>r.concat(i),[]))),n}function Vj(t,e,n){return k2(A2(t.state),e,t,n)}let Li=null;const Wj=4e3;function Gj(t,e=Uj){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var h,d;let f=n[o]||(n[o]=Object.create(null)),_=a.split(/ (?!$)/).map(p=>jj(p,e));for(let p=1;p<_.length;p++){let b=_.slice(0,p).join(" ");i(b,!0),f[b]||(f[b]={preventDefault:!0,stopPropagation:!1,run:[y=>{let v=Li={view:y,prefix:b,scope:o};return setTimeout(()=>{Li==v&&(Li=null)},Wj),!0}]})}let g=_.join(" ");i(g,!1);let m=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((d=(h=f._any)===null||h===void 0?void 0:h.run)===null||d===void 0?void 0:d.slice())||[]});l&&m.run.push(l),c&&(m.preventDefault=!0),u&&(m.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let d in u)u[d].run.push(f=>h(f,Fg))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let Fg=null;function k2(t,e,n,r){Fg=e;let i=m7(e),s=Sn(i,0),o=dr(s)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;Li&&Li.view==n&&Li.scope==r&&(a=Li.prefix+" ",f2.indexOf(e.keyCode)<0&&(c=!0,Li=null));let h=new Set,d=m=>{if(m){for(let p of m.run)if(!h.has(p)&&(h.add(p),p(n)))return m.stopPropagation&&(u=!0),!0;m.preventDefault&&(m.stopPropagation&&(u=!0),c=!0)}return!1},f=t[r],_,g;return f&&(d(f[a+Pu(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Le.windows&&e.ctrlKey&&e.altKey)&&(_=Qi[e.keyCode])&&_!=i?(d(f[a+Pu(_,e,!0)])||e.shiftKey&&(g=jl[e.keyCode])!=i&&g!=_&&d(f[a+Pu(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&d(f[a+Pu(i,e,!0)])&&(l=!0),!l&&d(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),Fg=null,l}class Nc{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=R2(e);return[new Nc(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return $j(e,n,r)}}function R2(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==vt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function hE(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function $j(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==vt.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=R2(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),f=Ig(t,r),_=Ig(t,i),g=f.type==_n.Text?f:null,m=_.type==_n.Text?_:null;if(g&&(t.lineWrapping||f.widgetLineBreaks)&&(g=hE(t,r,1,g)),m&&(t.lineWrapping||_.widgetLineBreaks)&&(m=hE(t,i,-1,m)),g&&m&&g.from==m.from&&g.to==m.to)return b(y(n.from,n.to,g));{let E=g?y(n.from,null,g):v(f,!1),w=m?y(null,n.to,m):v(_,!0),T=[];return(g||f).to<(m||_).from-(g&&m?1:0)||f.widgetLineBreaks>1&&E.bottom+t.defaultLineHeight/2<w.top?T.push(p(h,E.bottom,d,w.top)):E.bottom<w.top&&t.elementAtHeight((E.bottom+w.top)/2).type==_n.Text&&(E.bottom=w.top=(E.bottom+w.top)/2),b(E).concat(T).concat(b(w))}function p(E,w,T,S){return new Nc(e,E-l.left,w-l.top-.01,T-E,S-w+.01)}function b({top:E,bottom:w,horizontal:T}){let S=[];for(let x=0;x<T.length;x+=2)S.push(p(T[x],E,T[x+1],w));return S}function y(E,w,T){let S=1e9,x=-1e9,R=[];function U(A,W,ne,Q,ie){let L=t.coordsAtPos(A,A==T.to?-2:2),I=t.coordsAtPos(ne,ne==T.from?2:-2);!L||!I||(S=Math.min(L.top,I.top,S),x=Math.max(L.bottom,I.bottom,x),ie==vt.LTR?R.push(s&&W?h:L.left,s&&Q?d:I.right):R.push(!s&&Q?h:I.left,!s&&W?d:L.right))}let P=E??T.from,B=w??T.to;for(let A of t.visibleRanges)if(A.to>P&&A.from<B)for(let W=Math.max(A.from,P),ne=Math.min(A.to,B);;){let Q=t.state.doc.lineAt(W);for(let ie of t.bidiSpans(Q)){let L=ie.from+Q.from,I=ie.to+Q.from;if(L>=ne)break;I>W&&U(Math.max(L,W),E==null&&L<=P,Math.min(I,ne),w==null&&I>=B,ie.dir)}if(W=Q.to+1,W>=ne)break}return R.length==0&&U(P,E==null,B,w==null,t.textDirection),{top:S,bottom:x,horizontal:R}}function v(E,w){let T=a.top+(w?E.top:E.bottom);return{top:T,bottom:T,horizontal:[]}}}function qj(t,e){return t.constructor==e.constructor&&t.eq(e)}class Kj{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(vh)!=e.state.facet(vh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(vh);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!qj(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const vh=Ne.define();function P2(t){return[Qt.define(e=>new Kj(e,t)),vh.of(t)]}const D2=!Le.ios,Gl=Ne.define({combine(t){return no(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Yj(t={}){return[Gl.of(t),Xj,Qj,Jj,n2.of(!0)]}function O2(t){return t.startState.facet(Gl)!=t.state.facet(Gl)}const Xj=P2({above:!0,markers(t){let{state:e}=t,n=e.facet(Gl),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||D2:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:Ae.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Nc.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=O2(t);return n&&dE(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){dE(e.state,t)},class:"cm-cursorLayer"});function dE(t,e){e.style.animationDuration=t.facet(Gl).cursorBlinkRate+"ms"}const Qj=P2({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Nc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||O2(t)},class:"cm-selectionLayer"}),Hg={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};D2&&(Hg[".cm-line"].caretColor=Hg[".cm-content"].caretColor="transparent !important");const Jj=ss.highest(Me.theme(Hg)),I2=Xe.define({map(t,e){return t==null?null:e.mapPos(t)}}),tl=Wt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(I2)?r.value:n,t)}}),Zj=Qt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(tl);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(tl)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(tl),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(tl)!=t&&this.view.dispatch({effects:I2.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function ez(){return[tl,Zj]}const fE=Qt.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function tz(){return[fE,df.of(t=>{var e;return((e=t.plugin(fE))===null||e===void 0?void 0:e.attrs)||null})]}function nz(){return iz}const rz=Ze.line({class:"cm-activeLine"}),iz=Qt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(rz.range(i.from)),e=i.from)}return Ze.set(n)}},{decorations:t=>t.decorations}),Fa="-10000px";class sz{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function oz(t={}){return Eh.of(t)}function az(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Eh=Ne.define({combine:t=>{var e,n,r;return{position:Le.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||az}}}),pE=new WeakMap,L2=Qt.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Eh);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new sz(t,sb,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Eh);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=Fa,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,r=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(Le.gecko)r=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==Fa&&i.style.left=="0px"){let s=i.getBoundingClientRect();r=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(r||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,n=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((i,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(Eh).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:r}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],d=t.size[a];if(!h||h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1){u.style.top=Fa;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,_=f?7:0,g=d.right-d.left,m=(e=pE.get(c))!==null&&e!==void 0?e:d.bottom-d.top,p=c.offset||cz,b=this.view.textDirection==vt.LTR,y=d.width>r.right-r.left?b?r.left:r.right-d.width:b?Math.min(h.left-(f?14:0)+p.x,r.right-g):Math.max(r.left,h.left-g+(f?14:0)-p.x),v=this.above[a];!l.strictSide&&(v?h.top-(d.bottom-d.top)-p.y<r.top:h.bottom+(d.bottom-d.top)+p.y>r.bottom)&&v==r.bottom-h.bottom>h.top-r.top&&(v=this.above[a]=!v);let E=(v?h.top-r.top:r.bottom-h.bottom)-_;if(E<m&&c.resize!==!1){if(E<this.view.defaultLineHeight){u.style.top=Fa;continue}pE.set(c,m),u.style.height=(m=E)/s+"px"}else u.style.height&&(u.style.height="");let w=v?h.top-m-_-p.y:h.bottom+_+p.y,T=y+g;if(c.overlap!==!0)for(let S of o)S.left<T&&S.right>y&&S.top<w+m&&S.bottom>w&&(w=v?S.top-m-2-_:S.bottom+_+2);if(this.position=="absolute"?(u.style.top=(w-t.parent.top)/s+"px",u.style.left=(y-t.parent.left)/i+"px"):(u.style.top=w/s+"px",u.style.left=y/i+"px"),f){let S=h.left+(b?p.x:-p.x)-(y+14-7);f.style.left=S/i+"px"}c.overlap!==!0&&o.push({left:y,top:w,right:T,bottom:w+m}),u.classList.toggle("cm-tooltip-above",v),u.classList.toggle("cm-tooltip-below",!v),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Fa}},{eventObservers:{scroll(){this.maybeMeasure()}}}),lz=Me.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),cz={x:0,y:0},sb=Ne.define({enables:[L2,lz]});function M2(t,e){let n=t.plugin(L2);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const mE=Ne.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function rd(t,e){let n=t.plugin(N2),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const N2=Qt.fromClass(class{constructor(t){this.input=t.state.facet(id),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(mE);this.top=new Du(t,!0,e.topContainer),this.bottom=new Du(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(mE);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Du(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Du(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(id);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),i.push(u),(u.top?s:o).push(u)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});let Du=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=gE(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=gE(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function gE(t){let e=t.nextSibling;return t.remove(),e}const id=Ne.define({enables:N2});class _i extends Ws{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}_i.prototype.elementClass="";_i.prototype.toDOM=void 0;_i.prototype.mapMode=sn.TrackBefore;_i.prototype.startSide=_i.prototype.endSide=-1;_i.prototype.point=!0;const wh=Ne.define(),uz={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>rt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},bl=Ne.define();function hz(t){return[B2(),bl.of(Object.assign(Object.assign({},uz),t))]}const _E=Ne.define({combine:t=>t.some(e=>e)});function B2(t){return[dz]}const dz=Qt.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(bl).map(e=>new yE(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(_E),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(_E)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=rt.iter(this.view.state.facet(wh),this.view.viewport.from),r=[],i=this.gutters.map(s=>new fz(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==_n.Text&&o){Ug(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==_n.Text){Ug(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(bl),n=t.state.facet(bl),r=t.docChanged||t.heightChanged||t.viewportChanged||!rt.eq(t.startState.facet(wh),t.state.facet(wh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new yE(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Me.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==vt.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function bE(t){return Array.isArray(t)?t:[t]}function Ug(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class fz{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=rt.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new F2(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];Ug(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n);r&&this.addElement(e,n,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class yE{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=bE(n.markers(e)),n.initialSpacer&&(this.spacer=new F2(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=bE(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!rt.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class F2{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),pz(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let h=i.nextSibling;i.remove(),i=h}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function pz(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const mz=Ne.define(),Oo=Ne.define({combine(t){return no(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class kp extends _i{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Rp(t,e){return t.state.facet(Oo).formatNumber(e,t.state)}const gz=bl.compute([Oo],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(mz)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new kp(Rp(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Oo)!=e.state.facet(Oo),initialSpacer(e){return new kp(Rp(e,vE(e.state.doc.lines)))},updateSpacer(e,n){let r=Rp(n.view,vE(n.view.state.doc.lines));return r==e.number?e:new kp(r)},domEventHandlers:t.facet(Oo).domEventHandlers}));function _z(t={}){return[Oo.of(t),B2(),gz]}function vE(t){let e=9;for(;e<t;)e=e*10+9;return e}const bz=new class extends _i{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},yz=wh.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(bz.range(i)))}return rt.of(e)});function vz(){return yz}const Ez=1024;let wz=0;class Xn{constructor(e,n){this.from=e,this.to=n}}class Je{constructor(e={}){this.id=wz++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=kn.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Je.closedBy=new Je({deserialize:t=>t.split(" ")});Je.openedBy=new Je({deserialize:t=>t.split(" ")});Je.group=new Je({deserialize:t=>t.split(" ")});Je.isolate=new Je({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Je.contextHash=new Je({perNode:!0});Je.lookAhead=new Je({perNode:!0});Je.mounted=new Je({perNode:!0});class $l{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Je.mounted.id]}}const Sz=Object.create(null);class kn{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):Sz,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new kn(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Je.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Je.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}kn.none=new kn("",Object.create(null),0,8);class H2{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}n.push(i?new kn(r.name,i,r.id,r.flags):r)}return new H2(n)}}const Ou=new WeakMap,EE=new WeakMap;var wt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(wt||(wt={}));class Mt{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=$l.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new sd(this.topNode,e)}cursorAt(e,n=0,r=0){let i=Ou.get(this)||this.topNode,s=new sd(i);return s.moveTo(e,n),Ou.set(this,s._tree),s}get topNode(){return new cn(this,0,0,null)}resolve(e,n=0){let r=ql(Ou.get(this)||this.topNode,e,n,!1);return Ou.set(this,r),r}resolveInner(e,n=0){let r=ql(EE.get(this)||this.topNode,e,n,!0);return EE.set(this,r),r}resolveStack(e,n=0){return xz(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&wt.IncludeAnonymous)>0;for(let l=this.cursor(o|wt.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:lb(kn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new Mt(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new Mt(kn.none,n,r,i)))}static build(e){return Az(e)}}Mt.empty=new Mt(kn.none,[],[],0);class ob{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ob(this.buffer,this.index)}}class Zi{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return kn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(U2(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new Zi(s,o,this.set)}}function U2(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function ql(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof cn&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:wt.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof cn&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class j2{cursor(e=0){return new sd(this,e)}getChild(e,n=null,r=null){let i=wE(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return wE(this,e,n,r)}resolve(e,n=0){return ql(this,e,n,!1)}resolveInner(e,n=0){return ql(this,e,n,!0)}matchContext(e){return jg(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class cn extends j2{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],h=l[e]+o.from;if(U2(i,r,h,h+u.length)){if(u instanceof Zi){if(s&wt.ExcludeBuffers)continue;let d=u.findChild(0,u.buffer.length,n,r-h,i);if(d>-1)return new jr(new Tz(o,u,e,h),null,d)}else if(s&wt.IncludeAnonymous||!u.type.isAnonymous||ab(u)){let d;if(!(s&wt.IgnoreMounts)&&(d=$l.get(u))&&!d.overlay)return new cn(d.tree,h,e,o);let f=new cn(u,h,e,o);return s&wt.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?u.children.length-1:0,n,r,i)}}}if(s&wt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&wt.IgnoreOverlays)&&(i=$l.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new cn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function wE(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function jg(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Tz{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class jr extends j2{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new jr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&wt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new jr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new jr(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new jr(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new Mt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function z2(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof cn&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new Cz(i,n)}class Cz{constructor(e,n){this.heads=e,this.node=n}get next(){return z2(this.heads)}}function xz(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof cn?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=$l.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new cn(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(ql(a,e,n,!1))}}return i?z2(i):r}class sd{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof cn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof cn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&wt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&wt.IncludeAnonymous||a instanceof Zi||!a.type.isAnonymous||ab(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new jr(this.buffer,n,this.stack[i]);return this.bufferNode=new jr(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&n&&n(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return jg(this.node,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return jg(this.node,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function ab(t){return t.children.some(e=>e instanceof Zi||!e.type.isAnonymous||ab(e))}function Az(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=Ez,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new ob(n,n.length):n,l=r.types,c=0,u=0;function h(E,w,T,S,x,R){let{id:U,start:P,end:B,size:A}=a,W=u;for(;A<0;)if(a.next(),A==-1){let I=s[U];T.push(I),S.push(P-E);return}else if(A==-3){c=U;return}else if(A==-4){u=U;return}else throw new RangeError(`Unrecognized record size: ${A}`);let ne=l[U],Q,ie,L=P-E;if(B-P<=i&&(ie=m(a.pos-w,x))){let I=new Uint16Array(ie.size-ie.skip),j=a.pos-ie.size,H=I.length;for(;a.pos>j;)H=p(ie.start,I,H);Q=new Zi(I,B-ie.start,r),L=ie.start-E}else{let I=a.pos-A;a.next();let j=[],H=[],F=U>=o?U:-1,J=0,te=B;for(;a.pos>I;)F>=0&&a.id==F&&a.size>=0?(a.end<=te-i&&(_(j,H,P,J,a.end,te,F,W),J=j.length,te=a.end),a.next()):R>2500?d(P,I,j,H):h(P,I,j,H,F,R+1);if(F>=0&&J>0&&J<j.length&&_(j,H,P,J,P,te,F,W),j.reverse(),H.reverse(),F>-1&&J>0){let fe=f(ne);Q=lb(ne,j,H,0,j.length,0,B-P,fe,fe)}else Q=g(ne,j,H,B-P,W-B)}T.push(Q),S.push(L)}function d(E,w,T,S){let x=[],R=0,U=-1;for(;a.pos>w;){let{id:P,start:B,end:A,size:W}=a;if(W>4)a.next();else{if(U>-1&&B<U)break;U<0&&(U=A-i),x.push(P,B,A),R++,a.next()}}if(R){let P=new Uint16Array(R*4),B=x[x.length-2];for(let A=x.length-3,W=0;A>=0;A-=3)P[W++]=x[A],P[W++]=x[A+1]-B,P[W++]=x[A+2]-B,P[W++]=W;T.push(new Zi(P,x[2]-B,r)),S.push(B-E)}}function f(E){return(w,T,S)=>{let x=0,R=w.length-1,U,P;if(R>=0&&(U=w[R])instanceof Mt){if(!R&&U.type==E&&U.length==S)return U;(P=U.prop(Je.lookAhead))&&(x=T[R]+U.length+P)}return g(E,w,T,S,x)}}function _(E,w,T,S,x,R,U,P){let B=[],A=[];for(;E.length>S;)B.push(E.pop()),A.push(w.pop()+T-x);E.push(g(r.types[U],B,A,R-x,P-R)),w.push(x-T)}function g(E,w,T,S,x=0,R){if(c){let U=[Je.contextHash,c];R=R?[U].concat(R):[U]}if(x>25){let U=[Je.lookAhead,x];R=R?[U].concat(R):[U]}return new Mt(E,w,T,S,R)}function m(E,w){let T=a.fork(),S=0,x=0,R=0,U=T.end-i,P={size:0,start:0,skip:0};e:for(let B=T.pos-E;T.pos>B;){let A=T.size;if(T.id==w&&A>=0){P.size=S,P.start=x,P.skip=R,R+=4,S+=4,T.next();continue}let W=T.pos-A;if(A<0||W<B||T.start<U)break;let ne=T.id>=o?4:0,Q=T.start;for(T.next();T.pos>W;){if(T.size<0)if(T.size==-3)ne+=4;else break e;else T.id>=o&&(ne+=4);T.next()}x=Q,S+=A,R+=ne}return(w<0||S==E)&&(P.size=S,P.start=x,P.skip=R),P.size>4?P:void 0}function p(E,w,T){let{id:S,start:x,end:R,size:U}=a;if(a.next(),U>=0&&S<o){let P=T;if(U>4){let B=a.pos-(U-4);for(;a.pos>B;)T=p(E,w,T)}w[--T]=P,w[--T]=R-E,w[--T]=x-E,w[--T]=S}else U==-3?c=S:U==-4&&(u=S);return T}let b=[],y=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,b,y,-1,0);let v=(e=t.length)!==null&&e!==void 0?e:b.length?y[0]+b[0].length:0;return new Mt(l[t.topID],b.reverse(),y.reverse(),v)}const SE=new WeakMap;function Sh(t,e){if(!t.isAnonymous||e instanceof Zi||e.type!=t)return 1;let n=SE.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Mt)){n=1;break}n+=Sh(t,r)}SE.set(e,n)}return n}function lb(t,e,n,r,i,s,o,a,l){let c=0;for(let _=r;_<i;_++)c+=Sh(t,e[_]);let u=Math.ceil(c*1.5/8),h=[],d=[];function f(_,g,m,p,b){for(let y=m;y<p;){let v=y,E=g[y],w=Sh(t,_[y]);for(y++;y<p;y++){let T=Sh(t,_[y]);if(w+T>=u)break;w+=T}if(y==v+1){if(w>u){let T=_[v];f(T.children,T.positions,0,T.children.length,g[v]+b);continue}h.push(_[v])}else{let T=g[y-1]+_[y-1].length-E;h.push(lb(t,_,g,v,y,E,T,null,l))}d.push(E+b-s)}}return f(e,n,r,i,0),(a||l)(h,d,o)}class lue{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof jr?this.setBuffer(e.context.buffer,e.index,n):e instanceof cn&&this.map.set(e.tree,n)}get(e){return e instanceof jr?this.getBuffer(e.context.buffer,e.index):e instanceof cn?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ui{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new ui(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,h=u?u.fromA:1e9;if(h-l>=r)for(;o&&o.from<h;){let d=o;if(l>=d.from||h<=d.to||c){let f=Math.max(d.from,l)-c,_=Math.min(d.to,h)-c;d=f>=_?null:new ui(f,_,d.tree,d.offset+c,a>0,!!u)}if(d&&i.push(d),o.to>h)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}let kz=class{startParse(e,n,r){return typeof e=="string"&&(e=new Rz(e)),r=r?r.length?r.map(i=>new Xn(i.from,i.to)):[new Xn(0,0)]:[new Xn(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class Rz{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function uue(t){return(e,n,r,i)=>new Dz(e,t,n,r,i)}class TE{constructor(e,n,r,i,s){this.parser=e,this.parse=n,this.overlay=r,this.target=i,this.from=s}}function CE(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class Pz{constructor(e,n,r,i,s,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const zg=new Je({perNode:!0});class Dz{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Mt(r.type,r.children,r.positions,r.length,r.propValues.concat([[zg,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Je.mounted.id]=new $l(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new Lz(this.fragments),n=null,r=null,i=new sd(new cn(this.baseTree,this.ranges[0].from,0,null),wt.IncludeAnonymous|wt.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let c=n.mounts.find(u=>u.frag.from<=i.from&&u.frag.to>=i.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,d=u.to+c.pos;h>=i.from&&d<=i.to&&!n.ranges.some(f=>f.from<d&&f.to>h)&&n.ranges.push({from:h,to:d})}}a=!1}else if(r&&(o=Oz(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||Iz(i);let c=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new Pz(s.parser,s.overlay,c,this.inner.length,i.from,i.tree,n);else{let u=kE(this.ranges,s.overlay||(i.from<i.to?[new Xn(i.from,i.to)]:[]));u.length&&CE(u),(u.length||!s.overlay)&&this.inner.push(new TE(s.parser,u.length?s.parser.startParse(this.input,RE(c,u),u):s.parser.startParse(""),s.overlay?s.overlay.map(h=>new Xn(h.from-i.from,h.to-i.from)):null,i.tree,u.length?u[0].from:i.from)),s.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else n&&(l=n.predicate(i))&&(l===!0&&(l=new Xn(i.from,i.to)),l.from<l.to&&n.ranges.push(l));if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let c=kE(this.ranges,n.ranges);c.length&&(CE(c),this.inner.splice(n.index,0,new TE(n.parser,n.parser.startParse(this.input,RE(n.mounts,c),c),n.ranges.map(u=>new Xn(u.from-n.start,u.to-n.start)),n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function Oz(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function xE(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function Iz(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function c(u,h,d,f,_,g){let m=n[g],p=[],b=[];xE(o,u,m,p,b,f);let y=a[m+1],v=a[m+2];l.push(p.length);let E=g?c(m+4,a[m+3],o.set.types[a[m]],y,v-y,g-1):e.toTree();return p.push(E),b.push(y-f),xE(o,a[m+3],h,p,b,f),new Mt(d,p,b,_)}i.children[s]=c(0,a.length,kn.none,0,o.length,n.length-1);for(let u of l){let h=t.tree.children[u],d=t.tree.positions[u];t.yield(new cn(h,d+t.from,u,t._tree))}}class AE{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(wt.IncludeAnonymous|wt.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,wt.IgnoreOverlays|wt.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Mt)n=n.children[0];else break}return!1}}class Lz{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(zg))!==null&&n!==void 0?n:r.to,this.inner=new AE(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(zg))!==null&&e!==void 0?e:n.to,this.inner=new AE(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Je.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}}function kE(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[s]=new Xn(l.from,o),l.to>a&&n.splice(s+1,0,new Xn(a,l.to))):l.to>a?n[s--]=new Xn(a,l.to):n.splice(s--,1))}}return r}function Mz(t,e,n,r){let i=0,s=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:o?t[i].to:t[i].from,h=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let d=Math.max(l,n),f=Math.min(u,h,r);d<f&&c.push(new Xn(d,f))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,i++):o=!0),h==l&&(a?(a=!1,s++):a=!0)}return c}function RE(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),c=Math.min(s.to,a);if(i.overlay){let u=i.overlay.map(d=>new Xn(d.from+r,d.to+r)),h=Mz(e,u,l,c);for(let d=0,f=l;;d++){let _=d==h.length,g=_?c:h[d].from;if(g>f&&n.push(new ui(f,g,i.tree,-o,s.from>=f||s.openStart,s.to<=g||s.openEnd)),_)break;f=h[d].to}}else n.push(new ui(l,c,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return n}let Nz=0;class Or{constructor(e,n,r){this.set=e,this.base=n,this.modified=r,this.id=Nz++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let n=new Or([],null,[]);if(n.set.push(n),e)for(let r of e.set)n.set.push(r);return n}static defineModifier(){let e=new od;return n=>n.modified.indexOf(e)>-1?n:od.get(n.base||n,n.modified.concat(e).sort((r,i)=>r.id-i.id))}}let Bz=0;class od{constructor(){this.instances=[],this.id=Bz++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&Fz(n,a.modified));if(r)return r;let i=[],s=new Or(i,e,n);for(let a of n)a.instances.push(s);let o=Hz(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(od.get(a,l));return s}}function Fz(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function Hz(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function Uz(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let h=0;;){if(a=="..."&&h>0&&h+3==i.length){o=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(s.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let f=i[h++];if(h==i.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);a=i.slice(h)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new ad(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return V2.add(e)}const V2=new Je;let ad=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};ad.empty=new ad([],2,null);function W2(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function jz(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function zz(t,e,n,r=0,i=t.length){let s=new Vz(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class Vz{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=i,u=Wz(e)||ad.empty,h=jz(s,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(n,a),c),u.opaque)return;let d=e.tree&&e.tree.prop(Je.mounted);if(d&&d.overlay){let f=e.node.enter(d.overlay[0].from+a,1),_=this.highlighters.filter(m=>!m.scope||m.scope(d.tree.type)),g=e.firstChild();for(let m=0,p=a;;m++){let b=m<d.overlay.length?d.overlay[m]:null,y=b?b.from+a:l,v=Math.max(n,p),E=Math.min(r,y);if(v<E&&g)for(;e.from<E&&(this.highlightRange(e,v,E,i,s),this.startSpan(Math.min(E,e.to),c),!(e.to>=y||!e.nextSibling())););if(!b||y>r)break;p=b.to+a,p>n&&(this.highlightRange(f.cursor(),Math.max(n,b.from+a),Math.min(r,p),"",_),this.startSpan(Math.min(r,p),c))}g&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function Wz(t){let e=t.type.prop(V2);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Ie=Or.define,Iu=Ie(),Ri=Ie(),PE=Ie(Ri),DE=Ie(Ri),Pi=Ie(),Lu=Ie(Pi),Pp=Ie(Pi),kr=Ie(),hs=Ie(kr),xr=Ie(),Ar=Ie(),Vg=Ie(),Ha=Ie(Vg),Mu=Ie(),ae={comment:Iu,lineComment:Ie(Iu),blockComment:Ie(Iu),docComment:Ie(Iu),name:Ri,variableName:Ie(Ri),typeName:PE,tagName:Ie(PE),propertyName:DE,attributeName:Ie(DE),className:Ie(Ri),labelName:Ie(Ri),namespace:Ie(Ri),macroName:Ie(Ri),literal:Pi,string:Lu,docString:Ie(Lu),character:Ie(Lu),attributeValue:Ie(Lu),number:Pp,integer:Ie(Pp),float:Ie(Pp),bool:Ie(Pi),regexp:Ie(Pi),escape:Ie(Pi),color:Ie(Pi),url:Ie(Pi),keyword:xr,self:Ie(xr),null:Ie(xr),atom:Ie(xr),unit:Ie(xr),modifier:Ie(xr),operatorKeyword:Ie(xr),controlKeyword:Ie(xr),definitionKeyword:Ie(xr),moduleKeyword:Ie(xr),operator:Ar,derefOperator:Ie(Ar),arithmeticOperator:Ie(Ar),logicOperator:Ie(Ar),bitwiseOperator:Ie(Ar),compareOperator:Ie(Ar),updateOperator:Ie(Ar),definitionOperator:Ie(Ar),typeOperator:Ie(Ar),controlOperator:Ie(Ar),punctuation:Vg,separator:Ie(Vg),bracket:Ha,angleBracket:Ie(Ha),squareBracket:Ie(Ha),paren:Ie(Ha),brace:Ie(Ha),content:kr,heading:hs,heading1:Ie(hs),heading2:Ie(hs),heading3:Ie(hs),heading4:Ie(hs),heading5:Ie(hs),heading6:Ie(hs),contentSeparator:Ie(kr),list:Ie(kr),quote:Ie(kr),emphasis:Ie(kr),strong:Ie(kr),link:Ie(kr),monospace:Ie(kr),strikethrough:Ie(kr),inserted:Ie(),deleted:Ie(),changed:Ie(),invalid:Ie(),meta:Mu,documentMeta:Ie(Mu),annotation:Ie(Mu),processingInstruction:Ie(Mu),definition:Or.defineModifier(),constant:Or.defineModifier(),function:Or.defineModifier(),standard:Or.defineModifier(),local:Or.defineModifier(),special:Or.defineModifier()};W2([{tag:ae.link,class:"tok-link"},{tag:ae.heading,class:"tok-heading"},{tag:ae.emphasis,class:"tok-emphasis"},{tag:ae.strong,class:"tok-strong"},{tag:ae.keyword,class:"tok-keyword"},{tag:ae.atom,class:"tok-atom"},{tag:ae.bool,class:"tok-bool"},{tag:ae.url,class:"tok-url"},{tag:ae.labelName,class:"tok-labelName"},{tag:ae.inserted,class:"tok-inserted"},{tag:ae.deleted,class:"tok-deleted"},{tag:ae.literal,class:"tok-literal"},{tag:ae.string,class:"tok-string"},{tag:ae.number,class:"tok-number"},{tag:[ae.regexp,ae.escape,ae.special(ae.string)],class:"tok-string2"},{tag:ae.variableName,class:"tok-variableName"},{tag:ae.local(ae.variableName),class:"tok-variableName tok-local"},{tag:ae.definition(ae.variableName),class:"tok-variableName tok-definition"},{tag:ae.special(ae.variableName),class:"tok-variableName2"},{tag:ae.definition(ae.propertyName),class:"tok-propertyName tok-definition"},{tag:ae.typeName,class:"tok-typeName"},{tag:ae.namespace,class:"tok-namespace"},{tag:ae.className,class:"tok-className"},{tag:ae.macroName,class:"tok-macroName"},{tag:ae.propertyName,class:"tok-propertyName"},{tag:ae.operator,class:"tok-operator"},{tag:ae.comment,class:"tok-comment"},{tag:ae.meta,class:"tok-meta"},{tag:ae.invalid,class:"tok-invalid"},{tag:ae.punctuation,class:"tok-punctuation"}]);var Dp;const Io=new Je;function Gz(t){return Ne.define({combine:t?e=>e.concat(t):void 0})}const $z=new Je;class fr{constructor(e,n,r=[],i=""){this.data=e,this.name=i,tt.prototype.hasOwnProperty("tree")||Object.defineProperty(tt.prototype,"tree",{get(){return Jt(this)}}),this.parser=n,this.extension=[es.of(this),tt.languageData.of((s,o,a)=>{let l=OE(s,o,a),c=l.type.prop(Io);if(!c)return[];let u=s.facet(c),h=l.type.prop($z);if(h){let d=l.resolve(o-l.from,a);for(let f of h)if(f.test(d,s)){let _=s.facet(f.facet);return f.type=="replace"?_:_.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return OE(e,n,r).type.prop(Io)==this.data}findRegions(e){let n=e.facet(es);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Io)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Je.mounted);if(a){if(a.tree.prop(Io)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Mt&&i(c,s.positions[l]+o)}};return i(Jt(e),0),r}get allowsNesting(){return!0}}fr.setState=Xe.define();function OE(t,e,n){let r=t.facet(es),i=Jt(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,wt.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Wg extends fr{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=Gz(e.languageData);return new Wg(n,e.parser.configure({props:[Io.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new Wg(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Jt(t){let e=t.field(fr.state,!1);return e?e.tree:Mt.empty}class qz{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let Ua=null;class ld{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new ld(e,n,[],Mt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new qz(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Mt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(ui.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(ui.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ua;Ua=this;try{return e()}finally{Ua=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=IE(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,d)=>l.push({fromA:c,toA:u,fromB:h,toB:d})),r=ui.applyChanges(r,l),i=Mt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new ld(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=IE(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends kz{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Ua;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Mt(kn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ua}}function IE(t,e,n){return ui.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class la{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new la(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=ld.create(e.facet(es).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new la(r)}}fr.state=Wt.define({create:la.init,update(t,e){for(let n of e.effects)if(n.is(fr.setState))return n.value;return e.startState.facet(es)!=e.state.facet(es)?la.init(e.state):t.apply(e)}});let G2=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(G2=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Op=typeof navigator<"u"&&(!((Dp=navigator.scheduling)===null||Dp===void 0)&&Dp.isInputPending)?()=>navigator.scheduling.isInputPending():null,Kz=Qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(fr.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(fr.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=G2(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(fr.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Op?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Op&&Op()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:fr.setState.of(new la(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Un(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),es=Ne.define({combine(t){return t.length?t[0]:null},enables:t=>[fr.state,Kz,Me.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class fue{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class Zt{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new Zt(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const Yz=Ne.define(),va=Ne.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function cd(t){let e=t.facet(va);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Kl(t,e){let n="",r=t.tabSize,i=t.facet(va)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function cb(t,e){t instanceof tt&&(t=new pf(t));for(let r of t.state.facet(Yz)){let i=r(t,e);if(i!==void 0)return i}let n=Jt(t.state);return n.length>=e?Qz(t,n,e):null}class pf{constructor(e,n={}){this.state=e,this.options=n,this.unit=cd(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return uf(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Xz=new Je;function Qz(t,e,n){let r=e.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o!=r.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return $2(r,t,n)}function $2(t,e,n){for(let r=t;r;r=r.next){let i=Zz(r.node);if(i)return i(ub.create(e,n,r))}return 0}function Jz(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Zz(t){let e=t.type.prop(Xz);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Je.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>q2(o,!0,1,void 0,s&&!Jz(o)?i.from:void 0)}return t.parent==null?eV:null}function eV(){return 0}class ub extends pf{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new ub(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(tV(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return $2(this.context.next,this.base,this.pos)}}function tV(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function nV(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function pue({closing:t,align:e=!0,units:n=1}){return r=>q2(r,e,n,t)}function q2(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?nV(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const mue=t=>t.baseIndent;function gue({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const rV=200;function iV(){return tt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+rV)return t;let s=n.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=cb(o,u.from);if(h==null)continue;let d=/^\s*/.exec(u.text)[0],f=Kl(o,h);d!=f&&l.push({from:u.from,to:u.from+d.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const sV=Ne.define(),oV=new Je;function _ue(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function aV(t,e,n){let r=Jt(t);if(r.length<n)return null;let i=r.resolveStack(n,1),s=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(oV);if(l&&(a.to<r.length-50||r.length==t.doc.length||!lV(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function lV(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function LE(t,e,n){for(let r of t.facet(sV)){let i=r(t,e,n);if(i)return i}return aV(t,e,n)}function K2(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Y2=Xe.define({map:K2}),hb=Xe.define({map:K2}),ud=Wt.define({create(){return Ze.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Y2)&&!cV(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(X2),i=r?Ze.replace({widget:new dV(r(e.state,n.value))}):ME;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(hb)&&(t=t.update({filter:(r,i)=>n.value.from!=r||n.value.to!=i,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(i,s)=>{i<r&&s>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return t},provide:t=>Me.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,i)=>{n.push(r,i)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(ME.range(r,i))}return Ze.set(e,!0)}});function Gg(t,e,n){var r;let i=null;return(r=t.field(ud,!1))===null||r===void 0||r.between(e,n,(s,o)=>{(!i||i.from>s)&&(i={from:s,to:o})}),i}function cV(t,e,n){let r=!1;return t.between(e,e,(i,s)=>{i==e&&s==n&&(r=!0)}),r}const uV={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},X2=Ne.define({combine(t){return no(t,uV)}});function hV(t){return[ud,mV]}function Q2(t,e){let{state:n}=t,r=n.facet(X2),i=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=Gg(t.state,a.from,a.to);l&&t.dispatch({effects:hb.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,i,e);let s=document.createElement("span");return s.textContent=r.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const ME=Ze.replace({widget:new class extends ya{toDOM(t){return Q2(t,null)}}});class dV extends ya{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Q2(e,this.value)}}const fV={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ip extends _i{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function pV(t={}){let e=Object.assign(Object.assign({},fV),t),n=new Ip(e,!0),r=new Ip(e,!1),i=Qt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(es)!=o.state.facet(es)||o.startState.field(ud,!1)!=o.state.field(ud,!1)||Jt(o.startState)!=Jt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Gs;for(let l of o.viewportLineBlocks){let c=Gg(o.state,l.from,l.to)?r:LE(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:s}=e;return[i,hz({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||rt.empty},initialSpacer(){return new Ip(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,a,l)=>{if(s.click&&s.click(o,a,l))return!0;let c=Gg(o.state,a.from,a.to);if(c)return o.dispatch({effects:hb.of(c)}),!0;let u=LE(o.state,a.from,a.to);return u?(o.dispatch({effects:Y2.of(u)}),!0):!1}})}),hV()]}const mV=Me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Bc{constructor(e,n){this.specs=e;let r;function i(a){let l=Xi.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof fr?a=>a.prop(Io)==o.data:o?a=>a==o:void 0,this.style=W2(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Xi(r):null,this.themeType=n.themeType}static define(e,n){return new Bc(e,n||{})}}const $g=Ne.define(),gV=Ne.define({combine(t){return t.length?[t[0]]:null}});function Lp(t){let e=t.facet($g);return e.length?e:t.facet(gV)}function _V(t,e){let n=[yV],r;return t instanceof Bc&&(t.module&&n.push(Me.styleModule.of(t.module)),r=t.themeType),r?n.push($g.computeN([Me.darkTheme],i=>i.facet(Me.darkTheme)==(r=="dark")?[t]:[])):n.push($g.of(t)),n}class bV{constructor(e){this.markCache=Object.create(null),this.tree=Jt(e.state),this.decorations=this.buildDeco(e,Lp(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Jt(e.state),r=Lp(e.state),i=r!=Lp(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Ze.none;let r=new Gs;for(let{from:i,to:s}of e.visibleRanges)zz(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Ze.mark({class:l})))},i,s);return r.finish()}}const yV=ss.high(Qt.fromClass(bV,{decorations:t=>t.decorations}));ae.meta,ae.link,ae.heading,ae.emphasis,ae.strong,ae.strikethrough,ae.keyword,ae.atom,ae.bool,ae.url,ae.contentSeparator,ae.labelName,ae.literal,ae.inserted,ae.string,ae.deleted,ae.regexp,ae.escape,ae.string,ae.variableName,ae.variableName,ae.typeName,ae.namespace,ae.className,ae.variableName,ae.macroName,ae.propertyName,ae.comment,ae.invalid;const vV=Me.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),J2=1e4,Z2="()[]{}",eR=Ne.define({combine(t){return no(t,{afterCursor:!0,brackets:Z2,maxScanDistance:J2,renderMatch:SV})}}),EV=Ze.mark({class:"cm-matchingBracket"}),wV=Ze.mark({class:"cm-nonmatchingBracket"});function SV(t){let e=[],n=t.matched?EV:wV;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const TV=Wt.define({create(){return Ze.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(eR);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=zr(e.state,i.head,-1,r)||i.head>0&&zr(e.state,i.head-1,1,r)||r.afterCursor&&(zr(e.state,i.head,1,r)||i.head<e.state.doc.length&&zr(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Ze.set(n,!0)},provide:t=>Me.decorations.from(t)}),CV=[TV,vV];function xV(t={}){return[eR.of(t),CV]}const AV=new Je;function qg(t,e,n){let r=t.prop(e<0?Je.openedBy:Je.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function Kg(t){let e=t.type.prop(AV);return e?e(t.node):t}function zr(t,e,n,r={}){let i=r.maxScanDistance||J2,s=r.brackets||Z2,o=Jt(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=qg(l.type,n,s);if(c&&l.from<l.to){let u=Kg(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return kV(t,e,n,l,u,c,s)}}return RV(t,e,n,o,a.type,i,s)}function kV(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let h=Kg(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(qg(u.type,n,o))c++;else if(qg(u.type,-n,o)){if(c==0){let h=Kg(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function RV(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=s;){let f=u.value;n<0&&(d+=f.length);let _=e+d*n;for(let g=n>0?0:f.length-1,m=n>0?f.length:-1;g!=m;g+=n){let p=o.indexOf(f[g]);if(!(p<0||r.resolveInner(_+g,1).type!=i))if(p%2==0==n>0)h++;else{if(h==1)return{start:c,end:{from:_+g,to:_+g+1},matched:p>>1==l>>1};h--}}n>0&&(d+=f.length)}return u.done?{start:c,matched:!1}:null}const PV=Object.create(null),NE=[kn.none],BE=[],FE=Object.create(null),DV=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])DV[t]=OV(PV,e);function Mp(t,e){BE.indexOf(t)>-1||(BE.push(t),console.warn(e))}function OV(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||ae[c];u?typeof u=="function"?l.length?l=l.map(u):Mp(c,`Modifier ${c} used at start of tag`):l.length?Mp(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Mp(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=FE[i];if(s)return s.id;let o=FE[i]=kn.define({id:NE.length,name:r,props:[Uz({[r]:n})]});return NE.push(o),o.id}vt.RTL,vt.LTR;class tR{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[]}tokenBefore(e){let n=Jt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(nR(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function HE(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function IV(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=HE(e)+HE(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function LV(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:IV(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function bue(t,e){return n=>{for(let r=Jt(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class UE{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function zi(t){return t.selection.main.from}function nR(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const db=vi.define();function MV(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:Ae.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const jE=new WeakMap;function NV(t){if(!Array.isArray(t))return t;let e=jE.get(t);return e||jE.set(t,e=LV(t)),e}const hd=Xe.define(),Yl=Xe.define();class BV{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=Sn(e,n),i=dr(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(Sn(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let b=Sn(e,0),y=dr(b),v=y==e.length?0:-100;if(b!=n[0])if(b==r[0])v+=-200;else return null;return this.ret(v,[0,y])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,y=Math.min(e.length,200);b<y&&c<l;){let v=Sn(e,b);(v==n[c]||v==r[c])&&(i[c++]=b),b+=dr(v)}if(c<l)return null}let u=0,h=0,d=!1,f=0,_=-1,g=-1,m=/[a-z]/.test(e),p=!0;for(let b=0,y=Math.min(e.length,200),v=0;b<y&&h<l;){let E=Sn(e,b);a<0&&(u<l&&E==n[u]&&(s[u++]=b),f<l&&(E==n[f]||E==r[f]?(f==0&&(_=b),g=b+1,f++):f=0));let w,T=E<255?E>=48&&E<=57||E>=97&&E<=122?2:E>=65&&E<=90?1:0:(w=Y_(E))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!b||T==1&&m||v==0&&T!=0)&&(n[h]==E||r[h]==E&&(d=!0)?o[h++]=b:o.length&&(p=!1)),v=T,b+=dr(E)}return h==l&&o[0]==0&&p?this.result(-100+(d?-200:0),o,e):f==l&&_==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[_,g]):h==l?this.result(-100+(d?-200:0)+-700+(p?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?dr(Sn(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class FV{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const Yt=Ne.define({combine(t){return no(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:HV,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>zE(e(r),n(r)),optionClass:(e,n)=>r=>zE(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function zE(t,e){return t?e?t+" "+e:t:e}function HV(t,e,n,r,i,s){let o=t.textDirection==vt.RTL,a=o,l=!1,c="top",u,h,d=e.left-i.left,f=i.right-e.right,_=r.right-r.left,g=r.bottom-r.top;if(a&&d<Math.min(_,f)?a=!1:!a&&f<Math.min(_,d)&&(a=!0),_<=(a?d:f))u=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,h=Math.min(400,a?d:f);else{l=!0,h=Math.min(400,(o?e.right:i.right-e.left)-30);let b=i.bottom-e.bottom;b>=g||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let m=(e.bottom-e.top)/s.offsetHeight,p=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/m}px; max-width: ${h/p}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function UV(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],h=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let d=o.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(a.slice(u,h))),d.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function Np(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class jV{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(Yt);this.optionContent=UV(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=Np(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Yt).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Yl.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=Np(s.length,o,e.state.facet(Yt).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Np(n.options.length,n.selected,this.view.state.facet(Yt).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Un(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&VV(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Yt).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let d=typeof c=="string"?c:c.name;if(d!=s&&(o>r.from||r.from==0))if(s=d,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=d}}const u=i.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let d of this.optionContent){let f=d(a,this.view.state,this.view,l);f&&u.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function zV(t,e){return n=>new jV(n,t,e)}function VV(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function VE(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function WV(t,e){let n=[],r=null,i=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let h=typeof u=="string"?u:u.name;r.some(d=>d.name==h)||r.push(typeof u=="string"?{name:h}:u)}},s=e.facet(Yt);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let h of c.result.options)i(new UE(h,c.source,u?u(h):[],1e9-n.length));else{let h=e.sliceDoc(c.from,c.to),d,f=s.filterStrict?new FV(h):new BV(h);for(let _ of c.result.options)if(d=f.match(_.label)){let g=_.displayLabel?u?u(_,d.matched):[]:d.matched;i(new UE(_,c.source,g,d.score+(_.boost||0)))}}}if(r){let c=Object.create(null),u=0,h=(d,f)=>{var _,g;return((_=d.rank)!==null&&_!==void 0?_:1e9)-((g=f.rank)!==null&&g!==void 0?g:1e9)||(d.name<f.name?-1:1)};for(let d of r.sort(h))u-=1e5,c[d.name]=u;for(let d of n){let{section:f}=d.completion;f&&(d.score+=c[typeof f=="string"?f:f.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,h)=>h.score-u.score||l(u.completion,h.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):VE(c.completion)>VE(a)&&(o[o.length-1]=c),a=c.completion}return o}class Lo{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Lo(this.options,WE(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s){let o=WV(e,n);if(!o.length)return i&&e.some(l=>l.state==1)?new Lo(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=n.facet(Yt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Lo(o,WE(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:XV,above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Lo(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dd{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new dd(KV,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(Yt),s=(r.override||n.languageDataAt("autocomplete",zi(n)).map(NV)).map(a=>(this.active.find(c=>c.source==a)||new Bn(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!GV(s,this.active)?o=Lo.build(s,n,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Bn(a.source,0):a));for(let a of e.effects)a.is(sR)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new dd(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?$V:qV}}function GV(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const $V={"aria-autocomplete":"list"},qV={};function WE(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const KV=[];function rR(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(db);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Bn{constructor(e,n,r=-1){this.source=e,this.state=n,this.explicitPos=r}hasResult(){return!1}update(e,n){let r=rR(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new Bn(i.source,0)),r&4&&i.state==0&&(i=new Bn(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(hd))i=new Bn(i.source,1,s.value?zi(e.state):-1);else if(s.is(Yl))i=new Bn(i.source,0);else if(s.is(iR))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Bn(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(zi(e.state))}}class Ko extends Bn{constructor(e,n,r,i,s){super(e,2,n),this.result=r,this.from=i,this.to=s}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=zi(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||!i||n&2&&zi(e.startState)==this.from)return new Bn(this.source,n&4?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return YV(i.validFor,e.state,s,o)?new Ko(this.source,l,i,s,o):i.update&&(i=i.update(i,s,o,new tR(e.state,a,l>=0)))?new Ko(this.source,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:zi(e.state)):new Bn(this.source,1,l)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ko(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Bn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function YV(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):nR(t,!0).test(i)}const iR=Xe.define({map(t,e){return t.map(n=>n.map(e))}}),sR=Xe.define(),Cn=Wt.define({create(){return dd.start()},update(t,e){return t.update(e)},provide:t=>[sb.from(t,e=>e.tooltip),Me.contentAttributes.from(t,e=>e.attrs)]});function fb(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Cn).active.find(i=>i.source==e.source);return r instanceof Ko?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},MV(t.state,n,r.from,r.to)),{annotations:db.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const XV=zV(Cn,fb);function Nu(t,e="option"){return n=>{let r=n.state.field(Cn,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(Yt).interactionDelay)return!1;let i=1,s;e=="page"&&(s=M2(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:sR.of(a)}),!0}}const oR=t=>{let e=t.state.field(Cn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Yt).interactionDelay?!1:fb(t,e.open.options[e.open.selected])},QV=t=>t.state.field(Cn,!1)?(t.dispatch({effects:hd.of(!0)}),!0):!1,JV=t=>{let e=t.state.field(Cn,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Yl.of(null)}),!0)};class ZV{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const eW=50,tW=1e3,nW=Qt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Cn).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(Cn),n=t.state.facet(Yt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Cn)==e)return;let r=t.transactions.some(s=>{let o=rR(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.updates.length+t.transactions.length>eW&&Date.now()-o.time>tW){for(let a of o.context.abortListeners)try{a()}catch(l){Un(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(hd)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Cn);for(let n of e.active)n.state==1&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=zi(e),r=new tR(e,n,t.explicitPos==n,this.view),i=new ZV(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Yl.of(null)}),Un(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Yt);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Ko(i.active.source,i.active.explicitPos,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:zi(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,n);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Cn).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Bn(i.active.source,0);for(let a of i.updates)o=o.update(a,n);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:iR.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Cn,!1);if(e&&e.tooltip&&this.view.state.facet(Yt).closeOnBlur){let n=e.open&&M2(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Yl.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:hd.of(!1)}),20),this.composing=0}}}),rW=typeof navigator=="object"&&/Win/.test(navigator.platform),iW=ss.highest(Me.domEventHandlers({keydown(t,e){let n=e.state.field(Cn,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(rW&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&fb(e,r),!1}})),aR=Me.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class sW{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class pb{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,sn.TrackDel),r=e.mapPos(this.to,1,sn.TrackDel);return n==null||r==null?null:new pb(this.field,n,r)}}class mb{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(va);i.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new pb(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(a!=null?n[h].seq==a:u&&n[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<n.length&&(a==null||n[h].seq!=null&&n[h].seq<a);)h++;n.splice(h,0,{seq:a,name:u}),c=h;for(let d of i)d.field>=c&&d.field++}i.push(new sW(c,r.length,s.index,s.index+u.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of i)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new mb(r,i)}}let oW=Ze.widget({widget:new class extends ya{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),aW=Ze.mark({class:"cm-snippetField"});class Ea{constructor(e,n){this.ranges=e,this.active=n,this.deco=Ze.set(e.map(r=>(r.from==r.to?oW:aW).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new Ea(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const Fc=Xe.define({map(t,e){return t&&t.map(e)}}),lW=Xe.define(),Xl=Wt.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Fc))return n.value;if(n.is(lW)&&t)return new Ea(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Me.decorations.from(t,e=>e?e.deco:Ze.none)});function gb(t,e){return Ae.create(t.filter(n=>n.field==e).map(n=>Ae.range(n.from,n.to)))}function cW(t){let e=mb.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),l={changes:{from:i,to:s,insert:st.of(o)},scrollIntoView:!0,annotations:r?[db.of(r),Ot.userEvent.of("input.complete")]:void 0};if(a.length&&(l.selection=gb(a,0)),a.some(c=>c.field>0)){let c=new Ea(a,0),u=l.effects=[Fc.of(c)];n.state.field(Xl,!1)===void 0&&u.push(Xe.appendConfig.of([Xl,pW,mW,aR]))}n.dispatch(n.state.update(l))}}function lR(t){return({state:e,dispatch:n})=>{let r=e.field(Xl,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:gb(r.ranges,i),effects:Fc.of(s?null:new Ea(r.ranges,i)),scrollIntoView:!0})),!0}}const uW=({state:t,dispatch:e})=>t.field(Xl,!1)?(e(t.update({effects:Fc.of(null)})),!0):!1,hW=lR(1),dW=lR(-1),fW=[{key:"Tab",run:hW,shift:dW},{key:"Escape",run:uW}],GE=Ne.define({combine(t){return t.length?t[0]:fW}}),pW=ss.highest(ff.compute([GE],t=>t.facet(GE)));function yue(t,e){return Object.assign(Object.assign({},e),{apply:cW(t)})}const mW=Me.domEventHandlers({mousedown(t,e){let n=e.state.field(Xl,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:gb(n.ranges,i.field),effects:Fc.of(n.ranges.some(s=>s.field>i.field)?new Ea(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),fd={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Rs=Xe.define({map(t,e){let n=e.mapPos(t,-1,sn.TrackAfter);return n??void 0}}),_b=new class extends Ws{};_b.startSide=1;_b.endSide=-1;const cR=Wt.define({create(){return rt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Rs)&&(t=t.update({add:[_b.range(n.value,n.value+1)]}));return t}});function gW(){return[vW,cR]}const Bp="()[]{}<>";function _W(t){for(let e=0;e<Bp.length;e+=2)if(Bp.charCodeAt(e)==t)return Bp.charAt(e+1);return Y_(t<128?t:t+1)}function bW(t,e){return t.languageDataAt("closeBrackets",e)[0]||fd}const yW=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),vW=Me.inputHandler.of((t,e,n,r)=>{if((yW?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&dr(Sn(r,0))==1||e!=i.from||n!=i.to)return!1;let s=EW(t.state,r);return s?(t.dispatch(s),!0):!1});function EW(t,e){let n=bW(t,t.selection.main.head),r=n.brackets||fd.brackets;for(let i of r){let s=_W(Sn(i,0));if(e==i)return s==i?TW(t,i,r.indexOf(i+i+i)>-1,n):wW(t,i,s,n.before||fd.before);if(e==s&&uR(t,t.selection.main.from))return SW(t,i,s)}return null}function uR(t,e){let n=!1;return t.field(cR).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function bb(t,e){let n=t.sliceString(e,e+2);return n.slice(0,dr(Sn(n,0)))}function wW(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Rs.of(o.to+e.length),range:Ae.range(o.anchor+e.length,o.head+e.length)};let a=bb(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Rs.of(o.head+e.length),range:Ae.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function SW(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&bb(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:Ae.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function TW(t,e,n,r){let i=r.stringPrefixes||fd.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Rs.of(a.to+e.length),range:Ae.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=bb(t.doc,l),u;if(c==e){if($E(t,l))return{changes:{insert:e+e,from:l},effects:Rs.of(l+e.length),range:Ae.cursor(l+e.length)};if(uR(t,l)){let d=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+d.length,insert:d},range:Ae.cursor(l+d.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=qE(t,l-2*e.length,i))>-1&&$E(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Rs.of(l+e.length),range:Ae.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=It.Word&&qE(t,l,i)>-1&&!CW(t,l,e,i))return{changes:{insert:e+e,from:l},effects:Rs.of(l+e.length),range:Ae.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function $E(t,e){let n=Jt(t).resolveInner(e+1);return n.parent&&n.from==e}function CW(t,e,n,r){let i=Jt(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function qE(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=It.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=It.Word)return s}return-1}function xW(t={}){return[iW,Cn,Yt.of(t),nW,kW,aR]}const AW=[{key:"Ctrl-Space",run:QV},{key:"Escape",run:JV},{key:"ArrowDown",run:Nu(!0)},{key:"ArrowUp",run:Nu(!1)},{key:"PageDown",run:Nu(!0,"page")},{key:"PageUp",run:Nu(!1,"page")},{key:"Enter",run:oR}],kW=ss.highest(ff.computeN([Yt],t=>t.facet(Yt).defaultKeymap?[AW]:[])),RW=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=vb(t.state,n.from);return r.line?PW(t):r.block?OW(t):!1};function yb(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const PW=yb(MW,0),DW=yb(hR,0),OW=yb((t,e)=>hR(t,e,LW(e)),0);function vb(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const ja=50;function IW(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-ja,r),o=t.sliceDoc(i,i+ja),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,h;i-r<=2*ja?u=h=t.sliceDoc(r,i):(u=t.sliceDoc(r,r+ja),h=t.sliceDoc(i-ja,i));let d=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(h)[0].length,_=h.length-f-n.length;return u.slice(d,d+e.length)==e&&h.slice(_,_+n.length)==n?{open:{pos:r+d+e.length,margin:/\s/.test(u.charAt(d+e.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(h.charAt(_-1))?1:0}}:null}function LW(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function hR(t,e,n=e.selection.ranges){let r=n.map(s=>vb(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>IW(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function MW(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,c=vb(e,s).line;if(c){for(let u=s;u<=o;){let h=e.doc.lineAt(u);if(h.from>i&&(s==o||o>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,f=d==h.length,_=h.text.slice(d,d+c.length)==c?d:-1;d<h.text.length&&d<l&&(l=d),r.push({line:h,comment:_,token:c,indent:d,empty:f,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of r)(h||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Yg=vi.define(),NW=vi.define(),BW=Ne.define(),dR=Ne.define({combine(t){return no(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),fR=Wt.define({create(){return Vr.empty},update(t,e){let n=e.state.facet(dR),r=e.annotation(Yg);if(r){let l=An.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=pd(u,u.length,n.minDepth,l):u=gR(u,e.startState.selection),new Vr(c==0?r.rest:u,c==0?u:r.rest)}let i=e.annotation(NW);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Ot.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=An.fromTransaction(e),o=e.annotation(Ot.time),a=e.annotation(Ot.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Vr(t.done.map(An.fromJSON),t.undone.map(An.fromJSON))}});function FW(t={}){return[fR,dR.of(t),Me.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?pR:e.inputType=="historyRedo"?Xg:null;return r?(e.preventDefault(),r(n)):!1}})]}function mf(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(fR,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const pR=mf(0,!1),Xg=mf(1,!1),HW=mf(0,!0),UW=mf(1,!0);class An{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new An(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new An(e.changes&&Lt.fromJSON(e.changes),[],e.mapped&&qr.fromJSON(e.mapped),e.startSelection&&Ae.fromJSON(e.startSelection),e.selectionsAfter.map(Ae.fromJSON))}static fromTransaction(e,n){let r=Qn;for(let i of e.startState.facet(BW)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new An(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Qn)}static selection(e){return new An(void 0,Qn,void 0,void 0,e)}}function pd(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function jW(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function zW(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function mR(t,e){return t.length?e.length?t.concat(e):t:e}const Qn=[],VW=200;function gR(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-VW));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),pd(t,t.length-1,1e9,n.setSelAfter(r)))}else return[An.selection([e])]}function WW(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Fp(t,e){if(!t.length)return t;let n=t.length,r=Qn;for(;n;){let i=GW(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[An.selection(r)]:Qn}function GW(t,e,n){let r=mR(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Qn,n);if(!t.changes)return An.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new An(i,Xe.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const $W=/^(input\.type|delete)($|\.)/;class Vr{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vr(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||$W.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,jW(a.changes,e.changes))||r=="input.type.compose")?o=pd(o,o.length-1,i.minDepth,new An(e.changes.compose(a.changes),mR(e.effects,a.effects),a.mapped,a.startSelection,Qn)):o=pd(o,o.length,i.minDepth,e),new Vr(o,Qn,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Qn;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&zW(s[s.length-1],e)?this:new Vr(gR(this.done,e),this.undone,n,r)}addMapping(e){return new Vr(Fp(this.done,e),Fp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Yg.of({side:e,rest:WW(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Qn:i.slice(0,i.length-1);return s.mapped&&(a=Fp(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Yg.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vr.empty=new Vr(Qn,Qn);const qW=[{key:"Mod-z",run:pR,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Xg,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Xg,preventDefault:!0},{key:"Mod-u",run:HW,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:UW,preventDefault:!0}];function wa(t,e){return Ae.create(t.ranges.map(e),t.mainIndex)}function Xr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function wr({state:t,dispatch:e},n){let r=wa(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Xr(t,r)),!0)}function gf(t,e){return Ae.cursor(e?t.to:t.from)}function _R(t,e){return wr(t,n=>n.empty?t.moveByChar(n,e):gf(n,e))}function hn(t){return t.textDirectionAt(t.state.selection.main.head)==vt.LTR}const bR=t=>_R(t,!hn(t)),yR=t=>_R(t,hn(t));function vR(t,e){return wr(t,n=>n.empty?t.moveByGroup(n,e):gf(n,e))}const KW=t=>vR(t,!hn(t)),YW=t=>vR(t,hn(t));function XW(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function _f(t,e,n){let r=Jt(t).resolveInner(e.head),i=n?Je.closedBy:Je.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;XW(t,c,i)?r=c:l=n?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=n?zr(t,r.from,1):zr(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,Ae.cursor(a,n?-1:1)}const QW=t=>wr(t,e=>_f(t.state,e,!hn(t))),JW=t=>wr(t,e=>_f(t.state,e,hn(t)));function ER(t,e){return wr(t,n=>{if(!n.empty)return gf(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const wR=t=>ER(t,!1),SR=t=>ER(t,!0);function TR(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Me.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function CR(t,e){let n=TR(t),{state:r}=t,i=wa(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):gf(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Me.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Xr(r,i),{effects:s}),!0}const KE=t=>CR(t,!1),Qg=t=>CR(t,!0);function os(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Ae.cursor(r.from+s))}return i}const ZW=t=>wr(t,e=>os(t,e,!0)),eG=t=>wr(t,e=>os(t,e,!1)),tG=t=>wr(t,e=>os(t,e,!hn(t))),nG=t=>wr(t,e=>os(t,e,hn(t))),rG=t=>wr(t,e=>Ae.cursor(t.lineBlockAt(e.head).from,1)),iG=t=>wr(t,e=>Ae.cursor(t.lineBlockAt(e.head).to,-1));function sG(t,e,n){let r=!1,i=wa(t.selection,s=>{let o=zr(t,s.head,-1)||zr(t,s.head,1)||s.head>0&&zr(t,s.head-1,1)||s.head<t.doc.length&&zr(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return Ae.cursor(a)});return r?(e(Xr(t,i)),!0):!1}const oG=({state:t,dispatch:e})=>sG(t,e);function or(t,e){let n=wa(t.state.selection,r=>{let i=e(r);return Ae.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Xr(t.state,n)),!0)}function xR(t,e){return or(t,n=>t.moveByChar(n,e))}const AR=t=>xR(t,!hn(t)),kR=t=>xR(t,hn(t));function RR(t,e){return or(t,n=>t.moveByGroup(n,e))}const aG=t=>RR(t,!hn(t)),lG=t=>RR(t,hn(t)),cG=t=>or(t,e=>_f(t.state,e,!hn(t))),uG=t=>or(t,e=>_f(t.state,e,hn(t)));function PR(t,e){return or(t,n=>t.moveVertically(n,e))}const DR=t=>PR(t,!1),OR=t=>PR(t,!0);function IR(t,e){return or(t,n=>t.moveVertically(n,e,TR(t).height))}const YE=t=>IR(t,!1),XE=t=>IR(t,!0),hG=t=>or(t,e=>os(t,e,!0)),dG=t=>or(t,e=>os(t,e,!1)),fG=t=>or(t,e=>os(t,e,!hn(t))),pG=t=>or(t,e=>os(t,e,hn(t))),mG=t=>or(t,e=>Ae.cursor(t.lineBlockAt(e.head).from)),gG=t=>or(t,e=>Ae.cursor(t.lineBlockAt(e.head).to)),QE=({state:t,dispatch:e})=>(e(Xr(t,{anchor:0})),!0),JE=({state:t,dispatch:e})=>(e(Xr(t,{anchor:t.doc.length})),!0),ZE=({state:t,dispatch:e})=>(e(Xr(t,{anchor:t.selection.main.anchor,head:0})),!0),ew=({state:t,dispatch:e})=>(e(Xr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),_G=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),bG=({state:t,dispatch:e})=>{let n=bf(t).map(({from:r,to:i})=>Ae.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:Ae.create(n),userEvent:"select"})),!0},yG=({state:t,dispatch:e})=>{let n=wa(t.selection,r=>{var i;let s=Jt(t).resolveStack(r.from,1);for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&(!((i=a.parent)===null||i===void 0)&&i.parent))return Ae.range(a.to,a.from)}return r});return e(Xr(t,n)),!0},vG=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ae.create([n.main]):n.main.empty||(r=Ae.create([Ae.cursor(n.main.head)])),r?(e(Xr(t,r)),!0):!1};function Hc(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Bu(t,l,!1)):l>o&&(n="delete.forward",l=Bu(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Bu(t,o,!1),a=Bu(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:Ae.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Me.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Bu(t,e,n){if(t instanceof Me)for(let r of t.state.facet(Me.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const LR=(t,e,n)=>Hc(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=uf(a,s.tabSize),u=c%cd(s)||cd(s);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)i--;l=i}else l=Xt(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=Xt(o.text,l-o.from,!1,!1)+o.from);return l}),Jg=t=>LR(t,!1,!0),MR=t=>LR(t,!0,!1),NR=(t,e)=>Hc(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Xt(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),BR=t=>NR(t,!1),EG=t=>NR(t,!0),wG=t=>Hc(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),SG=t=>Hc(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),TG=t=>Hc(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),CG=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:st.of(["",""])},range:Ae.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},xG=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:Xt(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Xt(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:Ae.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function bf(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function FR(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of bf(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(Ae.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(Ae.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:Ae.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const AG=({state:t,dispatch:e})=>FR(t,e,!1),kG=({state:t,dispatch:e})=>FR(t,e,!0);function HR(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of bf(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const RG=({state:t,dispatch:e})=>HR(t,e,!1),PG=({state:t,dispatch:e})=>HR(t,e,!0),DG=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(bf(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=wa(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function OG(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Jt(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Je.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const IG=UR(!1),LG=UR(!0);function UR(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&OG(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new pf(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=cb(c,s);for(u==null&&(u=uf(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let h=["",Kl(e,u)];return l&&h.push(Kl(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:st.of(h)},range:Ae.cursor(s+1+h[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Eb(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:Ae.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const MG=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new pf(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=Eb(t,(s,o,a)=>{let l=cb(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Kl(t,l);(c!=u||a.from<s.from+c.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},NG=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Eb(t,(n,r)=>{r.push({from:n.from,insert:t.facet(va)})}),{userEvent:"input.indent"})),!0),jR=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Eb(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=uf(i,t.tabSize),o=0,a=Kl(t,Math.max(0,s-cd(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),BG=t=>(t.setTabFocusMode(),!0),FG=[{key:"Ctrl-b",run:bR,shift:AR,preventDefault:!0},{key:"Ctrl-f",run:yR,shift:kR},{key:"Ctrl-p",run:wR,shift:DR},{key:"Ctrl-n",run:SR,shift:OR},{key:"Ctrl-a",run:rG,shift:mG},{key:"Ctrl-e",run:iG,shift:gG},{key:"Ctrl-d",run:MR},{key:"Ctrl-h",run:Jg},{key:"Ctrl-k",run:wG},{key:"Ctrl-Alt-h",run:BR},{key:"Ctrl-o",run:CG},{key:"Ctrl-t",run:xG},{key:"Ctrl-v",run:Qg}],HG=[{key:"ArrowLeft",run:bR,shift:AR,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:KW,shift:aG,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:tG,shift:fG,preventDefault:!0},{key:"ArrowRight",run:yR,shift:kR,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:YW,shift:lG,preventDefault:!0},{mac:"Cmd-ArrowRight",run:nG,shift:pG,preventDefault:!0},{key:"ArrowUp",run:wR,shift:DR,preventDefault:!0},{mac:"Cmd-ArrowUp",run:QE,shift:ZE},{mac:"Ctrl-ArrowUp",run:KE,shift:YE},{key:"ArrowDown",run:SR,shift:OR,preventDefault:!0},{mac:"Cmd-ArrowDown",run:JE,shift:ew},{mac:"Ctrl-ArrowDown",run:Qg,shift:XE},{key:"PageUp",run:KE,shift:YE},{key:"PageDown",run:Qg,shift:XE},{key:"Home",run:eG,shift:dG,preventDefault:!0},{key:"Mod-Home",run:QE,shift:ZE},{key:"End",run:ZW,shift:hG,preventDefault:!0},{key:"Mod-End",run:JE,shift:ew},{key:"Enter",run:IG},{key:"Mod-a",run:_G},{key:"Backspace",run:Jg,shift:Jg},{key:"Delete",run:MR},{key:"Mod-Backspace",mac:"Alt-Backspace",run:BR},{key:"Mod-Delete",mac:"Alt-Delete",run:EG},{mac:"Mod-Backspace",run:SG},{mac:"Mod-Delete",run:TG}].concat(FG.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),UG=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:QW,shift:cG},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:JW,shift:uG},{key:"Alt-ArrowUp",run:AG},{key:"Shift-Alt-ArrowUp",run:RG},{key:"Alt-ArrowDown",run:kG},{key:"Shift-Alt-ArrowDown",run:PG},{key:"Escape",run:vG},{key:"Mod-Enter",run:LG},{key:"Alt-l",mac:"Ctrl-l",run:bG},{key:"Mod-i",run:yG,preventDefault:!0},{key:"Mod-[",run:jR},{key:"Mod-]",run:NG},{key:"Mod-Alt-\\",run:MG},{key:"Shift-Mod-k",run:DG},{key:"Shift-Mod-\\",run:oG},{key:"Mod-/",run:RW},{key:"Alt-A",run:DW},{key:"Ctrl-m",mac:"Shift-Alt-m",run:BG}].concat(HG);function en(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)zR(t,arguments[e]);return t}function zR(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)zR(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const tw=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ql{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(tw(a)):tw,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Sn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Y_(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=dr(e);let i=this.normalize(n);for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ql.prototype[Symbol.iterator]=function(){return this});const VR={from:-1,to:-1,match:/.*/.exec("")},wb="gm"+(/x/.unicode==null?"":"u");class WR{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=VR,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new GR(e,n,r,i,s);this.re=new RegExp(n,wb+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=md(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=md(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Hp=new WeakMap;class Yo{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=Hp.get(e);if(!i||i.from>=r||i.to<=n){let a=new Yo(n,e.sliceString(n,r));return Hp.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),Hp.set(e,new Yo(o,s)),new Yo(n,s.slice(n-o,r-o))}}class GR{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=VR,this.matchPos=md(e,i),this.re=new RegExp(n,wb+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Yo.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=md(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Yo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(WR.prototype[Symbol.iterator]=GR.prototype[Symbol.iterator]=function(){return this});function jG(t){try{return new RegExp(t,wb),!0}catch{return!1}}function md(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function Zg(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=en("input",{class:"cm-textfield",name:"line",value:e}),r=en("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:gd.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},en("label",t.state.phrase("Go to line"),": ",n)," ",en("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,h]=s,d=u?+u.slice(1):0,f=c?+c:a.number;if(c&&h){let m=f/100;l&&(m=m*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*m)}else c&&l&&(f=f*(l=="-"?-1:1)+a.number);let _=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),g=Ae.cursor(_.from+Math.max(0,Math.min(d,_.length)));t.dispatch({effects:[gd.of(!1),Me.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:r}}const gd=Xe.define(),nw=Wt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(gd)&&(t=n.value);return t},provide:t=>id.from(t,e=>e?Zg:null)}),zG=t=>{let e=rd(t,Zg);if(!e){let n=[gd.of(!0)];t.state.field(nw,!1)==null&&n.push(Xe.appendConfig.of([nw,VG])),t.dispatch({effects:n}),e=rd(t,Zg)}return e&&e.dom.querySelector("input").select(),!0},VG=Me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),WG=({state:t,dispatch:e})=>{let{selection:n}=t,r=Ae.create(n.ranges.map(i=>t.wordAt(i.head)||Ae.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function GG(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new Ql(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ql(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const $G=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return WG({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=GG(t,r);return i?(e(t.update({selection:t.selection.addRange(Ae.range(i.from,i.to),!1),effects:Me.scrollIntoView(i.to)})),!0):!1},Sa=Ne.define({combine(t){return no(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new i$(e),scrollToMatch:e=>Me.scrollIntoView(e)})}});class $R{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||jG(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new XG(this):new KG(this)}getCursor(e,n=0,r){let i=e.doc?e:tt.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?wo(this,i,n,r):Eo(this,i,n,r)}}class qR{constructor(e){this.spec=e}}function Eo(t,e,n,r){return new Ql(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?qG(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function qG(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(_d(i,n-s))!=It.Word||e(bd(i,n-s))!=It.Word)&&(e(bd(i,r-s))!=It.Word||e(_d(i,r-s))!=It.Word))}class KG extends qR{constructor(e){super(e)}nextMatch(e,n,r){let i=Eo(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Eo(this.spec,e,0,n).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=Eo(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Eo(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Eo(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function wo(t,e,n,r){return new WR(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?YG(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function _d(t,e){return t.slice(Xt(t,e,!1),e)}function bd(t,e){return t.slice(e,Xt(t,e))}function YG(t){return(e,n,r)=>!r[0].length||(t(_d(r.input,r.index))!=It.Word||t(bd(r.input,r.index))!=It.Word)&&(t(bd(r.input,r.index+r[0].length))!=It.Word||t(_d(r.input,r.index+r[0].length))!=It.Word)}class XG extends qR{nextMatch(e,n,r){let i=wo(this.spec,e,r,e.doc.length).next();return i.done&&(i=wo(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=wo(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=wo(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=wo(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Jl=Xe.define(),Sb=Xe.define(),Vi=Wt.define({create(t){return new Up(e0(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Jl)?t=new Up(n.value.create(),t.panel):n.is(Sb)&&(t=new Up(t.query,n.value?Tb:null));return t},provide:t=>id.from(t,e=>e.panel)});class Up{constructor(e,n){this.query=e,this.panel=n}}const QG=Ze.mark({class:"cm-searchMatch"}),JG=Ze.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ZG=Qt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Vi))}update(t){let e=t.state.field(Vi);(e!=t.startState.field(Vi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ze.none;let{view:n}=this,r=new Gs;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-2*250;)l=s[++i].to;t.highlight(n.state,a,l,(c,u)=>{let h=n.state.selection.ranges.some(d=>d.from==c&&d.to==u);r.add(c,u,h?JG:QG)})}return r.finish()}},{decorations:t=>t.decorations});function Uc(t){return e=>{let n=e.state.field(Vi,!1);return n&&n.query.spec.valid?t(e,n):XR(e)}}const yd=Uc((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=Ae.single(r.from,r.to),s=t.state.facet(Sa);return t.dispatch({selection:i,effects:[Cb(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),YR(t),!0}),vd=Uc((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=Ae.single(i.from,i.to),o=t.state.facet(Sa);return t.dispatch({selection:s,effects:[Cb(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),YR(t),!0}),e$=Uc((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:Ae.create(n.map(r=>Ae.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),t$=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new Ql(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(Ae.range(a.value.from,a.value.to))}return e(t.update({selection:Ae.create(s,o),userEvent:"select.search.matches"})),!0},rw=Uc((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=[],a,l,c=[];if(s.from==r&&s.to==i&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push(Me.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=Ae.single(s.from-u,s.to-u),c.push(Cb(t,s)),c.push(n.facet(Sa).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),n$=Uc((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Me.announce.of(r),userEvent:"input.replace.all"}),!0});function Tb(t){return t.state.facet(Sa).createPanel(t)}function e0(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Sa);return new $R({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function KR(t){let e=rd(t,Tb);return e&&e.dom.querySelector("[main-field]")}function YR(t){let e=KR(t);e&&e==t.root.activeElement&&e.select()}const XR=t=>{let e=t.state.field(Vi,!1);if(e&&e.panel){let n=KR(t);if(n&&n!=t.root.activeElement){let r=e0(t.state,e.query.spec);r.valid&&t.dispatch({effects:Jl.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[Sb.of(!0),e?Jl.of(e0(t.state,e.query.spec)):Xe.appendConfig.of(o$)]});return!0},QR=t=>{let e=t.state.field(Vi,!1);if(!e||!e.panel)return!1;let n=rd(t,Tb);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Sb.of(!1)}),!0},r$=[{key:"Mod-f",run:XR,scope:"editor search-panel"},{key:"F3",run:yd,shift:vd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:yd,shift:vd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:QR,scope:"editor search-panel"},{key:"Mod-Shift-l",run:t$},{key:"Mod-Alt-g",run:zG},{key:"Mod-d",run:$G,preventDefault:!0}];class i${constructor(e){this.view=e;let n=this.query=e.state.field(Vi).query.spec;this.commit=this.commit.bind(this),this.searchField=en("input",{value:n.search,placeholder:Rn(e,"Find"),"aria-label":Rn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=en("input",{value:n.replace,placeholder:Rn(e,"Replace"),"aria-label":Rn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=en("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=en("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=en("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return en("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=en("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>yd(e),[Rn(e,"next")]),r("prev",()=>vd(e),[Rn(e,"previous")]),r("select",()=>e$(e),[Rn(e,"all")]),en("label",null,[this.caseField,Rn(e,"match case")]),en("label",null,[this.reField,Rn(e,"regexp")]),en("label",null,[this.wordField,Rn(e,"by word")]),...e.state.readOnly?[]:[en("br"),this.replaceField,r("replace",()=>rw(e),[Rn(e,"replace")]),r("replaceAll",()=>n$(e),[Rn(e,"replace all")])],en("button",{name:"close",onclick:()=>QR(e),"aria-label":Rn(e,"close"),type:"button"},[""])])}commit(){let e=new $R({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Jl.of(e)}))}keydown(e){Vj(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?vd:yd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),rw(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Jl)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Sa).top}}function Rn(t,e){return t.state.phrase(e)}const Fu=30,Hu=/[\s\.,:;?!]/;function Cb(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-Fu),o=Math.min(i,n+Fu),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<Fu;l++)if(!Hu.test(a[l+1])&&Hu.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-Fu;l--)if(!Hu.test(a[l-1])&&Hu.test(a[l])){a=a.slice(0,l);break}}return Me.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const s$=Me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),o$=[Vi,ss.low(ZG),s$];function JR(t,e=100){if(e===0)return t;let n;return function(...r){const i=this;clearTimeout(n),n=window.setTimeout(()=>{t.apply(i,r)},e)}}function a$(){return N.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(null,arguments)}var ZR=t=>{var{theme:e,settings:n={},styles:r=[]}=t,i={".cm-gutters":{}},s={};n.background&&(s.backgroundColor=n.background),n.backgroundImage&&(s.backgroundImage=n.backgroundImage),n.foreground&&(s.color=n.foreground),n.fontSize&&(s.fontSize=n.fontSize),(n.background||n.foreground)&&(i["&"]=s),n.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(i[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(i[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(i[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(i[".cm-content"]={caretColor:n.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),i[".cm-activeLineGutter"]=o,n.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var a=Me.theme(i,{dark:e==="dark"}),l=Bc.define(r),c=[a,_V(l)];return c},l$={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#f0f0f0",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},c$=[{tag:[ae.keyword,ae.operatorKeyword,ae.modifier,ae.color,ae.constant(ae.name),ae.standard(ae.name),ae.standard(ae.tagName),ae.special(ae.brace),ae.atom,ae.bool,ae.special(ae.variableName)],color:"#0000ff"},{tag:[ae.moduleKeyword,ae.controlKeyword],color:"#af00db"},{tag:[ae.name,ae.deleted,ae.character,ae.macroName,ae.propertyName,ae.variableName,ae.labelName,ae.definition(ae.name)],color:"#0070c1"},{tag:ae.heading,fontWeight:"bold",color:"#0070c1"},{tag:[ae.typeName,ae.className,ae.tagName,ae.number,ae.changed,ae.annotation,ae.self,ae.namespace],color:"#267f99"},{tag:[ae.function(ae.variableName),ae.function(ae.propertyName)],color:"#795e26"},{tag:[ae.number],color:"#098658"},{tag:[ae.operator,ae.punctuation,ae.separator,ae.url,ae.escape,ae.regexp],color:"#383a42"},{tag:[ae.regexp],color:"#af00db"},{tag:[ae.special(ae.string),ae.processingInstruction,ae.string,ae.inserted],color:"#a31515"},{tag:[ae.angleBracket],color:"#383a42"},{tag:ae.strong,fontWeight:"bold"},{tag:ae.emphasis,fontStyle:"italic"},{tag:ae.strikethrough,textDecoration:"line-through"},{tag:[ae.meta,ae.comment],color:"#008000"},{tag:ae.link,color:"#4078f2",textDecoration:"underline"},{tag:ae.invalid,color:"#e45649"}];function u$(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return ZR({theme:e,settings:Ed({},l$,n),styles:[...c$,...r]})}var h$=u$(),d$={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},f$=[{tag:[ae.keyword,ae.operatorKeyword,ae.modifier,ae.color,ae.constant(ae.name),ae.standard(ae.name),ae.standard(ae.tagName),ae.special(ae.brace),ae.atom,ae.bool,ae.special(ae.variableName)],color:"#569cd6"},{tag:[ae.controlKeyword,ae.moduleKeyword],color:"#c586c0"},{tag:[ae.name,ae.deleted,ae.character,ae.macroName,ae.propertyName,ae.variableName,ae.labelName,ae.definition(ae.name)],color:"#9cdcfe"},{tag:ae.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[ae.typeName,ae.className,ae.tagName,ae.number,ae.changed,ae.annotation,ae.self,ae.namespace],color:"#4ec9b0"},{tag:[ae.function(ae.variableName),ae.function(ae.propertyName)],color:"#dcdcaa"},{tag:[ae.number],color:"#b5cea8"},{tag:[ae.operator,ae.punctuation,ae.separator,ae.url,ae.escape,ae.regexp],color:"#d4d4d4"},{tag:[ae.regexp],color:"#d16969"},{tag:[ae.special(ae.string),ae.processingInstruction,ae.string,ae.inserted],color:"#ce9178"},{tag:[ae.angleBracket],color:"#808080"},{tag:ae.strong,fontWeight:"bold"},{tag:ae.emphasis,fontStyle:"italic"},{tag:ae.strikethrough,textDecoration:"line-through"},{tag:[ae.meta,ae.comment],color:"#6a9955"},{tag:ae.link,color:"#6a9955",textDecoration:"underline"},{tag:ae.invalid,color:"#ff0000"}];function p$(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return ZR({theme:e,settings:Ed({},d$,n),styles:[...f$,...r]})}var m$=p$();Me.theme({},{dark:!0});const t0=new ba;function g$(t,e={}){return[_$(e),t==="dark"?t0.of([nP()]):t0.of([tP()])]}function eP(t){return t0.reconfigure(t==="dark"?nP():tP())}function _$(t){return Me.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function tP(){return h$}function nP(){return m$}const b$={key:"Tab",run:y$,shift:jR};function y$({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(v$(t,(n,r,i)=>{i.push({from:n,to:r,insert:t.facet(va)})}),{userEvent:"input.indent"})),!0)}function v$(t,e){return t.changeByRange(n=>{const r=[],i=t.doc.lineAt(n.from);if(n.from===n.to)e(n.from,void 0,r,i);else if(n.from<n.to&&n.to<=i.to)e(n.from,n.to,r,i);else{let o=-1;for(let a=n.from;a<=n.to;){const l=t.doc.lineAt(a);l.number>o&&(n.empty||n.to>l.from)&&(e(l.from,void 0,r,l),o=l.number),a=l.to+1}}const s=t.changes(r);return{changes:r,range:Ae.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const E$="modulepreload",w$=function(t){return"/"+t},iw={},X=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=Promise.all(n.map(a=>{if(a=w$(a),a in iw)return;iw[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":E$,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},S$=[Zt.of({name:"TS",extensions:["ts"],async load(){return X(()=>import("./index-Bfkb4nP1.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({typescript:!0}))}}),Zt.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return X(()=>import("./index-Bfkb4nP1.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript())}}),Zt.of({name:"TSX",extensions:["tsx"],async load(){return X(()=>import("./index-Bfkb4nP1.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),Zt.of({name:"JSX",extensions:["jsx"],async load(){return X(()=>import("./index-Bfkb4nP1.js"),__vite__mapDeps([0,1,2,3])).then(t=>t.javascript({jsx:!0}))}}),Zt.of({name:"HTML",extensions:["html"],async load(){return X(()=>import("./index-CI1n3atb.js"),__vite__mapDeps([4,1,5,2,3,0])).then(t=>t.html())}}),Zt.of({name:"CSS",extensions:["css"],async load(){return X(()=>import("./index-sdnQ5RiM.js"),__vite__mapDeps([5,1,2,3])).then(t=>t.css())}}),Zt.of({name:"SASS",extensions:["sass"],async load(){return X(()=>import("./index-C-tEOS5W.js"),__vite__mapDeps([6,1,5,2,3])).then(t=>t.sass({indented:!0}))}}),Zt.of({name:"SCSS",extensions:["scss"],async load(){return X(()=>import("./index-C-tEOS5W.js"),__vite__mapDeps([6,1,5,2,3])).then(t=>t.sass({indented:!1}))}}),Zt.of({name:"JSON",extensions:["json"],async load(){return X(()=>import("./index-BOTn_KY-.js"),__vite__mapDeps([7,1,2,3])).then(t=>t.json())}}),Zt.of({name:"Markdown",extensions:["md"],async load(){return X(()=>import("./index-CqQxgBpN.js"),__vite__mapDeps([8,4,1,5,2,3,0])).then(t=>t.markdown())}}),Zt.of({name:"Wasm",extensions:["wat"],async load(){return X(()=>import("./index-B388QJbW.js"),__vite__mapDeps([9,1,2,3])).then(t=>t.wast())}}),Zt.of({name:"Python",extensions:["py"],async load(){return X(()=>import("./index-DqMmoZwb.js"),__vite__mapDeps([10,1,2,3])).then(t=>t.python())}}),Zt.of({name:"C++",extensions:["cpp"],async load(){return X(()=>import("./index-y4yvzzFg.js"),__vite__mapDeps([11,1,2,3])).then(t=>t.cpp())}})];async function T$(t){const e=Zt.matchFilename(S$,t);if(e)return await e.load()}const C$=Wn("CodeMirrorEditor"),rP=Xe.define(),x$=Wt.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const n of e.effects)if(n.is(rP)&&n.value)return R$(e.state);return[]},provide:t=>sb.computeN([t],e=>e.field(t))}),iP=Xe.define(),sw=Wt.define({create(){return!0},update(t,e){for(const n of e.effects)if(n.is(iP))return n.value;return t}}),sP=D.memo(({id:t,doc:e,debounceScroll:n=100,debounceChange:r=150,autoFocusOnDocumentChange:i=!1,editable:s=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:h=""})=>{ma.trace("CodeMirrorEditor");const[d]=D.useState(new ba),f=D.useRef(null),_=D.useRef(),g=D.useRef(),m=D.useRef(),p=D.useRef(),b=D.useRef(o),y=D.useRef(a),v=D.useRef(l);return D.useEffect(()=>{b.current=o,y.current=a,v.current=l,m.current=e,g.current=c}),D.useEffect(()=>{const E=JR(T=>{y.current?.(T)},r),w=new Me({parent:f.current,dispatchTransactions(T){const S=w.state.selection;w.update(T);const x=w.state.selection,R=x!==S&&(x===void 0||S===void 0||!x.eq(S));m.current&&(T.some(U=>U.docChanged)||R)&&(E({selection:w.state.selection,content:w.state.doc.toString()}),p.current.set(m.current.filePath,w.state))}});return _.current=w,()=>{_.current?.destroy(),_.current=void 0}},[]),D.useEffect(()=>{_.current&&_.current.dispatch({effects:[eP(c)]})},[c]),D.useEffect(()=>{p.current=new Map},[t]),D.useEffect(()=>{const E=p.current,w=_.current,T=g.current;if(!e){const x=ow("",T,u,b,n,v,[d.of([])]);w.setState(x),A$(w);return}if(e.isBinary)return;e.filePath===""&&C$.warn("File path should not be empty");let S=E.get(e.filePath);S||(S=ow(e.value,T,u,b,n,v,[d.of([])]),E.set(e.filePath,S)),w.setState(S),k$(w,T,s,d,i,e)},[e?.value,s,e?.filePath,i]),N.jsxs("div",{className:We("relative h-full",h),children:[e?.isBinary&&N.jsx(a$,{}),N.jsx("div",{className:"h-full overflow-hidden",ref:f})]})});sP.displayName="CodeMirrorEditor";function ow(t,e,n,r,i,s,o){return tt.create({doc:t,extensions:[Me.domEventHandlers({scroll:JR((a,l)=>{a.target===l.scrollDOM&&r.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},i),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[rP.of(a.key!=="Escape")]}),!0):!1}),g$(e,n),FW(),ff.of([...UG,...qW,...r$,{key:"Tab",run:oR},{key:"Mod-s",preventDefault:!0,run:()=>(s.current?.(),!0)},b$]),va.of("	"),xW({closeOnBlur:!1}),oz({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),gW(),_z(),tz(),ez(),Yj(),xV(),tt.tabSize.of(n?.tabSize??2),iV(),x$,sw,tt.readOnly.from(sw,a=>!a),vz(),nz(),pV({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function A$(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function k$(t,e,n,r,i,s){s.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:s.value}}),t.dispatch({effects:[iP.of(n&&!s.isBinary)]}),T$(s.filePath).then(o=>{o&&(t.dispatch({effects:[r.reconfigure([o]),eP(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,c=s.scroll?.left??0,u=s.scroll?.top??0;i&&n&&(a!==c||l!==u?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(c,u)}))})}function R$(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const n=document.createElement("div");return n.className="cm-readonly-tooltip",n.textContent="Cannot edit file while AI response is being generated",{dom:n}}})):[]}const Mo=D.memo(({className:t,disabledClassName:e,disabled:n=!1,children:r,onClick:i})=>N.jsx("button",{className:We("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[We("opacity-30",e)]:n},t),disabled:n,onClick:s=>{n||i?.(s)},children:r})),P$=D.memo,D$=P$(({selected:t,options:e,setSelected:n})=>{const r=t===e.left.value;return N.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[N.jsx(aw,{selected:r,setSelected:()=>n?.(e.left.value),children:e.left.text}),N.jsx(aw,{selected:!r,setSelected:()=>n?.(e.right.value),children:e.right.text})]})}),aw=D.memo(({selected:t,children:e,setSelected:n})=>N.jsxs("button",{onClick:n,className:We("bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[N.jsx("span",{className:"relative z-10",children:e}),t&&N.jsx(rr.span,{layoutId:"pill-tab",transition:{duration:.2,ease:ir},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-full"})]})),{createElement:ca,createContext:O$,createRef:vue,forwardRef:oP,useCallback:Pn,useContext:aP,useEffect:Fs,useImperativeHandle:lP,useLayoutEffect:I$,useMemo:L$,useRef:wn,useState:yl}=L0,lw=L0.useId,M$=I$,yf=O$(null);yf.displayName="PanelGroupContext";const Hs=M$,N$=typeof lw=="function"?lw:()=>null;let B$=0;function xb(t=null){const e=N$(),n=wn(t||e||null);return n.current===null&&(n.current=""+B$++),t??n.current}function cP({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:h,order:d,style:f,tagName:_="div",...g}){const m=aP(yf);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:p,expandPanel:b,getPanelSize:y,getPanelStyle:v,groupId:E,isPanelCollapsed:w,reevaluatePanelConstraints:T,registerPanel:S,resizePanel:x,unregisterPanel:R}=m,U=xb(o),P=wn({callbacks:{onCollapse:c,onExpand:u,onResize:h},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:a,minSize:l},id:U,idIsFromProps:o!==void 0,order:d});wn({didLogMissingDefaultSizeWarning:!1}),Hs(()=>{const{callbacks:A,constraints:W}=P.current,ne={...W};P.current.id=U,P.current.idIsFromProps=o!==void 0,P.current.order=d,A.onCollapse=c,A.onExpand=u,A.onResize=h,W.collapsedSize=n,W.collapsible=r,W.defaultSize=i,W.maxSize=a,W.minSize=l,(ne.collapsedSize!==W.collapsedSize||ne.collapsible!==W.collapsible||ne.maxSize!==W.maxSize||ne.minSize!==W.minSize)&&T(P.current,ne)}),Hs(()=>{const A=P.current;return S(A),()=>{R(A)}},[d,U,S,R]),lP(s,()=>({collapse:()=>{p(P.current)},expand:A=>{b(P.current,A)},getId(){return U},getSize(){return y(P.current)},isCollapsed(){return w(P.current)},isExpanded(){return!w(P.current)},resize:A=>{x(P.current,A)}}),[p,b,y,w,U,x]);const B=v(P.current,i);return ca(_,{...g,children:t,className:e,id:o,style:{...B,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":E,"data-panel-id":U,"data-panel-size":parseFloat(""+B.flexGrow).toFixed(1)})}const nl=oP((t,e)=>ca(cP,{...t,forwardedRef:e}));cP.displayName="Panel";nl.displayName="forwardRef(Panel)";let n0=null,Ps=null;function F$(t,e){if(e){const n=(e&pP)!==0,r=(e&mP)!==0,i=(e&gP)!==0,s=(e&_P)!==0;if(n)return i?"se-resize":s?"ne-resize":"e-resize";if(r)return i?"sw-resize":s?"nw-resize":"w-resize";if(i)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function H$(){Ps!==null&&(document.head.removeChild(Ps),n0=null,Ps=null)}function jp(t,e){const n=F$(t,e);n0!==n&&(n0=n,Ps===null&&(Ps=document.createElement("style"),document.head.appendChild(Ps)),Ps.innerHTML=`*{cursor: ${n}!important;}`)}function uP(t){return t.type==="keydown"}function hP(t){return t.type.startsWith("pointer")}function dP(t){return t.type.startsWith("mouse")}function vf(t){if(hP(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(dP(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function U$(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function j$(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function z$(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:hw(t),b:hw(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Ye(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:uw(cw(n.a)),b:uw(cw(n.b))};if(i.a===i.b){const s=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=s.length;for(;a--;){const l=s[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(i.a-i.b)}const V$=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function W$(t){var e;const n=getComputedStyle((e=fP(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function G$(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||W$(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||V$.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function cw(t){let e=t.length;for(;e--;){const n=t[e];if(Ye(n,"Missing node"),G$(n))return n}return null}function uw(t){return t&&Number(getComputedStyle(t).zIndex)||0}function hw(t){const e=[];for(;t;)e.push(t),t=fP(t);return e}function fP(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const pP=1,mP=2,gP=4,_P=8,$$=U$()==="coarse";let mr=[],Ef=!1,Mi=new Map,wf=new Map;const Zl=new Set;function q$(t,e,n,r,i){var s;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},l=(s=Mi.get(o))!==null&&s!==void 0?s:0;return Mi.set(o,l+1),Zl.add(a),wd(),function(){var u;wf.delete(t),Zl.delete(a);const h=(u=Mi.get(o))!==null&&u!==void 0?u:1;if(Mi.set(o,h-1),wd(),h===1&&Mi.delete(o),mr.includes(a)){const d=mr.indexOf(a);d>=0&&mr.splice(d,1),kb()}}}function dw(t){const{target:e}=t,{x:n,y:r}=vf(t);Ef=!0,Ab({target:e,x:n,y:r}),wd(),mr.length>0&&(Rb("down",t),t.preventDefault(),t.stopPropagation())}function za(t){const{x:e,y:n}=vf(t);if(!Ef){const{target:r}=t;Ab({target:r,x:e,y:n})}Rb("move",t),kb(),mr.length>0&&t.preventDefault()}function _o(t){const{target:e}=t,{x:n,y:r}=vf(t);wf.clear(),Ef=!1,mr.length>0&&t.preventDefault(),Rb("up",t),Ab({target:e,x:n,y:r}),kb(),wd()}function Ab({target:t,x:e,y:n}){mr.splice(0);let r=null;t instanceof HTMLElement&&(r=t),Zl.forEach(i=>{const{element:s,hitAreaMargins:o}=i,a=s.getBoundingClientRect(),{bottom:l,left:c,right:u,top:h}=a,d=$$?o.coarse:o.fine;if(e>=c-d&&e<=u+d&&n>=h-d&&n<=l+d){if(r!==null&&s!==r&&!s.contains(r)&&!r.contains(s)&&z$(r,s)>0){let _=r,g=!1;for(;_&&!_.contains(s);){if(j$(_.getBoundingClientRect(),a)){g=!0;break}_=_.parentElement}if(g)return}mr.push(i)}})}function zp(t,e){wf.set(t,e)}function kb(){let t=!1,e=!1;mr.forEach(r=>{const{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;wf.forEach(r=>{n|=r}),t&&e?jp("intersection",n):t?jp("horizontal",n):e?jp("vertical",n):H$()}function wd(){Mi.forEach((t,e)=>{const{body:n}=e;n.removeEventListener("contextmenu",_o),n.removeEventListener("pointerdown",dw),n.removeEventListener("pointerleave",za),n.removeEventListener("pointermove",za)}),window.removeEventListener("pointerup",_o),window.removeEventListener("pointercancel",_o),Zl.size>0&&(Ef?(mr.length>0&&Mi.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",_o),n.addEventListener("pointerleave",za),n.addEventListener("pointermove",za))}),window.addEventListener("pointerup",_o),window.addEventListener("pointercancel",_o)):Mi.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",dw,{capture:!0}),n.addEventListener("pointermove",za))}))}function Rb(t,e){Zl.forEach(n=>{const{setResizeHandlerState:r}=n,i=mr.includes(n);r(t,i,e)})}function Ye(t,e){if(!t)throw console.error(e),Error(e)}const Pb=10;function Ys(t,e,n=Pb){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function ti(t,e,n=Pb){return Ys(t,e,n)===0}function Ln(t,e,n){return Ys(t,e,n)===0}function K$(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const i=t[r],s=e[r];if(!Ln(i,s,n))return!1}return!0}function No({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Ye(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:s,maxSize:o=100,minSize:a=0}=r;if(Ys(n,a)<0)if(s){const l=(i+a)/2;Ys(n,l)<0?n=i:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(Pb)),n}function rl({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:s}){if(Ln(t,0))return e;const o=[...e],[a,l]=r;Ye(a!=null,"Invalid first pivot index"),Ye(l!=null,"Invalid second pivot index");let c=0;if(s==="keyboard"){{const h=t<0?l:a,d=n[h];Ye(d,`Panel constraints not found for index ${h}`);const{collapsedSize:f=0,collapsible:_,minSize:g=0}=d;if(_){const m=e[h];if(Ye(m!=null,`Previous layout not found for panel index ${h}`),Ln(m,f)){const p=g-m;Ys(p,Math.abs(t))>0&&(t=t<0?0-p:p)}}}{const h=t<0?a:l,d=n[h];Ye(d,`No panel constraints found for index ${h}`);const{collapsedSize:f=0,collapsible:_,minSize:g=0}=d;if(_){const m=e[h];if(Ye(m!=null,`Previous layout not found for panel index ${h}`),Ln(m,g)){const p=m-f;Ys(p,Math.abs(t))>0&&(t=t<0?0-p:p)}}}}{const h=t<0?1:-1;let d=t<0?l:a,f=0;for(;;){const g=e[d];Ye(g!=null,`Previous layout not found for panel index ${d}`);const p=No({panelConstraints:n,panelIndex:d,size:100})-g;if(f+=p,d+=h,d<0||d>=n.length)break}const _=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-_:_}{let d=t<0?a:l;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(c),_=e[d];Ye(_!=null,`Previous layout not found for panel index ${d}`);const g=_-f,m=No({panelConstraints:n,panelIndex:d,size:g});if(!Ln(_,m)&&(c+=_-m,o[d]=m,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(K$(i,o))return i;{const h=t<0?l:a,d=e[h];Ye(d!=null,`Previous layout not found for panel index ${h}`);const f=d+c,_=No({panelConstraints:n,panelIndex:h,size:f});if(o[h]=_,!Ln(_,f)){let g=f-_,p=t<0?l:a;for(;p>=0&&p<n.length;){const b=o[p];Ye(b!=null,`Previous layout not found for panel index ${p}`);const y=b+g,v=No({panelConstraints:n,panelIndex:p,size:y});if(Ln(b,v)||(g-=v-b,o[p]=v),Ln(g,0))break;t>0?p--:p++}}}const u=o.reduce((h,d)=>d+h,0);return Ln(u,100)?o:i}function Y$({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,s=0,o=0;const a=n[0];Ye(a!=null,"No pivot index found"),e.forEach((h,d)=>{const{constraints:f}=h,{maxSize:_=100,minSize:g=0}=f;d===a?(r=g,i=_):(s+=g,o+=_)});const l=Math.min(i,100-s),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function ec(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function bP(t,e,n=document){const i=ec(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return i??null}function yP(t,e,n){const r=bP(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function vP(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function Sf(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function X$(t,e,n,r=document){var i,s,o,a;const l=Sf(e,r),c=ec(t,r),u=l?c.indexOf(l):-1,h=(i=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:null,d=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[h,d]}function Q$({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:s,setLayout:o}){wn({didWarnAboutMissingResizeHandle:!1}),Hs(()=>{if(!s)return;const a=ec(n,s);for(let l=0;l<i.length-1;l++){const{valueMax:c,valueMin:u,valueNow:h}=Y$({layout:r,panelsArray:i,pivotIndices:[l,l+1]}),d=a[l];if(d!=null){const f=i[l];Ye(f,`No panel data found for index "${l}"`),d.setAttribute("aria-controls",f.id),d.setAttribute("aria-valuemax",""+Math.round(c)),d.setAttribute("aria-valuemin",""+Math.round(u)),d.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,i,s]),Fs(()=>{if(!s)return;const a=e.current;Ye(a,"Eager values not found");const{panelDataArray:l}=a,c=vP(n,s);Ye(c!=null,`No group found for id "${n}"`);const u=ec(n,s);Ye(u,`No resize handles found for group id "${n}"`);const h=u.map(d=>{const f=d.getAttribute("data-panel-resize-handle-id");Ye(f,"Resize handle element has no handle id attribute");const[_,g]=X$(n,f,l,s);if(_==null||g==null)return()=>{};const m=p=>{if(!p.defaultPrevented)switch(p.key){case"Enter":{p.preventDefault();const b=l.findIndex(y=>y.id===_);if(b>=0){const y=l[b];Ye(y,`No panel data found for index ${b}`);const v=r[b],{collapsedSize:E=0,collapsible:w,minSize:T=0}=y.constraints;if(v!=null&&w){const S=rl({delta:Ln(v,E)?T-E:E-v,initialLayout:r,panelConstraints:l.map(x=>x.constraints),pivotIndices:yP(n,f,s),prevLayout:r,trigger:"keyboard"});r!==S&&o(S)}}break}}};return d.addEventListener("keydown",m),()=>{d.removeEventListener("keydown",m)}});return()=>{h.forEach(d=>d())}},[s,t,e,n,r,i,o])}function fw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function EP(t,e){const n=t==="horizontal",{x:r,y:i}=vf(e);return n?r:i}function J$(t,e,n,r,i){const s=n==="horizontal",o=Sf(e,i);Ye(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");Ye(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=EP(n,t),u=vP(a,i);Ye(u,`No group element found for id "${a}"`);const h=u.getBoundingClientRect(),d=s?h.width:h.height;return(c-l)/d*100}function Z$(t,e,n,r,i,s){if(uP(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:i!=null?a=i:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:J$(t,e,n,r,s)}function eq({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let r=0,i=100;for(let s=0;s<t.length;s++){const o=n[s];Ye(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;a!=null&&(r++,e[s]=a,i-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ye(o,`Panel constraints not found for index ${s}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=i/l;r++,e[s]=c,i-=c}return e}function bo(t,e,n){e.forEach((r,i)=>{const s=t[i];Ye(s,`Panel data not found for index ${i}`);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,h=n[l];if(h==null||r!==h){n[l]=r;const{onCollapse:d,onExpand:f,onResize:_}=o;_&&_(r,h),u&&(d||f)&&(f&&(h==null||ti(h,c))&&!ti(r,c)&&f(),d&&(h==null||!ti(h,c))&&ti(r,c)&&d())}})}function Uu(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function tq({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:s=3}){const o=n[i];let a;return o==null?a=t!=null?t.toPrecision(s):"1":r.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function nq(t,e=10){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function pw(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function wP(t){return`react-resizable-panels:${t}`}function SP(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:i,order:s}=e;return i?r:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function TP(t,e){try{const n=wP(t),r=e.getItem(n);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function rq(t,e,n){var r,i;const s=(r=TP(t,n))!==null&&r!==void 0?r:{},o=SP(e);return(i=s[o])!==null&&i!==void 0?i:null}function iq(t,e,n,r,i){var s;const o=wP(t),a=SP(e),l=(s=TP(t,i))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function mw({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Ln(r,100))for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null,`No layout data found for index ${s}`);const a=100/r*o;n[s]=a}let i=0;for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null,`No layout data found for index ${s}`);const a=No({panelConstraints:e,panelIndex:s,size:o});o!=a&&(i+=o-a,n[s]=a)}if(!Ln(i,0))for(let s=0;s<e.length;s++){const o=n[s];Ye(o!=null,`No layout data found for index ${s}`);const a=o+i,l=No({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(i-=l-o,n[s]=l,Ln(i,0)))break}return n}const sq=100,il={getItem:t=>(pw(il),il.getItem(t)),setItem:(t,e)=>{pw(il),il.setItem(t,e)}},gw={};function CP({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=il,style:c,tagName:u="div",...h}){const d=xb(s),f=wn(null),[_,g]=yl(null),[m,p]=yl([]),b=wn({}),y=wn(new Map),v=wn(0),E=wn({autoSaveId:t,direction:r,dragState:_,id:d,keyboardResizeBy:a,onLayout:o,storage:l}),w=wn({layout:m,panelDataArray:[],panelDataArrayChanged:!1});wn({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),lP(i,()=>({getId:()=>E.current.id,getLayout:()=>{const{layout:H}=w.current;return H},setLayout:H=>{const{onLayout:F}=E.current,{layout:J,panelDataArray:te}=w.current,fe=mw({layout:H,panelConstraints:te.map(Z=>Z.constraints)});fw(J,fe)||(p(fe),w.current.layout=fe,F&&F(fe),bo(te,fe,b.current))}}),[]),Hs(()=>{E.current.autoSaveId=t,E.current.direction=r,E.current.dragState=_,E.current.id=d,E.current.onLayout=o,E.current.storage=l}),Q$({committedValuesRef:E,eagerValuesRef:w,groupId:d,layout:m,panelDataArray:w.current.panelDataArray,setLayout:p,panelGroupElement:f.current}),Fs(()=>{const{panelDataArray:H}=w.current;if(t){if(m.length===0||m.length!==H.length)return;let F=gw[t];F==null&&(F=nq(iq,sq),gw[t]=F);const J=[...H],te=new Map(y.current);F(t,J,te,m,l)}},[t,m,l]),Fs(()=>{});const T=Pn(H=>{const{onLayout:F}=E.current,{layout:J,panelDataArray:te}=w.current;if(H.constraints.collapsible){const fe=te.map(ge=>ge.constraints),{collapsedSize:Z=0,panelSize:V,pivotIndices:ue}=ds(te,H,J);if(Ye(V!=null,`Panel size not found for panel "${H.id}"`),!ti(V,Z)){y.current.set(H.id,V);const Ee=So(te,H)===te.length-1?V-Z:Z-V,me=rl({delta:Ee,initialLayout:J,panelConstraints:fe,pivotIndices:ue,prevLayout:J,trigger:"imperative-api"});Uu(J,me)||(p(me),w.current.layout=me,F&&F(me),bo(te,me,b.current))}}},[]),S=Pn((H,F)=>{const{onLayout:J}=E.current,{layout:te,panelDataArray:fe}=w.current;if(H.constraints.collapsible){const Z=fe.map(we=>we.constraints),{collapsedSize:V=0,panelSize:ue=0,minSize:ge=0,pivotIndices:Ee}=ds(fe,H,te),me=F??ge;if(ti(ue,V)){const we=y.current.get(H.id),M=we!=null&&we>=me?we:me,le=So(fe,H)===fe.length-1?ue-M:M-ue,G=rl({delta:le,initialLayout:te,panelConstraints:Z,pivotIndices:Ee,prevLayout:te,trigger:"imperative-api"});Uu(te,G)||(p(G),w.current.layout=G,J&&J(G),bo(fe,G,b.current))}}},[]),x=Pn(H=>{const{layout:F,panelDataArray:J}=w.current,{panelSize:te}=ds(J,H,F);return Ye(te!=null,`Panel size not found for panel "${H.id}"`),te},[]),R=Pn((H,F)=>{const{panelDataArray:J}=w.current,te=So(J,H);return tq({defaultSize:F,dragState:_,layout:m,panelData:J,panelIndex:te})},[_,m]),U=Pn(H=>{const{layout:F,panelDataArray:J}=w.current,{collapsedSize:te=0,collapsible:fe,panelSize:Z}=ds(J,H,F);return Ye(Z!=null,`Panel size not found for panel "${H.id}"`),fe===!0&&ti(Z,te)},[]),P=Pn(H=>{const{layout:F,panelDataArray:J}=w.current,{collapsedSize:te=0,collapsible:fe,panelSize:Z}=ds(J,H,F);return Ye(Z!=null,`Panel size not found for panel "${H.id}"`),!fe||Ys(Z,te)>0},[]),B=Pn(H=>{const{panelDataArray:F}=w.current;F.push(H),F.sort((J,te)=>{const fe=J.order,Z=te.order;return fe==null&&Z==null?0:fe==null?-1:Z==null?1:fe-Z}),w.current.panelDataArrayChanged=!0},[]);Hs(()=>{if(w.current.panelDataArrayChanged){w.current.panelDataArrayChanged=!1;const{autoSaveId:H,onLayout:F,storage:J}=E.current,{layout:te,panelDataArray:fe}=w.current;let Z=null;if(H){const ue=rq(H,fe,J);ue&&(y.current=new Map(Object.entries(ue.expandToSizes)),Z=ue.layout)}Z==null&&(Z=eq({panelDataArray:fe}));const V=mw({layout:Z,panelConstraints:fe.map(ue=>ue.constraints)});fw(te,V)||(p(V),w.current.layout=V,F&&F(V),bo(fe,V,b.current))}}),Hs(()=>{const H=w.current;return()=>{H.layout=[]}},[]);const A=Pn(H=>function(J){J.preventDefault();const te=f.current;if(!te)return()=>null;const{direction:fe,dragState:Z,id:V,keyboardResizeBy:ue,onLayout:ge}=E.current,{layout:Ee,panelDataArray:me}=w.current,{initialLayout:we}=Z??{},M=yP(V,H,te);let se=Z$(J,H,fe,Z,ue,te);if(se===0)return;const le=fe==="horizontal";document.dir==="rtl"&&le&&(se=-se);const G=me.map(_e=>_e.constraints),q=rl({delta:se,initialLayout:we??Ee,panelConstraints:G,pivotIndices:M,prevLayout:Ee,trigger:uP(J)?"keyboard":"mouse-or-touch"}),re=!Uu(Ee,q);(hP(J)||dP(J))&&v.current!=se&&(v.current=se,re?zp(H,0):le?zp(H,se<0?pP:mP):zp(H,se<0?gP:_P)),re&&(p(q),w.current.layout=q,ge&&ge(q),bo(me,q,b.current))},[]),W=Pn((H,F)=>{const{onLayout:J}=E.current,{layout:te,panelDataArray:fe}=w.current,Z=fe.map(we=>we.constraints),{panelSize:V,pivotIndices:ue}=ds(fe,H,te);Ye(V!=null,`Panel size not found for panel "${H.id}"`);const Ee=So(fe,H)===fe.length-1?V-F:F-V,me=rl({delta:Ee,initialLayout:te,panelConstraints:Z,pivotIndices:ue,prevLayout:te,trigger:"imperative-api"});Uu(te,me)||(p(me),w.current.layout=me,J&&J(me),bo(fe,me,b.current))},[]),ne=Pn((H,F)=>{const{layout:J,panelDataArray:te}=w.current,{collapsedSize:fe=0,collapsible:Z}=F,{collapsedSize:V=0,collapsible:ue,maxSize:ge=100,minSize:Ee=0}=H.constraints,{panelSize:me}=ds(te,H,J);me!=null&&(Z&&ue&&ti(me,fe)?ti(fe,V)||W(H,V):me<Ee?W(H,Ee):me>ge&&W(H,ge))},[W]),Q=Pn((H,F)=>{const{direction:J}=E.current,{layout:te}=w.current;if(!f.current)return;const fe=Sf(H,f.current);Ye(fe,`Drag handle element not found for id "${H}"`);const Z=EP(J,F);g({dragHandleId:H,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:Z,initialLayout:te})},[]),ie=Pn(()=>{g(null)},[]),L=Pn(H=>{const{panelDataArray:F}=w.current,J=So(F,H);J>=0&&(F.splice(J,1),delete b.current[H.id],w.current.panelDataArrayChanged=!0)},[]),I=L$(()=>({collapsePanel:T,direction:r,dragState:_,expandPanel:S,getPanelSize:x,getPanelStyle:R,groupId:d,isPanelCollapsed:U,isPanelExpanded:P,reevaluatePanelConstraints:ne,registerPanel:B,registerResizeHandle:A,resizePanel:W,startDragging:Q,stopDragging:ie,unregisterPanel:L,panelGroupElement:f.current}),[T,_,r,S,x,R,d,U,P,ne,B,A,W,Q,ie,L]),j={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return ca(yf.Provider,{value:I},ca(u,{...h,children:e,className:n,id:s,ref:f,style:{...j,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":d}))}const r0=oP((t,e)=>ca(CP,{...t,forwardedRef:e}));CP.displayName="PanelGroup";r0.displayName="forwardRef(PanelGroup)";function So(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ds(t,e,n){const r=So(t,e),s=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:s}}function oq({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){Fs(()=>{if(t||n==null||r==null)return;const i=Sf(e,r);if(i==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=i.getAttribute("data-panel-group-id");Ye(a,`No group element found for id "${a}"`);const l=ec(a,r),c=bP(a,e,r);Ye(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return i.addEventListener("keydown",s),()=>{i.removeEventListener("keydown",s)}},[r,t,e,n])}function i0({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:s,onDragging:o,onFocus:a,style:l={},tabIndex:c=0,tagName:u="div",...h}){var d,f;const _=wn(null),g=wn({onDragging:o});Fs(()=>{g.current.onDragging=o});const m=aP(yf);if(m===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:p,groupId:b,registerResizeHandle:y,startDragging:v,stopDragging:E,panelGroupElement:w}=m,T=xb(i),[S,x]=yl("inactive"),[R,U]=yl(!1),[P,B]=yl(null),A=wn({state:S});Hs(()=>{A.current.state=S}),Fs(()=>{if(n)B(null);else{const ie=y(T);B(()=>ie)}},[n,T,y]);const W=(d=r?.coarse)!==null&&d!==void 0?d:15,ne=(f=r?.fine)!==null&&f!==void 0?f:5;return Fs(()=>{if(n||P==null)return;const ie=_.current;return Ye(ie,"Element ref not attached"),q$(T,ie,p,{coarse:W,fine:ne},(I,j,H)=>{if(j)switch(I){case"down":{x("drag"),v(T,H);const{onDragging:F}=g.current;F&&F(!0);break}case"move":{const{state:F}=A.current;F!=="drag"&&x("hover"),P(H);break}case"up":{x("hover"),E();const{onDragging:F}=g.current;F&&F(!1);break}}else x("inactive")})},[W,p,n,ne,y,T,P,v,E]),oq({disabled:n,handleId:T,resizeHandler:P,panelGroupElement:w}),ca(u,{...h,children:t,className:e,id:i,onBlur:()=>{U(!1),s?.()},onFocus:()=>{U(!0),a?.()},ref:_,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:c,"data-panel-group-direction":p,"data-panel-group-id":b,"data-resize-handle":"","data-resize-handle-active":S==="drag"?"pointer":R?"keyboard":void 0,"data-resize-handle-state":S,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":T})}i0.displayName="PanelResizeHandle";const _w=D.memo(({className:t,children:e})=>N.jsx("div",{className:We("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e})),ju="<boltArtifact",bw="</boltArtifact>",aq="<boltAction",yw="</boltAction>",zu=Wn("MessageParser");class lq{constructor(e={}){this._options=e}#t=new Map;parse(e,n){let r=this.#t.get(e);r||(r={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#t.set(e,r));let i="",s=r.position,o=!1;for(;s<n.length;){if(r.insideArtifact){const a=r.currentArtifact;if(a===void 0&&cr("Artifact not initialized"),r.insideAction){const l=n.indexOf(yw,s),c=r.currentAction;if(l!==-1){c.content+=n.slice(s,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:c}),r.insideAction=!1,r.currentAction={content:""},s=l+yw.length}else{if("type"in c&&c.type==="file"){const u=n.slice(s);this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=n.indexOf(aq,s),c=n.indexOf(bw,s);if(l!==-1&&(c===-1||l<c)){const u=n.indexOf(">",l);if(u!==-1)r.insideAction=!0,r.currentAction=this.#n(n,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(r.actionId++),action:r.currentAction}),s=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),r.insideArtifact=!1,r.currentArtifact=void 0,s=c+bw.length;else break}}else if(n[s]==="<"&&n[s+1]!=="/"){let a=s,l="";for(;a<n.length&&l.length<ju.length;){if(l+=n[a],l===ju){const c=n[a+1];if(c&&c!==">"&&c!==" "){i+=n.slice(s,a+1),s=a+1;break}const u=n.indexOf(">",a);if(u!==-1){const h=n.slice(s,u+1),d=this.#e(h,"title"),f=this.#e(h,"id");d||zu.warn("Artifact title missing"),f||zu.warn("Artifact id missing"),r.insideArtifact=!0;const _={id:f,title:d};r.currentArtifact=_,this._options.callbacks?.onArtifactOpen?.({messageId:e,..._});const g=this._options.artifactElement??cq;i+=g({messageId:e}),s=u+1}else o=!0;break}else if(!ju.startsWith(l)){i+=n.slice(s,a+1),s=a+1;break}a++}if(a===n.length&&ju.startsWith(l))break}else i+=n[s],s++;if(o)break}return r.position=s,i}reset(){this.#t.clear()}#n(e,n,r){const i=e.slice(n,r+1),s=this.#e(i,"type"),o={type:s,content:""};if(s==="file"){const a=this.#e(i,"filePath");a||zu.debug("File path not specified"),o.filePath=a}else["shell","start"].includes(s)||zu.warn(`Unknown action type '${s}'`);return o}#e(e,n){const r=e.match(new RegExp(`${n}="([^"]*)"`,"i"));return r?r[1]:void 0}}const cq=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([n,r])=>`data-${uq(n)}=${JSON.stringify(r)}`)].join(" ")}></div>`;function uq(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const Va=Wn("useMessageParser"),hq=new lq({callbacks:{onArtifactOpen:t=>{Va.trace("onArtifactOpen",t),He.showWorkbench.set(!0),He.addArtifact(t)},onArtifactClose:t=>{Va.trace("onArtifactClose"),He.updateArtifact(t,{closed:!0})},onActionOpen:t=>{Va.trace("onActionOpen",t.action),t.action.type!=="shell"&&He.addAction(t)},onActionClose:t=>{Va.trace("onActionClose",t.action),t.action.type==="shell"&&He.addAction(t),He.runAction(t)},onActionStream:t=>{Va.trace("onActionStream",t.action),He.runAction(t,!0)}}});function dq(){const[t,e]=D.useState({}),n=D.useCallback((r,i)=>{for(const[s,o]of r.entries())if(o.role==="assistant"){const a=hq.parse(o.id,o.content);e(l=>({...l,[s]:(l[s]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:n}}const vw=Wn("usePromptEnhancement");function fq(){const[t,e]=D.useState(!1),[n,r]=D.useState(!1);return{enhancingPrompt:t,promptEnhanced:n,enhancePrompt:async(o,a,l,c,u)=>{e(!0),r(!1);const h={message:o,model:l,provider:c};u&&(h.apiKeys=u);const f=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(h)})).body?.getReader(),_=o;if(f){const g=new TextDecoder;let m="",p;try{for(a("");;){const{value:b,done:y}=await f.read();if(y)break;m+=g.decode(b),vw.trace("Set input",m),a(m)}}catch(b){p=b,a(_)}finally{p&&vw.error(p),e(!1),r(!0),setTimeout(()=>{a(m)})}}},resetEnhancer:()=>{e(!1),r(!1)}}}const Db=Zs({toggleTerminal:{key:"j",ctrlOrMetaKey:!0,action:()=>He.toggleTerminal()}}),Ew=Zs({shortcuts:Db.get()});Db.subscribe(t=>{Ew.set({...Ew.get(),shortcuts:t})});class pq{#t=new EventTarget;dispatch(e){this.#t.dispatchEvent(new Event(e))}on(e,n){return this.#t.addEventListener(e,n),()=>{this.#t.removeEventListener(e,n)}}}const xP=new pq;function mq(){const t=Dt(Db);D.useEffect(()=>{const e=n=>{const{key:r,ctrlKey:i,shiftKey:s,altKey:o,metaKey:a}=n;for(const l in t){const c=t[l];if(c.key.toLowerCase()===r.toLowerCase()&&(c.ctrlOrMetaKey?i||a:(c.ctrlKey===void 0||c.ctrlKey===i)&&(c.metaKey===void 0||c.metaKey===a))&&(c.shiftKey===void 0||c.shiftKey===s)&&(c.altKey===void 0||c.altKey===o)){xP.dispatch(l),n.preventDefault(),n.stopPropagation(),c.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function gq(){const t=D.useRef(!0),e=D.useRef(),n=D.useRef(),r=D.useRef(),i=D.useCallback(o=>{o?new ResizeObserver(()=>{if(t.current&&e.current){const{scrollHeight:l,clientHeight:c}=e.current,u=l-c;e.current.scrollTo({top:u})}}).observe(o):(r.current?.disconnect(),r.current=void 0)},[]),s=D.useCallback(o=>{o?(n.current=()=>{const{scrollTop:a,scrollHeight:l,clientHeight:c}=o,u=l-c;t.current=Math.abs(a-u)<=10},o.addEventListener("scroll",n.current),e.current=o):(n.current&&e.current?.removeEventListener("scroll",n.current),e.current=void 0,n.current=void 0)},[]);return[i,s]}const AP=(t=1024)=>{const[e,n]=D.useState(window.innerWidth<t);return D.useEffect(()=>{const r=()=>n(window.innerWidth<t);return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t]),e};function _q(){return globalThis.innerWidth<640}function kP(t){const e=t+"CollectionProvider",[n,r]=pa(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:_,children:g}=f,m=qe.useRef(null),p=qe.useRef(new Map).current;return N.jsx(i,{scope:_,itemMap:p,collectionRef:m,children:g})};o.displayName=e;const a=t+"CollectionSlot",l=qe.forwardRef((f,_)=>{const{scope:g,children:m}=f,p=s(a,g),b=St(_,p.collectionRef);return N.jsx(na,{ref:b,children:m})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=qe.forwardRef((f,_)=>{const{scope:g,children:m,...p}=f,b=qe.useRef(null),y=St(_,b),v=s(c,g);return qe.useEffect(()=>(v.itemMap.set(b,{ref:b,...p}),()=>void v.itemMap.delete(b))),N.jsx(na,{[u]:"",ref:y,children:m})});h.displayName=c;function d(f){const _=s(t+"CollectionConsumer",f);return qe.useCallback(()=>{const m=_.collectionRef.current;if(!m)return[];const p=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(_.itemMap.values()).sort((v,E)=>p.indexOf(v.ref.current)-p.indexOf(E.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},d,r]}var bq=D.createContext(void 0);function RP(t){const e=D.useContext(bq);return t||e||"ltr"}var Vp="rovingFocusGroup.onEntryFocus",yq={bubbles:!1,cancelable:!0},Tf="RovingFocusGroup",[s0,PP,vq]=kP(Tf),[Eq,DP]=pa(Tf,[vq]),[wq,Sq]=Eq(Tf),OP=D.forwardRef((t,e)=>N.jsx(s0.Provider,{scope:t.__scopeRovingFocusGroup,children:N.jsx(s0.Slot,{scope:t.__scopeRovingFocusGroup,children:N.jsx(Tq,{...t,ref:e})})}));OP.displayName=Tf;var Tq=D.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,d=D.useRef(null),f=St(e,d),_=RP(s),[g=null,m]=Qd({prop:o,defaultProp:a,onChange:l}),[p,b]=D.useState(!1),y=Vn(c),v=PP(n),E=D.useRef(!1),[w,T]=D.useState(0);return D.useEffect(()=>{const S=d.current;if(S)return S.addEventListener(Vp,y),()=>S.removeEventListener(Vp,y)},[y]),N.jsx(wq,{scope:n,orientation:r,dir:_,loop:i,currentTabStopId:g,onItemFocus:D.useCallback(S=>m(S),[m]),onItemShiftTab:D.useCallback(()=>b(!0),[]),onFocusableItemAdd:D.useCallback(()=>T(S=>S+1),[]),onFocusableItemRemove:D.useCallback(()=>T(S=>S-1),[]),children:N.jsx(gt.div,{tabIndex:p||w===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:ze(t.onMouseDown,()=>{E.current=!0}),onFocus:ze(t.onFocus,S=>{const x=!E.current;if(S.target===S.currentTarget&&x&&!p){const R=new CustomEvent(Vp,yq);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const U=v().filter(ne=>ne.focusable),P=U.find(ne=>ne.active),B=U.find(ne=>ne.id===g),W=[P,B,...U].filter(Boolean).map(ne=>ne.ref.current);MP(W,u)}}E.current=!1}),onBlur:ze(t.onBlur,()=>b(!1))})})}),IP="RovingFocusGroupItem",LP=D.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=Ns(),l=s||a,c=Sq(IP,n),u=c.currentTabStopId===l,h=PP(n),{onFocusableItemAdd:d,onFocusableItemRemove:f}=c;return D.useEffect(()=>{if(r)return d(),()=>f()},[r,d,f]),N.jsx(s0.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:N.jsx(gt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ze(t.onMouseDown,_=>{r?c.onItemFocus(l):_.preventDefault()}),onFocus:ze(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ze(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){c.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const g=Aq(_,c.orientation,c.dir);if(g!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let p=h().filter(b=>b.focusable).map(b=>b.ref.current);if(g==="last")p.reverse();else if(g==="prev"||g==="next"){g==="prev"&&p.reverse();const b=p.indexOf(_.currentTarget);p=c.loop?kq(p,b+1):p.slice(b+1)}setTimeout(()=>MP(p))}})})})});LP.displayName=IP;var Cq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Aq(t,e,n){const r=xq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Cq[r]}function MP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function kq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Rq=OP,Pq=LP,o0=["Enter"," "],Dq=["ArrowDown","PageUp","Home"],NP=["ArrowUp","PageDown","End"],Oq=[...Dq,...NP],Iq={ltr:[...o0,"ArrowRight"],rtl:[...o0,"ArrowLeft"]},Lq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jc="Menu",[tc,Mq,Nq]=kP(jc),[ro,BP]=pa(jc,[Nq,rf,DP]),Cf=rf(),FP=DP(),[Bq,io]=ro(jc),[Fq,zc]=ro(jc),HP=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Cf(e),[l,c]=D.useState(null),u=D.useRef(!1),h=Vn(s),d=RP(i);return D.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),N.jsx(VA,{...a,children:N.jsx(Bq,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:c,children:N.jsx(Fq,{scope:e,onClose:D.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:d,modal:o,children:r})})})};HP.displayName=jc;var Hq="MenuAnchor",Ob=D.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Cf(n);return N.jsx(WA,{...i,...r,ref:e})});Ob.displayName=Hq;var Ib="MenuPortal",[Uq,UP]=ro(Ib,{forceMount:void 0}),jP=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=io(Ib,e);return N.jsx(Uq,{scope:e,forceMount:n,children:N.jsx(rs,{present:n||s.open,children:N.jsx(v_,{asChild:!0,container:i,children:r})})})};jP.displayName=Ib;var tr="MenuContent",[jq,Lb]=ro(tr),zP=D.forwardRef((t,e)=>{const n=UP(tr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=io(tr,t.__scopeMenu),o=zc(tr,t.__scopeMenu);return N.jsx(tc.Provider,{scope:t.__scopeMenu,children:N.jsx(rs,{present:r||s.open,children:N.jsx(tc.Slot,{scope:t.__scopeMenu,children:o.modal?N.jsx(zq,{...i,ref:e}):N.jsx(Vq,{...i,ref:e})})})})}),zq=D.forwardRef((t,e)=>{const n=io(tr,t.__scopeMenu),r=D.useRef(null),i=St(e,r);return D.useEffect(()=>{const s=r.current;if(s)return mx(s)},[]),N.jsx(Mb,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ze(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Vq=D.forwardRef((t,e)=>{const n=io(tr,t.__scopeMenu);return N.jsx(Mb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Mb=D.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:d,onDismiss:f,disableOutsideScroll:_,...g}=t,m=io(tr,n),p=zc(tr,n),b=Cf(n),y=FP(n),v=Mq(n),[E,w]=D.useState(null),T=D.useRef(null),S=St(e,T,m.onContentChange),x=D.useRef(0),R=D.useRef(""),U=D.useRef(0),P=D.useRef(null),B=D.useRef("right"),A=D.useRef(0),W=_?E_:D.Fragment,ne=_?{as:na,allowPinchZoom:!0}:void 0,Q=L=>{const I=R.current+L,j=v().filter(Z=>!Z.disabled),H=document.activeElement,F=j.find(Z=>Z.ref.current===H)?.textValue,J=j.map(Z=>Z.textValue),te=tK(J,I,F),fe=j.find(Z=>Z.textValue===te)?.ref.current;(function Z(V){R.current=V,window.clearTimeout(x.current),V!==""&&(x.current=window.setTimeout(()=>Z(""),1e3))})(I),fe&&setTimeout(()=>fe.focus())};D.useEffect(()=>()=>window.clearTimeout(x.current),[]),ox();const ie=D.useCallback(L=>B.current===P.current?.side&&rK(L,P.current?.area),[]);return N.jsx(jq,{scope:n,searchRef:R,onItemEnter:D.useCallback(L=>{ie(L)&&L.preventDefault()},[ie]),onItemLeave:D.useCallback(L=>{ie(L)||(T.current?.focus(),w(null))},[ie]),onTriggerLeave:D.useCallback(L=>{ie(L)&&L.preventDefault()},[ie]),pointerGraceTimerRef:U,onPointerGraceIntentChange:D.useCallback(L=>{P.current=L},[]),children:N.jsx(W,{...ne,children:N.jsx(y_,{asChild:!0,trapped:i,onMountAutoFocus:ze(s,L=>{L.preventDefault(),T.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:N.jsx(b_,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:d,onDismiss:f,children:N.jsx(Rq,{asChild:!0,...y,dir:p.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:w,onEntryFocus:ze(l,L=>{p.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:N.jsx(GA,{role:"menu","aria-orientation":"vertical","data-state":iD(m.open),"data-radix-menu-content":"",dir:p.dir,...b,...g,ref:S,style:{outline:"none",...g.style},onKeyDown:ze(g.onKeyDown,L=>{const j=L.target.closest("[data-radix-menu-content]")===L.currentTarget,H=L.ctrlKey||L.altKey||L.metaKey,F=L.key.length===1;j&&(L.key==="Tab"&&L.preventDefault(),!H&&F&&Q(L.key));const J=T.current;if(L.target!==J||!Oq.includes(L.key))return;L.preventDefault();const fe=v().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);NP.includes(L.key)&&fe.reverse(),Zq(fe)}),onBlur:ze(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(x.current),R.current="")}),onPointerMove:ze(t.onPointerMove,nc(L=>{const I=L.target,j=A.current!==L.clientX;if(L.currentTarget.contains(I)&&j){const H=L.clientX>A.current?"right":"left";B.current=H,A.current=L.clientX}}))})})})})})})});zP.displayName=tr;var Wq="MenuGroup",Nb=D.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return N.jsx(gt.div,{role:"group",...r,ref:e})});Nb.displayName=Wq;var Gq="MenuLabel",VP=D.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return N.jsx(gt.div,{...r,ref:e})});VP.displayName=Gq;var Sd="MenuItem",ww="menu.itemSelect",xf=D.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=D.useRef(null),o=zc(Sd,t.__scopeMenu),a=Lb(Sd,t.__scopeMenu),l=St(e,s),c=D.useRef(!1),u=()=>{const h=s.current;if(!n&&h){const d=new CustomEvent(ww,{bubbles:!0,cancelable:!0});h.addEventListener(ww,f=>r?.(f),{once:!0}),__(h,d),d.defaultPrevented?c.current=!1:o.onClose()}};return N.jsx(WP,{...i,ref:l,disabled:n,onClick:ze(t.onClick,u),onPointerDown:h=>{t.onPointerDown?.(h),c.current=!0},onPointerUp:ze(t.onPointerUp,h=>{c.current||h.currentTarget?.click()}),onKeyDown:ze(t.onKeyDown,h=>{const d=a.searchRef.current!=="";n||d&&h.key===" "||o0.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});xf.displayName=Sd;var WP=D.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=Lb(Sd,n),a=FP(n),l=D.useRef(null),c=St(e,l),[u,h]=D.useState(!1),[d,f]=D.useState("");return D.useEffect(()=>{const _=l.current;_&&f((_.textContent??"").trim())},[s.children]),N.jsx(tc.ItemSlot,{scope:n,disabled:r,textValue:i??d,children:N.jsx(Pq,{asChild:!0,...a,focusable:!r,children:N.jsx(gt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:ze(t.onPointerMove,nc(_=>{r?o.onItemLeave(_):(o.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ze(t.onPointerLeave,nc(_=>o.onItemLeave(_))),onFocus:ze(t.onFocus,()=>h(!0)),onBlur:ze(t.onBlur,()=>h(!1))})})})}),$q="MenuCheckboxItem",GP=D.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return N.jsx(XP,{scope:t.__scopeMenu,checked:n,children:N.jsx(xf,{role:"menuitemcheckbox","aria-checked":Td(n)?"mixed":n,...i,ref:e,"data-state":Fb(n),onSelect:ze(i.onSelect,()=>r?.(Td(n)?!0:!n),{checkForDefaultPrevented:!1})})})});GP.displayName=$q;var $P="MenuRadioGroup",[qq,Kq]=ro($P,{value:void 0,onValueChange:()=>{}}),qP=D.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Vn(r);return N.jsx(qq,{scope:t.__scopeMenu,value:n,onValueChange:s,children:N.jsx(Nb,{...i,ref:e})})});qP.displayName=$P;var KP="MenuRadioItem",YP=D.forwardRef((t,e)=>{const{value:n,...r}=t,i=Kq(KP,t.__scopeMenu),s=n===i.value;return N.jsx(XP,{scope:t.__scopeMenu,checked:s,children:N.jsx(xf,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":Fb(s),onSelect:ze(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});YP.displayName=KP;var Bb="MenuItemIndicator",[XP,Yq]=ro(Bb,{checked:!1}),QP=D.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Yq(Bb,n);return N.jsx(rs,{present:r||Td(s.checked)||s.checked===!0,children:N.jsx(gt.span,{...i,ref:e,"data-state":Fb(s.checked)})})});QP.displayName=Bb;var Xq="MenuSeparator",JP=D.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return N.jsx(gt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});JP.displayName=Xq;var Qq="MenuArrow",ZP=D.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Cf(n);return N.jsx($A,{...i,...r,ref:e})});ZP.displayName=Qq;var Jq="MenuSub",[Eue,eD]=ro(Jq),sl="MenuSubTrigger",tD=D.forwardRef((t,e)=>{const n=io(sl,t.__scopeMenu),r=zc(sl,t.__scopeMenu),i=eD(sl,t.__scopeMenu),s=Lb(sl,t.__scopeMenu),o=D.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=D.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return D.useEffect(()=>u,[u]),D.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),N.jsx(Ob,{asChild:!0,...c,children:N.jsx(WP,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":iD(n.open),...t,ref:Xd(e,i.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ze(t.onPointerMove,nc(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ze(t.onPointerLeave,nc(h=>{u();const d=n.content?.getBoundingClientRect();if(d){const f=n.content?.dataset.side,_=f==="right",g=_?-5:5,m=d[_?"left":"right"],p=d[_?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+g,y:h.clientY},{x:m,y:d.top},{x:p,y:d.top},{x:p,y:d.bottom},{x:m,y:d.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ze(t.onKeyDown,h=>{const d=s.searchRef.current!=="";t.disabled||d&&h.key===" "||Iq[r.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});tD.displayName=sl;var nD="MenuSubContent",rD=D.forwardRef((t,e)=>{const n=UP(tr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=io(tr,t.__scopeMenu),o=zc(tr,t.__scopeMenu),a=eD(nD,t.__scopeMenu),l=D.useRef(null),c=St(e,l);return N.jsx(tc.Provider,{scope:t.__scopeMenu,children:N.jsx(rs,{present:r||s.open,children:N.jsx(tc.Slot,{scope:t.__scopeMenu,children:N.jsx(Mb,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ze(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ze(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ze(t.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),d=Lq[o.dir].includes(u.key);h&&d&&(s.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});rD.displayName=nD;function iD(t){return t?"open":"closed"}function Td(t){return t==="indeterminate"}function Fb(t){return Td(t)?"indeterminate":t?"checked":"unchecked"}function Zq(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function eK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function tK(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=eK(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function nK(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function rK(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return nK(n,e)}function nc(t){return e=>e.pointerType==="mouse"?t(e):void 0}var iK=HP,sK=Ob,oK=jP,aK=zP,lK=Nb,cK=VP,uK=xf,hK=GP,dK=qP,fK=YP,pK=QP,mK=JP,gK=ZP,_K=tD,bK=rD,Hb="DropdownMenu",[yK,wue]=pa(Hb,[BP]),yn=BP(),[vK,sD]=yK(Hb),oD=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=yn(e),c=D.useRef(null),[u=!1,h]=Qd({prop:i,defaultProp:s,onChange:o});return N.jsx(vK,{scope:e,triggerId:Ns(),triggerRef:c,contentId:Ns(),open:u,onOpenChange:h,onOpenToggle:D.useCallback(()=>h(d=>!d),[h]),modal:a,children:N.jsx(iK,{...l,open:u,onOpenChange:h,dir:r,modal:a,children:n})})};oD.displayName=Hb;var aD="DropdownMenuTrigger",lD=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=sD(aD,n),o=yn(n);return N.jsx(sK,{asChild:!0,...o,children:N.jsx(gt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Xd(e,s.triggerRef),onPointerDown:ze(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ze(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});lD.displayName=aD;var EK="DropdownMenuPortal",cD=t=>{const{__scopeDropdownMenu:e,...n}=t,r=yn(e);return N.jsx(oK,{...r,...n})};cD.displayName=EK;var uD="DropdownMenuContent",hD=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=sD(uD,n),s=yn(n),o=D.useRef(!1);return N.jsx(aK,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ze(t.onCloseAutoFocus,a=>{o.current||i.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ze(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hD.displayName=uD;var wK="DropdownMenuGroup",SK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(lK,{...i,...r,ref:e})});SK.displayName=wK;var TK="DropdownMenuLabel",CK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(cK,{...i,...r,ref:e})});CK.displayName=TK;var xK="DropdownMenuItem",AK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(uK,{...i,...r,ref:e})});AK.displayName=xK;var kK="DropdownMenuCheckboxItem",RK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(hK,{...i,...r,ref:e})});RK.displayName=kK;var PK="DropdownMenuRadioGroup",DK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(dK,{...i,...r,ref:e})});DK.displayName=PK;var OK="DropdownMenuRadioItem",IK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(fK,{...i,...r,ref:e})});IK.displayName=OK;var LK="DropdownMenuItemIndicator",MK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(pK,{...i,...r,ref:e})});MK.displayName=LK;var NK="DropdownMenuSeparator",BK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(mK,{...i,...r,ref:e})});BK.displayName=NK;var FK="DropdownMenuArrow",dD=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(gK,{...i,...r,ref:e})});dD.displayName=FK;var HK="DropdownMenuSubTrigger",UK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(_K,{...i,...r,ref:e})});UK.displayName=HK;var jK="DropdownMenuSubContent",zK=D.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=yn(n);return N.jsx(bK,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zK.displayName=jK;var VK=oD,WK=lD,GK=cD,$K=hD,qK=dD;const KK=Wn("FileTree"),YK=8,XK=[/\/node_modules\//,/\/\.next/,/\/\.astro/],fD=D.memo(({files:t={},onFileSelect:e,selectedFile:n,rootFolder:r,hideRoot:i=!1,collapsed:s=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c})=>{ma.trace("FileTree");const u=D.useMemo(()=>[...XK,...a??[]],[a]),h=D.useMemo(()=>ZK(t,r,i,u),[t,r,i,u]),[d,f]=D.useState(()=>s?new Set(h.filter(m=>m.kind==="folder").map(m=>m.fullPath)):new Set);D.useEffect(()=>{if(s){f(new Set(h.filter(m=>m.kind==="folder").map(m=>m.fullPath)));return}f(m=>{const p=new Set;for(const b of h)b.kind==="folder"&&m.has(b.fullPath)&&p.add(b.fullPath);return p})},[h,s]);const _=D.useMemo(()=>{const m=[];let p=Number.MAX_SAFE_INTEGER;for(const b of h){const y=b.depth;p===y&&(p=Number.MAX_SAFE_INTEGER),d.has(b.fullPath)&&(p=Math.min(p,y)),!(p<y)&&m.push(b)}return m},[h,d]),g=m=>{f(p=>{const b=new Set(p);return b.has(m)?b.delete(m):b.add(m),b})};return N.jsx("div",{className:We("text-sm",l,"overflow-y-auto"),children:_.map(m=>{switch(m.kind){case"file":return N.jsx(JK,{selected:n===m.fullPath,file:m,unsavedChanges:c?.has(m.fullPath),onClick:()=>{e?.(m.fullPath)}},m.id);case"folder":return N.jsx(QK,{folder:m,selected:o&&n===m.fullPath,collapsed:d.has(m.fullPath),onClick:()=>{g(m.fullPath)}},m.id);default:return}})})});function QK({folder:{depth:t,name:e},collapsed:n,selected:r=!1,onClick:i}){return N.jsx(pD,{className:We("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!r,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r}),depth:t,iconClasses:We({"i-ph:caret-right scale-98":n,"i-ph:caret-down scale-98":!n}),onClick:i,children:e})}function JK({file:{depth:t,name:e},onClick:n,selected:r,unsavedChanges:i=!1}){return N.jsx(pD,{className:We("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!r,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":r}),depth:t,iconClasses:We("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!r}),onClick:n,children:N.jsxs("div",{className:We("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!r}),children:[N.jsx("div",{className:"flex-1 truncate pr-2",children:e}),i&&N.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})})}function pD({depth:t,iconClasses:e,onClick:n,className:r,children:i}){return N.jsxs("button",{className:We("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",r),style:{paddingLeft:`${6+t*YK}px`},onClick:()=>n?.(),children:[N.jsx("div",{className:We("scale-120 shrink-0",e)}),N.jsx("div",{className:"truncate w-full text-left",children:i})]})}function ZK(t,e="/",n,r){const i=new Set,s=[];let o=0;e==="/"&&!n&&(o=1,s.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(_=>_),u=c.at(-1);if(!u||eY(a,u,r))continue;let h="",d=0,f=0;for(;d<c.length;){const _=c[d],g=h+=`/${_}`;if(!g.startsWith(e)||n&&g===e){d++;continue}d===c.length-1&&l?.type==="file"?s.push({kind:"file",id:s.length,name:_,fullPath:g,depth:f+o}):i.has(g)||(i.add(g),s.push({kind:"folder",id:s.length,name:_,fullPath:g,depth:f+o})),d++,f++}}return tY(e,s,n)}function eY(t,e,n){return n.some(r=>typeof r=="string"?e===r:r.test(t))}function tY(t,e,n){KK.trace("sortFileList");const r=new Map,i=new Map;e.sort((a,l)=>nY(a,l));for(const a of e){r.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(i.has(l)||i.set(l,[]),i.get(l)?.push(a))}const s=[],o=a=>{const l=r.get(a);l&&s.push(l);const c=i.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):s.push(u)};if(n){const a=i.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return s}function nY(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const rY=new RegExp(`^${Pc.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),iY={open:{y:0,opacity:1,transition:{duration:.15,ease:ir}},close:{y:6,opacity:0,transition:{duration:.15,ease:ir}}},sY=D.memo(({files:t,pathSegments:e=[],onFileSelect:n})=>{ma.trace("FileBreadcrumb");const[r,i]=D.useState(null),s=D.useRef(null),o=D.useRef([]),a=l=>{i(c=>c===l?null:l)};return D.useEffect(()=>{const l=c=>{r!==null&&!s.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&i(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]),t===void 0||e.length===0?null:N.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,h=e.slice(0,c).join("/");if(!rY.test(h))return null;const d=r===c;return N.jsx("div",{className:"relative flex items-center",children:N.jsxs(VK,{open:d,modal:!1,children:[N.jsx(WK,{asChild:!0,children:N.jsxs("span",{ref:f=>o.current[c]=f,className:We("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!d,"text-bolt-elements-textPrimary underline":d,"pr-4":u}),onClick:()=>a(c),children:[u&&N.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&N.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),N.jsx(Fh,{children:d&&N.jsx(GK,{children:N.jsx($K,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:N.jsxs(rr.div,{ref:s,initial:"close",animate:"open",exit:"close",variants:iY,children:[N.jsx("div",{className:"rounded-lg overflow-hidden",children:N.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:N.jsx(fD,{files:t,hideRoot:!0,rootFolder:h,collapsed:!0,allowFolderSelection:!0,selectedFile:`${h}/${l}`,onFileSelect:f=>{i(null),n?.(f)}})})}),N.jsx(qK,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var mD={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(i){this._terminal=i}dispose(){}fit(){const i=this.proposeDimensions();if(!i||!this._terminal||isNaN(i.cols)||isNaN(i.rows))return;const s=this._terminal._core;this._terminal.rows===i.rows&&this._terminal.cols===i.cols||(s._renderService.clear(),this._terminal.resize(i.cols,i.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const i=this._terminal._core,s=i._renderService.dimensions;if(s.css.cell.width===0||s.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:i.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),h=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(d/s.css.cell.width)),rows:Math.max(1,Math.floor(h/s.css.cell.height))}}}})(),n})())})(mD);var oY=mD.exports,gD={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={6:(o,a)=>{function l(u){try{const h=new URL(u),d=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return u.toLocaleLowerCase().startsWith(d.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,h,d,f={}){this._terminal=u,this._regex=h,this._handler=d,this._options=f}provideLinks(u,h){const d=c.computeLink(u,this._regex,this._terminal,this._handler);h(this._addCallbacks(d))}_addCallbacks(u){return u.map(h=>(h.leave=this._options.leave,h.hover=(d,f)=>{if(this._options.hover){const{range:_}=h;this._options.hover(d,f,_)}},h))}};class c{static computeLink(h,d,f,_){const g=new RegExp(d.source,(d.flags||"")+"g"),[m,p]=c._getWindowedLineStrings(h-1,f),b=m.join("");let y;const v=[];for(;y=g.exec(b);){const E=y[0];if(!l(E))continue;const[w,T]=c._mapStrIdx(f,p,0,y.index),[S,x]=c._mapStrIdx(f,w,T,E.length);if(w===-1||T===-1||S===-1||x===-1)continue;const R={start:{x:T+1,y:w+1},end:{x,y:S+1}};v.push({range:R,text:E,activate:_})}return v}static _getWindowedLineStrings(h,d){let f,_=h,g=h,m=0,p="";const b=[];if(f=d.buffer.active.getLine(h)){const y=f.translateToString(!0);if(f.isWrapped&&y[0]!==" "){for(m=0;(f=d.buffer.active.getLine(--_))&&m<2048&&(p=f.translateToString(!0),m+=p.length,b.push(p),f.isWrapped&&p.indexOf(" ")===-1););b.reverse()}for(b.push(y),m=0;(f=d.buffer.active.getLine(++g))&&f.isWrapped&&m<2048&&(p=f.translateToString(!0),m+=p.length,b.push(p),p.indexOf(" ")===-1););}return[b,_]}static _mapStrIdx(h,d,f,_){const g=h.buffer.active,m=g.getNullCell();let p=f;for(;_;){const b=g.getLine(d);if(!b)return[-1,-1];for(let y=p;y<b.length;++y){b.getCell(y,m);const v=m.getChars();if(m.getWidth()&&(_-=v.length||1,y===b.length-1&&v==="")){const E=g.getLine(d+1);E&&E.isWrapped&&(E.getCell(0,m),m.getWidth()===2&&(_+=1))}if(_<0)return[d,y]}d++,p=0}return[d,p]}}a.LinkComputer=c}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o](l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=i(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,h){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,h={}){this._handler=u,this._options=h}activate(u){this._terminal=u;const h=this._options,d=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,d,this._handler,h))}dispose(){this._linkProvider?.dispose()}}})(),s})())})(gD);var aY=gD.exports,_D={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(globalThis,()=>(()=>{var n={4567:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,E){var w,T=arguments.length,S=T<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,v):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,y,v,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(S=(T<3?w(S):T>3?w(y,v,S):w(y,v))||S);return T>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(b,y){return function(v,E){y(v,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const h=l(9042),d=l(9924),f=l(844),_=l(4725),g=l(2585),m=l(3656);let p=a.AccessibilityManager=class extends f.Disposable{constructor(b,y,v,E){super(),this._terminal=b,this._coreBrowserService=v,this._renderService=E,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let w=0;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);if(this._topBoundaryFocusListener=w=>this._handleBoundaryFocus(w,0),this._bottomBoundaryFocusListener=w=>this._handleBoundaryFocus(w,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new d.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(w=>this._handleResize(w.rows))),this.register(this._terminal.onRender(w=>this._refreshRows(w.start,w.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(w=>this._handleChar(w))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(w=>this._handleTab(w))),this.register(this._terminal.onKey(w=>this._handleKey(w.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,m.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(b){for(let y=0;y<b;y++)this._handleChar(" ")}_handleChar(b){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==b&&(this._charsToAnnounce+=b):this._charsToAnnounce+=b,b===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(b){this._clearLiveRegion(),/\p{Control}/u.test(b)||this._charsToConsume.push(b)}_refreshRows(b,y){this._liveRegionDebouncer.refresh(b,y,this._terminal.rows)}_renderRows(b,y){const v=this._terminal.buffer,E=v.lines.length.toString();for(let w=b;w<=y;w++){const T=v.lines.get(v.ydisp+w),S=[],x=T?.translateToString(!0,void 0,void 0,S)||"",R=(v.ydisp+w+1).toString(),U=this._rowElements[w];U&&(x.length===0?(U.innerText="",this._rowColumns.set(U,[0,1])):(U.textContent=x,this._rowColumns.set(U,S)),U.setAttribute("aria-posinset",R),U.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(b,y){const v=b.target,E=this._rowElements[y===0?1:this._rowElements.length-2];if(v.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||b.relatedTarget!==E)return;let w,T;if(y===0?(w=v,T=this._rowElements.pop(),this._rowContainer.removeChild(T)):(w=this._rowElements.shift(),T=v,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),T.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){const S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{const S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),b.preventDefault(),b.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const b=document.getSelection();if(!b)return;if(b.isCollapsed)return void(this._rowContainer.contains(b.anchorNode)&&this._terminal.clearSelection());if(!b.anchorNode||!b.focusNode)return void console.error("anchorNode and/or focusNode are null");let y={node:b.anchorNode,offset:b.anchorOffset},v={node:b.focusNode,offset:b.focusOffset};if((y.node.compareDocumentPosition(v.node)&Node.DOCUMENT_POSITION_PRECEDING||y.node===v.node&&y.offset>v.offset)&&([y,v]=[v,y]),y.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(y={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(y.node))return;const E=this._rowElements.slice(-1)[0];if(v.node.compareDocumentPosition(E)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(v={node:E,offset:E.textContent?.length??0}),!this._rowContainer.contains(v.node))return;const w=({node:x,offset:R})=>{const U=x instanceof Text?x.parentNode:x;let P=parseInt(U?.getAttribute("aria-posinset"),10)-1;if(isNaN(P))return console.warn("row is invalid. Race condition?"),null;const B=this._rowColumns.get(U);if(!B)return console.warn("columns is null. Race condition?"),null;let A=R<B.length?B[R]:B.slice(-1)[0]+1;return A>=this._terminal.cols&&(++P,A=0),{row:P,column:A}},T=w(y),S=w(v);if(T&&S){if(T.row>S.row||T.row===S.row&&T.column>=S.column)throw new Error("invalid range");this._terminal.select(T.column,T.row,(S.row-T.row)*this._terminal.cols-T.column+S.column)}}_handleResize(b){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>b;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const b=this._coreBrowserService.mainDocument.createElement("div");return b.setAttribute("role","listitem"),b.tabIndex=-1,this._refreshRowDimensions(b),b}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let b=0;b<this._terminal.rows;b++)this._refreshRowDimensions(this._rowElements[b])}}_refreshRowDimensions(b){b.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=p=c([u(1,g.IInstantiationService),u(2,_.ICoreBrowserService),u(3,_.IRenderService)],p)},3614:(o,a)=>{function l(d){return d.replace(/\r?\n/g,"\r")}function c(d,f){return f?"\x1B[200~"+d+"\x1B[201~":d}function u(d,f,_,g){d=c(d=l(d),_.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),_.triggerDataEvent(d,!0),f.value=""}function h(d,f,_){const g=_.getBoundingClientRect(),m=d.clientX-g.left-10,p=d.clientY-g.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${m}px`,f.style.top=`${p}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(d,f){d.clipboardData&&d.clipboardData.setData("text/plain",f.selectionText),d.preventDefault()},a.handlePasteEvent=function(d,f,_,g){d.stopPropagation(),d.clipboardData&&u(d.clipboardData.getData("text/plain"),f,_,g)},a.paste=u,a.moveTextAreaUnderMouseCursor=h,a.rightClickHandler=function(d,f,_,g,m){h(d,f,_),m&&g.rightClickSelect(d),f.value=g.selectionText,f.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,h,d){this._css.set(u,h,d)}getCss(u,h){return this._css.get(u,h)}setColor(u,h,d){this._color.set(u,h,d)}getColor(u,h){return this._color.get(u,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,h){l.addEventListener(c,u,h);let d=!1;return{dispose:()=>{d||(d=!0,l.removeEventListener(c,u,h))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var E,w=arguments.length,T=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(p,b,y,v);else for(var S=p.length-1;S>=0;S--)(E=p[S])&&(T=(w<3?E(T):w>3?E(b,y,T):E(b,y))||T);return w>3&&T&&Object.defineProperty(b,y,T),T},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const h=l(3656),d=l(8460),f=l(844),_=l(2585),g=l(4725);let m=a.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(p,b,y,v,E){super(),this._element=p,this._mouseService=b,this._renderService=y,this._bufferService=v,this._linkProviderService=E,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new d.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new d.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(p){this._lastMouseEvent=p;const b=this._positionFromMouseEvent(p,this._element,this._mouseService);if(!b)return;this._isMouseOut=!1;const y=p.composedPath();for(let v=0;v<y.length;v++){const E=y[v];if(E.classList.contains("xterm"))break;if(E.classList.contains("xterm-hover"))return}this._lastBufferCell&&b.x===this._lastBufferCell.x&&b.y===this._lastBufferCell.y||(this._handleHover(b),this._lastBufferCell=b)}_handleHover(p){if(this._activeLine!==p.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(p,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,p)||(this._clearCurrentLink(),this._askForLink(p,!0))}_askForLink(p,b){this._activeProviderReplies&&b||(this._activeProviderReplies?.forEach(v=>{v?.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=p.y);let y=!1;for(const[v,E]of this._linkProviderService.linkProviders.entries())b?this._activeProviderReplies?.get(v)&&(y=this._checkLinkProviderResult(v,p,y)):E.provideLinks(p.y,w=>{if(this._isMouseOut)return;const T=w?.map(S=>({link:S}));this._activeProviderReplies?.set(v,T),y=this._checkLinkProviderResult(v,p,y),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(p.y,this._activeProviderReplies)})}_removeIntersectingLinks(p,b){const y=new Set;for(let v=0;v<b.size;v++){const E=b.get(v);if(E)for(let w=0;w<E.length;w++){const T=E[w],S=T.link.range.start.y<p?0:T.link.range.start.x,x=T.link.range.end.y>p?this._bufferService.cols:T.link.range.end.x;for(let R=S;R<=x;R++){if(y.has(R)){E.splice(w--,1);break}y.add(R)}}}}_checkLinkProviderResult(p,b,y){if(!this._activeProviderReplies)return y;const v=this._activeProviderReplies.get(p);let E=!1;for(let w=0;w<p;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(E=!0);if(!E&&v){const w=v.find(T=>this._linkAtPosition(T.link,b));w&&(y=!0,this._handleNewLink(w))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!y)for(let w=0;w<this._activeProviderReplies.size;w++){const T=this._activeProviderReplies.get(w)?.find(S=>this._linkAtPosition(S.link,b));if(T){y=!0,this._handleNewLink(T);break}}return y}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(p){if(!this._currentLink)return;const b=this._positionFromMouseEvent(p,this._element,this._mouseService);b&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,b)&&this._currentLink.link.activate(p,this._currentLink.link.text)}_clearCurrentLink(p,b){this._currentLink&&this._lastMouseEvent&&(!p||!b||this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=b)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(p){if(!this._lastMouseEvent)return;const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._linkAtPosition(p.link,b)&&(this._currentLink=p,this._currentLink.state={decorations:{underline:p.link.decorations===void 0||p.link.decorations.underline,pointerCursor:p.link.decorations===void 0||p.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,p.link,this._lastMouseEvent),p.link.decorations={},Object.defineProperties(p.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:y=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==y&&(this._currentLink.state.decorations.pointerCursor=y,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",y))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:y=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==y&&(this._currentLink.state.decorations.underline=y,this._currentLink.state.isHovered&&this._fireUnderlineEvent(p.link,y))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(y=>{if(!this._currentLink)return;const v=y.start===0?0:y.start+1+this._bufferService.buffer.ydisp,E=this._bufferService.buffer.ydisp+1+y.end;if(this._currentLink.link.range.start.y>=v&&this._currentLink.link.range.end.y<=E&&(this._clearCurrentLink(v,E),this._lastMouseEvent)){const w=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);w&&this._askForLink(w,!1)}})))}_linkHover(p,b,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!0),this._currentLink.state.decorations.pointerCursor&&p.classList.add("xterm-cursor-pointer")),b.hover&&b.hover(y,b.text)}_fireUnderlineEvent(p,b){const y=p.range,v=this._bufferService.buffer.ydisp,E=this._createLinkUnderlineEvent(y.start.x-1,y.start.y-v-1,y.end.x,y.end.y-v-1,void 0);(b?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(E)}_linkLeave(p,b,y){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(b,!1),this._currentLink.state.decorations.pointerCursor&&p.classList.remove("xterm-cursor-pointer")),b.leave&&b.leave(y,b.text)}_linkAtPosition(p,b){const y=p.range.start.y*this._bufferService.cols+p.range.start.x,v=p.range.end.y*this._bufferService.cols+p.range.end.x,E=b.y*this._bufferService.cols+b.x;return y<=E&&E<=v}_positionFromMouseEvent(p,b,y){const v=y.getCoords(p,b,this._bufferService.cols,this._bufferService.rows);if(v)return{x:v[0],y:v[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(p,b,y,v,E){return{x1:p,y1:b,x2:y,y2:v,cols:this._bufferService.cols,fg:E}}};a.Linkifier=m=c([u(1,g.IMouseService),u(2,g.IRenderService),u(3,_.IBufferService),u(4,g.ILinkProviderService)],m)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(g,m,p,b){var y,v=arguments.length,E=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,m,p,b);else for(var w=g.length-1;w>=0;w--)(y=g[w])&&(E=(v<3?y(E):v>3?y(m,p,E):y(m,p))||E);return v>3&&E&&Object.defineProperty(m,p,E),E},u=this&&this.__param||function(g,m){return function(p,b){m(p,b,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const h=l(511),d=l(2585);let f=a.OscLinkProvider=class{constructor(g,m,p){this._bufferService=g,this._optionsService=m,this._oscLinkService=p}provideLinks(g,m){const p=this._bufferService.buffer.lines.get(g-1);if(!p)return void m(void 0);const b=[],y=this._optionsService.rawOptions.linkHandler,v=new h.CellData,E=p.getTrimmedLength();let w=-1,T=-1,S=!1;for(let x=0;x<E;x++)if(T!==-1||p.hasContent(x)){if(p.loadCell(x,v),v.hasExtendedAttrs()&&v.extended.urlId){if(T===-1){T=x,w=v.extended.urlId;continue}S=v.extended.urlId!==w}else T!==-1&&(S=!0);if(S||T!==-1&&x===E-1){const R=this._oscLinkService.getLinkData(w)?.uri;if(R){const U={start:{x:T+1,y:g},end:{x:x+(S||x!==E-1?0:1),y:g}};let P=!1;if(!y?.allowNonHttpProtocols)try{const B=new URL(R);["http:","https:"].includes(B.protocol)||(P=!0)}catch{P=!0}P||b.push({text:R,range:U,activate:(B,A)=>y?y.activate(B,A,U):_(0,A),hover:(B,A)=>y?.hover?.(B,A,U),leave:(B,A)=>y?.leave?.(B,A,U)})}S=!1,v.hasExtendedAttrs()&&v.extended.urlId?(T=x,w=v.extended.urlId):(T=-1,w=-1)}}m(b)}};function _(g,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const p=window.open();if(p){try{p.opener=null}catch{}p.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=c([u(0,d.IBufferService),u(1,d.IOptionsService),u(2,d.IOscLinkService)],f)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),h=l(3551),d=l(9042),f=l(3730),_=l(1680),g=l(3107),m=l(5744),p=l(2950),b=l(1296),y=l(428),v=l(4269),E=l(5114),w=l(8934),T=l(3230),S=l(9312),x=l(4725),R=l(6731),U=l(8055),P=l(8969),B=l(8460),A=l(844),W=l(6114),ne=l(8437),Q=l(2584),ie=l(7399),L=l(5941),I=l(9074),j=l(2585),H=l(5435),F=l(4567),J=l(779);class te extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(Z={}){super(Z),this.browser=W,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new A.MutableDisposable),this._onCursorMove=this.register(new B.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new B.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new B.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new B.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new B.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new B.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new B.EventEmitter),this._onBlur=this.register(new B.EventEmitter),this._onA11yCharEmitter=this.register(new B.EventEmitter),this._onA11yTabEmitter=this.register(new B.EventEmitter),this._onWillOpen=this.register(new B.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(j.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(J.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((V,ue)=>this.refresh(V,ue))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(V=>this._reportWindowsOptions(V))),this.register(this._inputHandler.onColor(V=>this._handleColorEvent(V))),this.register((0,B.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,B.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(V=>this._afterResize(V.cols,V.rows))),this.register((0,A.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(Z){if(this._themeService)for(const V of Z){let ue,ge="";switch(V.index){case 256:ue="foreground",ge="10";break;case 257:ue="background",ge="11";break;case 258:ue="cursor",ge="12";break;default:ue="ansi",ge="4;"+V.index}switch(V.type){case 0:const Ee=U.color.toColorRGB(ue==="ansi"?this._themeService.colors.ansi[V.index]:this._themeService.colors[ue]);this.coreService.triggerDataEvent(`${Q.C0.ESC}]${ge};${(0,L.toRgbString)(Ee)}${Q.C1_ESCAPED.ST}`);break;case 1:if(ue==="ansi")this._themeService.modifyColors(me=>me.ansi[V.index]=U.channels.toColor(...V.color));else{const me=ue;this._themeService.modifyColors(we=>we[me]=U.channels.toColor(...V.color))}break;case 2:this._themeService.restoreColor(V.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(Z){Z?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(Z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const Z=this.buffer.ybase+this.buffer.y,V=this.buffer.lines.get(Z);if(!V)return;const ue=Math.min(this.buffer.x,this.cols-1),ge=this._renderService.dimensions.css.cell.height,Ee=V.getWidth(ue),me=this._renderService.dimensions.css.cell.width*Ee,we=this.buffer.y*this._renderService.dimensions.css.cell.height,M=ue*this._renderService.dimensions.css.cell.width;this.textarea.style.left=M+"px",this.textarea.style.top=we+"px",this.textarea.style.width=me+"px",this.textarea.style.height=ge+"px",this.textarea.style.lineHeight=ge+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",V=>{this.hasSelection()&&(0,c.copyHandler)(V,this._selectionService)}));const Z=V=>(0,c.handlePasteEvent)(V,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",Z)),this.register((0,u.addDisposableDomListener)(this.element,"paste",Z)),W.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",V=>{V.button===2&&(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",V=>{(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),W.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",V=>{V.button===1&&(0,c.moveTextAreaUnderMouseCursor)(V,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",Z=>this._keyUp(Z),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",Z=>this._keyDown(Z),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",Z=>this._keyPress(Z),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",Z=>this._compositionHelper.compositionupdate(Z))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",Z=>this._inputEvent(Z),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(Z){if(!Z)throw new Error("Terminal requires a parent element.");if(Z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=Z.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),Z.appendChild(this.element);const V=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",ue=>this.updateCursorStyle(ue))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),W.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(E.CoreBrowserService,this.textarea,Z.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",ue=>this._handleTextAreaFocus(ue))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ue=>this._onRender.fire(ue))),this.onResize(ue=>this._renderService.resize(ue.cols,ue.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(p.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(w.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(V);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(_.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(ue=>this.scrollLines(ue.amount,ue.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ue=>this.scrollLines(ue.amount,ue.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ue=>this._renderService.handleSelectionChanged(ue.start,ue.end,ue.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ue=>{this.textarea.value=ue,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ue=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",ue=>this._selectionService.handleMouseDown(ue))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(F.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ue=>this._handleScreenReaderModeOptionChange(ue))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ue=>{!this._overviewRulerRenderer&&ue&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(b.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const Z=this,V=this.element;function ue(me){const we=Z._mouseService.getMouseReportCoords(me,Z.screenElement);if(!we)return!1;let M,se;switch(me.overrideType||me.type){case"mousemove":se=32,me.buttons===void 0?(M=3,me.button!==void 0&&(M=me.button<3?me.button:3)):M=1&me.buttons?0:4&me.buttons?1:2&me.buttons?2:3;break;case"mouseup":se=0,M=me.button<3?me.button:3;break;case"mousedown":se=1,M=me.button<3?me.button:3;break;case"wheel":if(Z._customWheelEventHandler&&Z._customWheelEventHandler(me)===!1||Z.viewport.getLinesScrolled(me)===0)return!1;se=me.deltaY<0?0:1,M=4;break;default:return!1}return!(se===void 0||M===void 0||M>4)&&Z.coreMouseService.triggerMouseEvent({col:we.col,row:we.row,x:we.x,y:we.y,button:M,action:se,ctrl:me.ctrlKey,alt:me.altKey,shift:me.shiftKey})}const ge={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Ee={mouseup:me=>(ue(me),me.buttons||(this._document.removeEventListener("mouseup",ge.mouseup),ge.mousedrag&&this._document.removeEventListener("mousemove",ge.mousedrag)),this.cancel(me)),wheel:me=>(ue(me),this.cancel(me,!0)),mousedrag:me=>{me.buttons&&ue(me)},mousemove:me=>{me.buttons||ue(me)}};this.register(this.coreMouseService.onProtocolChange(me=>{me?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(me)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&me?ge.mousemove||(V.addEventListener("mousemove",Ee.mousemove),ge.mousemove=Ee.mousemove):(V.removeEventListener("mousemove",ge.mousemove),ge.mousemove=null),16&me?ge.wheel||(V.addEventListener("wheel",Ee.wheel,{passive:!1}),ge.wheel=Ee.wheel):(V.removeEventListener("wheel",ge.wheel),ge.wheel=null),2&me?ge.mouseup||(ge.mouseup=Ee.mouseup):(this._document.removeEventListener("mouseup",ge.mouseup),ge.mouseup=null),4&me?ge.mousedrag||(ge.mousedrag=Ee.mousedrag):(this._document.removeEventListener("mousemove",ge.mousedrag),ge.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(V,"mousedown",me=>{if(me.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(me))return ue(me),ge.mouseup&&this._document.addEventListener("mouseup",ge.mouseup),ge.mousedrag&&this._document.addEventListener("mousemove",ge.mousedrag),this.cancel(me)})),this.register((0,u.addDisposableDomListener)(V,"wheel",me=>{if(!ge.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(me)===!1)return!1;if(!this.buffer.hasScrollback){const we=this.viewport.getLinesScrolled(me);if(we===0)return;const M=Q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(me.deltaY<0?"A":"B");let se="";for(let le=0;le<Math.abs(we);le++)se+=M;return this.coreService.triggerDataEvent(se,!0),this.cancel(me,!0)}return this.viewport.handleWheel(me)?this.cancel(me):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(V,"touchstart",me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(me),this.cancel(me)},{passive:!0})),this.register((0,u.addDisposableDomListener)(V,"touchmove",me=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(me)?void 0:this.cancel(me)},{passive:!1}))}refresh(Z,V){this._renderService?.refreshRows(Z,V)}updateCursorStyle(Z){this._selectionService?.shouldColumnSelect(Z)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(Z,V,ue=0){ue===1?(super.scrollLines(Z,V,ue),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(Z)}paste(Z){(0,c.paste)(Z,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(Z){this._customKeyEventHandler=Z}attachCustomWheelEventHandler(Z){this._customWheelEventHandler=Z}registerLinkProvider(Z){return this._linkProviderService.registerLinkProvider(Z)}registerCharacterJoiner(Z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const V=this._characterJoinerService.register(Z);return this.refresh(0,this.rows-1),V}deregisterCharacterJoiner(Z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(Z)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(Z){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+Z)}registerDecoration(Z){return this._decorationService.registerDecoration(Z)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(Z,V,ue){this._selectionService.setSelection(Z,V,ue)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(Z,V){this._selectionService?.selectLines(Z,V)}_keyDown(Z){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(Z)===!1)return!1;const V=this.browser.isMac&&this.options.macOptionIsMeta&&Z.altKey;if(!V&&!this._compositionHelper.keydown(Z))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;V||Z.key!=="Dead"&&Z.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ue=(0,ie.evaluateKeyboardEvent)(Z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(Z),ue.type===3||ue.type===2){const ge=this.rows-1;return this.scrollLines(ue.type===2?-ge:ge),this.cancel(Z,!0)}return ue.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,Z)||(ue.cancel&&this.cancel(Z,!0),!ue.key||!!(Z.key&&!Z.ctrlKey&&!Z.altKey&&!Z.metaKey&&Z.key.length===1&&Z.key.charCodeAt(0)>=65&&Z.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ue.key!==Q.C0.ETX&&ue.key!==Q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ue.key,domEvent:Z}),this._showCursor(),this.coreService.triggerDataEvent(ue.key,!0),!this.optionsService.rawOptions.screenReaderMode||Z.altKey||Z.ctrlKey?this.cancel(Z,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(Z,V){const ue=Z.isMac&&!this.options.macOptionIsMeta&&V.altKey&&!V.ctrlKey&&!V.metaKey||Z.isWindows&&V.altKey&&V.ctrlKey&&!V.metaKey||Z.isWindows&&V.getModifierState("AltGraph");return V.type==="keypress"?ue:ue&&(!V.keyCode||V.keyCode>47)}_keyUp(Z){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(Z)===!1||(function(V){return V.keyCode===16||V.keyCode===17||V.keyCode===18}(Z)||this.focus(),this.updateCursorStyle(Z),this._keyPressHandled=!1)}_keyPress(Z){let V;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(Z)===!1)return!1;if(this.cancel(Z),Z.charCode)V=Z.charCode;else if(Z.which===null||Z.which===void 0)V=Z.keyCode;else{if(Z.which===0||Z.charCode===0)return!1;V=Z.which}return!(!V||(Z.altKey||Z.ctrlKey||Z.metaKey)&&!this._isThirdLevelShift(this.browser,Z)||(V=String.fromCharCode(V),this._onKey.fire({key:V,domEvent:Z}),this._showCursor(),this.coreService.triggerDataEvent(V,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(Z){if(Z.data&&Z.inputType==="insertText"&&(!Z.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const V=Z.data;return this.coreService.triggerDataEvent(V,!0),this.cancel(Z),!0}return!1}resize(Z,V){Z!==this.cols||V!==this.rows?super.resize(Z,V):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(Z,V){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let Z=1;Z<this.rows;Z++)this.buffer.lines.push(this.buffer.getBlankLine(ne.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const Z=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=Z,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Q.C0.ESC+"[I"):this.coreService.triggerDataEvent(Q.C0.ESC+"[O")}_reportWindowsOptions(Z){if(this._renderService)switch(Z){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const V=this._renderService.dimensions.css.canvas.width.toFixed(0),ue=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[4;${ue};${V}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ge=this._renderService.dimensions.css.cell.width.toFixed(0),Ee=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Q.C0.ESC}[6;${Ee};${ge}t`)}}cancel(Z,V){if(this.options.cancelEvents||V)return Z.preventDefault(),Z.stopPropagation(),!1}}a.Terminal=te},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const d=h-this._lastRefreshMs,f=this._debounceThresholdMS-d;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var E,w=arguments.length,T=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(p,b,y,v);else for(var S=p.length-1;S>=0;S--)(E=p[S])&&(T=(w<3?E(T):w>3?E(b,y,T):E(b,y))||T);return w>3&&T&&Object.defineProperty(b,y,T),T},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const h=l(3656),d=l(4725),f=l(8460),_=l(844),g=l(2585);let m=a.Viewport=class extends _.Disposable{constructor(p,b,y,v,E,w,T,S){super(),this._viewportElement=p,this._scrollArea=b,this._bufferService=y,this._optionsService=v,this._charSizeService=E,this._renderService=w,this._coreBrowserService=T,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(p){this._viewportElement.style.backgroundColor=p.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(p){if(p)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const b=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==b&&(this._lastRecordedBufferHeight=b,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const p=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==p&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=p),this._refreshAnimationFrame=null}syncScrollArea(p=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(p);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(p)}_handleScroll(p){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const b=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const p=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(p*(this._smoothScrollState.target-this._smoothScrollState.origin)),p<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(p,b){const y=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(b<0&&this._viewportElement.scrollTop!==0||b>0&&y<this._lastRecordedBufferHeight)||(p.cancelable&&p.preventDefault(),!1)}handleWheel(p){const b=this._getPixelsScrolled(p);return b!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+b:this._smoothScrollState.target+=b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=b,this._bubbleScroll(p,b))}scrollLines(p){if(p!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const b=p*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+b,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:p,suppressScrollEvent:!1})}_getPixelsScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let b=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._bufferService.rows),b}getBufferElements(p,b){let y,v="";const E=[],w=b??this._bufferService.buffer.lines.length,T=this._bufferService.buffer.lines;for(let S=p;S<w;S++){const x=T.get(S);if(!x)continue;const R=T.get(S+1)?.isWrapped;if(v+=x.translateToString(!R),!R||S===T.length-1){const U=document.createElement("div");U.textContent=v,E.push(U),v.length>0&&(y=U),v=""}}return{bufferElements:E,cursorElement:y}}getLinesScrolled(p){if(p.deltaY===0||p.shiftKey)return 0;let b=this._applyScrollModifier(p.deltaY,p);return p.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):p.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._bufferService.rows),b}_applyScrollModifier(p,b){const y=this._optionsService.rawOptions.fastScrollModifier;return y==="alt"&&b.altKey||y==="ctrl"&&b.ctrlKey||y==="shift"&&b.shiftKey?p*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:p*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(p){this._lastTouchY=p.touches[0].pageY}handleTouchMove(p){const b=this._lastTouchY-p.touches[0].pageY;return this._lastTouchY=p.touches[0].pageY,b!==0&&(this._viewportElement.scrollTop+=b,this._bubbleScroll(p,b))}};a.Viewport=m=c([u(2,g.IBufferService),u(3,g.IOptionsService),u(4,d.ICharSizeService),u(5,d.IRenderService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],m)},3107:function(o,a,l){var c=this&&this.__decorate||function(g,m,p,b){var y,v=arguments.length,E=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,m,p,b);else for(var w=g.length-1;w>=0;w--)(y=g[w])&&(E=(v<3?y(E):v>3?y(m,p,E):y(m,p))||E);return v>3&&E&&Object.defineProperty(m,p,E),E},u=this&&this.__param||function(g,m){return function(p,b){m(p,b,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const h=l(4725),d=l(844),f=l(2585);let _=a.BufferDecorationRenderer=class extends d.Disposable{constructor(g,m,p,b,y){super(),this._screenElement=g,this._bufferService=m,this._coreBrowserService=p,this._decorationService=b,this._renderService=y,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,d.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){const m=this._coreBrowserService.mainDocument.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",g?.options?.layer==="top"),m.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=g.options.x??0;return p&&p>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(g,m),m}_refreshStyle(g){const m=g.marker.line-this._bufferService.buffers.active.ydisp;if(m<0||m>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let p=this._decorationElements.get(g);p||(p=this._createElement(g),g.element=p,this._decorationElements.set(g,p),this._container.appendChild(p),g.onDispose(()=>{this._decorationElements.delete(g),p.remove()})),p.style.top=m*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(p)}}_refreshXPosition(g,m=g.element){if(!m)return;const p=g.options.x??0;(g.options.anchor||"left")==="right"?m.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":m.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){this._decorationElements.get(g)?.remove(),this._decorationElements.delete(g),g.dispose()}};a.BufferDecorationRenderer=_=c([u(1,f.IBufferService),u(2,h.ICoreBrowserService),u(3,f.IDecorationService),u(4,h.IRenderService)],_)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(y,v,E,w){var T,S=arguments.length,x=S<3?v:w===null?w=Object.getOwnPropertyDescriptor(v,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,v,E,w);else for(var R=y.length-1;R>=0;R--)(T=y[R])&&(x=(S<3?T(x):S>3?T(v,E,x):T(v,E))||x);return S>3&&x&&Object.defineProperty(v,E,x),x},u=this&&this.__param||function(y,v){return function(E,w){v(E,w,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const h=l(5871),d=l(4725),f=l(844),_=l(2585),g={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let b=a.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,v,E,w,T,S,x){super(),this._viewportElement=y,this._screenElement=v,this._bufferService=E,this._decorationService=w,this._renderService=T,this._optionsService=S,this._coreBrowserService=x,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const y=Math.floor(this._canvas.width/3),v=Math.ceil(this._canvas.width/3);m.full=this._canvas.width,m.left=y,m.center=v,m.right=y,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=m.left,p.right=m.left+m.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const y=this._canvas.height/this._bufferService.buffer.lines.length,v=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowserService.dpr);g.left=v,g.center=v,g.right=v}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const v of this._decorationService.decorations)this._colorZoneStore.addDecoration(v);this._ctx.lineWidth=1;const y=this._colorZoneStore.zones;for(const v of y)v.position!=="full"&&this._renderColorZone(v);for(const v of y)v.position==="full"&&this._renderColorZone(v);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(p[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-g[y.position||"full"]/2),m[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[y.position||"full"]))}_queueRefresh(y,v){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=v||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=b=c([u(2,_.IBufferService),u(3,_.IDecorationService),u(4,d.IRenderService),u(5,_.IOptionsService),u(6,d.ICoreBrowserService)],b)},2950:function(o,a,l){var c=this&&this.__decorate||function(g,m,p,b){var y,v=arguments.length,E=v<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,m,p,b);else for(var w=g.length-1;w>=0;w--)(y=g[w])&&(E=(v<3?y(E):v>3?y(m,p,E):y(m,p))||E);return v>3&&E&&Object.defineProperty(m,p,E),E},u=this&&this.__param||function(g,m){return function(p,b){m(p,b,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const h=l(4725),d=l(2585),f=l(2584);let _=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,m,p,b,y,v){this._textarea=g,this._compositionView=m,this._bufferService=p,this._optionsService=b,this._coreService=y,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,p=m.replace(g,"");this._dataAlreadySent=p,m.length>g.length?this._coreService.triggerDataEvent(p,!0):m.length<g.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):m.length===g.length&&m!==g&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,b=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,y=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=y+"px",this._compositionView.style.top=b+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=y+"px",this._textarea.style.top=b+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=_=c([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,d.ICoreService),u(5,h.IRenderService)],_)},9806:(o,a)=>{function l(c,u,h){const d=h.getBoundingClientRect(),f=c.getComputedStyle(h),_=parseInt(f.getPropertyValue("padding-left")),g=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-d.left-_,u.clientY-d.top-g]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,h,d,f,_,g,m,p){if(!_)return;const b=l(c,u,h);return b?(b[0]=Math.ceil((b[0]+(p?g/2:0))/g),b[1]=Math.ceil(b[1]/m),b[0]=Math.min(Math.max(b[0],1),d+(p?1:0)),b[1]=Math.min(Math.max(b[1],1),f),b):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(m,p,b,y){const v=m-h(m,b),E=p-h(p,b),w=Math.abs(v-E)-function(T,S,x){let R=0;const U=T-h(T,x),P=S-h(S,x);for(let B=0;B<Math.abs(U-P);B++){const A=d(T,S)==="A"?-1:1;x.buffer.lines.get(U+A*B)?.isWrapped&&R++}return R}(m,p,b);return g(w,_(d(m,p),y))}function h(m,p){let b=0,y=p.buffer.lines.get(m),v=y?.isWrapped;for(;v&&m>=0&&m<p.rows;)b++,y=p.buffer.lines.get(--m),v=y?.isWrapped;return b}function d(m,p){return m>p?"A":"B"}function f(m,p,b,y,v,E){let w=m,T=p,S="";for(;w!==b||T!==y;)w+=v?1:-1,v&&w>E.cols-1?(S+=E.buffer.translateBufferLineToString(T,!1,m,w),w=0,m=0,T++):!v&&w<0&&(S+=E.buffer.translateBufferLineToString(T,!1,0,m+1),w=E.cols-1,m=w,T--);return S+E.buffer.translateBufferLineToString(T,!1,m,w)}function _(m,p){const b=p?"O":"[";return c.C0.ESC+b+m}function g(m,p){m=Math.floor(m);let b="";for(let y=0;y<m;y++)b+=p;return b}a.moveToCellSequence=function(m,p,b,y){const v=b.buffer.x,E=b.buffer.y;if(!b.buffer.hasScrollback)return function(S,x,R,U,P,B){return u(x,U,P,B).length===0?"":g(f(S,x,S,x-h(x,P),!1,P).length,_("D",B))}(v,E,0,p,b,y)+u(E,p,b,y)+function(S,x,R,U,P,B){let A;A=u(x,U,P,B).length>0?U-h(U,P):x;const W=U,ne=function(Q,ie,L,I,j,H){let F;return F=u(L,I,j,H).length>0?I-h(I,j):ie,Q<L&&F<=I||Q>=L&&F<I?"C":"D"}(S,x,R,U,P,B);return g(f(S,A,R,W,ne==="C",P).length,_(ne,B))}(v,E,m,p,b,y);let w;if(E===p)return w=v>m?"D":"C",g(Math.abs(v-m),_(w,y));w=E>p?"D":"C";const T=Math.abs(E-p);return g(function(S,x){return x.cols-S}(E>p?m:v,b)+(T-1)*b.cols+1+((E>p?v:m)-1),_(w,y))}},1296:function(o,a,l){var c=this&&this.__decorate||function(B,A,W,ne){var Q,ie=arguments.length,L=ie<3?A:ne===null?ne=Object.getOwnPropertyDescriptor(A,W):ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(B,A,W,ne);else for(var I=B.length-1;I>=0;I--)(Q=B[I])&&(L=(ie<3?Q(L):ie>3?Q(A,W,L):Q(A,W))||L);return ie>3&&L&&Object.defineProperty(A,W,L),L},u=this&&this.__param||function(B,A){return function(W,ne){A(W,ne,B)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const h=l(3787),d=l(2550),f=l(2223),_=l(6171),g=l(6052),m=l(4725),p=l(8055),b=l(8460),y=l(844),v=l(2585),E="xterm-dom-renderer-owner-",w="xterm-rows",T="xterm-fg-",S="xterm-bg-",x="xterm-focus",R="xterm-selection";let U=1,P=a.DomRenderer=class extends y.Disposable{constructor(B,A,W,ne,Q,ie,L,I,j,H,F,J,te){super(),this._terminal=B,this._document=A,this._element=W,this._screenElement=ne,this._viewportElement=Q,this._helperContainer=ie,this._linkifier2=L,this._charSizeService=j,this._optionsService=H,this._bufferService=F,this._coreBrowserService=J,this._themeService=te,this._terminalClass=U++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new b.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(w),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,_.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(fe=>this._injectCss(fe))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(E+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(fe=>this._handleLinkHover(fe))),this.register(this._linkifier2.onHideLinkUnderline(fe=>this._handleLinkLeave(fe))),this.register((0,y.toDisposable)(()=>{this._element.classList.remove(E+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new d.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const B=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*B,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*B),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/B),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/B),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const W of this._rowElements)W.style.width=`${this.dimensions.css.canvas.width}px`,W.style.height=`${this.dimensions.css.cell.height}px`,W.style.lineHeight=`${this.dimensions.css.cell.height}px`,W.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const A=`${this._terminalSelector} .${w} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(B){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${w} { color: ${B.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${w} .xterm-dim { color: ${p.color.multiplyOpacity(B.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const W=`blink_underline_${this._terminalClass}`,ne=`blink_bar_${this._terminalClass}`,Q=`blink_block_${this._terminalClass}`;A+=`@keyframes ${W} { 50% {  border-bottom-style: hidden; }}`,A+=`@keyframes ${ne} { 50% {  box-shadow: none; }}`,A+=`@keyframes ${Q} { 0% {  background-color: ${B.cursor.css};  color: ${B.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${B.cursor.css}; }}`,A+=`${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${W} 1s step-end infinite;}${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ne} 1s step-end infinite;}${this._terminalSelector} .${w}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${Q} 1s step-end infinite;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block { background-color: ${B.cursor.css}; color: ${B.cursorAccent.css};}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${B.cursor.css} !important; color: ${B.cursorAccent.css} !important;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${B.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${B.cursor.css} inset;}${this._terminalSelector} .${w} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${B.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${B.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${B.selectionInactiveBackgroundOpaque.css};}`;for(const[ie,L]of B.ansi.entries())A+=`${this._terminalSelector} .${T}${ie} { color: ${L.css}; }${this._terminalSelector} .${T}${ie}.xterm-dim { color: ${p.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${S}${ie} { background-color: ${L.css}; }`;A+=`${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR} { color: ${p.color.opaque(B.background).css}; }${this._terminalSelector} .${T}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${p.color.multiplyOpacity(p.color.opaque(B.background),.5).css}; }${this._terminalSelector} .${S}${f.INVERTED_DEFAULT_COLOR} { background-color: ${B.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){const B=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${B}px`,this._rowFactory.defaultSpacing=B}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(B,A){for(let W=this._rowElements.length;W<=A;W++){const ne=this._document.createElement("div");this._rowContainer.appendChild(ne),this._rowElements.push(ne)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(B,A){this._refreshRowElements(B,A),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(B,A,W){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(B,A,W),this.renderRows(0,this._bufferService.rows-1),!B||!A)return;this._selectionRenderModel.update(this._terminal,B,A,W);const ne=this._selectionRenderModel.viewportStartRow,Q=this._selectionRenderModel.viewportEndRow,ie=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(ie>=this._bufferService.rows||L<0)return;const I=this._document.createDocumentFragment();if(W){const j=B[0]>A[0];I.appendChild(this._createSelectionElement(ie,j?A[0]:B[0],j?B[0]:A[0],L-ie+1))}else{const j=ne===ie?B[0]:0,H=ie===Q?A[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(ie,j,H));const F=L-ie-1;if(I.appendChild(this._createSelectionElement(ie+1,0,this._bufferService.cols,F)),ie!==L){const J=Q===L?A[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(L,0,J))}}this._selectionContainer.appendChild(I)}_createSelectionElement(B,A,W,ne=1){const Q=this._document.createElement("div"),ie=A*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(W-A);return ie+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-ie),Q.style.height=ne*this.dimensions.css.cell.height+"px",Q.style.top=B*this.dimensions.css.cell.height+"px",Q.style.left=`${ie}px`,Q.style.width=`${L}px`,Q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const B of this._rowElements)B.replaceChildren()}renderRows(B,A){const W=this._bufferService.buffer,ne=W.ybase+W.y,Q=Math.min(W.x,this._bufferService.cols-1),ie=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let j=B;j<=A;j++){const H=j+W.ydisp,F=this._rowElements[j],J=W.lines.get(H);if(!F||!J)break;F.replaceChildren(...this._rowFactory.createRow(J,H,H===ne,L,I,Q,ie,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${E}${this._terminalClass}`}_handleLinkHover(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!0)}_handleLinkLeave(B){this._setCellUnderline(B.x1,B.x2,B.y1,B.y2,B.cols,!1)}_setCellUnderline(B,A,W,ne,Q,ie){W<0&&(B=0),ne<0&&(A=0);const L=this._bufferService.rows-1;W=Math.max(Math.min(W,L),0),ne=Math.max(Math.min(ne,L),0),Q=Math.min(Q,this._bufferService.cols);const I=this._bufferService.buffer,j=I.ybase+I.y,H=Math.min(I.x,Q-1),F=this._optionsService.rawOptions.cursorBlink,J=this._optionsService.rawOptions.cursorStyle,te=this._optionsService.rawOptions.cursorInactiveStyle;for(let fe=W;fe<=ne;++fe){const Z=fe+I.ydisp,V=this._rowElements[fe],ue=I.lines.get(Z);if(!V||!ue)break;V.replaceChildren(...this._rowFactory.createRow(ue,Z,Z===j,J,te,H,F,this.dimensions.css.cell.width,this._widthCache,ie?fe===W?B:0:-1,ie?(fe===ne?A:Q)-1:-1))}}};a.DomRenderer=P=c([u(7,v.IInstantiationService),u(8,m.ICharSizeService),u(9,v.IOptionsService),u(10,v.IBufferService),u(11,m.ICoreBrowserService),u(12,m.IThemeService)],P)},3787:function(o,a,l){var c=this&&this.__decorate||function(w,T,S,x){var R,U=arguments.length,P=U<3?T:x===null?x=Object.getOwnPropertyDescriptor(T,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(w,T,S,x);else for(var B=w.length-1;B>=0;B--)(R=w[B])&&(P=(U<3?R(P):U>3?R(T,S,P):R(T,S))||P);return U>3&&P&&Object.defineProperty(T,S,P),P},u=this&&this.__param||function(w,T){return function(S,x){T(S,x,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const h=l(2223),d=l(643),f=l(511),_=l(2585),g=l(8055),m=l(4725),p=l(4269),b=l(6171),y=l(3734);let v=a.DomRendererRowFactory=class{constructor(w,T,S,x,R,U,P){this._document=w,this._characterJoinerService=T,this._optionsService=S,this._coreBrowserService=x,this._coreService=R,this._decorationService=U,this._themeService=P,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(w,T,S){this._selectionStart=w,this._selectionEnd=T,this._columnSelectMode=S}createRow(w,T,S,x,R,U,P,B,A,W,ne){const Q=[],ie=this._characterJoinerService.getJoinedCharacters(T),L=this._themeService.colors;let I,j=w.getNoBgTrimmedLength();S&&j<U+1&&(j=U+1);let H=0,F="",J=0,te=0,fe=0,Z=!1,V=0,ue=!1,ge=0;const Ee=[],me=W!==-1&&ne!==-1;for(let we=0;we<j;we++){w.loadCell(we,this._workCell);let M=this._workCell.getWidth();if(M===0)continue;let se=!1,le=we,G=this._workCell;if(ie.length>0&&we===ie[0][0]){se=!0;const O=ie.shift();G=new p.JoinedCellData(this._workCell,w.translateToString(!0,O[0],O[1]),O[1]-O[0]),le=O[1]-1,M=G.getWidth()}const q=this._isCellInSelection(we,T),re=S&&we===U,_e=me&&we>=W&&we<=ne;let ve=!1;this._decorationService.forEachDecorationAtCell(we,T,void 0,O=>{ve=!0});let he=G.getChars()||d.WHITESPACE_CELL_CHAR;if(he===" "&&(G.isUnderline()||G.isOverline())&&(he=""),ge=M*B-A.get(he,G.isBold(),G.isItalic()),I){if(H&&(q&&ue||!q&&!ue&&G.bg===J)&&(q&&ue&&L.selectionForeground||G.fg===te)&&G.extended.ext===fe&&_e===Z&&ge===V&&!re&&!se&&!ve){G.isInvisible()?F+=d.WHITESPACE_CELL_CHAR:F+=he,H++;continue}H&&(I.textContent=F),I=this._document.createElement("span"),H=0,F=""}else I=this._document.createElement("span");if(J=G.bg,te=G.fg,fe=G.extended.ext,Z=_e,V=ge,ue=q,se&&U>=we&&U<=le&&(U=we),!this._coreService.isCursorHidden&&re&&this._coreService.isCursorInitialized){if(Ee.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&Ee.push("xterm-cursor-blink"),Ee.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":Ee.push("xterm-cursor-outline");break;case"block":Ee.push("xterm-cursor-block");break;case"bar":Ee.push("xterm-cursor-bar");break;case"underline":Ee.push("xterm-cursor-underline")}}if(G.isBold()&&Ee.push("xterm-bold"),G.isItalic()&&Ee.push("xterm-italic"),G.isDim()&&Ee.push("xterm-dim"),F=G.isInvisible()?d.WHITESPACE_CELL_CHAR:G.getChars()||d.WHITESPACE_CELL_CHAR,G.isUnderline()&&(Ee.push(`xterm-underline-${G.extended.underlineStyle}`),F===" "&&(F=""),!G.isUnderlineColorDefault()))if(G.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${y.AttributeData.toColorRGB(G.getUnderlineColor()).join(",")})`;else{let O=G.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&G.isBold()&&O<8&&(O+=8),I.style.textDecorationColor=L.ansi[O].css}G.isOverline()&&(Ee.push("xterm-overline"),F===" "&&(F="")),G.isStrikethrough()&&Ee.push("xterm-strikethrough"),_e&&(I.style.textDecoration="underline");let xe=G.getFgColor(),Re=G.getFgColorMode(),Te=G.getBgColor(),ce=G.getBgColorMode();const Ce=!!G.isInverse();if(Ce){const O=xe;xe=Te,Te=O;const K=Re;Re=ce,ce=K}let ke,Be,z,k=!1;switch(this._decorationService.forEachDecorationAtCell(we,T,void 0,O=>{O.options.layer!=="top"&&k||(O.backgroundColorRGB&&(ce=50331648,Te=O.backgroundColorRGB.rgba>>8&16777215,ke=O.backgroundColorRGB),O.foregroundColorRGB&&(Re=50331648,xe=O.foregroundColorRGB.rgba>>8&16777215,Be=O.foregroundColorRGB),k=O.options.layer==="top")}),!k&&q&&(ke=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,Te=ke.rgba>>8&16777215,ce=50331648,k=!0,L.selectionForeground&&(Re=50331648,xe=L.selectionForeground.rgba>>8&16777215,Be=L.selectionForeground)),k&&Ee.push("xterm-decoration-top"),ce){case 16777216:case 33554432:z=L.ansi[Te],Ee.push(`xterm-bg-${Te}`);break;case 50331648:z=g.channels.toColor(Te>>16,Te>>8&255,255&Te),this._addStyle(I,`background-color:#${E((Te>>>0).toString(16),"0",6)}`);break;default:Ce?(z=L.foreground,Ee.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):z=L.background}switch(ke||G.isDim()&&(ke=g.color.multiplyOpacity(z,.5)),Re){case 16777216:case 33554432:G.isBold()&&xe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(xe+=8),this._applyMinimumContrast(I,z,L.ansi[xe],G,ke,void 0)||Ee.push(`xterm-fg-${xe}`);break;case 50331648:const O=g.channels.toColor(xe>>16&255,xe>>8&255,255&xe);this._applyMinimumContrast(I,z,O,G,ke,Be)||this._addStyle(I,`color:#${E(xe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,z,L.foreground,G,ke,Be)||Ce&&Ee.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Ee.length&&(I.className=Ee.join(" "),Ee.length=0),re||se||ve?I.textContent=F:H++,ge!==this.defaultSpacing&&(I.style.letterSpacing=`${ge}px`),Q.push(I),we=le}return I&&H&&(I.textContent=F),Q}_applyMinimumContrast(w,T,S,x,R,U){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,b.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const P=this._getContrastCache(x);let B;if(R||U||(B=P.getColor(T.rgba,S.rgba)),B===void 0){const A=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);B=g.color.ensureContrastRatio(R||T,U||S,A),P.setColor((R||T).rgba,(U||S).rgba,B??null)}return!!B&&(this._addStyle(w,`color:${B.css}`),!0)}_getContrastCache(w){return w.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(w,T){w.setAttribute("style",`${w.getAttribute("style")||""}${T};`)}_isCellInSelection(w,T){const S=this._selectionStart,x=this._selectionEnd;return!(!S||!x)&&(this._columnSelectMode?S[0]<=x[0]?w>=S[0]&&T>=S[1]&&w<x[0]&&T<=x[1]:w<S[0]&&T>=S[1]&&w>=x[0]&&T<=x[1]:T>S[1]&&T<x[1]||S[1]===x[1]&&T===S[1]&&w>=S[0]&&w<x[0]||S[1]<x[1]&&T===x[1]&&w<x[0]||S[1]<x[1]&&T===S[1]&&w>=S[0])}};function E(w,T,S){for(;w.length<S;)w=T+w;return w}a.DomRendererRowFactory=v=c([u(1,m.ICharacterJoinerService),u(2,_.IOptionsService),u(3,m.ICoreBrowserService),u(4,_.ICoreService),u(5,_.IDecorationService),u(6,m.IThemeService)],v)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontStyle="italic";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,h,d,f],this._container.appendChild(u),this._container.appendChild(h),this._container.appendChild(d),this._container.appendChild(f),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,h){l===this._font&&c===this._fontSize&&u===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,c,u){let h=0;if(!c&&!u&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const _=this._measure(l,0);return _>0&&(this._flat[h]=_),_}let d=l;c&&(d+="B"),u&&(d+="I");let f=this._holey.get(d);if(f===void 0){let _=0;c&&(_|=1),u&&(_|=2),f=this._measure(l,_),f>0&&this._holey.set(d,f)}return f}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,h,d,f){return h===1&&d>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(_){return 57344<=_&&_<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(h){return 9472<=h&&h<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,h,d=0){return(u-(2*Math.round(h)-d))%(2*Math.round(h))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,h,d,f=!1){if(this.selectionStart=h,this.selectionEnd=d,!h||!d||h[0]===d[0]&&h[1]===d[1])return void this.clear();const _=u.buffers.active.ydisp,g=h[1]-_,m=d[1]-_,p=Math.max(g,0),b=Math.min(m,u.rows-1);p>=u.rows||b<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=g,this.viewportEndRow=m,this.viewportCappedStartRow=p,this.viewportCappedEndRow=b,this.startCol=h[0],this.endCol=d[0])}isCellSelected(u,h,d){return!!this.hasSelection&&(d-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&d>=this.viewportCappedStartRow&&h<this.endCol&&d<=this.viewportCappedEndRow:h<this.startCol&&d>=this.viewportCappedStartRow&&h>=this.endCol&&d<=this.viewportCappedEndRow:d>this.viewportStartRow&&d<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,E){var w,T=arguments.length,S=T<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,v):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,y,v,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(S=(T<3?w(S):T>3?w(y,v,S):w(y,v))||S);return T>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(b,y){return function(v,E){y(v,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const h=l(2585),d=l(8460),f=l(844);let _=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(b,y,v){super(),this._optionsService=v,this.width=0,this.height=0,this._onCharSizeChange=this.register(new d.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new p(this._optionsService))}catch{this._measureStrategy=this.register(new m(b,y,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const b=this._measureStrategy.measure();b.width===this.width&&b.height===this.height||(this.width=b.width,this.height=b.height,this._onCharSizeChange.fire())}};a.CharSizeService=_=c([u(2,h.IOptionsService)],_);class g extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(y,v){y!==void 0&&y>0&&v!==void 0&&v>0&&(this._result.width=y,this._result.height=v)}}class m extends g{constructor(y,v,E){super(),this._document=y,this._parentElement=v,this._optionsService=E,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class p extends g{constructor(y){super(),this._optionsService=y,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const v=this._ctx.measureText("W");if(!("width"in v&&"fontBoundingBoxAscent"in v&&"fontBoundingBoxDescent"in v))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const y=this._ctx.measureText("W");return this._validateAndSet(y.width,y.fontBoundingBoxAscent+y.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(p,b,y,v){var E,w=arguments.length,T=w<3?b:v===null?v=Object.getOwnPropertyDescriptor(b,y):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(p,b,y,v);else for(var S=p.length-1;S>=0;S--)(E=p[S])&&(T=(w<3?E(T):w>3?E(b,y,T):E(b,y))||T);return w>3&&T&&Object.defineProperty(b,y,T),T},u=this&&this.__param||function(p,b){return function(y,v){b(y,v,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const h=l(3734),d=l(643),f=l(511),_=l(2585);class g extends h.AttributeData{constructor(b,y,v){super(),this.content=0,this.combinedData="",this.fg=b.fg,this.bg=b.bg,this.combinedData=y,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(b){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=g;let m=a.CharacterJoinerService=class bD{constructor(b){this._bufferService=b,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(b){const y={id:this._nextCharacterJoinerId++,handler:b};return this._characterJoiners.push(y),y.id}deregister(b){for(let y=0;y<this._characterJoiners.length;y++)if(this._characterJoiners[y].id===b)return this._characterJoiners.splice(y,1),!0;return!1}getJoinedCharacters(b){if(this._characterJoiners.length===0)return[];const y=this._bufferService.buffer.lines.get(b);if(!y||y.length===0)return[];const v=[],E=y.translateToString(!0);let w=0,T=0,S=0,x=y.getFg(0),R=y.getBg(0);for(let U=0;U<y.getTrimmedLength();U++)if(y.loadCell(U,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==R){if(U-w>1){const P=this._getJoinedRanges(E,S,T,y,w);for(let B=0;B<P.length;B++)v.push(P[B])}w=U,S=T,x=this._workCell.fg,R=this._workCell.bg}T+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-w>1){const U=this._getJoinedRanges(E,S,T,y,w);for(let P=0;P<U.length;P++)v.push(U[P])}return v}_getJoinedRanges(b,y,v,E,w){const T=b.substring(y,v);let S=[];try{S=this._characterJoiners[0].handler(T)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const R=this._characterJoiners[x].handler(T);for(let U=0;U<R.length;U++)bD._mergeRanges(S,R[U])}catch(R){console.error(R)}return this._stringRangesToCellRanges(S,E,w),S}_stringRangesToCellRanges(b,y,v){let E=0,w=!1,T=0,S=b[E];if(S){for(let x=v;x<this._bufferService.cols;x++){const R=y.getWidth(x),U=y.getString(x).length||d.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!w&&S[0]<=T&&(S[0]=x,w=!0),S[1]<=T){if(S[1]=x,S=b[++E],!S)break;S[0]<=T?(S[0]=x,w=!0):w=!1}T+=U}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(b,y){let v=!1;for(let E=0;E<b.length;E++){const w=b[E];if(v){if(y[1]<=w[0])return b[E-1][1]=y[1],b;if(y[1]<=w[1])return b[E-1][1]=Math.max(y[1],w[1]),b.splice(E,1),b;b.splice(E,1),E--}else{if(y[1]<=w[0])return b.splice(E,0,y),b;if(y[1]<=w[1])return w[0]=Math.min(y[0],w[0]),b;y[0]<w[1]&&(w[0]=Math.min(y[0],w[0]),v=!0)}}return v?b[b.length-1][1]=y[1]:b.push(y),b}};a.CharacterJoinerService=m=c([u(0,_.IBufferService)],m)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),h=l(3656);class d extends c.Disposable{constructor(g,m,p){super(),this._textarea=g,this._window=m,this.mainDocument=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(b=>this._screenDprMonitor.setWindow(b))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=d;class f extends c.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(d){return this.linkProviders.push(d),{dispose:()=>{const f=this.linkProviders.indexOf(d);f!==-1&&this.linkProviders.splice(f,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(_,g,m,p){var b,y=arguments.length,v=y<3?g:p===null?p=Object.getOwnPropertyDescriptor(g,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(_,g,m,p);else for(var E=_.length-1;E>=0;E--)(b=_[E])&&(v=(y<3?b(v):y>3?b(g,m,v):b(g,m))||v);return y>3&&v&&Object.defineProperty(g,m,v),v},u=this&&this.__param||function(_,g){return function(m,p){g(m,p,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const h=l(4725),d=l(9806);let f=a.MouseService=class{constructor(_,g){this._renderService=_,this._charSizeService=g}getCoords(_,g,m,p,b){return(0,d.getCoords)(window,_,g,m,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,b)}getMouseReportCoords(_,g){const m=(0,d.getCoordsRelativeToElement)(window,_,g);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};a.MouseService=f=c([u(0,h.IRenderService),u(1,h.ICharSizeService)],f)},3230:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,E){var w,T=arguments.length,S=T<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,v):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,y,v,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(S=(T<3?w(S):T>3?w(y,v,S):w(y,v))||S);return T>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(b,y){return function(v,E){y(v,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const h=l(6193),d=l(4725),f=l(8460),_=l(844),g=l(7226),m=l(2585);let p=a.RenderService=class extends _.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(b,y,v,E,w,T,S,x){super(),this._rowCount=b,this._charSizeService=E,this._renderer=this.register(new _.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new _.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((R,U)=>this._renderRows(R,U),S),this.register(this._renderDebouncer),this.register(S.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(T.onResize(()=>this._fullRefresh())),this.register(T.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(v.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(w.onDecorationRegistered(()=>this._fullRefresh())),this.register(w.onDecorationRemoved(()=>this._fullRefresh())),this.register(v.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(T.cols,T.rows),this._fullRefresh()})),this.register(v.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(T.buffer.y,T.buffer.y,!0))),this.register(x.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(S.window,y),this.register(S.onWindowChange(R=>this._registerIntersectionObserver(R,y)))}_registerIntersectionObserver(b,y){if("IntersectionObserver"in b){const v=new b.IntersectionObserver(E=>this._handleIntersectionChange(E[E.length-1]),{threshold:0});v.observe(y),this._observerDisposable.value=(0,_.toDisposable)(()=>v.disconnect())}}_handleIntersectionChange(b){this._isPaused=b.isIntersecting===void 0?b.intersectionRatio===0:!b.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(b,y,v=!1){this._isPaused?this._needsFullRefresh=!0:(v||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(b,y,this._rowCount))}_renderRows(b,y){this._renderer.value&&(b=Math.min(b,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(b,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:b,end:y}),this._onRender.fire({start:b,end:y}),this._isNextRenderRedrawOnly=!0)}resize(b,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(b){this._renderer.value=b,this._renderer.value&&(this._renderer.value.onRequestRedraw(y=>this.refreshRows(y.start,y.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(b){return this._renderDebouncer.addRefreshCallback(b)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(b,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(b,y)):this._renderer.value.handleResize(b,y),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(b,y,v){this._selectionState.start=b,this._selectionState.end=y,this._selectionState.columnSelectMode=v,this._renderer.value?.handleSelectionChanged(b,y,v)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=p=c([u(2,m.IOptionsService),u(3,d.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],p)},9312:function(o,a,l){var c=this&&this.__decorate||function(S,x,R,U){var P,B=arguments.length,A=B<3?x:U===null?U=Object.getOwnPropertyDescriptor(x,R):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(S,x,R,U);else for(var W=S.length-1;W>=0;W--)(P=S[W])&&(A=(B<3?P(A):B>3?P(x,R,A):P(x,R))||A);return B>3&&A&&Object.defineProperty(x,R,A),A},u=this&&this.__param||function(S,x){return function(R,U){x(R,U,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const h=l(9806),d=l(9504),f=l(456),_=l(4725),g=l(8460),m=l(844),p=l(6114),b=l(4841),y=l(511),v=l(2585),E="",w=new RegExp(E,"g");let T=a.SelectionService=class extends m.Disposable{constructor(S,x,R,U,P,B,A,W,ne){super(),this._element=S,this._screenElement=x,this._linkifier=R,this._bufferService=U,this._coreService=P,this._mouseService=B,this._optionsService=A,this._renderService=W,this._coreBrowserService=ne,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Q=>this._handleMouseMove(Q),this._mouseUpListener=Q=>this._handleMouseUp(Q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Q=>this._handleTrim(Q)),this.register(this._bufferService.buffers.onBufferActivate(Q=>this._handleBufferActivate(Q))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!S||!x||S[0]===x[0]&&S[1]===x[1])}get selectionText(){const S=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!S||!x)return"";const R=this._bufferService.buffer,U=[];if(this._activeSelectionMode===3){if(S[0]===x[0])return"";const P=S[0]<x[0]?S[0]:x[0],B=S[0]<x[0]?x[0]:S[0];for(let A=S[1];A<=x[1];A++){const W=R.translateBufferLineToString(A,!0,P,B);U.push(W)}}else{const P=S[1]===x[1]?x[0]:void 0;U.push(R.translateBufferLineToString(S[1],!0,S[0],P));for(let B=S[1]+1;B<=x[1]-1;B++){const A=R.lines.get(B),W=R.translateBufferLineToString(B,!0);A?.isWrapped?U[U.length-1]+=W:U.push(W)}if(S[1]!==x[1]){const B=R.lines.get(x[1]),A=R.translateBufferLineToString(x[1],!0,0,x[0]);B&&B.isWrapped?U[U.length-1]+=A:U.push(A)}}return U.map(P=>P.replace(w," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const x=this._getMouseBufferCoords(S),R=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!!(R&&U&&x)&&this._areCoordsInSelection(x,R,U)}isCellInSelection(S,x){const R=this._model.finalSelectionStart,U=this._model.finalSelectionEnd;return!(!R||!U)&&this._areCoordsInSelection([S,x],R,U)}_areCoordsInSelection(S,x,R){return S[1]>x[1]&&S[1]<R[1]||x[1]===R[1]&&S[1]===x[1]&&S[0]>=x[0]&&S[0]<R[0]||x[1]<R[1]&&S[1]===R[1]&&S[0]<R[0]||x[1]<R[1]&&S[1]===x[1]&&S[0]>=x[0]}_selectWordAtCursor(S,x){const R=this._linkifier.currentLink?.link?.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,b.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const U=this._getMouseBufferCoords(S);return!!U&&(this._selectWordAt(U,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,x){this._model.clearSelection(),S=Math.max(S,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const x=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(S){let x=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=R?0:(x>R&&(x-=R),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(S){return p.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const x=this._getMouseBufferCoords(S);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(S){return S.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const U=R.lines.get(this._model.selectionEnd[1]);U&&U.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const x=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const U=(0,d.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(U,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,R=!(!S||!x||S[0]===x[0]&&S[1]===x[1]);R?S&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,x,R)):this._oldHasSelection&&this._fireOnSelectionChange(S,x,R)}_fireOnSelectionChange(S,x,R){this._oldSelectionStart=S,this._oldSelectionEnd=x,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(S,x){let R=x;for(let U=0;x>=U;U++){const P=S.loadCell(U,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:P>1&&x!==U&&(R+=P-1)}return R}setSelection(S,x,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,x],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,x,R=!0,U=!0){if(S[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,B=P.lines.get(S[1]);if(!B)return;const A=P.translateBufferLineToString(S[1],!1);let W=this._convertViewportColToCharacterIndex(B,S[0]),ne=W;const Q=S[0]-W;let ie=0,L=0,I=0,j=0;if(A.charAt(W)===" "){for(;W>0&&A.charAt(W-1)===" ";)W--;for(;ne<A.length&&A.charAt(ne+1)===" ";)ne++}else{let J=S[0],te=S[0];B.getWidth(J)===0&&(ie++,J--),B.getWidth(te)===2&&(L++,te++);const fe=B.getString(te).length;for(fe>1&&(j+=fe-1,ne+=fe-1);J>0&&W>0&&!this._isCharWordSeparator(B.loadCell(J-1,this._workCell));){B.loadCell(J-1,this._workCell);const Z=this._workCell.getChars().length;this._workCell.getWidth()===0?(ie++,J--):Z>1&&(I+=Z-1,W-=Z-1),W--,J--}for(;te<B.length&&ne+1<A.length&&!this._isCharWordSeparator(B.loadCell(te+1,this._workCell));){B.loadCell(te+1,this._workCell);const Z=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,te++):Z>1&&(j+=Z-1,ne+=Z-1),ne++,te++}}ne++;let H=W+Q-ie+I,F=Math.min(this._bufferService.cols,ne-W+ie+L-I-j);if(x||A.slice(W,ne).trim()!==""){if(R&&H===0&&B.getCodePoint(0)!==32){const J=P.lines.get(S[1]-1);if(J&&B.isWrapped&&J.getCodePoint(this._bufferService.cols-1)!==32){const te=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(te){const fe=this._bufferService.cols-te.start;H-=fe,F+=fe}}}if(U&&H+F===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const J=P.lines.get(S[1]+1);if(J?.isWrapped&&J.getCodePoint(0)!==32){const te=this._getWordAt([0,S[1]+1],!1,!1,!0);te&&(F+=te.length)}}return{start:H,length:F}}}_selectWordAt(S,x){const R=this._getWordAt(S,x);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[R.start,S[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(S){const x=this._getWordAt(S,!0);if(x){let R=S[1];for(;x.start<0;)x.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,R]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const x=this._bufferService.buffer.getWrappedRangeForLine(S),R={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,b.getRangeLength)(R,this._bufferService.cols)}};a.SelectionService=T=c([u(3,v.IBufferService),u(4,v.ICoreService),u(5,_.IMouseService),u(6,v.IOptionsService),u(7,_.IRenderService),u(8,_.ICoreBrowserService)],T)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(T,S,x,R){var U,P=arguments.length,B=P<3?S:R===null?R=Object.getOwnPropertyDescriptor(S,x):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(T,S,x,R);else for(var A=T.length-1;A>=0;A--)(U=T[A])&&(B=(P<3?U(B):P>3?U(S,x,B):U(S,x))||B);return P>3&&B&&Object.defineProperty(S,x,B),B},u=this&&this.__param||function(T,S){return function(x,R){S(x,R,T)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),d=l(8055),f=l(8460),_=l(844),g=l(2585),m=d.css.toColor("#ffffff"),p=d.css.toColor("#000000"),b=d.css.toColor("#ffffff"),y=d.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const T=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let x=0;x<216;x++){const R=S[x/36%6|0],U=S[x/6%6|0],P=S[x%6];T.push({css:d.channels.toCss(R,U,P),rgba:d.channels.toRgba(R,U,P)})}for(let x=0;x<24;x++){const R=8+10*x;T.push({css:d.channels.toCss(R,R,R),rgba:d.channels.toRgba(R,R,R)})}return T})());let E=a.ThemeService=class extends _.Disposable{get colors(){return this._colors}constructor(T){super(),this._optionsService=T,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:p,cursor:b,cursorAccent:y,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:d.color.blend(p,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:d.color.blend(p,v),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(T={}){const S=this._colors;if(S.foreground=w(T.foreground,m),S.background=w(T.background,p),S.cursor=w(T.cursor,b),S.cursorAccent=w(T.cursorAccent,y),S.selectionBackgroundTransparent=w(T.selectionBackground,v),S.selectionBackgroundOpaque=d.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=w(T.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=d.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=T.selectionForeground?w(T.selectionForeground,d.NULL_COLOR):void 0,S.selectionForeground===d.NULL_COLOR&&(S.selectionForeground=void 0),d.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=d.color.opacity(S.selectionBackgroundTransparent,.3)),d.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=d.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=a.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=w(T.black,a.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=w(T.red,a.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=w(T.green,a.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=w(T.yellow,a.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=w(T.blue,a.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=w(T.magenta,a.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=w(T.cyan,a.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=w(T.white,a.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=w(T.brightBlack,a.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=w(T.brightRed,a.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=w(T.brightGreen,a.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=w(T.brightYellow,a.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=w(T.brightBlue,a.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=w(T.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=w(T.brightCyan,a.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=w(T.brightWhite,a.DEFAULT_ANSI_COLORS[15]),T.extendedAnsi){const x=Math.min(S.ansi.length-16,T.extendedAnsi.length);for(let R=0;R<x;R++)S.ansi[R+16]=w(T.extendedAnsi[R],a.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(T){this._restoreColor(T),this._onChangeColors.fire(this.colors)}_restoreColor(T){if(T!==void 0)switch(T){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[T]=this._restoreColors.ansi[T]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(T){T(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function w(T,S){if(T!==void 0)try{return d.css.toColor(T)}catch{}return S}a.ThemeService=E=c([u(0,g.IOptionsService)],E)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const _=new Array(f);for(let g=0;g<Math.min(f,this.length);g++)_[g]=this._array[this._getCyclicIndex(g)];this._array=_,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let _=this._length;_<f;_++)this._array[_]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,_){this._array[this._getCyclicIndex(f)]=_}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,_,...g){if(_){for(let m=f;m<this._length-_;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+_)];this._length-=_,this.onDeleteEmitter.fire({index:f,amount:_})}for(let m=this._length-1;m>=f;m--)this._array[this._getCyclicIndex(m+g.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<g.length;m++)this._array[this._getCyclicIndex(f+m)]=g[m];if(g.length&&this.onInsertEmitter.fire({index:f,amount:g.length}),this._length+g.length>this._maxLength){const m=this._length+g.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=g.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,_,g){if(!(_<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let p=_-1;p>=0;p--)this.set(f+p+g,this.get(f+p));const m=f+_+g-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<_;m++)this.set(f+m+g,this.get(f+m))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=h},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const h=Array.isArray(c)?[]:{};for(const d in c)h[d]=u<=1?c[d]:c[d]&&l(c[d],u-1);return h}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,h=0;var d,f,_,g,m;function p(y){const v=y.toString(16);return v.length<2?"0"+v:v}function b(y,v){return y<v?(v+.05)/(y+.05):(y+.05)/(v+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(y){y.toCss=function(v,E,w,T){return T!==void 0?`#${p(v)}${p(E)}${p(w)}${p(T)}`:`#${p(v)}${p(E)}${p(w)}`},y.toRgba=function(v,E,w,T=255){return(v<<24|E<<16|w<<8|T)>>>0},y.toColor=function(v,E,w,T){return{css:y.toCss(v,E,w,T),rgba:y.toRgba(v,E,w,T)}}}(d||(a.channels=d={})),function(y){function v(E,w){return h=Math.round(255*w),[l,c,u]=m.toChannels(E.rgba),{css:d.toCss(l,c,u,h),rgba:d.toRgba(l,c,u,h)}}y.blend=function(E,w){if(h=(255&w.rgba)/255,h===1)return{css:w.css,rgba:w.rgba};const T=w.rgba>>24&255,S=w.rgba>>16&255,x=w.rgba>>8&255,R=E.rgba>>24&255,U=E.rgba>>16&255,P=E.rgba>>8&255;return l=R+Math.round((T-R)*h),c=U+Math.round((S-U)*h),u=P+Math.round((x-P)*h),{css:d.toCss(l,c,u),rgba:d.toRgba(l,c,u)}},y.isOpaque=function(E){return(255&E.rgba)==255},y.ensureContrastRatio=function(E,w,T){const S=m.ensureContrastRatio(E.rgba,w.rgba,T);if(S)return d.toColor(S>>24&255,S>>16&255,S>>8&255)},y.opaque=function(E){const w=(255|E.rgba)>>>0;return[l,c,u]=m.toChannels(w),{css:d.toCss(l,c,u),rgba:w}},y.opacity=v,y.multiplyOpacity=function(E,w){return h=255&E.rgba,v(E,h*w/255)},y.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]}}(f||(a.color=f={})),function(y){let v,E;try{const w=document.createElement("canvas");w.width=1,w.height=1;const T=w.getContext("2d",{willReadFrequently:!0});T&&(v=T,v.globalCompositeOperation="copy",E=v.createLinearGradient(0,0,1,1))}catch{}y.toColor=function(w){if(w.match(/#[\da-f]{3,8}/i))switch(w.length){case 4:return l=parseInt(w.slice(1,2).repeat(2),16),c=parseInt(w.slice(2,3).repeat(2),16),u=parseInt(w.slice(3,4).repeat(2),16),d.toColor(l,c,u);case 5:return l=parseInt(w.slice(1,2).repeat(2),16),c=parseInt(w.slice(2,3).repeat(2),16),u=parseInt(w.slice(3,4).repeat(2),16),h=parseInt(w.slice(4,5).repeat(2),16),d.toColor(l,c,u,h);case 7:return{css:w,rgba:(parseInt(w.slice(1),16)<<8|255)>>>0};case 9:return{css:w,rgba:parseInt(w.slice(1),16)>>>0}}const T=w.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(T)return l=parseInt(T[1]),c=parseInt(T[2]),u=parseInt(T[3]),h=Math.round(255*(T[5]===void 0?1:parseFloat(T[5]))),d.toColor(l,c,u,h);if(!v||!E)throw new Error("css.toColor: Unsupported css format");if(v.fillStyle=E,v.fillStyle=w,typeof v.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(v.fillRect(0,0,1,1),[l,c,u,h]=v.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(l,c,u,h),css:w}}}(_||(a.css=_={})),function(y){function v(E,w,T){const S=E/255,x=w/255,R=T/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}y.relativeLuminance=function(E){return v(E>>16&255,E>>8&255,255&E)},y.relativeLuminance2=v}(g||(a.rgb=g={})),function(y){function v(w,T,S){const x=w>>24&255,R=w>>16&255,U=w>>8&255;let P=T>>24&255,B=T>>16&255,A=T>>8&255,W=b(g.relativeLuminance2(P,B,A),g.relativeLuminance2(x,R,U));for(;W<S&&(P>0||B>0||A>0);)P-=Math.max(0,Math.ceil(.1*P)),B-=Math.max(0,Math.ceil(.1*B)),A-=Math.max(0,Math.ceil(.1*A)),W=b(g.relativeLuminance2(P,B,A),g.relativeLuminance2(x,R,U));return(P<<24|B<<16|A<<8|255)>>>0}function E(w,T,S){const x=w>>24&255,R=w>>16&255,U=w>>8&255;let P=T>>24&255,B=T>>16&255,A=T>>8&255,W=b(g.relativeLuminance2(P,B,A),g.relativeLuminance2(x,R,U));for(;W<S&&(P<255||B<255||A<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),B=Math.min(255,B+Math.ceil(.1*(255-B))),A=Math.min(255,A+Math.ceil(.1*(255-A))),W=b(g.relativeLuminance2(P,B,A),g.relativeLuminance2(x,R,U));return(P<<24|B<<16|A<<8|255)>>>0}y.blend=function(w,T){if(h=(255&T)/255,h===1)return T;const S=T>>24&255,x=T>>16&255,R=T>>8&255,U=w>>24&255,P=w>>16&255,B=w>>8&255;return l=U+Math.round((S-U)*h),c=P+Math.round((x-P)*h),u=B+Math.round((R-B)*h),d.toRgba(l,c,u)},y.ensureContrastRatio=function(w,T,S){const x=g.relativeLuminance(w>>8),R=g.relativeLuminance(T>>8);if(b(x,R)<S){if(R<x){const B=v(w,T,S),A=b(x,g.relativeLuminance(B>>8));if(A<S){const W=E(w,T,S);return A>b(x,g.relativeLuminance(W>>8))?B:W}return B}const U=E(w,T,S),P=b(x,g.relativeLuminance(U>>8));if(P<S){const B=v(w,T,S);return P>b(x,g.relativeLuminance(B>>8))?U:B}return U}},y.reduceLuminance=v,y.increaseLuminance=E,y.toChannels=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]}}(m||(a.rgba=m={})),a.toPaddedHex=p,a.contrastRatio=b},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),h=l(4348),d=l(7866),f=l(744),_=l(7302),g=l(6975),m=l(8460),p=l(1753),b=l(1480),y=l(7994),v=l(9282),E=l(5435),w=l(5981),T=l(2660);let S=!1;class x extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(U=>{this._onScrollApi?.fire(U.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(U){for(const P in U)this.optionsService.options[P]=U[P]}constructor(U){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new _.OptionsService(U)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(d.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(b.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(y.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(T.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new E.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new w.WriteBuffer((P,B)=>this._inputHandler.parse(P,B))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(U,P){this._writeBuffer.write(U,P)}writeSync(U,P){this._logService.logLevel<=u.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(U,P)}input(U,P=!0){this.coreService.triggerDataEvent(U,P)}resize(U,P){isNaN(U)||isNaN(P)||(U=Math.max(U,f.MINIMUM_COLS),P=Math.max(P,f.MINIMUM_ROWS),this._bufferService.resize(U,P))}scroll(U,P=!1){this._bufferService.scroll(U,P)}scrollLines(U,P,B){this._bufferService.scrollLines(U,P,B)}scrollPages(U){this.scrollLines(U*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(U){const P=U-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(U,P){return this._inputHandler.registerEscHandler(U,P)}registerDcsHandler(U,P){return this._inputHandler.registerDcsHandler(U,P)}registerCsiHandler(U,P){return this._inputHandler.registerCsiHandler(U,P)}registerOscHandler(U,P){return this._inputHandler.registerOscHandler(U,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let U=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?U=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(U=!0),U?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const U=[];U.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),U.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const P of U)P.dispose()})}}}a.CoreTerminal=x},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let h=0;h<this._listeners.length;h++)u.push(this._listeners[h]);for(let h=0;h<u.length;h++)u[h].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(ie,L,I,j){var H,F=arguments.length,J=F<3?L:j===null?j=Object.getOwnPropertyDescriptor(L,I):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(ie,L,I,j);else for(var te=ie.length-1;te>=0;te--)(H=ie[te])&&(J=(F<3?H(J):F>3?H(L,I,J):H(L,I))||J);return F>3&&J&&Object.defineProperty(L,I,J),J},u=this&&this.__param||function(ie,L){return function(I,j){L(I,j,ie)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const h=l(2584),d=l(7116),f=l(2015),_=l(844),g=l(482),m=l(8437),p=l(8460),b=l(643),y=l(511),v=l(3734),E=l(2585),w=l(1480),T=l(6242),S=l(6351),x=l(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},U=131072;function P(ie,L){if(ie>24)return L.setWinLines||!1;switch(ie){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var B;(function(ie){ie[ie.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ie[ie.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(B||(a.WindowsOptionsReportType=B={}));let A=0;class W extends _.Disposable{getAttrData(){return this._curAttrData}constructor(L,I,j,H,F,J,te,fe,Z=new f.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=I,this._coreService=j,this._logService=H,this._optionsService=F,this._oscLinkService=J,this._coreMouseService=te,this._unicodeService=fe,this._parser=Z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new y.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ne(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(V=>this._activeBuffer=V.activeBuffer)),this._parser.setCsiHandlerFallback((V,ue)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(V),params:ue.toArray()})}),this._parser.setEscHandlerFallback(V=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(V)})}),this._parser.setExecuteHandlerFallback(V=>{this._logService.debug("Unknown EXECUTE code: ",{code:V})}),this._parser.setOscHandlerFallback((V,ue,ge)=>{this._logService.debug("Unknown OSC code: ",{identifier:V,action:ue,data:ge})}),this._parser.setDcsHandlerFallback((V,ue,ge)=>{ue==="HOOK"&&(ge=ge.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(V),action:ue,payload:ge})}),this._parser.setPrintHandler((V,ue,ge)=>this.print(V,ue,ge)),this._parser.registerCsiHandler({final:"@"},V=>this.insertChars(V)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},V=>this.scrollLeft(V)),this._parser.registerCsiHandler({final:"A"},V=>this.cursorUp(V)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},V=>this.scrollRight(V)),this._parser.registerCsiHandler({final:"B"},V=>this.cursorDown(V)),this._parser.registerCsiHandler({final:"C"},V=>this.cursorForward(V)),this._parser.registerCsiHandler({final:"D"},V=>this.cursorBackward(V)),this._parser.registerCsiHandler({final:"E"},V=>this.cursorNextLine(V)),this._parser.registerCsiHandler({final:"F"},V=>this.cursorPrecedingLine(V)),this._parser.registerCsiHandler({final:"G"},V=>this.cursorCharAbsolute(V)),this._parser.registerCsiHandler({final:"H"},V=>this.cursorPosition(V)),this._parser.registerCsiHandler({final:"I"},V=>this.cursorForwardTab(V)),this._parser.registerCsiHandler({final:"J"},V=>this.eraseInDisplay(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},V=>this.eraseInDisplay(V,!0)),this._parser.registerCsiHandler({final:"K"},V=>this.eraseInLine(V,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},V=>this.eraseInLine(V,!0)),this._parser.registerCsiHandler({final:"L"},V=>this.insertLines(V)),this._parser.registerCsiHandler({final:"M"},V=>this.deleteLines(V)),this._parser.registerCsiHandler({final:"P"},V=>this.deleteChars(V)),this._parser.registerCsiHandler({final:"S"},V=>this.scrollUp(V)),this._parser.registerCsiHandler({final:"T"},V=>this.scrollDown(V)),this._parser.registerCsiHandler({final:"X"},V=>this.eraseChars(V)),this._parser.registerCsiHandler({final:"Z"},V=>this.cursorBackwardTab(V)),this._parser.registerCsiHandler({final:"`"},V=>this.charPosAbsolute(V)),this._parser.registerCsiHandler({final:"a"},V=>this.hPositionRelative(V)),this._parser.registerCsiHandler({final:"b"},V=>this.repeatPrecedingCharacter(V)),this._parser.registerCsiHandler({final:"c"},V=>this.sendDeviceAttributesPrimary(V)),this._parser.registerCsiHandler({prefix:">",final:"c"},V=>this.sendDeviceAttributesSecondary(V)),this._parser.registerCsiHandler({final:"d"},V=>this.linePosAbsolute(V)),this._parser.registerCsiHandler({final:"e"},V=>this.vPositionRelative(V)),this._parser.registerCsiHandler({final:"f"},V=>this.hVPosition(V)),this._parser.registerCsiHandler({final:"g"},V=>this.tabClear(V)),this._parser.registerCsiHandler({final:"h"},V=>this.setMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"h"},V=>this.setModePrivate(V)),this._parser.registerCsiHandler({final:"l"},V=>this.resetMode(V)),this._parser.registerCsiHandler({prefix:"?",final:"l"},V=>this.resetModePrivate(V)),this._parser.registerCsiHandler({final:"m"},V=>this.charAttributes(V)),this._parser.registerCsiHandler({final:"n"},V=>this.deviceStatus(V)),this._parser.registerCsiHandler({prefix:"?",final:"n"},V=>this.deviceStatusPrivate(V)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},V=>this.softReset(V)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},V=>this.setCursorStyle(V)),this._parser.registerCsiHandler({final:"r"},V=>this.setScrollRegion(V)),this._parser.registerCsiHandler({final:"s"},V=>this.saveCursor(V)),this._parser.registerCsiHandler({final:"t"},V=>this.windowOptions(V)),this._parser.registerCsiHandler({final:"u"},V=>this.restoreCursor(V)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},V=>this.insertColumns(V)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},V=>this.deleteColumns(V)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},V=>this.selectProtected(V)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},V=>this.requestMode(V,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},V=>this.requestMode(V,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new T.OscHandler(V=>(this.setTitle(V),this.setIconName(V),!0))),this._parser.registerOscHandler(1,new T.OscHandler(V=>this.setIconName(V))),this._parser.registerOscHandler(2,new T.OscHandler(V=>this.setTitle(V))),this._parser.registerOscHandler(4,new T.OscHandler(V=>this.setOrReportIndexedColor(V))),this._parser.registerOscHandler(8,new T.OscHandler(V=>this.setHyperlink(V))),this._parser.registerOscHandler(10,new T.OscHandler(V=>this.setOrReportFgColor(V))),this._parser.registerOscHandler(11,new T.OscHandler(V=>this.setOrReportBgColor(V))),this._parser.registerOscHandler(12,new T.OscHandler(V=>this.setOrReportCursorColor(V))),this._parser.registerOscHandler(104,new T.OscHandler(V=>this.restoreIndexedColor(V))),this._parser.registerOscHandler(110,new T.OscHandler(V=>this.restoreFgColor(V))),this._parser.registerOscHandler(111,new T.OscHandler(V=>this.restoreBgColor(V))),this._parser.registerOscHandler(112,new T.OscHandler(V=>this.restoreCursorColor(V))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const V in d.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:V},()=>this.selectCharset("("+V)),this._parser.registerEscHandler({intermediates:")",final:V},()=>this.selectCharset(")"+V)),this._parser.registerEscHandler({intermediates:"*",final:V},()=>this.selectCharset("*"+V)),this._parser.registerEscHandler({intermediates:"+",final:V},()=>this.selectCharset("+"+V)),this._parser.registerEscHandler({intermediates:"-",final:V},()=>this.selectCharset("-"+V)),this._parser.registerEscHandler({intermediates:".",final:V},()=>this.selectCharset("."+V)),this._parser.registerEscHandler({intermediates:"/",final:V},()=>this.selectCharset("/"+V));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(V=>(this._logService.error("Parsing error: ",V),V)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new S.DcsHandler((V,ue)=>this.requestStatusString(V,ue)))}_preserveStack(L,I,j,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=j,this._parseStack.position=H}_logSlowResolvingAsync(L){this._logService.logLevel<=E.LogLevelEnum.WARN&&Promise.race([L,new Promise((I,j)=>setTimeout(()=>j("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,I){let j,H=this._activeBuffer.x,F=this._activeBuffer.y,J=0;const te=this._parseStack.paused;if(te){if(j=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(j),j;H=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>U&&(J=this._parseStack.position+U)}if(this._logService.logLevel<=E.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,V=>String.fromCharCode(V)).join("")}"`),typeof L=="string"?L.split("").map(V=>V.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<U&&(this._parseBuffer=new Uint32Array(Math.min(L.length,U))),te||this._dirtyRowTracker.clearRange(),L.length>U)for(let V=J;V<L.length;V+=U){const ue=V+U<L.length?V+U:L.length,ge=typeof L=="string"?this._stringDecoder.decode(L.substring(V,ue),this._parseBuffer):this._utf8Decoder.decode(L.subarray(V,ue),this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,ge))return this._preserveStack(H,F,ge,V),this._logSlowResolvingAsync(j),j}else if(!te){const V=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(j=this._parser.parse(this._parseBuffer,V))return this._preserveStack(H,F,V,0),this._logSlowResolvingAsync(j),j}this._activeBuffer.x===H&&this._activeBuffer.y===F||this._onCursorMove.fire();const fe=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),Z=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);Z<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(Z,this._bufferService.rows-1),Math.min(fe,this._bufferService.rows-1))}print(L,I,j){let H,F;const J=this._charsetService.charset,te=this._optionsService.rawOptions.screenReaderMode,fe=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,V=this._coreService.modes.insertMode,ue=this._curAttrData;let ge=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&j-I>0&&ge.getWidth(this._activeBuffer.x-1)===2&&ge.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ue);let Ee=this._parser.precedingJoinState;for(let me=I;me<j;++me){if(H=L[me],H<127&&J){const le=J[String.fromCharCode(H)];le&&(H=le.charCodeAt(0))}const we=this._unicodeService.charProperties(H,Ee);F=w.UnicodeService.extractWidth(we);const M=w.UnicodeService.extractShouldJoin(we),se=M?w.UnicodeService.extractWidth(Ee):0;if(Ee=we,te&&this._onA11yChar.fire((0,g.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+F-se>fe){if(Z){const le=ge;let G=this._activeBuffer.x-se;for(this._activeBuffer.x=se,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ge=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),se>0&&ge instanceof m.BufferLine&&ge.copyCellsFrom(le,G,0,se,!1);G<fe;)le.setCellFromCodepoint(G++,0,1,ue)}else if(this._activeBuffer.x=fe-1,F===2)continue}if(M&&this._activeBuffer.x){const le=ge.getWidth(this._activeBuffer.x-1)?1:2;ge.addCodepointToCell(this._activeBuffer.x-le,H,F);for(let G=F-se;--G>=0;)ge.setCellFromCodepoint(this._activeBuffer.x++,0,0,ue)}else if(V&&(ge.insertCells(this._activeBuffer.x,F-se,this._activeBuffer.getNullCell(ue)),ge.getWidth(fe-1)===2&&ge.setCellFromCodepoint(fe-1,b.NULL_CELL_CODE,b.NULL_CELL_WIDTH,ue)),ge.setCellFromCodepoint(this._activeBuffer.x++,H,F,ue),F>0)for(;--F;)ge.setCellFromCodepoint(this._activeBuffer.x++,0,0,ue)}this._parser.precedingJoinState=Ee,this._activeBuffer.x<fe&&j-I>0&&ge.getWidth(this._activeBuffer.x)===0&&!ge.hasContent(this._activeBuffer.x)&&ge.setCellFromCodepoint(this._activeBuffer.x,0,1,ue),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,I){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,I):this._parser.registerCsiHandler(L,j=>!P(j.params[0],this._optionsService.rawOptions.windowOptions)||I(j))}registerDcsHandler(L,I){return this._parser.registerDcsHandler(L,new S.DcsHandler(I))}registerEscHandler(L,I){return this._parser.registerEscHandler(L,I)}registerOscHandler(L,I){return this._parser.registerOscHandler(L,new T.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=L,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+I)}cursorUp(L){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const I=L.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const I=L.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,I,j,H=!1,F=!1){const J=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);J.replaceCells(I,j,this._activeBuffer.getNullCell(this._eraseAttrData()),F),H&&(J.isWrapped=!1)}_resetBufferLine(L,I=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);j&&(j.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),j.isWrapped=!1)}eraseInDisplay(L,I=!1){let j;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);j<this._bufferService.rows;j++)this._resetBufferLine(j,I);this._dirtyRowTracker.markDirty(j);break;case 1:for(j=this._activeBuffer.y,this._dirtyRowTracker.markDirty(j),this._eraseInBufferLine(j,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(j+1).isWrapped=!1);j--;)this._resetBufferLine(j,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(j=this._bufferService.rows,this._dirtyRowTracker.markDirty(j-1);j--;)this._resetBufferLine(j,I);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(L,I=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;I--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const j=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;I--;)this._activeBuffer.lines.splice(j,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);H.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);H.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);H.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let j=this._activeBuffer.scrollTop;j<=this._activeBuffer.scrollBottom;++j){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+j);H.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const I=this._parser.precedingJoinState;if(!I)return!0;const j=L.params[0]||1,H=w.UnicodeService.extractWidth(I),F=this._activeBuffer.x-H,J=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(F),te=new Uint32Array(J.length*j);let fe=0;for(let V=0;V<J.length;){const ue=J.codePointAt(V)||0;te[fe++]=ue,V+=ue>65535?2:1}let Z=fe;for(let V=1;V<j;++V)te.copyWithin(Z,0,fe),Z+=fe;return this.print(te,0,Z),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),this._charsetService.setgCharset(1,d.DEFAULT_CHARSET),this._charsetService.setgCharset(2,d.DEFAULT_CHARSET),this._charsetService.setgCharset(3,d.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,I){const j=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:F}=this._coreMouseService,J=this._coreService,{buffers:te,cols:fe}=this._bufferService,{active:Z,alt:V}=te,ue=this._optionsService.rawOptions,ge=M=>M?1:2,Ee=L.params[0];return me=Ee,we=I?Ee===2?4:Ee===4?ge(J.modes.insertMode):Ee===12?3:Ee===20?ge(ue.convertEol):0:Ee===1?ge(j.applicationCursorKeys):Ee===3?ue.windowOptions.setWinLines?fe===80?2:fe===132?1:0:0:Ee===6?ge(j.origin):Ee===7?ge(j.wraparound):Ee===8?3:Ee===9?ge(H==="X10"):Ee===12?ge(ue.cursorBlink):Ee===25?ge(!J.isCursorHidden):Ee===45?ge(j.reverseWraparound):Ee===66?ge(j.applicationKeypad):Ee===67?4:Ee===1e3?ge(H==="VT200"):Ee===1002?ge(H==="DRAG"):Ee===1003?ge(H==="ANY"):Ee===1004?ge(j.sendFocus):Ee===1005?4:Ee===1006?ge(F==="SGR"):Ee===1015?4:Ee===1016?ge(F==="SGR_PIXELS"):Ee===1048?1:Ee===47||Ee===1047||Ee===1049?ge(Z===V):Ee===2004?ge(j.bracketedPasteMode):0,J.triggerDataEvent(`${h.C0.ESC}[${I?"":"?"}${me};${we}$y`),!0;var me,we}_updateAttrColor(L,I,j,H,F){return I===2?(L|=50331648,L&=-16777216,L|=v.AttributeData.fromColorRGB([j,H,F])):I===5&&(L&=-50331904,L|=33554432|255&j),L}_extractColor(L,I,j){const H=[0,0,-1,0,0,0];let F=0,J=0;do{if(H[J+F]=L.params[I+J],L.hasSubParams(I+J)){const te=L.getSubParams(I+J);let fe=0;do H[1]===5&&(F=1),H[J+fe+1+F]=te[fe];while(++fe<te.length&&fe+J+1+F<H.length);break}if(H[1]===5&&J+F>=2||H[1]===2&&J+F>=5)break;H[1]&&(F=1)}while(++J+I<L.length&&J+F<H.length);for(let te=2;te<H.length;++te)H[te]===-1&&(H[te]=0);switch(H[0]){case 38:j.fg=this._updateAttrColor(j.fg,H[1],H[3],H[4],H[5]);break;case 48:j.bg=this._updateAttrColor(j.bg,H[1],H[3],H[4],H[5]);break;case 58:j.extended=j.extended.clone(),j.extended.underlineColor=this._updateAttrColor(j.extended.underlineColor,H[1],H[3],H[4],H[5])}return J}_processUnderline(L,I){I.extended=I.extended.clone(),(!~L||L>5)&&(L=1),I.extended.underlineStyle=L,I.fg|=268435456,L===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(L){L.fg=m.DEFAULT_ATTR_DATA.fg,L.bg=m.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=L.length;let j;const H=this._curAttrData;for(let F=0;F<I;F++)j=L.params[F],j>=30&&j<=37?(H.fg&=-50331904,H.fg|=16777216|j-30):j>=40&&j<=47?(H.bg&=-50331904,H.bg|=16777216|j-40):j>=90&&j<=97?(H.fg&=-50331904,H.fg|=16777224|j-90):j>=100&&j<=107?(H.bg&=-50331904,H.bg|=16777224|j-100):j===0?this._processSGR0(H):j===1?H.fg|=134217728:j===3?H.bg|=67108864:j===4?(H.fg|=268435456,this._processUnderline(L.hasSubParams(F)?L.getSubParams(F)[0]:1,H)):j===5?H.fg|=536870912:j===7?H.fg|=67108864:j===8?H.fg|=1073741824:j===9?H.fg|=2147483648:j===2?H.bg|=134217728:j===21?this._processUnderline(2,H):j===22?(H.fg&=-134217729,H.bg&=-134217729):j===23?H.bg&=-67108865:j===24?(H.fg&=-268435457,this._processUnderline(0,H)):j===25?H.fg&=-536870913:j===27?H.fg&=-67108865:j===28?H.fg&=-1073741825:j===29?H.fg&=2147483647:j===39?(H.fg&=-67108864,H.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):j===49?(H.bg&=-67108864,H.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):j===38||j===48||j===58?F+=this._extractColor(L,F,H):j===53?H.bg|=1073741824:j===55?H.bg&=-1073741825:j===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):j===100?(H.fg&=-67108864,H.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",j);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${I};${j}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const I=this._activeBuffer.y+1,j=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${I};${j}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const I=L.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const j=I%2==1;return this._optionsService.options.cursorBlink=j,!0}setScrollRegion(L){const I=L.params[0]||1;let j;return(L.length<2||(j=L.params[1])>this._bufferService.rows||j===0)&&(j=this._bufferService.rows),j>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=j-1,this._setCursor(0,0)),!0}windowOptions(L){if(!P(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(B.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(B.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const I=[],j=L.split(";");for(;j.length>1;){const H=j.shift(),F=j.shift();if(/^\d+$/.exec(H)){const J=parseInt(H);if(Q(J))if(F==="?")I.push({type:0,index:J});else{const te=(0,x.parseColor)(F);te&&I.push({type:1,index:J,color:te})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(L){const I=L.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(L,I){this._getCurrentLinkId()&&this._finishHyperlink();const j=L.split(":");let H;const F=j.findIndex(J=>J.startsWith("id="));return F!==-1&&(H=j[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,I){const j=L.split(";");for(let H=0;H<j.length&&!(I>=this._specialColors.length);++H,++I)if(j[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const F=(0,x.parseColor)(j[H]);F&&this._onColor.fire([{type:1,index:this._specialColors[I],color:F}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const I=[],j=L.split(";");for(let H=0;H<j.length;++H)if(/^\d+$/.exec(j[H])){const F=parseInt(j[H]);Q(F)&&I.push({type:2,index:F})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(R[L[0]],d.CHARSETS[L[1]]||d.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new y.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const j=this._activeBuffer.ybase+this._activeBuffer.y+I,H=this._activeBuffer.lines.get(j);H&&(H.fill(L),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,I){const j=this._bufferService.buffer,H=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${F}${h.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${j.scrollTop+1};${j.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,I){this._dirtyRowTracker.markRangeDirty(L,I)}}a.InputHandler=W;let ne=class{constructor(ie){this._bufferService=ie,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ie){ie<this.start?this.start=ie:ie>this.end&&(this.end=ie)}markRangeDirty(ie,L){ie>L&&(A=ie,ie=L,L=A),ie<this.start&&(this.start=ie),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Q(ie){return 0<=ie&&ie<256}ne=c([u(0,E.IBufferService)],ne)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,h,d){this._data[u]||(this._data[u]={}),this._data[u][h]=d}get(u,h){return this._data[u]?this._data[u][h]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,h,d,f){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(h,d,f)}get(c,u,h,d){return this._data.get(c,u)?.get(h,d)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof ei<"u"&&"title"in ei;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,h=this._array.length-1;for(;h>=u;){let d=u+h>>1;const f=this._getKey(this._array[d]);if(f>c)h=d-1;else{if(!(f<c)){for(;d>0&&this._getKey(this._array[d-1])===c;)d--;return d}u=d+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let _=0,g=0,m=f.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(_=Date.now(),this._tasks[this._i]()||this._i++,_=Math.max(1,Date.now()-_),g=Math.max(_,g),p=f.timeRemaining(),1.5*g>p)return m-_<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-_))}ms`),void this._start();m=p}this.clear()}}class h extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const _=Date.now()+f;return{timeRemaining:()=>Math.max(0,_-Date.now())}}}a.PriorityTaskQueue=h,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:h,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const h=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=h?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&d&&(f.isWrapped=d[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&d[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,d=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=d}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),h=l(3734),d=l(8437),f=l(4634),_=l(511),g=l(643),m=l(4863),p=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(b,y,v){this._hasScrollback=b,this._optionsService=y,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=_.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=_.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(b){return b?(this._nullCell.fg=b.fg,this._nullCell.bg=b.bg,this._nullCell.extended=b.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(b){return b?(this._whitespaceCell.fg=b.fg,this._whitespaceCell.bg=b.bg,this._whitespaceCell.extended=b.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(b,y){return new d.BufferLine(this._bufferService.cols,this.getNullCell(b),y)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const b=this.ybase+this.y-this.ydisp;return b>=0&&b<this._rows}_getCorrectBufferLength(b){if(!this._hasScrollback)return b;const y=b+this._optionsService.rawOptions.scrollback;return y>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:y}fillViewportRows(b){if(this.lines.length===0){b===void 0&&(b=d.DEFAULT_ATTR_DATA);let y=this._rows;for(;y--;)this.lines.push(this.getBlankLine(b))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(b,y){const v=this.getNullCell(d.DEFAULT_ATTR_DATA);let E=0;const w=this._getCorrectBufferLength(y);if(w>this.lines.maxLength&&(this.lines.maxLength=w),this.lines.length>0){if(this._cols<b)for(let S=0;S<this.lines.length;S++)E+=+this.lines.get(S).resize(b,v);let T=0;if(this._rows<y)for(let S=this._rows;S<y;S++)this.lines.length<y+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new d.BufferLine(b,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+T+1?(this.ybase--,T++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(b,v)));else for(let S=this._rows;S>y;S--)this.lines.length>y+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(w<this.lines.maxLength){const S=this.lines.length-w;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=w}this.x=Math.min(this.x,b-1),this.y=Math.min(this.y,y-1),T&&(this.y+=T),this.savedX=Math.min(this.savedX,b-1),this.scrollTop=0}if(this.scrollBottom=y-1,this._isReflowEnabled&&(this._reflow(b,y),this._cols>b))for(let T=0;T<this.lines.length;T++)E+=+this.lines.get(T).resize(b,v);this._cols=b,this._rows=y,this._memoryCleanupQueue.clear(),E>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let b=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,b=!1);let y=0;for(;this._memoryCleanupPosition<this.lines.length;)if(y+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),y>100)return!0;return b}get _isReflowEnabled(){const b=this._optionsService.rawOptions.windowsPty;return b&&b.buildNumber?this._hasScrollback&&b.backend==="conpty"&&b.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(b,y){this._cols!==b&&(b>this._cols?this._reflowLarger(b,y):this._reflowSmaller(b,y))}_reflowLarger(b,y){const v=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,b,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(v.length>0){const E=(0,f.reflowLargerCreateNewLayout)(this.lines,v);(0,f.reflowLargerApplyNewLayout)(this.lines,E.layout),this._reflowLargerAdjustViewport(b,y,E.countRemoved)}}_reflowLargerAdjustViewport(b,y,v){const E=this.getNullCell(d.DEFAULT_ATTR_DATA);let w=v;for(;w-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<y&&this.lines.push(new d.BufferLine(b,E))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(b,y){const v=this.getNullCell(d.DEFAULT_ATTR_DATA),E=[];let w=0;for(let T=this.lines.length-1;T>=0;T--){let S=this.lines.get(T);if(!S||!S.isWrapped&&S.getTrimmedLength()<=b)continue;const x=[S];for(;S.isWrapped&&T>0;)S=this.lines.get(--T),x.unshift(S);const R=this.ybase+this.y;if(R>=T&&R<T+x.length)continue;const U=x[x.length-1].getTrimmedLength(),P=(0,f.reflowSmallerGetNewLineLengths)(x,this._cols,b),B=P.length-x.length;let A;A=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const W=[];for(let j=0;j<B;j++){const H=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);W.push(H)}W.length>0&&(E.push({start:T+x.length+w,newLines:W}),w+=W.length),x.push(...W);let ne=P.length-1,Q=P[ne];Q===0&&(ne--,Q=P[ne]);let ie=x.length-B-1,L=U;for(;ie>=0;){const j=Math.min(L,Q);if(x[ne]===void 0)break;if(x[ne].copyCellsFrom(x[ie],L-j,Q-j,j,!0),Q-=j,Q===0&&(ne--,Q=P[ne]),L-=j,L===0){ie--;const H=Math.max(ie,0);L=(0,f.getWrappedLineTrimmedLength)(x,H,this._cols)}}for(let j=0;j<x.length;j++)P[j]<b&&x[j].setCell(P[j],v);let I=B-A;for(;I-- >0;)this.ybase===0?this.y<y-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+w)-y&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+y-1)}if(E.length>0){const T=[],S=[];for(let ne=0;ne<this.lines.length;ne++)S.push(this.lines.get(ne));const x=this.lines.length;let R=x-1,U=0,P=E[U];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+w);let B=0;for(let ne=Math.min(this.lines.maxLength-1,x+w-1);ne>=0;ne--)if(P&&P.start>R+B){for(let Q=P.newLines.length-1;Q>=0;Q--)this.lines.set(ne--,P.newLines[Q]);ne++,T.push({index:R+1,amount:P.newLines.length}),B+=P.newLines.length,P=E[++U]}else this.lines.set(ne,S[R--]);let A=0;for(let ne=T.length-1;ne>=0;ne--)T[ne].index+=A,this.lines.onInsertEmitter.fire(T[ne]),A+=T[ne].amount;const W=Math.max(0,x+w-this.lines.maxLength);W>0&&this.lines.onTrimEmitter.fire(W)}}translateBufferLineToString(b,y,v=0,E){const w=this.lines.get(b);return w?w.translateToString(y,v,E):""}getWrappedRangeForLine(b){let y=b,v=b;for(;y>0&&this.lines.get(y).isWrapped;)y--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:y,last:v}}setupTabStops(b){for(b!=null?this.tabs[b]||(b=this.prevStop(b)):(this.tabs={},b=0);b<this._cols;b+=this._optionsService.rawOptions.tabStopWidth)this.tabs[b]=!0}prevStop(b){for(b==null&&(b=this.x);!this.tabs[--b]&&b>0;);return b>=this._cols?this._cols-1:b<0?0:b}nextStop(b){for(b==null&&(b=this.x);!this.tabs[++b]&&b<this._cols;);return b>=this._cols?this._cols-1:b<0?0:b}clearMarkers(b){this._isClearing=!0;for(let y=0;y<this.markers.length;y++)this.markers[y].line===b&&(this.markers[y].dispose(),this.markers.splice(y--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let b=0;b<this.markers.length;b++)this.markers[b].dispose(),this.markers.splice(b--,1);this._isClearing=!1}addMarker(b){const y=new m.Marker(b);return this.markers.push(y),y.register(this.lines.onTrim(v=>{y.line-=v,y.line<0&&y.dispose()})),y.register(this.lines.onInsert(v=>{y.line>=v.index&&(y.line+=v.amount)})),y.register(this.lines.onDelete(v=>{y.line>=v.index&&y.line<v.index+v.amount&&y.dispose(),y.line>v.index&&(y.line-=v.amount)})),y.register(y.onDispose(()=>this._removeMarker(y))),y}_removeMarker(b){this._isClearing||this.markers.splice(this.markers.indexOf(b),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),h=l(643),d=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let f=0;class _{constructor(m,p,b=!1){this.isWrapped=b,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const y=p||u.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let v=0;v<m;++v)this.setCell(v,y);this.length=m}get(m){const p=this._data[3*m+0],b=2097151&p;return[this._data[3*m+1],2097152&p?this._combined[m]:b?(0,d.stringFromCodePoint)(b):"",p>>22,2097152&p?this._combined[m].charCodeAt(this._combined[m].length-1):b]}set(m,p){this._data[3*m+1]=p[h.CHAR_DATA_ATTR_INDEX],p[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=p[1],this._data[3*m+0]=2097152|m|p[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=p[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const p=this._data[3*m+0];return 2097152&p?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&p}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const p=this._data[3*m+0];return 2097152&p?this._combined[m]:2097151&p?(0,d.stringFromCodePoint)(2097151&p):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,p){return f=3*m,p.content=this._data[f+0],p.fg=this._data[f+1],p.bg=this._data[f+2],2097152&p.content&&(p.combinedData=this._combined[m]),268435456&p.bg&&(p.extended=this._extendedAttrs[m]),p}setCell(m,p){2097152&p.content&&(this._combined[m]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[m]=p.extended),this._data[3*m+0]=p.content,this._data[3*m+1]=p.fg,this._data[3*m+2]=p.bg}setCellFromCodepoint(m,p,b,y){268435456&y.bg&&(this._extendedAttrs[m]=y.extended),this._data[3*m+0]=p|b<<22,this._data[3*m+1]=y.fg,this._data[3*m+2]=y.bg}addCodepointToCell(m,p,b){let y=this._data[3*m+0];2097152&y?this._combined[m]+=(0,d.stringFromCodePoint)(p):2097151&y?(this._combined[m]=(0,d.stringFromCodePoint)(2097151&y)+(0,d.stringFromCodePoint)(p),y&=-2097152,y|=2097152):y=p|4194304,b&&(y&=-12582913,y|=b<<22),this._data[3*m+0]=y}insertCells(m,p,b){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length-m){const y=new u.CellData;for(let v=this.length-m-p-1;v>=0;--v)this.setCell(m+p+v,this.loadCell(m+v,y));for(let v=0;v<p;++v)this.setCell(m+v,b)}else for(let y=m;y<this.length;++y)this.setCell(y,b);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,b)}deleteCells(m,p,b){if(m%=this.length,p<this.length-m){const y=new u.CellData;for(let v=0;v<this.length-m-p;++v)this.setCell(m+v,this.loadCell(m+p+v,y));for(let v=this.length-p;v<this.length;++v)this.setCell(v,b)}else for(let y=m;y<this.length;++y)this.setCell(y,b);m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodepoint(m,0,1,b)}replaceCells(m,p,b,y=!1){if(y)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodepoint(p,0,1,b);m<p&&m<this.length;)this.isProtected(m)||this.setCell(m,b),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,b),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodepoint(p,0,1,b);m<p&&m<this.length;)this.setCell(m++,b)}resize(m,p){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const b=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*b)this._data=new Uint32Array(this._data.buffer,0,b);else{const y=new Uint32Array(b);y.set(this._data),this._data=y}for(let y=this.length;y<m;++y)this.setCell(y,p)}else{this._data=this._data.subarray(0,b);const y=Object.keys(this._combined);for(let E=0;E<y.length;E++){const w=parseInt(y[E],10);w>=m&&delete this._combined[w]}const v=Object.keys(this._extendedAttrs);for(let E=0;E<v.length;E++){const w=parseInt(v[E],10);w>=m&&delete this._extendedAttrs[w]}}return this.length=m,4*b*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,p=!1){if(p)for(let b=0;b<this.length;++b)this.isProtected(b)||this.setCell(b,m);else{this._combined={},this._extendedAttrs={};for(let b=0;b<this.length;++b)this.setCell(b,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const p in m._combined)this._combined[p]=m._combined[p];this._extendedAttrs={};for(const p in m._extendedAttrs)this._extendedAttrs[p]=m._extendedAttrs[p];this.isWrapped=m.isWrapped}clone(){const m=new _(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const p in this._combined)m._combined[p]=this._combined[p];for(const p in this._extendedAttrs)m._extendedAttrs[p]=this._extendedAttrs[p];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,p,b,y,v){const E=m._data;if(v)for(let T=y-1;T>=0;T--){for(let S=0;S<3;S++)this._data[3*(b+T)+S]=E[3*(p+T)+S];268435456&E[3*(p+T)+2]&&(this._extendedAttrs[b+T]=m._extendedAttrs[p+T])}else for(let T=0;T<y;T++){for(let S=0;S<3;S++)this._data[3*(b+T)+S]=E[3*(p+T)+S];268435456&E[3*(p+T)+2]&&(this._extendedAttrs[b+T]=m._extendedAttrs[p+T])}const w=Object.keys(m._combined);for(let T=0;T<w.length;T++){const S=parseInt(w[T],10);S>=p&&(this._combined[S-p+b]=m._combined[S])}}translateToString(m,p,b,y){p=p??0,b=b??this.length,m&&(b=Math.min(b,this.getTrimmedLength())),y&&(y.length=0);let v="";for(;p<b;){const E=this._data[3*p+0],w=2097151&E,T=2097152&E?this._combined[p]:w?(0,d.stringFromCodePoint)(w):h.WHITESPACE_CELL_CHAR;if(v+=T,y)for(let S=0;S<T.length;++S)y.push(p);p+=E>>22||1}return y&&y.push(p),v}}a.BufferLine=_},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,h){if(u===c.length-1)return c[u].getTrimmedLength();const d=!c[u].hasContent(h-1)&&c[u].getWidth(h-1)===1,f=c[u+1].getWidth(0)===2;return d&&f?h-1:h}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,h,d,f){const _=[];for(let g=0;g<c.length-1;g++){let m=g,p=c.get(++m);if(!p.isWrapped)continue;const b=[c.get(g)];for(;m<c.length&&p.isWrapped;)b.push(p),p=c.get(++m);if(d>=g&&d<m){g+=b.length-1;continue}let y=0,v=l(b,y,u),E=1,w=0;for(;E<b.length;){const S=l(b,E,u),x=S-w,R=h-v,U=Math.min(x,R);b[y].copyCellsFrom(b[E],w,v,U,!1),v+=U,v===h&&(y++,v=0),w+=U,w===S&&(E++,w=0),v===0&&y!==0&&b[y-1].getWidth(h-1)===2&&(b[y].copyCellsFrom(b[y-1],h-1,v++,1,!1),b[y-1].setCell(h-1,f))}b[y].replaceCells(v,h,f);let T=0;for(let S=b.length-1;S>0&&(S>y||b[S].getTrimmedLength()===0);S--)T++;T>0&&(_.push(g+b.length-T),_.push(T)),g+=b.length-1}return _},a.reflowLargerCreateNewLayout=function(c,u){const h=[];let d=0,f=u[d],_=0;for(let g=0;g<c.length;g++)if(f===g){const m=u[++d];c.onDeleteEmitter.fire({index:g-_,amount:m}),g+=m-1,_+=m,f=u[++d]}else h.push(g);return{layout:h,countRemoved:_}},a.reflowLargerApplyNewLayout=function(c,u){const h=[];for(let d=0;d<u.length;d++)h.push(c.get(u[d]));for(let d=0;d<h.length;d++)c.set(d,h[d]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,h){const d=[],f=c.map((p,b)=>l(c,b,u)).reduce((p,b)=>p+b);let _=0,g=0,m=0;for(;m<f;){if(f-m<h){d.push(f-m);break}_+=h;const p=l(c,g,u);_>p&&(_-=p,g++);const b=c[g].getWidth(_-1)===2;b&&_--;const y=b?h-1:h;d.push(y),m+=y}return d},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),h=l(9092);class d extends u.Disposable{constructor(_,g){super(),this._optionsService=_,this._bufferService=g,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(_){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(_),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(_,g){this._normal.resize(_,g),this._alt.resize(_,g),this.setupTabStops(_)}setupTabStops(_){this._normal.setupTabStops(_),this._alt.setupTabStops(_)}}a.BufferSet=d},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),h=l(3734);class d extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(_){const g=new d;return g.setFromCharData(_),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(_){this.fg=_[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(_[u.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(_[u.CHAR_DATA_CHAR_INDEX].length===2){const m=_[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const p=_[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(m-55296)+p-56320+65536|_[u.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=_[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[u.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=_[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|_[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=d},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class h{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=h,h._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(l||(a.C0=l={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(c||(a.C1=c={})),function(h){h.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(h,d,f,_){const g={type:0,cancel:!1,key:void 0},m=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?g.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?g.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?g.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(g.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:g.key=h.ctrlKey?"\b":c.C0.DEL,h.altKey&&(g.key=c.C0.ESC+g.key);break;case 9:if(h.shiftKey){g.key=c.C0.ESC+"[Z";break}g.key=c.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,g.cancel=!0;break;case 27:g.key=c.C0.ESC,h.altKey&&(g.key=c.C0.ESC+c.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;m?(g.key=c.C0.ESC+"[1;"+(m+1)+"D",g.key===c.C0.ESC+"[1;3D"&&(g.key=c.C0.ESC+(f?"b":"[1;5D"))):g.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(h.metaKey)break;m?(g.key=c.C0.ESC+"[1;"+(m+1)+"C",g.key===c.C0.ESC+"[1;3C"&&(g.key=c.C0.ESC+(f?"f":"[1;5C"))):g.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(h.metaKey)break;m?(g.key=c.C0.ESC+"[1;"+(m+1)+"A",f||g.key!==c.C0.ESC+"[1;3A"||(g.key=c.C0.ESC+"[1;5A")):g.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(h.metaKey)break;m?(g.key=c.C0.ESC+"[1;"+(m+1)+"B",f||g.key!==c.C0.ESC+"[1;3B"||(g.key=c.C0.ESC+"[1;5B")):g.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=c.C0.ESC+"[2~");break;case 46:g.key=m?c.C0.ESC+"[3;"+(m+1)+"~":c.C0.ESC+"[3~";break;case 36:g.key=m?c.C0.ESC+"[1;"+(m+1)+"H":d?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:g.key=m?c.C0.ESC+"[1;"+(m+1)+"F":d?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:h.ctrlKey?g.key=c.C0.ESC+"[5;"+(m+1)+"~":g.key=c.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:h.ctrlKey?g.key=c.C0.ESC+"[6;"+(m+1)+"~":g.key=c.C0.ESC+"[6~";break;case 112:g.key=m?c.C0.ESC+"[1;"+(m+1)+"P":c.C0.ESC+"OP";break;case 113:g.key=m?c.C0.ESC+"[1;"+(m+1)+"Q":c.C0.ESC+"OQ";break;case 114:g.key=m?c.C0.ESC+"[1;"+(m+1)+"R":c.C0.ESC+"OR";break;case 115:g.key=m?c.C0.ESC+"[1;"+(m+1)+"S":c.C0.ESC+"OS";break;case 116:g.key=m?c.C0.ESC+"[15;"+(m+1)+"~":c.C0.ESC+"[15~";break;case 117:g.key=m?c.C0.ESC+"[17;"+(m+1)+"~":c.C0.ESC+"[17~";break;case 118:g.key=m?c.C0.ESC+"[18;"+(m+1)+"~":c.C0.ESC+"[18~";break;case 119:g.key=m?c.C0.ESC+"[19;"+(m+1)+"~":c.C0.ESC+"[19~";break;case 120:g.key=m?c.C0.ESC+"[20;"+(m+1)+"~":c.C0.ESC+"[20~";break;case 121:g.key=m?c.C0.ESC+"[21;"+(m+1)+"~":c.C0.ESC+"[21~";break;case 122:g.key=m?c.C0.ESC+"[23;"+(m+1)+"~":c.C0.ESC+"[23~";break;case 123:g.key=m?c.C0.ESC+"[24;"+(m+1)+"~":c.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(f&&!_||!h.altKey||h.metaKey)!f||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?g.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(g.key=c.C0.US),h.key==="@"&&(g.key=c.C0.NUL)):h.keyCode===65&&(g.type=1);else{const p=u[h.keyCode],b=p?.[h.shiftKey?1:0];if(b)g.key=c.C0.ESC+b;else if(h.keyCode>=65&&h.keyCode<=90){const y=h.ctrlKey?h.keyCode-64:h.keyCode+32;let v=String.fromCharCode(y);h.shiftKey&&(v=v.toUpperCase()),g.key=c.C0.ESC+v}else if(h.keyCode===32)g.key=c.C0.ESC+(h.ctrlKey?c.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let y=h.code.slice(3,4);h.shiftKey||(y=y.toLowerCase()),g.key=c.C0.ESC+y,g.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?g.key=c.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?g.key=c.C0.DEL:h.keyCode===219?g.key=c.C0.ESC:h.keyCode===220?g.key=c.C0.FS:h.keyCode===221&&(g.key=c.C0.GS)}return g}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let h="";for(let d=c;d<u;++d){let f=l[d];f>65535?(f-=65536,h+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):h+=String.fromCharCode(f)}return h},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let h=0,d=0;if(this._interim){const f=l.charCodeAt(d++);56320<=f&&f<=57343?c[h++]=1024*(this._interim-55296)+f-56320+65536:(c[h++]=this._interim,c[h++]=f),this._interim=0}for(let f=d;f<u;++f){const _=l.charCodeAt(f);if(55296<=_&&_<=56319){if(++f>=u)return this._interim=_,h;const g=l.charCodeAt(f);56320<=g&&g<=57343?c[h++]=1024*(_-55296)+g-56320+65536:(c[h++]=_,c[h++]=g)}else _!==65279&&(c[h++]=_)}return h}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let h,d,f,_,g=0,m=0,p=0;if(this.interim[0]){let v=!1,E=this.interim[0];E&=(224&E)==192?31:(240&E)==224?15:7;let w,T=0;for(;(w=63&this.interim[++T])&&T<4;)E<<=6,E|=w;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=S-T;for(;p<x;){if(p>=u)return 0;if(w=l[p++],(192&w)!=128){p--,v=!0;break}this.interim[T++]=w,E<<=6,E|=63&w}v||(S===2?E<128?p--:c[g++]=E:S===3?E<2048||E>=55296&&E<=57343||E===65279||(c[g++]=E):E<65536||E>1114111||(c[g++]=E)),this.interim.fill(0)}const b=u-4;let y=p;for(;y<u;){for(;!(!(y<b)||128&(h=l[y])||128&(d=l[y+1])||128&(f=l[y+2])||128&(_=l[y+3]));)c[g++]=h,c[g++]=d,c[g++]=f,c[g++]=_,y+=4;if(h=l[y++],h<128)c[g++]=h;else if((224&h)==192){if(y>=u)return this.interim[0]=h,g;if(d=l[y++],(192&d)!=128){y--;continue}if(m=(31&h)<<6|63&d,m<128){y--;continue}c[g++]=m}else if((240&h)==224){if(y>=u)return this.interim[0]=h,g;if(d=l[y++],(192&d)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=d,g;if(f=l[y++],(192&f)!=128){y--;continue}if(m=(15&h)<<12|(63&d)<<6|63&f,m<2048||m>=55296&&m<=57343||m===65279)continue;c[g++]=m}else if((248&h)==240){if(y>=u)return this.interim[0]=h,g;if(d=l[y++],(192&d)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=d,g;if(f=l[y++],(192&f)!=128){y--;continue}if(y>=u)return this.interim[0]=h,this.interim[1]=d,this.interim[2]=f,g;if(_=l[y++],(192&_)!=128){y--;continue}if(m=(7&h)<<18|(63&d)<<12|(63&f)<<6|63&_,m<65536||m>1114111)continue;c[g++]=m}}return g}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;a.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let f=0;f<u.length;++f)d.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?d[f]:function(_,g){let m,p=0,b=g.length-1;if(_<g[0][0]||_>g[b][1])return!1;for(;b>=p;)if(m=p+b>>1,_>g[m][1])p=m+1;else{if(!(_<g[m][0]))return!0;b=m-1}return!1}(f,h)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,_){let g=this.wcwidth(f),m=g===0&&_!==0;if(m){const p=c.UnicodeService.extractWidth(_);p===0?m=!1:p>g&&(g=p)}return c.UnicodeService.createPropertyValue(0,g,m)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,_){if(_!==void 0&&this._syncCalls>_)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,_){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(_),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(_)}_innerWrite(f=0,_=!0){const g=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],p=this._action(m,_);if(p){const y=v=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(g,v);return void p.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(y)}const b=this._callbacks[this._bufferOffset];if(b&&b(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=h},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(h,d){const f=h.toString(16),_=f.length<2?"0"+f:f;switch(d){case 4:return f[0];case 8:return _;case 12:return(_+_).slice(0,3);default:return _+_}}a.parseColor=function(h){if(!h)return;let d=h.toLowerCase();if(d.indexOf("rgb:")===0){d=d.slice(4);const f=l.exec(d);if(f){const _=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/_*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/_*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/_*255)]}}else if(d.indexOf("#")===0&&(d=d.slice(1),c.exec(d)&&[3,6,9,12].includes(d.length))){const f=d.length/3,_=[0,0,0];for(let g=0;g<3;++g){const m=parseInt(d.slice(f*g,f*g+f),16);_[g]=f===1?m<<4:f===2?m:f===3?m>>4:m>>8}return _}},a.toRgbString=function(h,d=16){const[f,_,g]=h;return`rgb:${u(f,d)}/${u(_,d)}/${u(g,d)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),h=l(5770),d=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}registerHandler(_,g){this._handlers[_]===void 0&&(this._handlers[_]=[]);const m=this._handlers[_];return m.push(g),{dispose:()=>{const p=m.indexOf(g);p!==-1&&m.splice(p,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}reset(){if(this._active.length)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0}hook(_,g){if(this.reset(),this._ident=_,this._active=this._handlers[_]||d,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(_,g,m){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(_,g,m);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(_,g,m))}unhook(_,g=!0){if(this._active.length){let m=!1,p=this._active.length-1,b=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,m=g,b=this._stack.fallThrough,this._stack.paused=!1),!b&&m===!1){for(;p>=0&&(m=this._active[p].unhook(_),m!==!0);p--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,m;p--}for(;p>=0;p--)if(m=this._active[p].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",_);this._active=d,this._ident=0}};const f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(_){this._handler=_,this._data="",this._params=f,this._hitLimit=!1}hook(_){this._params=_.length>1||_.params[0]?_.clone():f,this._data="",this._hitLimit=!1}put(_,g,m){this._hitLimit||(this._data+=(0,c.utf32ToString)(_,g,m),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(_){let g=!1;if(this._hitLimit)g=!1;else if(_&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(m=>(this._params=f,this._data="",this._hitLimit=!1,m));return this._params=f,this._data="",this._hitLimit=!1,g}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),h=l(6242),d=l(6351);class f{constructor(p){this.table=new Uint8Array(p)}setDefault(p,b){this.table.fill(p<<4|b)}add(p,b,y,v){this.table[b<<8|p]=y<<4|v}addMany(p,b,y,v){for(let E=0;E<p.length;E++)this.table[b<<8|p[E]]=y<<4|v}}a.TransitionTable=f;const _=160;a.VT500_TRANSITION_TABLE=function(){const m=new f(4095),p=Array.apply(null,Array(256)).map((T,S)=>S),b=(T,S)=>p.slice(T,S),y=b(32,127),v=b(0,24);v.push(25),v.push.apply(v,b(28,32));const E=b(0,14);let w;for(w in m.setDefault(1,0),m.addMany(y,0,2,0),E)m.addMany([24,26,153,154],w,3,0),m.addMany(b(128,144),w,3,0),m.addMany(b(144,152),w,3,0),m.add(156,w,0,0),m.add(27,w,11,1),m.add(157,w,4,8),m.addMany([152,158,159],w,0,7),m.add(155,w,11,3),m.add(144,w,11,9);return m.addMany(v,0,3,0),m.addMany(v,1,3,1),m.add(127,1,0,1),m.addMany(v,8,0,8),m.addMany(v,3,3,3),m.add(127,3,0,3),m.addMany(v,4,3,4),m.add(127,4,0,4),m.addMany(v,6,3,6),m.addMany(v,5,3,5),m.add(127,5,0,5),m.addMany(v,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(y,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(b(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(y,7,0,7),m.addMany(v,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(b(64,127),3,7,0),m.addMany(b(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(b(48,60),4,8,4),m.addMany(b(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(b(32,64),6,0,6),m.add(127,6,0,6),m.addMany(b(64,127),6,0,0),m.addMany(b(32,48),3,9,5),m.addMany(b(32,48),5,9,5),m.addMany(b(48,64),5,0,6),m.addMany(b(64,127),5,7,0),m.addMany(b(32,48),4,9,5),m.addMany(b(32,48),1,9,2),m.addMany(b(32,48),2,9,2),m.addMany(b(48,127),2,10,0),m.addMany(b(48,80),1,10,0),m.addMany(b(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(b(96,127),1,10,0),m.add(80,1,11,9),m.addMany(v,9,0,9),m.add(127,9,0,9),m.addMany(b(28,32),9,0,9),m.addMany(b(32,48),9,9,12),m.addMany(b(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(v,11,0,11),m.addMany(b(32,128),11,0,11),m.addMany(b(28,32),11,0,11),m.addMany(v,10,0,10),m.add(127,10,0,10),m.addMany(b(28,32),10,0,10),m.addMany(b(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(b(32,48),10,9,12),m.addMany(v,12,0,12),m.add(127,12,0,12),m.addMany(b(28,32),12,0,12),m.addMany(b(32,48),12,9,12),m.addMany(b(48,64),12,0,11),m.addMany(b(64,127),12,12,13),m.addMany(b(64,127),10,12,13),m.addMany(b(64,127),9,12,13),m.addMany(v,13,13,13),m.addMany(y,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(_,0,2,0),m.add(_,8,5,8),m.add(_,6,0,6),m.add(_,11,0,11),m.add(_,13,13,13),m}();class g extends c.Disposable{constructor(p=a.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(b,y,v)=>{},this._executeHandlerFb=b=>{},this._csiHandlerFb=(b,y)=>{},this._escHandlerFb=b=>{},this._errorHandlerFb=b=>b,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new d.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,b=[64,126]){let y=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(y=p.prefix.charCodeAt(0),y&&60>y||y>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let E=0;E<p.intermediates.length;++E){const w=p.intermediates.charCodeAt(E);if(32>w||w>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");y<<=8,y|=w}}if(p.final.length!==1)throw new Error("final must be a single byte");const v=p.final.charCodeAt(0);if(b[0]>v||v>b[1])throw new Error(`final must be in range ${b[0]} .. ${b[1]}`);return y<<=8,y|=v,y}identToString(p){const b=[];for(;p;)b.push(String.fromCharCode(255&p)),p>>=8;return b.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,b){const y=this._identifier(p,[48,126]);this._escHandlers[y]===void 0&&(this._escHandlers[y]=[]);const v=this._escHandlers[y];return v.push(b),{dispose:()=>{const E=v.indexOf(b);E!==-1&&v.splice(E,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,b){this._executeHandlers[p.charCodeAt(0)]=b}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,b){const y=this._identifier(p);this._csiHandlers[y]===void 0&&(this._csiHandlers[y]=[]);const v=this._csiHandlers[y];return v.push(b),{dispose:()=>{const E=v.indexOf(b);E!==-1&&v.splice(E,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,b){return this._dcsParser.registerHandler(this._identifier(p),b)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,b){return this._oscParser.registerHandler(p,b)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,b,y,v,E){this._parseStack.state=p,this._parseStack.handlers=b,this._parseStack.handlerPos=y,this._parseStack.transition=v,this._parseStack.chunkPos=E}parse(p,b,y){let v,E=0,w=0,T=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,T=this._parseStack.chunkPos+1;else{if(y===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(y===!1&&x>-1){for(;x>=0&&(v=S[x](this._params),v!==!0);x--)if(v instanceof Promise)return this._parseStack.handlerPos=x,v}this._parseStack.handlers=[];break;case 4:if(y===!1&&x>-1){for(;x>=0&&(v=S[x](),v!==!0);x--)if(v instanceof Promise)return this._parseStack.handlerPos=x,v}this._parseStack.handlers=[];break;case 6:if(E=p[this._parseStack.chunkPos],v=this._dcsParser.unhook(E!==24&&E!==26,y),v)return v;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(E=p[this._parseStack.chunkPos],v=this._oscParser.end(E!==24&&E!==26,y),v)return v;E===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,T=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let S=T;S<b;++S){switch(E=p[S],w=this._transitions.table[this.currentState<<8|(E<160?E:_)],w>>4){case 2:for(let B=S+1;;++B){if(B>=b||(E=p[B])<32||E>126&&E<_){this._printHandler(p,S,B),S=B-1;break}if(++B>=b||(E=p[B])<32||E>126&&E<_){this._printHandler(p,S,B),S=B-1;break}if(++B>=b||(E=p[B])<32||E>126&&E<_){this._printHandler(p,S,B),S=B-1;break}if(++B>=b||(E=p[B])<32||E>126&&E<_){this._printHandler(p,S,B),S=B-1;break}}break;case 3:this._executeHandlers[E]?this._executeHandlers[E]():this._executeHandlerFb(E),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:E,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|E];let R=x?x.length-1:-1;for(;R>=0&&(v=x[R](this._params),v!==!0);R--)if(v instanceof Promise)return this._preserveStack(3,x,R,w,S),v;R<0&&this._csiHandlerFb(this._collect<<8|E,this._params),this.precedingJoinState=0;break;case 8:do switch(E){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(E-48)}while(++S<b&&(E=p[S])>47&&E<60);S--;break;case 9:this._collect<<=8,this._collect|=E;break;case 10:const U=this._escHandlers[this._collect<<8|E];let P=U?U.length-1:-1;for(;P>=0&&(v=U[P](),v!==!0);P--)if(v instanceof Promise)return this._preserveStack(4,U,P,w,S),v;P<0&&this._escHandlerFb(this._collect<<8|E),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|E,this._params);break;case 13:for(let B=S+1;;++B)if(B>=b||(E=p[B])===24||E===26||E===27||E>127&&E<_){this._dcsParser.put(p,S,B),S=B-1;break}break;case 14:if(v=this._dcsParser.unhook(E!==24&&E!==26),v)return this._preserveStack(6,[],0,w,S),v;E===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let B=S+1;;B++)if(B>=b||(E=p[B])<32||E>127&&E<_){this._oscParser.put(p,S,B),S=B-1;break}break;case 6:if(v=this._oscParser.end(E!==24&&E!==26),v)return this._preserveStack(5,[],0,w,S),v;E===27&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&w}}}a.EscapeSequenceParser=g},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),h=[];a.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(d,f){this._handlers[d]===void 0&&(this._handlers[d]=[]);const _=this._handlers[d];return _.push(f),{dispose:()=>{const g=_.indexOf(f);g!==-1&&_.splice(g,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].start();else this._handlerFb(this._id,"START")}_put(d,f,_){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(d,f,_);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(d,f,_))}start(){this.reset(),this._state=1}put(d,f,_){if(this._state!==3){if(this._state===1)for(;f<_;){const g=d[f++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&_-f>0&&this._put(d,f,_)}}end(d,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let _=!1,g=this._active.length-1,m=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,_=f,m=this._stack.fallThrough,this._stack.paused=!1),!m&&_===!1){for(;g>=0&&(_=this._active[g].end(d),_!==!0);g--)if(_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,_;g--}for(;g>=0;g--)if(_=this._active[g].end(!1),_ instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,_}else this._handlerFb(this._id,"END",d);this._active=h,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(d){this._handler=d,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(d,f,_){this._hitLimit||(this._data+=(0,u.utf32ToString)(d,f,_),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(d){let f=!1;if(this._hitLimit)f=!1;else if(d&&(f=this._handler(this._data),f instanceof Promise))return f.then(_=>(this._data="",this._hitLimit=!1,_));return this._data="",this._hitLimit=!1,f}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(h){const d=new c;if(!h.length)return d;for(let f=Array.isArray(h[0])?1:0;f<h.length;++f){const _=h[f];if(Array.isArray(_))for(let g=0;g<_.length;++g)d.addSubParam(_[g]);else d.addParam(_)}return d}constructor(h=32,d=32){if(this.maxLength=h,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new c(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let d=0;d<this.length;++d){h.push(this.params[d]);const f=this._subParamsIdx[d]>>8,_=255&this._subParamsIdx[d];_-f>0&&h.push(Array.prototype.slice.call(this._subParams,f,_))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const d=this._subParamsIdx[h]>>8,f=255&this._subParamsIdx[h];return f-d>0?this._subParams.subarray(d,f):null}getSubParamsAll(){const h={};for(let d=0;d<this.length;++d){const f=this._subParamsIdx[d]>>8,_=255&this._subParamsIdx[d];_-f>0&&(h[d]=this._subParams.slice(f,_))}return h}addDigit(h){let d;if(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,_=f[d-1];f[d-1]=~_?Math.min(10*_+h,l):h}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(h,d){this._buffer=h,this.type=d}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const d=this._buffer.lines.get(h);if(d)return new c.BufferLineApiView(d)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,h){if(!(u<0||u>=this._line.length))return h?(this._line.loadCell(u,h),h):this._line.loadCell(u,new c.CellData)}translateToString(u,h,d){return this._line.translateToString(u,h,d)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),h=l(844);class d extends h.Disposable{constructor(_){super(),this._core=_,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=d},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,h)=>c(u,h.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(m,p,b,y){var v,E=arguments.length,w=E<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,p,b,y);else for(var T=m.length-1;T>=0;T--)(v=m[T])&&(w=(E<3?v(w):E>3?v(p,b,w):v(p,b))||w);return E>3&&w&&Object.defineProperty(p,b,w),w},u=this&&this.__param||function(m,p){return function(b,y){p(b,y,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const h=l(8460),d=l(844),f=l(5295),_=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let g=a.BufferService=class extends d.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(m,this))}resize(m,p){this.cols=m,this.rows=p,this.buffers.resize(m,p),this._onResize.fire({cols:m,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,p=!1){const b=this.buffer;let y;y=this._cachedBlankLine,y&&y.length===this.cols&&y.getFg(0)===m.fg&&y.getBg(0)===m.bg||(y=b.getBlankLine(m,p),this._cachedBlankLine=y),y.isWrapped=p;const v=b.ybase+b.scrollTop,E=b.ybase+b.scrollBottom;if(b.scrollTop===0){const w=b.lines.isFull;E===b.lines.length-1?w?b.lines.recycle().copyFrom(y):b.lines.push(y.clone()):b.lines.splice(E+1,0,y.clone()),w?this.isUserScrolling&&(b.ydisp=Math.max(b.ydisp-1,0)):(b.ybase++,this.isUserScrolling||b.ydisp++)}else{const w=E-v+1;b.lines.shiftElements(v+1,w-1,-1),b.lines.set(E,y.clone())}this.isUserScrolling||(b.ydisp=b.ybase),this._onScroll.fire(b.ydisp)}scrollLines(m,p,b){const y=this.buffer;if(m<0){if(y.ydisp===0)return;this.isUserScrolling=!0}else m+y.ydisp>=y.ybase&&(this.isUserScrolling=!1);const v=y.ydisp;y.ydisp=Math.max(Math.min(y.ydisp+m,y.ybase),0),v!==y.ydisp&&(p||this._onScroll.fire(y.ydisp))}};a.BufferService=g=c([u(0,_.IOptionsService)],g)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(y,v,E,w){var T,S=arguments.length,x=S<3?v:w===null?w=Object.getOwnPropertyDescriptor(v,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,v,E,w);else for(var R=y.length-1;R>=0;R--)(T=y[R])&&(x=(S<3?T(x):S>3?T(v,E,x):T(v,E))||x);return S>3&&x&&Object.defineProperty(v,E,x),x},u=this&&this.__param||function(y,v){return function(E,w){v(E,w,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const h=l(2585),d=l(8460),f=l(844),_={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:y=>y.button!==4&&y.action===1&&(y.ctrl=!1,y.alt=!1,y.shift=!1,!0)},VT200:{events:19,restrict:y=>y.action!==32},DRAG:{events:23,restrict:y=>y.action!==32||y.button!==3},ANY:{events:31,restrict:y=>!0}};function g(y,v){let E=(y.ctrl?16:0)|(y.shift?4:0)|(y.alt?8:0);return y.button===4?(E|=64,E|=y.action):(E|=3&y.button,4&y.button&&(E|=64),8&y.button&&(E|=128),y.action===32?E|=32:y.action!==0||v||(E|=3)),E}const m=String.fromCharCode,p={DEFAULT:y=>{const v=[g(y,!1)+32,y.col+32,y.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${m(v[0])}${m(v[1])}${m(v[2])}`},SGR:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${g(y,!0)};${y.col};${y.row}${v}`},SGR_PIXELS:y=>{const v=y.action===0&&y.button!==4?"m":"M";return`\x1B[<${g(y,!0)};${y.x};${y.y}${v}`}};let b=a.CoreMouseService=class extends f.Disposable{constructor(y,v){super(),this._bufferService=y,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new d.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const E of Object.keys(_))this.addProtocol(E,_[E]);for(const E of Object.keys(p))this.addEncoding(E,p[E]);this.reset()}addProtocol(y,v){this._protocols[y]=v}addEncoding(y,v){this._encodings[y]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(y){if(!this._protocols[y])throw new Error(`unknown protocol "${y}"`);this._activeProtocol=y,this._onProtocolChange.fire(this._protocols[y].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(y){if(!this._encodings[y])throw new Error(`unknown encoding "${y}"`);this._activeEncoding=y}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(y){if(y.col<0||y.col>=this._bufferService.cols||y.row<0||y.row>=this._bufferService.rows||y.button===4&&y.action===32||y.button===3&&y.action!==32||y.button!==4&&(y.action===2||y.action===3)||(y.col++,y.row++,y.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,y,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(y))return!1;const v=this._encodings[this._activeEncoding](y);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=y,!0}explainEvents(y){return{down:!!(1&y),up:!!(2&y),drag:!!(4&y),move:!!(8&y),wheel:!!(16&y)}}_equalEvents(y,v,E){if(E){if(y.x!==v.x||y.y!==v.y)return!1}else if(y.col!==v.col||y.row!==v.row)return!1;return y.button===v.button&&y.action===v.action&&y.ctrl===v.ctrl&&y.alt===v.alt&&y.shift===v.shift}};a.CoreMouseService=b=c([u(0,h.IBufferService),u(1,h.ICoreService)],b)},6975:function(o,a,l){var c=this&&this.__decorate||function(b,y,v,E){var w,T=arguments.length,S=T<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,v):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(b,y,v,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(S=(T<3?w(S):T>3?w(y,v,S):w(y,v))||S);return T>3&&S&&Object.defineProperty(y,v,S),S},u=this&&this.__param||function(b,y){return function(v,E){y(v,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const h=l(1439),d=l(8460),f=l(844),_=l(2585),g=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let p=a.CoreService=class extends f.Disposable{constructor(b,y,v){super(),this._bufferService=b,this._logService=y,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new d.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new d.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(m)}reset(){this.modes=(0,h.clone)(g),this.decPrivateModes=(0,h.clone)(m)}triggerDataEvent(b,y=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;y&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),y&&this._onUserInput.fire(),this._logService.debug(`sending data "${b}"`,()=>b.split("").map(E=>E.charCodeAt(0))),this._onData.fire(b)}triggerBinaryEvent(b){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${b}"`,()=>b.split("").map(y=>y.charCodeAt(0))),this._onBinary.fire(b))}};a.CoreService=p=c([u(0,_.IBufferService),u(1,_.ILogService),u(2,_.IOptionsService)],p)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),h=l(844),d=l(6106);let f=0,_=0;class g extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new d.SortedList(b=>b?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(b){if(b.marker.isDisposed)return;const y=new m(b);if(y){const v=y.marker.onDispose(()=>y.dispose());y.onDispose(()=>{y&&(this._decorations.delete(y)&&this._onDecorationRemoved.fire(y),v.dispose())}),this._decorations.insert(y),this._onDecorationRegistered.fire(y)}return y}reset(){for(const b of this._decorations.values())b.dispose();this._decorations.clear()}*getDecorationsAtCell(b,y,v){let E=0,w=0;for(const T of this._decorations.getKeyIterator(y))E=T.options.x??0,w=E+(T.options.width??1),b>=E&&b<w&&(!v||(T.options.layer??"bottom")===v)&&(yield T)}forEachDecorationAtCell(b,y,v,E){this._decorations.forEachByKey(y,w=>{f=w.options.x??0,_=f+(w.options.width??1),b>=f&&b<_&&(!v||(w.options.layer??"bottom")===v)&&E(w)})}}a.DecorationService=g;class m extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(b){super(),this.options=b,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=b.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class h{constructor(...f){this._entries=new Map;for(const[_,g]of f)this.set(_,g)}set(f,_){const g=this._entries.get(f);return this._entries.set(f,_),g}forEach(f){for(const[_,g]of this._entries.entries())f(_,g)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=h,a.InstantiationService=class{constructor(){this._services=new h,this._services.set(c.IInstantiationService,this)}setService(d,f){this._services.set(d,f)}getService(d){return this._services.get(d)}createInstance(d,...f){const _=(0,u.getServiceDependencies)(d).sort((p,b)=>p.index-b.index),g=[];for(const p of _){const b=this._services.get(p.id);if(!b)throw new Error(`[createInstance] ${d.name} depends on UNKNOWN service ${p.id}.`);g.push(b)}const m=_.length>0?_[0].index:f.length;if(f.length!==m)throw new Error(`[createInstance] First service dependency of ${d.name} at position ${m+1} conflicts with ${f.length} static arguments`);return new d(...f,...g)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(m,p,b,y){var v,E=arguments.length,w=E<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,p,b,y);else for(var T=m.length-1;T>=0;T--)(v=m[T])&&(w=(E<3?v(w):E>3?v(p,b,w):v(p,b))||w);return E>3&&w&&Object.defineProperty(p,b,w),w},u=this&&this.__param||function(m,p){return function(b,y){p(b,y,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const h=l(844),d=l(2585),f={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF};let _,g=a.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),_=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let p=0;p<m.length;p++)typeof m[p]=="function"&&(m[p]=m[p]())}_log(m,p,b){this._evalLazyOptionalParams(b),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+p,...b)}trace(m,...p){this._logLevel<=d.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,m,p)}debug(m,...p){this._logLevel<=d.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,m,p)}info(m,...p){this._logLevel<=d.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,m,p)}warn(m,...p){this._logLevel<=d.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,m,p)}error(m,...p){this._logLevel<=d.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,m,p)}};a.LogService=g=c([u(0,d.IOptionsService)],g),a.setTraceLogger=function(m){_=m},a.traceCall=function(m,p,b){if(typeof b.value!="function")throw new Error("not supported");const y=b.value;b.value=function(...v){if(_.logLevel!==d.LogLevelEnum.TRACE)return y.apply(this,v);_.trace(`GlyphRenderer#${y.name}(${v.map(w=>JSON.stringify(w)).join(", ")})`);const E=y.apply(this,v);return _.trace(`GlyphRenderer#${y.name} return`,E),E}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),h=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const d=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(g){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m={...a.DEFAULT_OPTIONS};for(const p in g)if(p in m)try{const b=g[p];m[p]=this._sanitizeAndValidateOption(p,b)}catch(b){console.error(b)}this.rawOptions=m,this.options={...m},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,m){return this.onOptionChange(p=>{p===g&&m(this.rawOptions[g])})}onMultipleOptionChange(g,m){return this.onOptionChange(p=>{g.indexOf(p)!==-1&&m()})}_setupOptions(){const g=p=>{if(!(p in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},m=(p,b)=>{if(!(p in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);b=this._sanitizeAndValidateOption(p,b),this.rawOptions[p]!==b&&(this.rawOptions[p]=b,this._onOptionChange.fire(p))};for(const p in this.rawOptions){const b={get:g.bind(this,p),set:m.bind(this,p)};Object.defineProperty(this.options,p,b)}}_sanitizeAndValidateOption(g,m){switch(g){case"cursorStyle":if(m||(m=a.DEFAULT_OPTIONS[g]),!function(p){return p==="block"||p==="underline"||p==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${g}`);break;case"wordSeparator":m||(m=a.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=d.includes(m)?m:a.DEFAULT_OPTIONS[g];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${g} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${g} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}a.OptionsService=f},2660:function(o,a,l){var c=this&&this.__decorate||function(f,_,g,m){var p,b=arguments.length,y=b<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,g):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,_,g,m);else for(var v=f.length-1;v>=0;v--)(p=f[v])&&(y=(b<3?p(y):b>3?p(_,g,y):p(_,g))||y);return b>3&&y&&Object.defineProperty(_,g,y),y},u=this&&this.__param||function(f,_){return function(g,m){_(g,m,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const h=l(2585);let d=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const _=this._bufferService.buffer;if(f.id===void 0){const v=_.addMarker(_.ybase+_.y),E={data:f,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(E,v)),this._dataByLinkId.set(E.id,E),E.id}const g=f,m=this._getEntryIdKey(g),p=this._entriesWithId.get(m);if(p)return this.addLineToLink(p.id,_.ybase+_.y),p.id;const b=_.addMarker(_.ybase+_.y),y={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(y,b)),this._entriesWithId.set(y.key,y),this._dataByLinkId.set(y.id,y),y.id}addLineToLink(f,_){const g=this._dataByLinkId.get(f);if(g&&g.lines.every(m=>m.line!==_)){const m=this._bufferService.buffer.addMarker(_);g.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(g,m))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,_){const g=f.lines.indexOf(_);g!==-1&&(f.lines.splice(g,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=d=c([u(0,h.IBufferService)],d)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const h=function(d,f,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,m,p){m[l]===m?m[c].push({id:g,index:p}):(m[c]=[{id:g,index:p}],m[l]=m)})(h,d,_)};return h.toString=()=>u,a.serviceRegistry.set(u,h),h}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class h{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,_,g=!1){return(16777215&f)<<3|(3&_)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let _=0,g=0;const m=f.length;for(let p=0;p<m;++p){let b=f.charCodeAt(p);if(55296<=b&&b<=56319){if(++p>=m)return _+this.wcwidth(b);const E=f.charCodeAt(p);56320<=E&&E<=57343?b=1024*(b-55296)+E-56320+65536:_+=this.wcwidth(E)}const y=this.charProperties(b,g);let v=h.extractWidth(y);h.extractShouldJoin(y)&&(v-=h.extractWidth(g)),_+=v,g=y}return _}charProperties(f,_){return this._activeProvider.charProperties(f,_)}}a.UnicodeService=h}},r={};function i(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o].call(l.exports,l,l.exports,i),l.exports}var s={};return(()=>{var o=s;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=i(9042),l=i(3236),c=i(844),u=i(5741),h=i(8285),d=i(7975),f=i(7090),_=["cols","rows"];class g extends c.Disposable{constructor(p){super(),this._core=this.register(new l.Terminal(p)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const b=v=>this._core.options[v],y=(v,E)=>{this._checkReadonlyOptions(v),this._core.options[v]=E};for(const v in this._core.options){const E={get:b.bind(this,v),set:y.bind(this,v)};Object.defineProperty(this._publicOptions,v,E)}}_checkReadonlyOptions(p){if(_.includes(p))throw new Error(`Option "${p}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new d.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const p=this._core.coreService.decPrivateModes;let b="none";switch(this._core.coreMouseService.activeProtocol){case"X10":b="x10";break;case"VT200":b="vt200";break;case"DRAG":b="drag";break;case"ANY":b="any"}return{applicationCursorKeysMode:p.applicationCursorKeys,applicationKeypadMode:p.applicationKeypad,bracketedPasteMode:p.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:b,originMode:p.origin,reverseWraparoundMode:p.reverseWraparound,sendFocusMode:p.sendFocus,wraparoundMode:p.wraparound}}get options(){return this._publicOptions}set options(p){for(const b in p)this._publicOptions[b]=p[b]}blur(){this._core.blur()}focus(){this._core.focus()}input(p,b=!0){this._core.input(p,b)}resize(p,b){this._verifyIntegers(p,b),this._core.resize(p,b)}open(p){this._core.open(p)}attachCustomKeyEventHandler(p){this._core.attachCustomKeyEventHandler(p)}attachCustomWheelEventHandler(p){this._core.attachCustomWheelEventHandler(p)}registerLinkProvider(p){return this._core.registerLinkProvider(p)}registerCharacterJoiner(p){return this._checkProposedApi(),this._core.registerCharacterJoiner(p)}deregisterCharacterJoiner(p){this._checkProposedApi(),this._core.deregisterCharacterJoiner(p)}registerMarker(p=0){return this._verifyIntegers(p),this._core.registerMarker(p)}registerDecoration(p){return this._checkProposedApi(),this._verifyPositiveIntegers(p.x??0,p.width??0,p.height??0),this._core.registerDecoration(p)}hasSelection(){return this._core.hasSelection()}select(p,b,y){this._verifyIntegers(p,b,y),this._core.select(p,b,y)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(p,b){this._verifyIntegers(p,b),this._core.selectLines(p,b)}dispose(){super.dispose()}scrollLines(p){this._verifyIntegers(p),this._core.scrollLines(p)}scrollPages(p){this._verifyIntegers(p),this._core.scrollPages(p)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(p){this._verifyIntegers(p),this._core.scrollToLine(p)}clear(){this._core.clear()}write(p,b){this._core.write(p,b)}writeln(p,b){this._core.write(p),this._core.write(`\r
`,b)}paste(p){this._core.paste(p)}refresh(p,b){this._verifyIntegers(p,b),this._core.refresh(p,b)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(p){this._addonManager.loadAddon(this,p)}static get strings(){return a}_verifyIntegers(...p){for(const b of p)if(b===1/0||isNaN(b)||b%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...p){for(const b of p)if(b&&(b===1/0||isNaN(b)||b%1!=0||b<0))throw new Error("This API only accepts positive integers")}}o.Terminal=g})(),s})())})(_D);var lY=_D.exports;const cY=getComputedStyle(document.documentElement),Et=t=>cY.getPropertyValue(t)||void 0;function Wp(t){return{cursor:Et("--bolt-elements-terminal-cursorColor"),cursorAccent:Et("--bolt-elements-terminal-cursorColorAccent"),foreground:Et("--bolt-elements-terminal-textColor"),background:Et("--bolt-elements-terminal-backgroundColor"),selectionBackground:Et("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:Et("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:Et("--bolt-elements-terminal-selection-backgroundColorInactive"),black:Et("--bolt-elements-terminal-color-black"),red:Et("--bolt-elements-terminal-color-red"),green:Et("--bolt-elements-terminal-color-green"),yellow:Et("--bolt-elements-terminal-color-yellow"),blue:Et("--bolt-elements-terminal-color-blue"),magenta:Et("--bolt-elements-terminal-color-magenta"),cyan:Et("--bolt-elements-terminal-color-cyan"),white:Et("--bolt-elements-terminal-color-white"),brightBlack:Et("--bolt-elements-terminal-color-brightBlack"),brightRed:Et("--bolt-elements-terminal-color-brightRed"),brightGreen:Et("--bolt-elements-terminal-color-brightGreen"),brightYellow:Et("--bolt-elements-terminal-color-brightYellow"),brightBlue:Et("--bolt-elements-terminal-color-brightBlue"),brightMagenta:Et("--bolt-elements-terminal-color-brightMagenta"),brightCyan:Et("--bolt-elements-terminal-color-brightCyan"),brightWhite:Et("--bolt-elements-terminal-color-brightWhite"),...t}}const uY=Wn("Terminal"),Sw=D.memo(D.forwardRef(({className:t,theme:e,readonly:n,onTerminalReady:r,onTerminalResize:i},s)=>{const o=D.useRef(null),a=D.useRef();return D.useEffect(()=>{const l=o.current,c=new oY.FitAddon,u=new aY.WebLinksAddon,h=new lY.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:n,theme:Wp(n?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});a.current=h,h.loadAddon(c),h.loadAddon(u),h.open(l);const d=new ResizeObserver(()=>{c.fit(),i?.(h.cols,h.rows)});return d.observe(l),uY.info("Attach terminal"),r?.(h),()=>{d.disconnect(),h.dispose()}},[]),D.useEffect(()=>{const l=a.current;l.options.theme=Wp(n?{cursor:"#00000000"}:{}),l.options.disableStdin=n},[e,n]),D.useImperativeHandle(s,()=>({reloadStyles:()=>{const l=a.current;l.options.theme=Wp(n?{cursor:"#00000000"}:{})}}),[]),N.jsx("div",{className:t,ref:o})})),Tw=3,a0=25,hY=100-a0,dY={tabSize:2},fY=D.memo(({files:t,unsavedFiles:e,editorDocument:n,selectedFile:r,isStreaming:i,onFileSelect:s,onEditorChange:o,onEditorScroll:a,onFileSave:l,onFileReset:c})=>{ma.trace("EditorPanel");const u=Dt(Sm),h=Dt(He.showTerminal),d=D.useRef([]),f=D.useRef(null),_=D.useRef(!1),[g,m]=D.useState(0),[p,b]=D.useState(1),y=D.useMemo(()=>{if(n)return n.filePath.split("/")},[n]),v=D.useMemo(()=>n!==void 0&&e?.has(n.filePath),[n,e]);D.useEffect(()=>{const w=xP.on("toggleTerminal",()=>{_.current=!0}),T=Sm.subscribe(()=>{for(const S of Object.values(d.current))S?.reloadStyles()});return()=>{w(),T()}},[]),D.useEffect(()=>{const{current:w}=f;if(!w)return;const T=w.isCollapsed();!h&&!T?w.collapse():h&&T&&w.resize(a0),_.current=!1},[h]);const E=()=>{p<Tw&&(b(p+1),m(p))};return N.jsxs(r0,{direction:"vertical",children:[N.jsx(nl,{defaultSize:h?hY:100,minSize:20,children:N.jsxs(r0,{direction:"horizontal",children:[N.jsx(nl,{defaultSize:20,minSize:10,collapsible:!0,children:N.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[N.jsxs(_w,{children:[N.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),N.jsx(fD,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,rootFolder:Pc,selectedFile:r,onFileSelect:s})]})}),N.jsx(i0,{}),N.jsxs(nl,{className:"flex flex-col",defaultSize:80,minSize:20,children:[N.jsx(_w,{className:"overflow-x-auto",children:y?.length&&N.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[N.jsx(sY,{pathSegments:y,files:t,onFileSelect:s}),v&&N.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[N.jsxs(Mo,{onClick:l,children:[N.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),N.jsxs(Mo,{onClick:c,children:[N.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),N.jsx("div",{className:"h-full flex-1 overflow-hidden",children:N.jsx(sP,{theme:u,editable:!i&&n!==void 0,settings:dY,doc:n,autoFocusOnDocumentChange:!_q(),onScroll:a,onChange:o,onSave:l})})]})]})}),N.jsx(i0,{}),N.jsx(nl,{ref:f,defaultSize:h?a0:0,minSize:10,collapsible:!0,onExpand:()=>{_.current||He.toggleTerminal(!0)},onCollapse:()=>{_.current||He.toggleTerminal(!1)},children:N.jsx("div",{className:"h-full",children:N.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[N.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:p+1},(w,T)=>{const S=g===T;return N.jsx(qe.Fragment,{children:T==0?N.jsxs("button",{className:We("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary":S,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!S}),onClick:()=>m(T),children:[N.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Bolt Terminal"]},T):N.jsx(qe.Fragment,{children:N.jsxs("button",{className:We("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":S,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!S}),onClick:()=>m(T),children:[N.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",p>1&&T]},T)})},T)}),p<Tw&&N.jsx(Hn,{icon:"i-ph:plus",size:"md",onClick:E}),N.jsx(Hn,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>He.toggleTerminal(!1)})]}),Array.from({length:p+1},(w,T)=>{const S=g===T;return T==0?(Lx.info("Starting bolt terminal"),N.jsx(Sw,{className:We("h-full overflow-hidden",{hidden:!S}),ref:x=>{d.current.push(x)},onTerminalReady:x=>He.attachBoltTerminal(x),onTerminalResize:(x,R)=>He.onTerminalResize(x,R),theme:u},T)):N.jsx(Sw,{className:We("h-full overflow-hidden",{hidden:!S}),ref:x=>{d.current.push(x)},onTerminalReady:x=>He.attachTerminal(x),onTerminalResize:(x,R)=>He.onTerminalResize(x,R),theme:u},T)})]})})})]})}),pY=D.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:n,setIsDropdownOpen:r,setHasSelectedPreview:i,previews:s})=>{const o=D.useRef(null),a=s.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return D.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&r(!1)};return n?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[n]),N.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[N.jsx(Hn,{icon:"i-ph:plug",onClick:()=>r(!n)}),n&&N.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[N.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>N.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),r(!1),i(!0)},children:N.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),mY=D.memo(()=>{const t=D.useRef(null),e=D.useRef(null),[n,r]=D.useState(0),[i,s]=D.useState(!1),o=D.useRef(!1),a=Dt(He.previews),l=a[n],[c,u]=D.useState(""),[h,d]=D.useState();D.useEffect(()=>{if(!l){u(""),d(void 0);return}const{baseUrl:m}=l;u(m),d(m)},[l,h]);const f=D.useCallback(m=>{if(!l)return!1;const{baseUrl:p}=l;return m===p?!0:m.startsWith(p)?["/","?","#"].includes(m.charAt(p.length)):!1},[l]),_=D.useCallback((m,p,b,y)=>p.port<y[m].port?b:m,[]);D.useEffect(()=>{if(a.length>1&&!o.current){const m=a.reduce(_,0);r(m)}},[a]);const g=()=>{t.current&&(t.current.src=t.current.src)};return N.jsxs("div",{className:"w-full h-full flex flex-col",children:[i&&N.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>s(!1)}),N.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-1.5",children:[N.jsx(Hn,{icon:"i-ph:arrow-clockwise",onClick:g}),N.jsx("div",{className:`flex items-center gap-1 flex-grow bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive\r
        focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive`,children:N.jsx("input",{ref:e,className:"w-full bg-transparent outline-none",type:"text",value:c,onChange:m=>{u(m.target.value)},onKeyDown:m=>{m.key==="Enter"&&f(c)&&(d(c),e.current&&e.current.blur())}})}),a.length>1&&N.jsx(pY,{activePreviewIndex:n,setActivePreviewIndex:r,isDropdownOpen:i,setHasSelectedPreview:m=>o.current=m,setIsDropdownOpen:s,previews:a})]}),N.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor",children:l?N.jsx("iframe",{ref:t,className:"border-none w-full h-full bg-white",src:h}):N.jsx("div",{className:"flex w-full h-full justify-center items-center bg-white",children:"No preview available"})})]})}),gY={ease:ir},_Y={left:{value:"code",text:"Code"},right:{value:"preview",text:"Preview"}},bY={closed:{width:0,transition:{duration:.2,ease:ir}},open:{width:"var(--workbench-width)",transition:{duration:.2,ease:ir}}},yY=D.memo(({chatStarted:t,isStreaming:e})=>{ma.trace("Workbench");const[n,r]=D.useState(!1),i=Dt(B0(He.previews,y=>y.length>0)),s=Dt(He.showWorkbench),o=Dt(He.selectedFile),a=Dt(He.currentDocument),l=Dt(He.unsavedFiles),c=Dt(He.files),u=Dt(He.currentView),h=AP(1024),d=y=>{He.currentView.set(y)};D.useEffect(()=>{i&&d("preview")},[i]),D.useEffect(()=>{He.setDocuments(c)},[c]);const f=D.useCallback(y=>{He.setCurrentDocumentContent(y.content)},[]),_=D.useCallback(y=>{He.setCurrentDocumentScrollPosition(y)},[]),g=D.useCallback(y=>{He.setSelectedFile(y)},[]),m=D.useCallback(()=>{He.saveCurrentDocument().catch(()=>{je.error("Failed to update file content")})},[]),p=D.useCallback(()=>{He.resetCurrentDocument()},[]),b=D.useCallback(async()=>{r(!0);try{const y=await window.showDirectoryPicker();await He.syncFiles(y),je.success("Files synced successfully")}catch(y){console.error("Error syncing files:",y),je.error("Failed to sync files")}finally{r(!1)}},[]);return t&&N.jsx(rr.div,{initial:"closed",animate:s?"open":"closed",variants:bY,className:"z-workbench",children:N.jsx("div",{className:We("fixed top-[calc(var(--header-height)+1.5rem)] bottom-6 w-[var(--workbench-inner-width)] mr-4 z-0 transition-[left,width] duration-200 bolt-ease-cubic-bezier",{"w-full":h,"left-0":s&&h,"left-[var(--workbench-left)]":s,"left-[100%]":!s}),children:N.jsx("div",{className:"absolute inset-0 px-2 lg:px-6",children:N.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor shadow-sm rounded-lg overflow-hidden",children:[N.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[N.jsx(D$,{selected:u,options:_Y,setSelected:d}),N.jsx("div",{className:"ml-auto"}),u==="code"&&N.jsxs("div",{className:"flex overflow-y-auto",children:[N.jsxs(Mo,{className:"mr-1 text-sm",onClick:()=>{He.downloadZip()},children:[N.jsx("div",{className:"i-ph:code"}),"Download Code"]}),N.jsxs(Mo,{className:"mr-1 text-sm",onClick:b,disabled:n,children:[n?N.jsx("div",{className:"i-ph:spinner"}):N.jsx("div",{className:"i-ph:cloud-arrow-down"}),n?"Syncing...":"Sync Files"]}),N.jsxs(Mo,{className:"mr-1 text-sm",onClick:()=>{He.toggleTerminal(!He.showTerminal.get())},children:[N.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]}),N.jsxs(Mo,{className:"mr-1 text-sm",onClick:()=>{const y=prompt("Please enter a name for your new GitHub repository:","bolt-generated-project");if(!y){alert("Repository name is required. Push to GitHub cancelled.");return}const v=prompt("Please enter your GitHub username:");if(!v){alert("GitHub username is required. Push to GitHub cancelled.");return}const E=prompt("Please enter your GitHub personal access token:");if(!E){alert("GitHub token is required. Push to GitHub cancelled.");return}He.pushToGitHub(y,v,E)},children:[N.jsx("div",{className:"i-ph:github-logo"}),"Push to GitHub"]})]}),N.jsx(Hn,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{He.showWorkbench.set(!1)}})]}),N.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[N.jsx(Cw,{initial:{x:u==="code"?0:"-100%"},animate:{x:u==="code"?0:"-100%"},children:N.jsx(fY,{editorDocument:a,isStreaming:e,selectedFile:o,files:c,unsavedFiles:l,onFileSelect:g,onEditorScroll:_,onEditorChange:f,onFileSave:m,onFileReset:p})}),N.jsx(Cw,{initial:{x:u==="preview"?0:"100%"},animate:{x:u==="preview"?0:"100%"},children:N.jsx(mY,{})})]})]})})})})}),Cw=D.memo(({children:t,...e})=>N.jsx(rr.div,{className:"absolute inset-0",transition:gY,...e,children:t}));function xw(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&e.push(o),i=r+1,r=n.indexOf(",",i)}return e}function yD(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const vY=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EY=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wY={};function Aw(t,e){return(wY.jsx?EY:vY).test(t)}const SY=/[ \t\n\f\r]/g;function TY(t){return typeof t=="object"?t.type==="text"?kw(t.value):!1:kw(t)}function kw(t){return t.replace(SY,"")===""}let Vc=class{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}};Vc.prototype.property={};Vc.prototype.normal={};Vc.prototype.space=null;function vD(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new Vc(n,r,e)}function rc(t){return t.toLowerCase()}let ar=class{constructor(e,n){this.property=e,this.attribute=n}};ar.prototype.space=null;ar.prototype.boolean=!1;ar.prototype.booleanish=!1;ar.prototype.overloadedBoolean=!1;ar.prototype.number=!1;ar.prototype.commaSeparated=!1;ar.prototype.spaceSeparated=!1;ar.prototype.commaOrSpaceSeparated=!1;ar.prototype.mustUseProperty=!1;ar.prototype.defined=!1;let CY=0;const Ge=so(),kt=so(),ED=so(),De=so(),ft=so(),Xo=so(),Dn=so();function so(){return 2**++CY}const l0=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ge,booleanish:kt,commaOrSpaceSeparated:Dn,commaSeparated:Xo,number:De,overloadedBoolean:ED,spaceSeparated:ft},Symbol.toStringTag,{value:"Module"})),Gp=Object.keys(l0);let Ub=class extends ar{constructor(e,n,r,i){let s=-1;if(super(e,n),Rw(this,"space",i),typeof r=="number")for(;++s<Gp.length;){const o=Gp[s];Rw(this,Gp[s],(r&l0[o])===l0[o])}}};Ub.prototype.defined=!0;function Rw(t,e,n){n&&(t[e]=n)}const xY={}.hasOwnProperty;function Ta(t){const e={},n={};let r;for(r in t.properties)if(xY.call(t.properties,r)){const i=t.properties[r],s=new Ub(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[rc(r)]=r,n[rc(s.attribute)]=r}return new Vc(e,n,t.space)}const wD=Ta({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),SD=Ta({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function TD(t,e){return e in t?t[e]:e}function CD(t,e){return TD(t,e.toLowerCase())}const xD=Ta({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:CD,properties:{xmlns:null,xmlnsXLink:null}}),AD=Ta({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:kt,ariaAutoComplete:null,ariaBusy:kt,ariaChecked:kt,ariaColCount:De,ariaColIndex:De,ariaColSpan:De,ariaControls:ft,ariaCurrent:null,ariaDescribedBy:ft,ariaDetails:null,ariaDisabled:kt,ariaDropEffect:ft,ariaErrorMessage:null,ariaExpanded:kt,ariaFlowTo:ft,ariaGrabbed:kt,ariaHasPopup:null,ariaHidden:kt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ft,ariaLevel:De,ariaLive:null,ariaModal:kt,ariaMultiLine:kt,ariaMultiSelectable:kt,ariaOrientation:null,ariaOwns:ft,ariaPlaceholder:null,ariaPosInSet:De,ariaPressed:kt,ariaReadOnly:kt,ariaRelevant:null,ariaRequired:kt,ariaRoleDescription:ft,ariaRowCount:De,ariaRowIndex:De,ariaRowSpan:De,ariaSelected:kt,ariaSetSize:De,ariaSort:null,ariaValueMax:De,ariaValueMin:De,ariaValueNow:De,ariaValueText:null,role:null}}),AY=Ta({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:CD,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xo,acceptCharset:ft,accessKey:ft,action:null,allow:null,allowFullScreen:Ge,allowPaymentRequest:Ge,allowUserMedia:Ge,alt:null,as:null,async:Ge,autoCapitalize:null,autoComplete:ft,autoFocus:Ge,autoPlay:Ge,blocking:ft,capture:null,charSet:null,checked:Ge,cite:null,className:ft,cols:De,colSpan:null,content:null,contentEditable:kt,controls:Ge,controlsList:ft,coords:De|Xo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ge,defer:Ge,dir:null,dirName:null,disabled:Ge,download:ED,draggable:kt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ge,formTarget:null,headers:ft,height:De,hidden:Ge,high:De,href:null,hrefLang:null,htmlFor:ft,httpEquiv:ft,id:null,imageSizes:null,imageSrcSet:null,inert:Ge,inputMode:null,integrity:null,is:null,isMap:Ge,itemId:null,itemProp:ft,itemRef:ft,itemScope:Ge,itemType:ft,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ge,low:De,manifest:null,max:null,maxLength:De,media:null,method:null,min:null,minLength:De,multiple:Ge,muted:Ge,name:null,nonce:null,noModule:Ge,noValidate:Ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ge,optimum:De,pattern:null,ping:ft,placeholder:null,playsInline:Ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ge,referrerPolicy:null,rel:ft,required:Ge,reversed:Ge,rows:De,rowSpan:De,sandbox:ft,scope:null,scoped:Ge,seamless:Ge,selected:Ge,shadowRootClonable:Ge,shadowRootDelegatesFocus:Ge,shadowRootMode:null,shape:null,size:De,sizes:null,slot:null,span:De,spellCheck:kt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:De,step:null,style:null,tabIndex:De,target:null,title:null,translate:null,type:null,typeMustMatch:Ge,useMap:null,value:kt,width:De,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ft,axis:null,background:null,bgColor:null,border:De,borderColor:null,bottomMargin:De,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ge,declare:Ge,event:null,face:null,frame:null,frameBorder:null,hSpace:De,leftMargin:De,link:null,longDesc:null,lowSrc:null,marginHeight:De,marginWidth:De,noResize:Ge,noHref:Ge,noShade:Ge,noWrap:Ge,object:null,profile:null,prompt:null,rev:null,rightMargin:De,rules:null,scheme:null,scrolling:kt,standby:null,summary:null,text:null,topMargin:De,valueType:null,version:null,vAlign:null,vLink:null,vSpace:De,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ge,disableRemotePlayback:Ge,prefix:null,property:null,results:De,security:null,unselectable:null}}),kY=Ta({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:TD,properties:{about:Dn,accentHeight:De,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:De,amplitude:De,arabicForm:null,ascent:De,attributeName:null,attributeType:null,azimuth:De,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:De,by:null,calcMode:null,capHeight:De,className:ft,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:De,diffuseConstant:De,direction:null,display:null,dur:null,divisor:De,dominantBaseline:null,download:Ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:De,enableBackground:null,end:null,event:null,exponent:De,externalResourcesRequired:null,fill:null,fillOpacity:De,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xo,g2:Xo,glyphName:Xo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:De,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:De,horizOriginX:De,horizOriginY:De,id:null,ideographic:De,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:De,k:De,k1:De,k2:De,k3:De,k4:De,kernelMatrix:Dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:De,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:De,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:De,overlineThickness:De,paintOrder:null,panose1:null,path:null,pathLength:De,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ft,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:De,pointsAtY:De,pointsAtZ:De,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dn,rev:Dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dn,requiredFeatures:Dn,requiredFonts:Dn,requiredFormats:Dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:De,specularExponent:De,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:De,strikethroughThickness:De,string:null,stroke:null,strokeDashArray:Dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:De,strokeOpacity:De,strokeWidth:null,style:null,surfaceScale:De,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dn,tabIndex:De,tableValues:null,target:null,targetX:De,targetY:De,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:De,underlineThickness:De,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:De,values:null,vAlphabetic:De,vMathematical:De,vectorEffect:null,vHanging:De,vIdeographic:De,version:null,vertAdvY:De,vertOriginX:De,vertOriginY:De,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:De,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),RY=/^data[-\w.:]+$/i,Pw=/-[a-z]/g,PY=/[A-Z]/g;function Af(t,e){const n=rc(e);let r=e,i=ar;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&RY.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Pw,OY);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Pw.test(s)){let o=s.replace(PY,DY);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Ub}return new i(r,e)}function DY(t){return"-"+t.toLowerCase()}function OY(t){return t.charAt(1).toUpperCase()}const IY={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Wc=vD([SD,wD,xD,AD,AY],"html"),as=vD([SD,wD,xD,AD,kY],"svg");function Dw(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function kD(t){return t.join(" ").trim()}var RD={},Ow=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,LY=/\n/g,MY=/^\s*/,NY=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,BY=/^:\s*/,FY=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,HY=/^[;\s]*/,UY=/^\s+|\s+$/g,jY=`
`,Iw="/",Lw="*",Es="",zY="comment",VY="declaration",WY=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(_){var g=_.match(LY);g&&(n+=g.length);var m=_.lastIndexOf(jY);r=~m?_.length-m:r+_.length}function s(){var _={line:n,column:r};return function(g){return g.position=new o(_),c(),g}}function o(_){this.start=_,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(_){var g=new Error(e.source+":"+n+":"+r+": "+_);if(g.reason=_,g.filename=e.source,g.line=n,g.column=r,g.source=t,!e.silent)throw g}function l(_){var g=_.exec(t);if(g){var m=g[0];return i(m),t=t.slice(m.length),g}}function c(){l(MY)}function u(_){var g;for(_=_||[];g=h();)g!==!1&&_.push(g);return _}function h(){var _=s();if(!(Iw!=t.charAt(0)||Lw!=t.charAt(1))){for(var g=2;Es!=t.charAt(g)&&(Lw!=t.charAt(g)||Iw!=t.charAt(g+1));)++g;if(g+=2,Es===t.charAt(g-1))return a("End of comment missing");var m=t.slice(2,g-2);return r+=2,i(m),t=t.slice(g),r+=2,_({type:zY,comment:m})}}function d(){var _=s(),g=l(NY);if(g){if(h(),!l(BY))return a("property missing ':'");var m=l(FY),p=_({type:VY,property:Mw(g[0].replace(Ow,Es)),value:m?Mw(m[0].replace(Ow,Es)):Es});return l(HY),p}}function f(){var _=[];u(_);for(var g;g=d();)g!==!1&&(_.push(g),u(_));return _}return c(),f()};function Mw(t){return t?t.replace(UY,Es):Es}var GY=hr&&hr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(RD,"__esModule",{value:!0});var $Y=GY(WY);function qY(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,$Y.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Nw=RD.default=qY;const KY=Nw.default||Nw,kf=PD("end"),Qr=PD("start");function PD(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function DD(t){const e=Qr(t),n=kf(t);if(e&&n)return{start:e,end:n}}function vl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Bw(t.position):"start"in t||"end"in t?Bw(t):"line"in t||"column"in t?c0(t):""}function c0(t){return Fw(t&&t.line)+":"+Fw(t&&t.column)}function Bw(t){return c0(t&&t.start)+"-"+c0(t&&t.end)}function Fw(t){return t&&typeof t=="number"?t:1}class dn extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=vl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}dn.prototype.file="";dn.prototype.name="";dn.prototype.reason="";dn.prototype.message="";dn.prototype.stack="";dn.prototype.column=void 0;dn.prototype.line=void 0;dn.prototype.ancestors=void 0;dn.prototype.cause=void 0;dn.prototype.fatal=void 0;dn.prototype.place=void 0;dn.prototype.ruleId=void 0;dn.prototype.source=void 0;const jb={}.hasOwnProperty,YY=new Map,XY=/[A-Z]/g,QY=/-([a-z])/g,JY=new Set(["table","tbody","thead","tfoot","tr"]),ZY=new Set(["td","th"]),OD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function eX(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=lX(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=aX(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?as:Wc,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=ID(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function ID(t,e,n){if(e.type==="element")return tX(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return nX(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return iX(t,e,n);if(e.type==="mdxjsEsm")return rX(t,e);if(e.type==="root")return sX(t,e,n);if(e.type==="text")return oX(t,e)}function tX(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=as,t.schema=i),t.ancestors.push(e);const s=MD(t,e.tagName,!1),o=cX(t,e);let a=Vb(t,e);return JY.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!TY(l):!0})),LD(t,o,s,e),zb(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function nX(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ic(t,e.position)}function rX(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ic(t,e.position)}function iX(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=as,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:MD(t,e.name,!0),o=uX(t,e),a=Vb(t,e);return LD(t,o,s,e),zb(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function sX(t,e,n){const r={};return zb(r,Vb(t,e)),t.create(e,t.Fragment,r,n)}function oX(t,e){return e.value}function LD(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function zb(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function aX(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function lX(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=Qr(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function cX(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&jb.call(e.properties,i)){const s=hX(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&ZY.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function uX(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else ic(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else ic(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Vb(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:YY;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=ID(t,s,o);a!==void 0&&n.push(a)}return n}function hX(t,e,n){const r=Af(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?yD(n):kD(n)),r.property==="style"){let i=typeof n=="object"?n:dX(t,String(n));return t.stylePropertyNameCase==="css"&&(i=fX(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?IY[r.property]||r.property:r.attribute,n]}}function dX(t,e){const n={};try{KY(e,r)}catch(i){if(!t.ignoreInvalidStyle){const s=i,o=new dn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=OD+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(QY,mX)),n[o]=s}}function MD(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Aw(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Aw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return jb.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);ic(t)}function ic(t,e){const n=new dn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=OD+"#cannot-handle-mdx-estrees-without-createevaluater",n}function fX(t){const e={};let n;for(n in t)jb.call(t,n)&&(e[pX(n)]=t[n]);return e}function pX(t){let e=t.replace(XY,gX);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function mX(t,e){return e.toUpperCase()}function gX(t){return"-"+t.toLowerCase()}const $p={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},_X={};function Wb(t,e){const n=_X,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ND(t,r,i)}function ND(t,e,n){if(bX(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Hw(t.children,e,n)}return Array.isArray(t)?Hw(t,e,n):""}function Hw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=ND(t[i],e,n);return r.join("")}function bX(t){return!!(t&&typeof t=="object")}const Uw=document.createElement("i");function Gb(t){const e="&"+t+";";Uw.innerHTML=e;const n=Uw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function nr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Yn(t,e){return t.length>0?(nr(t,t.length,0,e),t):e}const jw={}.hasOwnProperty;function BD(t){const e={};let n=-1;for(;++n<t.length;)yX(e,t[n]);return e}function yX(t,e){let n;for(n in e){const i=(jw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){jw.call(i,o)||(i[o]=[]);const a=s[o];vX(i[o],Array.isArray(a)?a:a?[a]:[])}}}function vX(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);nr(t,0,0,r)}function FD(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function gr(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const gn=ls(/[A-Za-z]/),an=ls(/[\dA-Za-z]/),EX=ls(/[#-'*+\--9=?A-Z^-~]/);function Cd(t){return t!==null&&(t<32||t===127)}const u0=ls(/\d/),wX=ls(/[\dA-Fa-f]/),SX=ls(/[!-/:-@[-`{-~]/);function Fe(t){return t!==null&&t<-2}function ht(t){return t!==null&&(t<0||t===32)}function Qe(t){return t===-2||t===-1||t===32}const Rf=ls(/\p{P}|\p{S}/u),Xs=ls(/\s/);function ls(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ca(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&an(t.charCodeAt(n+1))&&an(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function nt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Qe(l)?(t.enter(n),a(l)):e(l)}function a(l){return Qe(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const TX={tokenize:CX};function CX(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),nt(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Fe(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const xX={tokenize:AX},zw={tokenize:kX};function AX(t){const e=this,n=[];let r=0,i,s,o;return a;function a(y){if(r<n.length){const v=n[r];return e.containerState=v[1],t.attempt(v[0].continuation,l,c)(y)}return c(y)}function l(y){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const v=e.events.length;let E=v,w;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){w=e.events[E][1].end;break}p(r);let T=v;for(;T<e.events.length;)e.events[T][1].end=Object.assign({},w),T++;return nr(e.events,E+1,0,e.events.slice(v)),e.events.length=T,c(y)}return a(y)}function c(y){if(r===n.length){if(!i)return d(y);if(i.currentConstruct&&i.currentConstruct.concrete)return _(y);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(zw,u,h)(y)}function u(y){return i&&b(),p(r),d(y)}function h(y){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,_(y)}function d(y){return e.containerState={},t.attempt(zw,f,_)(y)}function f(y){return r++,n.push([e.currentConstruct,e.containerState]),d(y)}function _(y){if(y===null){i&&b(),p(0),t.consume(y);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),g(y)}function g(y){if(y===null){m(t.exit("chunkFlow"),!0),p(0),t.consume(y);return}return Fe(y)?(t.consume(y),m(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(y),g)}function m(y,v){const E=e.sliceStream(y);if(v&&E.push(null),y.previous=s,s&&(s.next=y),s=y,i.defineSkip(y.start),i.write(E),e.parser.lazy[y.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const T=e.events.length;let S=T,x,R;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){if(x){R=e.events[S][1].end;break}x=!0}for(p(r),w=T;w<e.events.length;)e.events[w][1].end=Object.assign({},R),w++;nr(e.events,S+1,0,e.events.slice(T)),e.events.length=w}}function p(y){let v=n.length;for(;v-- >y;){const E=n[v];e.containerState=E[1],E[0].exit.call(e,t)}n.length=y}function b(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function kX(t,e,n){return nt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xd(t){if(t===null||ht(t)||Xs(t))return 1;if(Rf(t))return 2}function Pf(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const h0={name:"attention",tokenize:PX,resolveAll:RX};function RX(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h=Object.assign({},t[r][1].end),d=Object.assign({},t[n][1].start);Vw(h,-l),Vw(d,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},t[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:d},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},t[r][1].end),end:Object.assign({},t[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},t[r][1].end=Object.assign({},o.start),t[n][1].start=Object.assign({},a.end),c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Yn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Yn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Yn(c,Pf(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Yn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Yn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,nr(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function PX(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=xd(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=xd(l),h=!u||u===2&&i||n.includes(l),d=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!d)),c._close=!!(s===42?d:d&&(u||!h)),e(l)}}function Vw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const DX={name:"autolink",tokenize:OX};function OX(t,e,n){let r=0;return i;function i(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return gn(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||an(f)?(r=1,a(f)):c(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||an(f))&&r++<32?(t.consume(f),a):(r=0,c(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||Cd(f)?n(f):(t.consume(f),l)}function c(f){return f===64?(t.consume(f),u):EX(f)?(t.consume(f),c):n(f)}function u(f){return an(f)?h(f):n(f)}function h(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):d(f)}function d(f){if((f===45||an(f))&&r++<63){const _=f===45?d:h;return t.consume(f),_}return n(f)}}const Gc={tokenize:IX,partial:!0};function IX(t,e,n){return r;function r(s){return Qe(s)?nt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Fe(s)?e(s):n(s)}}const HD={name:"blockQuote",tokenize:LX,continuation:{tokenize:MX},exit:NX};function LX(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Qe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function MX(t,e,n){const r=this;return i;function i(o){return Qe(o)?nt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(HD,e,n)(o)}}function NX(t){t.exit("blockQuote")}const UD={name:"characterEscape",tokenize:BX};function BX(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return SX(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const jD={name:"characterReference",tokenize:FX};function FX(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=an,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=wX,u):(t.enter("characterReferenceValue"),s=7,o=u0,u(h))}function u(h){if(h===59&&i){const d=t.exit("characterReferenceValue");return o===an&&!Gb(r.sliceSerialize(d))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const Ww={tokenize:UX,partial:!0},Gw={name:"codeFenced",tokenize:HX,concrete:!0};function HX(t,e,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return l;function l(w){return c(w)}function c(w){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=w,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(w)}function u(w){return w===a?(o++,t.consume(w),u):o<3?n(w):(t.exit("codeFencedFenceSequence"),Qe(w)?nt(t,h,"whitespace")(w):h(w))}function h(w){return w===null||Fe(w)?(t.exit("codeFencedFence"),r.interrupt?e(w):t.check(Ww,g,v)(w)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),d(w))}function d(w){return w===null||Fe(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(w)):Qe(w)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),nt(t,f,"whitespace")(w)):w===96&&w===a?n(w):(t.consume(w),d)}function f(w){return w===null||Fe(w)?h(w):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(w))}function _(w){return w===null||Fe(w)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(w)):w===96&&w===a?n(w):(t.consume(w),_)}function g(w){return t.attempt(i,v,m)(w)}function m(w){return t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),p}function p(w){return s>0&&Qe(w)?nt(t,b,"linePrefix",s+1)(w):b(w)}function b(w){return w===null||Fe(w)?t.check(Ww,g,v)(w):(t.enter("codeFlowValue"),y(w))}function y(w){return w===null||Fe(w)?(t.exit("codeFlowValue"),b(w)):(t.consume(w),y)}function v(w){return t.exit("codeFenced"),e(w)}function E(w,T,S){let x=0;return R;function R(W){return w.enter("lineEnding"),w.consume(W),w.exit("lineEnding"),U}function U(W){return w.enter("codeFencedFence"),Qe(W)?nt(w,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):P(W)}function P(W){return W===a?(w.enter("codeFencedFenceSequence"),B(W)):S(W)}function B(W){return W===a?(x++,w.consume(W),B):x>=o?(w.exit("codeFencedFenceSequence"),Qe(W)?nt(w,A,"whitespace")(W):A(W)):S(W)}function A(W){return W===null||Fe(W)?(w.exit("codeFencedFence"),T(W)):S(W)}}}function UX(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const qp={name:"codeIndented",tokenize:zX},jX={tokenize:VX,partial:!0};function zX(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),nt(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Fe(c)?t.attempt(jX,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Fe(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function VX(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):nt(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Fe(o)?i(o):n(o)}}const WX={name:"codeText",tokenize:qX,resolve:GX,previous:$X};function GX(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function $X(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function qX(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):Fe(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||Fe(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class KX{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Wa(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Wa(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Wa(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Wa(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Wa(this.left,n.reverse())}}}function Wa(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function zD(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new KX(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,YX(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},u.get(i)[1].start),a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return nr(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function YX(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],c={};let u,h,d=-1,f=n,_=0,g=0;const m=[g];for(;f;){for(;t.get(++i)[1]!==f;);s.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(g=d+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),d=m.length;d--;){const p=a.slice(m[d],m[d+1]),b=s.pop();l.push([b,b+p.length-1]),t.splice(b,2,p)}for(l.reverse(),d=-1;++d<l.length;)c[_+l[d][0]]=_+l[d][1],_+=l[d][1]-l[d][0]-1;return c}const XX={tokenize:ZX,resolve:JX},QX={tokenize:eQ,partial:!0};function JX(t){return zD(t),t}function ZX(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Fe(a)?t.check(QX,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function eQ(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),nt(t,s,"linePrefix")}function s(o){if(o===null||Fe(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function VD(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(p){return p===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(p),t.exit(s),d):p===null||p===32||p===41||Cd(p)?n(p):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),g(p))}function d(p){return p===62?(t.enter(s),t.consume(p),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(p))}function f(p){return p===62?(t.exit("chunkString"),t.exit(a),d(p)):p===null||p===60||Fe(p)?n(p):(t.consume(p),p===92?_:f)}function _(p){return p===60||p===62||p===92?(t.consume(p),f):f(p)}function g(p){return!u&&(p===null||p===41||ht(p))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(p)):u<c&&p===40?(t.consume(p),u++,g):p===41?(t.consume(p),u--,g):p===null||p===32||p===40||Cd(p)?n(p):(t.consume(p),p===92?m:g)}function m(p){return p===40||p===41||p===92?(t.consume(p),g):g(p)}}function WD(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(f){return t.enter(r),t.enter(i),t.consume(f),t.exit(i),t.enter(s),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):Fe(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||Fe(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),l||(l=!Qe(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(t.consume(f),a++,h):h(f)}}function GD(t,e,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(t.enter(r),t.enter(i),t.consume(d),t.exit(i),o=d===40?41:d,l):n(d)}function l(d){return d===o?(t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):(t.enter(s),c(d))}function c(d){return d===o?(t.exit(s),l(o)):d===null?n(d):Fe(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),nt(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===o||d===null||Fe(d)?(t.exit("chunkString"),c(d)):(t.consume(d),d===92?h:u)}function h(d){return d===o||d===92?(t.consume(d),u):u(d)}}function El(t,e){let n;return r;function r(i){return Fe(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Qe(i)?nt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const tQ={name:"definition",tokenize:rQ},nQ={tokenize:iQ,partial:!0};function rQ(t,e,n){const r=this;let i;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return WD.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return i=gr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return ht(f)?El(t,c)(f):c(f)}function c(f){return VD(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(nQ,h,h)(f)}function h(f){return Qe(f)?nt(t,d,"whitespace")(f):d(f)}function d(f){return f===null||Fe(f)?(t.exit("definition"),r.parser.defined.push(i),e(f)):n(f)}}function iQ(t,e,n){return r;function r(a){return ht(a)?El(t,i)(a):n(a)}function i(a){return GD(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Qe(a)?nt(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Fe(a)?e(a):n(a)}}const sQ={name:"hardBreakEscape",tokenize:oQ};function oQ(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Fe(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const aQ={name:"headingAtx",tokenize:cQ,resolve:lQ};function lQ(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},nr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function cQ(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||ht(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Fe(u)?(t.exit("atxHeading"),e(u)):Qe(u)?nt(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||ht(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const uQ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$w=["pre","script","style","textarea"],hQ={name:"htmlFlow",tokenize:mQ,resolveTo:pQ,concrete:!0},dQ={tokenize:_Q,partial:!0},fQ={tokenize:gQ,partial:!0};function pQ(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function mQ(t,e,n){const r=this;let i,s,o,a,l;return c;function c(F){return u(F)}function u(F){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(F),h}function h(F){return F===33?(t.consume(F),d):F===47?(t.consume(F),s=!0,g):F===63?(t.consume(F),i=3,r.interrupt?e:I):gn(F)?(t.consume(F),o=String.fromCharCode(F),m):n(F)}function d(F){return F===45?(t.consume(F),i=2,f):F===91?(t.consume(F),i=5,a=0,_):gn(F)?(t.consume(F),i=4,r.interrupt?e:I):n(F)}function f(F){return F===45?(t.consume(F),r.interrupt?e:I):n(F)}function _(F){const J="CDATA[";return F===J.charCodeAt(a++)?(t.consume(F),a===J.length?r.interrupt?e:P:_):n(F)}function g(F){return gn(F)?(t.consume(F),o=String.fromCharCode(F),m):n(F)}function m(F){if(F===null||F===47||F===62||ht(F)){const J=F===47,te=o.toLowerCase();return!J&&!s&&$w.includes(te)?(i=1,r.interrupt?e(F):P(F)):uQ.includes(o.toLowerCase())?(i=6,J?(t.consume(F),p):r.interrupt?e(F):P(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?b(F):y(F))}return F===45||an(F)?(t.consume(F),o+=String.fromCharCode(F),m):n(F)}function p(F){return F===62?(t.consume(F),r.interrupt?e:P):n(F)}function b(F){return Qe(F)?(t.consume(F),b):R(F)}function y(F){return F===47?(t.consume(F),R):F===58||F===95||gn(F)?(t.consume(F),v):Qe(F)?(t.consume(F),y):R(F)}function v(F){return F===45||F===46||F===58||F===95||an(F)?(t.consume(F),v):E(F)}function E(F){return F===61?(t.consume(F),w):Qe(F)?(t.consume(F),E):y(F)}function w(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),l=F,T):Qe(F)?(t.consume(F),w):S(F)}function T(F){return F===l?(t.consume(F),l=null,x):F===null||Fe(F)?n(F):(t.consume(F),T)}function S(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||ht(F)?E(F):(t.consume(F),S)}function x(F){return F===47||F===62||Qe(F)?y(F):n(F)}function R(F){return F===62?(t.consume(F),U):n(F)}function U(F){return F===null||Fe(F)?P(F):Qe(F)?(t.consume(F),U):n(F)}function P(F){return F===45&&i===2?(t.consume(F),ne):F===60&&i===1?(t.consume(F),Q):F===62&&i===4?(t.consume(F),j):F===63&&i===3?(t.consume(F),I):F===93&&i===5?(t.consume(F),L):Fe(F)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(dQ,H,B)(F)):F===null||Fe(F)?(t.exit("htmlFlowData"),B(F)):(t.consume(F),P)}function B(F){return t.check(fQ,A,H)(F)}function A(F){return t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),W}function W(F){return F===null||Fe(F)?B(F):(t.enter("htmlFlowData"),P(F))}function ne(F){return F===45?(t.consume(F),I):P(F)}function Q(F){return F===47?(t.consume(F),o="",ie):P(F)}function ie(F){if(F===62){const J=o.toLowerCase();return $w.includes(J)?(t.consume(F),j):P(F)}return gn(F)&&o.length<8?(t.consume(F),o+=String.fromCharCode(F),ie):P(F)}function L(F){return F===93?(t.consume(F),I):P(F)}function I(F){return F===62?(t.consume(F),j):F===45&&i===2?(t.consume(F),I):P(F)}function j(F){return F===null||Fe(F)?(t.exit("htmlFlowData"),H(F)):(t.consume(F),j)}function H(F){return t.exit("htmlFlow"),e(F)}}function gQ(t,e,n){const r=this;return i;function i(o){return Fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function _Q(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Gc,e,n)}}const bQ={name:"htmlText",tokenize:yQ};function yQ(t,e,n){const r=this;let i,s,o;return a;function a(I){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(I),l}function l(I){return I===33?(t.consume(I),c):I===47?(t.consume(I),E):I===63?(t.consume(I),y):gn(I)?(t.consume(I),S):n(I)}function c(I){return I===45?(t.consume(I),u):I===91?(t.consume(I),s=0,_):gn(I)?(t.consume(I),b):n(I)}function u(I){return I===45?(t.consume(I),f):n(I)}function h(I){return I===null?n(I):I===45?(t.consume(I),d):Fe(I)?(o=h,Q(I)):(t.consume(I),h)}function d(I){return I===45?(t.consume(I),f):h(I)}function f(I){return I===62?ne(I):I===45?d(I):h(I)}function _(I){const j="CDATA[";return I===j.charCodeAt(s++)?(t.consume(I),s===j.length?g:_):n(I)}function g(I){return I===null?n(I):I===93?(t.consume(I),m):Fe(I)?(o=g,Q(I)):(t.consume(I),g)}function m(I){return I===93?(t.consume(I),p):g(I)}function p(I){return I===62?ne(I):I===93?(t.consume(I),p):g(I)}function b(I){return I===null||I===62?ne(I):Fe(I)?(o=b,Q(I)):(t.consume(I),b)}function y(I){return I===null?n(I):I===63?(t.consume(I),v):Fe(I)?(o=y,Q(I)):(t.consume(I),y)}function v(I){return I===62?ne(I):y(I)}function E(I){return gn(I)?(t.consume(I),w):n(I)}function w(I){return I===45||an(I)?(t.consume(I),w):T(I)}function T(I){return Fe(I)?(o=T,Q(I)):Qe(I)?(t.consume(I),T):ne(I)}function S(I){return I===45||an(I)?(t.consume(I),S):I===47||I===62||ht(I)?x(I):n(I)}function x(I){return I===47?(t.consume(I),ne):I===58||I===95||gn(I)?(t.consume(I),R):Fe(I)?(o=x,Q(I)):Qe(I)?(t.consume(I),x):ne(I)}function R(I){return I===45||I===46||I===58||I===95||an(I)?(t.consume(I),R):U(I)}function U(I){return I===61?(t.consume(I),P):Fe(I)?(o=U,Q(I)):Qe(I)?(t.consume(I),U):x(I)}function P(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),i=I,B):Fe(I)?(o=P,Q(I)):Qe(I)?(t.consume(I),P):(t.consume(I),A)}function B(I){return I===i?(t.consume(I),i=void 0,W):I===null?n(I):Fe(I)?(o=B,Q(I)):(t.consume(I),B)}function A(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||ht(I)?x(I):(t.consume(I),A)}function W(I){return I===47||I===62||ht(I)?x(I):n(I)}function ne(I){return I===62?(t.consume(I),t.exit("htmlTextData"),t.exit("htmlText"),e):n(I)}function Q(I){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),ie}function ie(I){return Qe(I)?nt(t,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):L(I)}function L(I){return t.enter("htmlTextData"),o(I)}}const $b={name:"labelEnd",tokenize:CQ,resolveTo:TQ,resolveAll:SQ},vQ={tokenize:xQ},EQ={tokenize:AQ},wQ={tokenize:kQ};function SQ(t){let e=-1;for(;++e<t.length;){const n=t[e][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++)}return t}function TQ(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)},c={type:"label",start:Object.assign({},t[s][1].start),end:Object.assign({},t[o][1].end)},u={type:"labelText",start:Object.assign({},t[s+r+2][1].end),end:Object.assign({},t[o-2][1].start)};return a=[["enter",l,e],["enter",c,e]],a=Yn(a,t.slice(s+1,s+r+3)),a=Yn(a,[["enter",u,e]]),a=Yn(a,Pf(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Yn(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Yn(a,t.slice(o+1)),a=Yn(a,[["exit",l,e]]),nr(t,s,t.length,a),t}function CQ(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?h(d):(o=r.parser.defined.includes(gr(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelEnd"),l):n(d)}function l(d){return d===40?t.attempt(vQ,u,o?u:h)(d):d===91?t.attempt(EQ,u,o?c:h)(d):o?u(d):h(d)}function c(d){return t.attempt(wQ,u,h)(d)}function u(d){return e(d)}function h(d){return s._balanced=!0,n(d)}}function xQ(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return ht(h)?El(t,s)(h):s(h)}function s(h){return h===41?u(h):VD(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return ht(h)?El(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?GD(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return ht(h)?El(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function AQ(t,e,n){const r=this;return i;function i(a){return WD.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(gr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function kQ(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const RQ={name:"labelStartImage",tokenize:PQ,resolveAll:$b.resolveAll};function PQ(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const DQ={name:"labelStartLink",tokenize:OQ,resolveAll:$b.resolveAll};function OQ(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Kp={name:"lineEnding",tokenize:IQ};function IQ(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),nt(t,e,"linePrefix")}}const Th={name:"thematicBreak",tokenize:LQ};function LQ(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Fe(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Qe(c)?nt(t,a,"whitespace")(c):a(c))}}const En={name:"list",tokenize:BQ,continuation:{tokenize:FQ},exit:UQ},MQ={tokenize:jQ,partial:!0},NQ={tokenize:HQ,partial:!0};function BQ(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(f){const _=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:u0(f)){if(r.containerState.type||(r.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Th,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return u0(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Gc,r.interrupt?n:u,t.attempt(MQ,d,h))}function u(f){return r.containerState.initialBlankLine=!0,s++,d(f)}function h(f){return Qe(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),d):n(f)}function d(f){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function FQ(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Gc,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,nt(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Qe(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(NQ,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,nt(t,t.attempt(En,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function HQ(t,e,n){const r=this;return nt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function UQ(t){t.exit(this.containerState.type)}function jQ(t,e,n){const r=this;return nt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Qe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const qw={name:"setextUnderline",tokenize:VQ,resolveTo:zQ};function zQ(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},t[i][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[s][1].end)):t[r][1]=o,t.push(["exit",o,e]),t}function VQ(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Qe(c)?nt(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Fe(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const WQ={tokenize:GQ};function GQ(t){const e=this,n=t.attempt(Gc,r,t.attempt(this.parser.constructs.flowInitial,i,nt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(XX,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const $Q={resolveAll:qD()},qQ=$D("string"),KQ=$D("text");function $D(t){return{tokenize:e,resolveAll:qD(t==="text"?YQ:void 0)};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function qD(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function YQ(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}function XQ(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:b,enter:y,exit:v,attempt:T(E),check:T(w),interrupt:T(w,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:f,sliceSerialize:d,now:_,defineSkip:g,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(U){return o=Yn(o,U),m(),o[o.length-1]!==null?[]:(S(e,0),c.events=Pf(s,c.events,c),c.events)}function d(U,P){return JQ(f(U),P)}function f(U){return QQ(o,U)}function _(){const{line:U,column:P,offset:B,_index:A,_bufferIndex:W}=r;return{line:U,column:P,offset:B,_index:A,_bufferIndex:W}}function g(U){i[U.line]=U.column,R()}function m(){let U;for(;r._index<o.length;){const P=o[r._index];if(typeof P=="string")for(U=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===U&&r._bufferIndex<P.length;)p(P.charCodeAt(r._bufferIndex));else p(P)}}function p(U){u=u(U)}function b(U){Fe(U)?(r.line++,r.column=1,r.offset+=U===-3?2:1,R()):U!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=U}function y(U,P){const B=P||{};return B.type=U,B.start=_(),c.events.push(["enter",B,c]),a.push(B),B}function v(U){const P=a.pop();return P.end=_(),c.events.push(["exit",P,c]),P}function E(U,P){S(U,P.from)}function w(U,P){P.restore()}function T(U,P){return B;function B(A,W,ne){let Q,ie,L,I;return Array.isArray(A)?H(A):"tokenize"in A?H([A]):j(A);function j(fe){return Z;function Z(V){const ue=V!==null&&fe[V],ge=V!==null&&fe.null,Ee=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return H(Ee)(V)}}function H(fe){return Q=fe,ie=0,fe.length===0?ne:F(fe[ie])}function F(fe){return Z;function Z(V){return I=x(),L=fe,fe.partial||(c.currentConstruct=fe),fe.name&&c.parser.constructs.disable.null.includes(fe.name)?te():fe.tokenize.call(P?Object.assign(Object.create(c),P):c,l,J,te)(V)}}function J(fe){return U(L,I),W}function te(fe){return I.restore(),++ie<Q.length?F(Q[ie]):ne}}}function S(U,P){U.resolveAll&&!s.includes(U)&&s.push(U),U.resolve&&nr(c.events,P,c.events.length-P,U.resolve(c.events.slice(P),c)),U.resolveTo&&(c.events=U.resolveTo(c.events,c))}function x(){const U=_(),P=c.previous,B=c.currentConstruct,A=c.events.length,W=Array.from(a);return{restore:ne,from:A};function ne(){r=U,c.previous=P,c.currentConstruct=B,c.events.length=A,a=W,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function QQ(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function JQ(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const ZQ={42:En,43:En,45:En,48:En,49:En,50:En,51:En,52:En,53:En,54:En,55:En,56:En,57:En,62:HD},eJ={91:tQ},tJ={[-2]:qp,[-1]:qp,32:qp},nJ={35:aQ,42:Th,45:[qw,Th],60:hQ,61:qw,95:Th,96:Gw,126:Gw},rJ={38:jD,92:UD},iJ={[-5]:Kp,[-4]:Kp,[-3]:Kp,33:RQ,38:jD,42:h0,60:[DX,bQ],91:DQ,92:[sQ,UD],93:$b,95:h0,96:WX},sJ={null:[h0,$Q]},oJ={null:[42,95]},aJ={null:[]},lJ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:oJ,contentInitial:eJ,disable:aJ,document:ZQ,flow:nJ,flowInitial:tJ,insideSpan:sJ,string:rJ,text:iJ},Symbol.toStringTag,{value:"Module"}));function cJ(t){const n=BD([lJ,...(t||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(TX),document:i(xX),flow:i(WQ),string:i(qQ),text:i(KQ)};return r;function i(s){return o;function o(a){return XQ(r,s,a)}}}function uJ(t){for(;!zD(t););return t}const Kw=/[\0\t\n\r]/g;function hJ(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,d,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(Kw.lastIndex=h,c=Kw.exec(s),d=c&&c.index!==void 0?c.index:s.length,f=s.charCodeAt(d),!c){e=s.slice(h);break}if(f===10&&h===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<d&&(l.push(s.slice(h,d)),t+=d-h),f){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=d+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const dJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fJ(t){return t.replace(dJ,pJ)}function pJ(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return FD(n.slice(s?2:1),s?16:10)}return Gb(n)||t}const KD={}.hasOwnProperty;function mJ(t,e,n){return typeof e!="string"&&(n=e,e=void 0),gJ(n)(uJ(cJ(n).document().write(hJ()(t,e,!0))))}function gJ(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(re),autolinkProtocol:x,autolinkEmail:x,atxHeading:s(se),blockQuote:s(ge),characterEscape:x,characterReference:x,codeFenced:s(Ee),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ee,o),codeText:s(me,o),codeTextData:x,data:x,codeFlowValue:x,definition:s(we),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(M),hardBreakEscape:s(le),hardBreakTrailing:s(le),htmlFlow:s(G,o),htmlFlowData:x,htmlText:s(G,o),htmlTextData:x,image:s(q),label:o,link:s(re),listItem:s(ve),listItemValue:d,listOrdered:s(_e,h),listUnordered:s(_e),paragraph:s(he),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(se),strong:s(xe),thematicBreak:s(Te)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:ue,autolinkProtocol:V,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:fe,characterReference:Z,codeFenced:l(m),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:_,codeFlowValue:R,codeIndented:l(p),codeText:l(W),codeTextData:R,data:R,definition:l(),definitionDestinationString:v,definitionLabelString:b,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(B),htmlFlowData:R,htmlText:l(A),htmlTextData:R,image:l(Q),label:L,labelText:ie,lineEnding:U,link:l(ne),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:J,resourceDestinationString:I,resourceTitleString:j,resource:H,setextHeading:l(S),setextHeadingLineSequence:T,setextHeadingText:w,strong:l(),thematicBreak:l()}};YD(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ce){let Ce={type:"root",children:[]};const ke={stack:[Ce],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},Be=[];let z=-1;for(;++z<ce.length;)if(ce[z][1].type==="listOrdered"||ce[z][1].type==="listUnordered")if(ce[z][0]==="enter")Be.push(z);else{const k=Be.pop();z=i(ce,k,z)}for(z=-1;++z<ce.length;){const k=e[ce[z][0]];KD.call(k,ce[z][1].type)&&k[ce[z][1].type].call(Object.assign({sliceSerialize:ce[z][2].sliceSerialize},ke),ce[z][1])}if(ke.tokenStack.length>0){const k=ke.tokenStack[ke.tokenStack.length-1];(k[1]||Yw).call(ke,void 0,k[0])}for(Ce.position={start:Si(ce.length>0?ce[0][1].start:{line:1,column:1,offset:0}),end:Si(ce.length>0?ce[ce.length-2][1].end:{line:1,column:1,offset:0})},z=-1;++z<e.transforms.length;)Ce=e.transforms[z](Ce)||Ce;return Ce}function i(ce,Ce,ke){let Be=Ce-1,z=-1,k=!1,O,K,oe,pe;for(;++Be<=ke;){const ye=ce[Be];switch(ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ye[0]==="enter"?z++:z--,pe=void 0;break}case"lineEndingBlank":{ye[0]==="enter"&&(O&&!pe&&!z&&!oe&&(oe=Be),pe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pe=void 0}if(!z&&ye[0]==="enter"&&ye[1].type==="listItemPrefix"||z===-1&&ye[0]==="exit"&&(ye[1].type==="listUnordered"||ye[1].type==="listOrdered")){if(O){let Ve=Be;for(K=void 0;Ve--;){const et=ce[Ve];if(et[1].type==="lineEnding"||et[1].type==="lineEndingBlank"){if(et[0]==="exit")continue;K&&(ce[K][1].type="lineEndingBlank",k=!0),et[1].type="lineEnding",K=Ve}else if(!(et[1].type==="linePrefix"||et[1].type==="blockQuotePrefix"||et[1].type==="blockQuotePrefixWhitespace"||et[1].type==="blockQuoteMarker"||et[1].type==="listItemIndent"))break}oe&&(!K||oe<K)&&(O._spread=!0),O.end=Object.assign({},K?ce[K][1].start:ye[1].end),ce.splice(K||Be,0,["exit",O,ye[2]]),Be++,ke++}if(ye[1].type==="listItemPrefix"){const Ve={type:"listItem",_spread:!1,start:Object.assign({},ye[1].start),end:void 0};O=Ve,ce.splice(Be,0,["enter",Ve,ye[2]]),Be++,ke++,oe=void 0,pe=!0}}}return ce[Ce][1]._spread=k,ke}function s(ce,Ce){return ke;function ke(Be){a.call(this,ce(Be),Be),Ce&&Ce.call(this,Be)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ce,Ce,ke){this.stack[this.stack.length-1].children.push(ce),this.stack.push(ce),this.tokenStack.push([Ce,ke]),ce.position={start:Si(Ce.start),end:void 0}}function l(ce){return Ce;function Ce(ke){ce&&ce.call(this,ke),c.call(this,ke)}}function c(ce,Ce){const ke=this.stack.pop(),Be=this.tokenStack.pop();if(Be)Be[0].type!==ce.type&&(Ce?Ce.call(this,ce,Be[0]):(Be[1]||Yw).call(this,ce,Be[0]));else throw new Error("Cannot close `"+ce.type+"` ("+vl({start:ce.start,end:ce.end})+"): its not open");ke.position.end=Si(ce.end)}function u(){return Wb(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(ce){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(ce),10),this.data.expectingFirstListItemValue=void 0}}function f(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=ce}function _(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=ce}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ce.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function p(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ce.replace(/(\r?\n|\r)$/g,"")}function b(ce){const Ce=this.resume(),ke=this.stack[this.stack.length-1];ke.label=Ce,ke.identifier=gr(this.sliceSerialize(ce)).toLowerCase()}function y(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ce}function v(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ce}function E(ce){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const ke=this.sliceSerialize(ce).length;Ce.depth=ke}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function T(ce){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(ce).codePointAt(0)===61?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function x(ce){const ke=this.stack[this.stack.length-1].children;let Be=ke[ke.length-1];(!Be||Be.type!=="text")&&(Be=Re(),Be.position={start:Si(ce.start),end:void 0},ke.push(Be)),this.stack.push(Be)}function R(ce){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(ce),Ce.position.end=Si(ce.end)}function U(ce){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=Ce.children[Ce.children.length-1];ke.position.end=Si(ce.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ce.type)&&(x.call(this,ce),R.call(this,ce))}function P(){this.data.atHardBreak=!0}function B(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ce}function A(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ce}function W(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=ce}function ne(){const ce=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ce.type+="Reference",ce.referenceType=Ce,delete ce.url,delete ce.title}else delete ce.identifier,delete ce.label;this.data.referenceType=void 0}function Q(){const ce=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";ce.type+="Reference",ce.referenceType=Ce,delete ce.url,delete ce.title}else delete ce.identifier,delete ce.label;this.data.referenceType=void 0}function ie(ce){const Ce=this.sliceSerialize(ce),ke=this.stack[this.stack.length-2];ke.label=fJ(Ce),ke.identifier=gr(Ce).toLowerCase()}function L(){const ce=this.stack[this.stack.length-1],Ce=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const Be=ce.children;ke.children=Be}else ke.alt=Ce}function I(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=ce}function j(){const ce=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=ce}function H(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function J(ce){const Ce=this.resume(),ke=this.stack[this.stack.length-1];ke.label=Ce,ke.identifier=gr(this.sliceSerialize(ce)).toLowerCase(),this.data.referenceType="full"}function te(ce){this.data.characterReferenceType=ce.type}function fe(ce){const Ce=this.sliceSerialize(ce),ke=this.data.characterReferenceType;let Be;ke?(Be=FD(Ce,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Be=Gb(Ce);const z=this.stack[this.stack.length-1];z.value+=Be}function Z(ce){const Ce=this.stack.pop();Ce.position.end=Si(ce.end)}function V(ce){R.call(this,ce);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(ce)}function ue(ce){R.call(this,ce);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(ce)}function ge(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function we(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function M(){return{type:"emphasis",children:[]}}function se(){return{type:"heading",depth:0,children:[]}}function le(){return{type:"break"}}function G(){return{type:"html",value:""}}function q(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function _e(ce){return{type:"list",ordered:ce.type==="listOrdered",start:null,spread:ce._spread,children:[]}}function ve(ce){return{type:"listItem",spread:ce._spread,checked:null,children:[]}}function he(){return{type:"paragraph",children:[]}}function xe(){return{type:"strong",children:[]}}function Re(){return{type:"text",value:""}}function Te(){return{type:"thematicBreak"}}}function Si(t){return{line:t.line,column:t.column,offset:t.offset}}function YD(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?YD(t,r):_J(t,r)}}function _J(t,e){let n;for(n in e)if(KD.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Yw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+vl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+vl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+vl({start:e.start,end:e.end})+") is still open")}function bJ(t){const e=this;e.parser=n;function n(r){return mJ(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function yJ(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function vJ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function EJ(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function wJ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SJ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TJ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Ca(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function CJ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function xJ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function XD(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function AJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return XD(t,e);const i={src:Ca(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function kJ(t,e){const n={src:Ca(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function RJ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function PJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return XD(t,e);const i={href:Ca(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function DJ(t,e){const n={href:Ca(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function OJ(t,e,n){const r=t.all(e),i=n?IJ(n):QD(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function IJ(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=QD(n[r])}return e}function QD(t){const e=t.spread;return e??t.children.length>1}function LJ(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function MJ(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function NJ(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function BJ(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FJ(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=Qr(e.children[1]),l=kf(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function HJ(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],d={},f=o?o[l]:void 0;f&&(d.align=f);let _={type:"element",tagName:s,properties:d,children:[]};h&&(_.children=t.all(h),t.patch(h,_),_=t.applyData(h,_)),c.push(_)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function UJ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Xw=9,Qw=32;function jJ(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Jw(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Jw(e.slice(i),i>0,!1)),s.join("")}function Jw(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===Xw||s===Qw;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===Xw||s===Qw;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function zJ(t,e){const n={type:"text",value:jJ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function VJ(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const WJ={blockquote:yJ,break:vJ,code:EJ,delete:wJ,emphasis:SJ,footnoteReference:TJ,heading:CJ,html:xJ,imageReference:AJ,image:kJ,inlineCode:RJ,linkReference:PJ,link:DJ,listItem:OJ,list:LJ,paragraph:MJ,root:NJ,strong:BJ,table:FJ,tableCell:UJ,tableRow:HJ,text:zJ,thematicBreak:VJ,toml:Vu,yaml:Vu,definition:Vu,footnoteDefinition:Vu};function Vu(){}const JD=-1,Df=0,Ad=1,kd=2,qb=3,Kb=4,Yb=5,Xb=6,ZD=7,eO=8,Zw=typeof self=="object"?self:globalThis,GJ=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Df:case JD:return n(o,i);case Ad:{const a=n([],i);for(const l of o)a.push(r(l));return a}case kd:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case qb:return n(new Date(o),i);case Kb:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Yb:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Xb:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case ZD:{const{name:a,message:l}=o;return n(new Zw[a](l),i)}case eO:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Zw[s](o),i)};return r},eS=t=>GJ(new Map,t)(0),yo="",{toString:$J}={},{keys:qJ}=Object,Ga=t=>{const e=typeof t;if(e!=="object"||!t)return[Df,e];const n=$J.call(t).slice(8,-1);switch(n){case"Array":return[Ad,yo];case"Object":return[kd,yo];case"Date":return[qb,yo];case"RegExp":return[Kb,yo];case"Map":return[Yb,yo];case"Set":return[Xb,yo]}return n.includes("Array")?[Ad,n]:n.includes("Error")?[ZD,n]:[kd,n]},Wu=([t,e])=>t===Df&&(e==="function"||e==="symbol"),KJ=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Ga(o);switch(a){case Df:{let u=o;switch(l){case"bigint":a=eO,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([JD],o)}return i([a,u],o)}case Ad:{if(l)return i([l,[...o]],o);const u=[],h=i([a,u],o);for(const d of o)u.push(s(d));return h}case kd:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const d of qJ(o))(t||!Wu(Ga(o[d])))&&u.push([s(d),s(o[d])]);return h}case qb:return i([a,o.toISOString()],o);case Kb:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case Yb:{const u=[],h=i([a,u],o);for(const[d,f]of o)(t||!(Wu(Ga(d))||Wu(Ga(f))))&&u.push([s(d),s(f)]);return h}case Xb:{const u=[],h=i([a,u],o);for(const d of o)(t||!Wu(Ga(d)))&&u.push(s(d));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},tS=(t,{json:e,lossy:n}={})=>{const r=[];return KJ(!(e||n),!!e,new Map,r)(t),r},Qs=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?eS(tS(t,e)):structuredClone(t):(t,e)=>eS(tS(t,e));function YJ(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function XJ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function QJ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||YJ,r=t.options.footnoteBackLabel||XJ,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),d=Ca(h.toLowerCase());let f=0;const _=[],g=t.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){_.length>0&&_.push({type:"text",value:" "});let b=typeof n=="string"?n:n(l,f);typeof b=="string"&&(b={type:"text",value:b}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const m=u[u.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const b=m.children[m.children.length-1];b&&b.type==="text"?b.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(..._)}else u.push(..._);const p={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:t.wrap(u,!0)};t.patch(c,p),a.push(p)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Qs(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Of=function(t){if(t==null)return tZ;if(typeof t=="function")return If(t);if(typeof t=="object")return Array.isArray(t)?JJ(t):ZJ(t);if(typeof t=="string")return eZ(t);throw new Error("Expected function, string, or object as test")};function JJ(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Of(t[n]);return If(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function ZJ(t){const e=t;return If(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function eZ(t){return If(e);function e(n){return n&&n.type===t}}function If(t){return e;function e(n,r,i){return!!(nZ(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function tZ(){return!0}function nZ(t){return t!==null&&typeof t=="object"&&"type"in t}const tO=[],rZ=!0,d0=!1,nO="skip";function rO(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Of(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=tO,_,g,m;if((!e||s(l,c,u[u.length-1]||void 0))&&(f=iZ(n(l,u)),f[0]===d0))return f;if("children"in l&&l.children){const p=l;if(p.children&&f[0]!==nO)for(g=(r?p.children.length:-1)+o,m=u.concat(p);g>-1&&g<p.children.length;){const b=p.children[g];if(_=a(b,g,m)(),_[0]===d0)return _;g=typeof _[1]=="number"?_[1]:g+o}}return f}}}function iZ(t){return Array.isArray(t)?t:typeof t=="number"?[rZ,t]:t==null?tO:[t]}function $c(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),rO(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const f0={}.hasOwnProperty,sZ={};function oZ(t,e){const n=e||sZ,r=new Map,i=new Map,s=new Map,o={...WJ,...n.handlers},a={all:c,applyData:lZ,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:aZ,wrap:uZ};return $c(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,d=String(u.identifier).toUpperCase();h.has(d)||h.set(d,u)}}),a;function l(u,h){const d=u.type,f=a.handlers[d];if(f0.call(a.handlers,d)&&f)return f(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in u){const{children:g,...m}=u,p=Qs(m);return p.children=a.all(u),p}return Qs(u)}return(a.options.unknownHandler||cZ)(a,u,h)}function c(u){const h=[];if("children"in u){const d=u.children;let f=-1;for(;++f<d.length;){const _=a.one(d[f],u);if(_){if(f&&d[f-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=nS(_.value)),!Array.isArray(_)&&_.type==="element")){const g=_.children[0];g&&g.type==="text"&&(g.value=nS(g.value))}Array.isArray(_)?h.push(..._):h.push(_)}}}return h}}function aZ(t,e){t.position&&(e.position=DD(t))}function lZ(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Qs(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function cZ(t,e){const n=e.data||{},r="value"in e&&!(f0.call(n,"hProperties")||f0.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uZ(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function nS(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function rS(t,e){const n=oZ(t,e),r=n.one(t,void 0),i=QJ(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function hZ(t,e){return t&&"run"in t?async function(n,r){const i=rS(n,{file:r,...e});await t.run(i,r)}:function(n,r){return rS(n,{file:r,...e||t})}}function iS(t){if(t)throw t}var Ch=Object.prototype.hasOwnProperty,iO=Object.prototype.toString,sS=Object.defineProperty,oS=Object.getOwnPropertyDescriptor,aS=function(e){return typeof Array.isArray=="function"?Array.isArray(e):iO.call(e)==="[object Array]"},lS=function(e){if(!e||iO.call(e)!=="[object Object]")return!1;var n=Ch.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Ch.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Ch.call(e,i)},cS=function(e,n){sS&&n.name==="__proto__"?sS(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},uS=function(e,n){if(n==="__proto__")if(Ch.call(e,n)){if(oS)return oS(e,n).value}else return;return e[n]},dZ=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=uS(a,n),i=uS(e,n),a!==i&&(u&&i&&(lS(i)||(s=aS(i)))?(s?(s=!1,o=r&&aS(r)?r:[]):o=r&&lS(r)?r:{},cS(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&cS(a,{name:n,newValue:i}));return a};const Yp=N0(dZ);function p0(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function fZ(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?pZ(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function pZ(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Rr={basename:mZ,dirname:gZ,extname:_Z,join:bZ,sep:"/"};function mZ(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');qc(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function gZ(t){if(qc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function _Z(t){qc(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function bZ(...t){let e=-1,n;for(;++e<t.length;)qc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":yZ(n)}function yZ(t){qc(t);const e=t.codePointAt(0)===47;let n=vZ(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function vZ(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function qc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const EZ={cwd:wZ};function wZ(){return"/"}function m0(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function SZ(t){if(typeof t=="string")t=new URL(t);else if(!m0(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return TZ(t)}function TZ(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Xp=["history","path","basename","stem","extname","dirname"];class sO{constructor(e){let n;e?m0(e)?n={path:e}:typeof e=="string"||CZ(e)?n={value:e}:n=e:n={},this.cwd=EZ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Xp.length;){const s=Xp[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Xp.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Rr.basename(this.path):void 0}set basename(e){Jp(e,"basename"),Qp(e,"basename"),this.path=Rr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Rr.dirname(this.path):void 0}set dirname(e){hS(this.basename,"dirname"),this.path=Rr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Rr.extname(this.path):void 0}set extname(e){if(Qp(e,"extname"),hS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Rr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){m0(e)&&(e=SZ(e)),Jp(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Rr.basename(this.path,this.extname):void 0}set stem(e){Jp(e,"stem"),Qp(e,"stem"),this.path=Rr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new dn(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Qp(t,e){if(t&&t.includes(Rr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Rr.sep+"`")}function Jp(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function hS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function CZ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const xZ=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},AZ={}.hasOwnProperty;class Qb extends xZ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fZ()}copy(){const e=new Qb;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Yp(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(tm("data",this.frozen),this.namespace[e]=n,this):AZ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(tm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Gu(e),r=this.parser||this.Parser;return Zp("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Zp("process",this.parser||this.Parser),em("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Gu(e),l=r.parse(a);r.run(l,a,function(u,h,d){if(u||!h||!d)return c(u);const f=h,_=r.stringify(f,d);PZ(_)?d.value=_:d.result=_,c(u,d)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Zp("processSync",this.parser||this.Parser),em("processSync",this.compiler||this.Compiler),this.process(e,i),fS("processSync","process",n),r;function i(s,o){n=!0,iS(s),r=o}}run(e,n,r){dS(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Gu(n);i.run(e,l,c);function c(u,h,d){const f=h||e;u?a(u):o?o(f):r(void 0,f,d)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),fS("runSync","run",r),i;function s(o,a){iS(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Gu(n),i=this.compiler||this.Compiler;return em("stringify",i),dS(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(tm("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Yp(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===c){d=h;break}if(d===-1)r.push([c,...u]);else if(u.length>0){let[f,..._]=u;const g=r[d][1];p0(g)&&p0(f)&&(f=Yp(!0,g,f)),r[d]=[c,f,..._]}}}}const kZ=new Qb().freeze();function Zp(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function em(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function tm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dS(t){if(!p0(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function fS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Gu(t){return RZ(t)?t:new sO(t)}function RZ(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function PZ(t){return typeof t=="string"||DZ(t)}function DZ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const OZ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pS=[],mS={allowDangerousHtml:!0},IZ=/^(https?|ircs?|mailto|xmpp)$/i,LZ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function MZ(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",i=t.className,s=t.components,o=t.disallowedElements,a=t.rehypePlugins||pS,l=t.remarkPlugins||pS,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mS}:mS,u=t.skipHtml,h=t.unwrapDisallowed,d=t.urlTransform||NZ,f=kZ().use(bJ).use(l).use(hZ,c).use(a),_=new sO;typeof r=="string"&&(_.value=r);for(const b of LZ)Object.hasOwn(t,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+OZ+b.id,void 0);const g=f.parse(_);let m=f.runSync(g,_);return i&&(m={type:"element",tagName:"div",properties:{className:i},children:m.type==="root"?m.children:[m]}),$c(m,p),eX(m,{Fragment:N.Fragment,components:s,ignoreInvalidStyle:!0,jsx:N.jsx,jsxs:N.jsxs,passKeys:!0,passNode:!0});function p(b,y,v){if(b.type==="raw"&&v&&typeof y=="number")return u?v.children.splice(y,1):v.children[y]={type:"text",value:b.value},y;if(b.type==="element"){let E;for(E in $p)if(Object.hasOwn($p,E)&&Object.hasOwn(b.properties,E)){const w=b.properties[E],T=$p[E];(T===null||T.includes(b.tagName))&&(b.properties[E]=d(String(w||""),E,b))}}if(b.type==="element"){let E=e?!e.includes(b.tagName):o?o.includes(b.tagName):!1;if(!E&&n&&typeof y=="number"&&(E=!n(b,y,v)),E&&v&&typeof y=="number")return h&&b.children?v.children.splice(y,1,...b.children):v.children.splice(y,1),y}}}function NZ(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e<0||i>-1&&e>i||n>-1&&e>n||r>-1&&e>r||IZ.test(t.slice(0,e))?t:""}const gS=/[#.]/g;function BZ(t,e){const n=t||"",r={};let i=0,s,o;for(;i<n.length;){gS.lastIndex=i;const a=gS.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}const FZ=new Set(["button","menu","reset","submit"]),g0={}.hasOwnProperty;function oO(t,e,n){const r=n&&zZ(n);function i(s,o,...a){let l=-1,c;if(s==null){c={type:"root",children:[]};const u=o;a.unshift(u)}else if(c=BZ(s,e),c.tagName=c.tagName.toLowerCase(),r&&g0.call(r,c.tagName)&&(c.tagName=r[c.tagName]),HZ(o,c.tagName)){let u;for(u in o)g0.call(o,u)&&UZ(t,c.properties,u,o[u])}else a.unshift(o);for(;++l<a.length;)_0(c.children,a[l]);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function HZ(t,e){return t==null||typeof t!="object"||Array.isArray(t)?!1:e==="input"||!t.type||typeof t.type!="string"?!0:"children"in t&&Array.isArray(t.children)?!1:e==="button"?FZ.has(t.type.toLowerCase()):!("value"in t)}function UZ(t,e,n,r){const i=Af(t,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Dw(r):i.commaSeparated?o=xw(r):i.commaOrSpaceSeparated?o=Dw(xw(r).join(" ")):o=_S(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?jZ(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=_S(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(e.className)){const a=o;o=e.className.concat(a)}e[i.property]=o}}function _0(t,e){let n=-1;if(e!=null)if(typeof e=="string"||typeof e=="number")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(;++n<e.length;)_0(t,e[n]);else if(typeof e=="object"&&"type"in e)e.type==="root"?_0(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function _S(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||rc(n)===rc(e)))return!0}return n}function jZ(t){const e=[];let n;for(n in t)g0.call(t,n)&&e.push([n,t[n]].join(": "));return e.join("; ")}function zZ(t){const e={};let n=-1;for(;++n<t.length;)e[t[n].toLowerCase()]=t[n];return e}const VZ=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],WZ=oO(Wc,"div"),GZ=oO(as,"g",VZ),nm=/\r?\n|\r/g;function $Z(t){const e=String(t),n=[];for(nm.lastIndex=0;nm.test(e);)n.push(nm.lastIndex);return n.push(e.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const Ds={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},aO={}.hasOwnProperty,qZ=Object.prototype;function KZ(t,e){const n=e||{};return Jb({file:n.file||void 0,location:!1,schema:n.space==="svg"?as:Wc,verbose:n.verbose||!1},t)}function Jb(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},xh(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:lO(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=$Z(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},xh(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},xh(t,r,n),n}default:return n=YZ(t,e),n}}function lO(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=Jb(t,e[n]);r.push(i)}return r}function YZ(t,e){const n=t.schema;t.schema=e.namespaceURI===Ds.svg?as:Wc;let r=-1;const i={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;aO.call(qZ,l)||(i[l]=a.value)}const o=(t.schema.space==="svg"?GZ:WZ)(e.tagName,i,lO(t,e.childNodes));if(xh(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&Bo(l.startTag),u=l&&l.endTag&&Bo(l.endTag),h=Jb(t,a.content);c&&u&&t.file&&(h.position={start:c.end,end:u.start}),o.content=h}return t.schema=n,o}function xh(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=XZ(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function XZ(t,e,n){const r=Bo(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)aO.call(n.attrs,o)&&(s[Af(t.schema,o).property]=Bo(n.attrs[o]));n.startTag;const a=Bo(n.startTag),l=n.endTag?Bo(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=s,e.data={position:c}}}return r}function Bo(t){const e=bS({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=bS({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function bS(t){return t.line&&t.column?t:void 0}const yS={}.hasOwnProperty;function cO(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&yS.call(i,t)){const l=String(i[t]);o=yS.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const QZ={},JZ={}.hasOwnProperty,uO=cO("type",{handlers:{root:eee,element:see,text:ree,comment:iee,doctype:nee}});function ZZ(t,e){const r=(e||QZ).space;return uO(t,r==="svg"?as:Wc)}function eee(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Zb(t.children,n,e),xa(t,n),n}function tee(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Zb(t.children,n,e),xa(t,n),n}function nee(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return xa(t,e),e}function ree(t){const e={nodeName:"#text",value:t.value,parentNode:null};return xa(t,e),e}function iee(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return xa(t,e),e}function see(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=as);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&JZ.call(t.properties,s)){const l=oee(r,s,t.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:Ds[o],childNodes:[],parentNode:null};return a.childNodes=Zb(t.children,a,r),xa(t,a),t.tagName==="template"&&t.content&&(a.content=tee(t.content,r)),a}function oee(t,e,n){const r=Af(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?yD(n):kD(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Ds[r.space]}return i}function Zb(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const s=uO(t[r],n);s.parentNode=e,i.push(s)}return i}function xa(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const aee=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],lee=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bt="";var $;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",t[t.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_F=102]="LATIN_SMALL_F",t[t.LATIN_SMALL_X=120]="LATIN_SMALL_X",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",t[t.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})($=$||($={}));const vn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hO(t){return t>=55296&&t<=57343}function cee(t){return t>=56320&&t<=57343}function uee(t,e){return(t-55296)*1024+9216+e}function dO(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function fO(t){return t>=64976&&t<=65007||lee.has(t)}var be;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(be=be||(be={}));const hee=65536;class dee{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=hee,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e){const{line:n,col:r,offset:i}=this;return{code:e,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(cee(n))return this.pos++,this._addGap(),uee(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,$.EOF;return this._err(be.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,$.EOF;const r=this.html.charCodeAt(n);return r===$.CARRIAGE_RETURN?$.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,$.EOF;let e=this.html.charCodeAt(this.pos);return e===$.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,$.LINE_FEED):e===$.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hO(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===$.LINE_FEED||e===$.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){dO(e)?this._err(be.controlCharacterInInputStream):fO(e)&&this._err(be.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Ke;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Ke=Ke||(Ke={}));function pO(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const xi=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),fee=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var rm;const pee=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),mee=(rm=String.fromCodePoint)!==null&&rm!==void 0?rm:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function gee(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=pee.get(t))!==null&&e!==void 0?e:t}var jt;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(jt||(jt={}));const _ee=32;var Wr;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Wr||(Wr={}));function b0(t){return t>=jt.ZERO&&t<=jt.NINE}function bee(t){return t>=jt.UPPER_A&&t<=jt.UPPER_F||t>=jt.LOWER_A&&t<=jt.LOWER_F}function yee(t){return t>=jt.UPPER_A&&t<=jt.UPPER_Z||t>=jt.LOWER_A&&t<=jt.LOWER_Z||b0(t)}function vee(t){return t===jt.EQUALS||yee(t)}var Bt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Bt||(Bt={}));var ws;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(ws||(ws={}));class Eee{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Bt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ws.Strict}startEntity(e){this.decodeMode=e,this.state=Bt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Bt.EntityStart:return e.charCodeAt(n)===jt.NUM?(this.state=Bt.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Bt.NamedEntity,this.stateNamedEntity(e,n));case Bt.NumericStart:return this.stateNumericStart(e,n);case Bt.NumericDecimal:return this.stateNumericDecimal(e,n);case Bt.NumericHex:return this.stateNumericHex(e,n);case Bt.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|_ee)===jt.LOWER_X?(this.state=Bt.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Bt.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(b0(i)||bee(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(b0(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===jt.SEMI)this.consumed+=1;else if(this.decodeMode===ws.Strict)return 0;return this.emitCodePoint(gee(this.result),this.consumed),this.errors&&(e!==jt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Wr.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=gO(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===ws.Attribute&&(s===0||vee(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Wr.VALUE_LENGTH)>>14,s!==0){if(o===jt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==ws.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Wr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Wr.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Bt.NamedEntity:return this.result!==0&&(this.decodeMode!==ws.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Bt.NumericDecimal:return this.emitNumericEntity(0,2);case Bt.NumericHex:return this.emitNumericEntity(0,3);case Bt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Bt.EntityStart:return 0}}}function mO(t){let e="";const n=new Eee(t,r=>e+=mee(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const c=n.write(i,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const l=e+i.slice(o);return e="",l}}function gO(t,e,n,r){const i=(e&Wr.BRANCH_LENGTH)>>7,s=e&Wr.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+i]}return-1}mO(xi);mO(fee);var Se;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Se=Se||(Se={}));var Wi;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Wi=Wi||(Wi={}));var Nn;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Nn=Nn||(Nn={}));var de;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(de=de||(de={}));var C;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SECTION=94]="SECTION",t[t.SELECT=95]="SELECT",t[t.SOURCE=96]="SOURCE",t[t.SMALL=97]="SMALL",t[t.SPAN=98]="SPAN",t[t.STRIKE=99]="STRIKE",t[t.STRONG=100]="STRONG",t[t.STYLE=101]="STYLE",t[t.SUB=102]="SUB",t[t.SUMMARY=103]="SUMMARY",t[t.SUP=104]="SUP",t[t.TABLE=105]="TABLE",t[t.TBODY=106]="TBODY",t[t.TEMPLATE=107]="TEMPLATE",t[t.TEXTAREA=108]="TEXTAREA",t[t.TFOOT=109]="TFOOT",t[t.TD=110]="TD",t[t.TH=111]="TH",t[t.THEAD=112]="THEAD",t[t.TITLE=113]="TITLE",t[t.TR=114]="TR",t[t.TRACK=115]="TRACK",t[t.TT=116]="TT",t[t.U=117]="U",t[t.UL=118]="UL",t[t.SVG=119]="SVG",t[t.VAR=120]="VAR",t[t.WBR=121]="WBR",t[t.XMP=122]="XMP"})(C=C||(C={}));const wee=new Map([[de.A,C.A],[de.ADDRESS,C.ADDRESS],[de.ANNOTATION_XML,C.ANNOTATION_XML],[de.APPLET,C.APPLET],[de.AREA,C.AREA],[de.ARTICLE,C.ARTICLE],[de.ASIDE,C.ASIDE],[de.B,C.B],[de.BASE,C.BASE],[de.BASEFONT,C.BASEFONT],[de.BGSOUND,C.BGSOUND],[de.BIG,C.BIG],[de.BLOCKQUOTE,C.BLOCKQUOTE],[de.BODY,C.BODY],[de.BR,C.BR],[de.BUTTON,C.BUTTON],[de.CAPTION,C.CAPTION],[de.CENTER,C.CENTER],[de.CODE,C.CODE],[de.COL,C.COL],[de.COLGROUP,C.COLGROUP],[de.DD,C.DD],[de.DESC,C.DESC],[de.DETAILS,C.DETAILS],[de.DIALOG,C.DIALOG],[de.DIR,C.DIR],[de.DIV,C.DIV],[de.DL,C.DL],[de.DT,C.DT],[de.EM,C.EM],[de.EMBED,C.EMBED],[de.FIELDSET,C.FIELDSET],[de.FIGCAPTION,C.FIGCAPTION],[de.FIGURE,C.FIGURE],[de.FONT,C.FONT],[de.FOOTER,C.FOOTER],[de.FOREIGN_OBJECT,C.FOREIGN_OBJECT],[de.FORM,C.FORM],[de.FRAME,C.FRAME],[de.FRAMESET,C.FRAMESET],[de.H1,C.H1],[de.H2,C.H2],[de.H3,C.H3],[de.H4,C.H4],[de.H5,C.H5],[de.H6,C.H6],[de.HEAD,C.HEAD],[de.HEADER,C.HEADER],[de.HGROUP,C.HGROUP],[de.HR,C.HR],[de.HTML,C.HTML],[de.I,C.I],[de.IMG,C.IMG],[de.IMAGE,C.IMAGE],[de.INPUT,C.INPUT],[de.IFRAME,C.IFRAME],[de.KEYGEN,C.KEYGEN],[de.LABEL,C.LABEL],[de.LI,C.LI],[de.LINK,C.LINK],[de.LISTING,C.LISTING],[de.MAIN,C.MAIN],[de.MALIGNMARK,C.MALIGNMARK],[de.MARQUEE,C.MARQUEE],[de.MATH,C.MATH],[de.MENU,C.MENU],[de.META,C.META],[de.MGLYPH,C.MGLYPH],[de.MI,C.MI],[de.MO,C.MO],[de.MN,C.MN],[de.MS,C.MS],[de.MTEXT,C.MTEXT],[de.NAV,C.NAV],[de.NOBR,C.NOBR],[de.NOFRAMES,C.NOFRAMES],[de.NOEMBED,C.NOEMBED],[de.NOSCRIPT,C.NOSCRIPT],[de.OBJECT,C.OBJECT],[de.OL,C.OL],[de.OPTGROUP,C.OPTGROUP],[de.OPTION,C.OPTION],[de.P,C.P],[de.PARAM,C.PARAM],[de.PLAINTEXT,C.PLAINTEXT],[de.PRE,C.PRE],[de.RB,C.RB],[de.RP,C.RP],[de.RT,C.RT],[de.RTC,C.RTC],[de.RUBY,C.RUBY],[de.S,C.S],[de.SCRIPT,C.SCRIPT],[de.SECTION,C.SECTION],[de.SELECT,C.SELECT],[de.SOURCE,C.SOURCE],[de.SMALL,C.SMALL],[de.SPAN,C.SPAN],[de.STRIKE,C.STRIKE],[de.STRONG,C.STRONG],[de.STYLE,C.STYLE],[de.SUB,C.SUB],[de.SUMMARY,C.SUMMARY],[de.SUP,C.SUP],[de.TABLE,C.TABLE],[de.TBODY,C.TBODY],[de.TEMPLATE,C.TEMPLATE],[de.TEXTAREA,C.TEXTAREA],[de.TFOOT,C.TFOOT],[de.TD,C.TD],[de.TH,C.TH],[de.THEAD,C.THEAD],[de.TITLE,C.TITLE],[de.TR,C.TR],[de.TRACK,C.TRACK],[de.TT,C.TT],[de.U,C.U],[de.UL,C.UL],[de.SVG,C.SVG],[de.VAR,C.VAR],[de.WBR,C.WBR],[de.XMP,C.XMP]]);function Aa(t){var e;return(e=wee.get(t))!==null&&e!==void 0?e:C.UNKNOWN}const Pe=C,See={[Se.HTML]:new Set([Pe.ADDRESS,Pe.APPLET,Pe.AREA,Pe.ARTICLE,Pe.ASIDE,Pe.BASE,Pe.BASEFONT,Pe.BGSOUND,Pe.BLOCKQUOTE,Pe.BODY,Pe.BR,Pe.BUTTON,Pe.CAPTION,Pe.CENTER,Pe.COL,Pe.COLGROUP,Pe.DD,Pe.DETAILS,Pe.DIR,Pe.DIV,Pe.DL,Pe.DT,Pe.EMBED,Pe.FIELDSET,Pe.FIGCAPTION,Pe.FIGURE,Pe.FOOTER,Pe.FORM,Pe.FRAME,Pe.FRAMESET,Pe.H1,Pe.H2,Pe.H3,Pe.H4,Pe.H5,Pe.H6,Pe.HEAD,Pe.HEADER,Pe.HGROUP,Pe.HR,Pe.HTML,Pe.IFRAME,Pe.IMG,Pe.INPUT,Pe.LI,Pe.LINK,Pe.LISTING,Pe.MAIN,Pe.MARQUEE,Pe.MENU,Pe.META,Pe.NAV,Pe.NOEMBED,Pe.NOFRAMES,Pe.NOSCRIPT,Pe.OBJECT,Pe.OL,Pe.P,Pe.PARAM,Pe.PLAINTEXT,Pe.PRE,Pe.SCRIPT,Pe.SECTION,Pe.SELECT,Pe.SOURCE,Pe.STYLE,Pe.SUMMARY,Pe.TABLE,Pe.TBODY,Pe.TD,Pe.TEMPLATE,Pe.TEXTAREA,Pe.TFOOT,Pe.TH,Pe.THEAD,Pe.TITLE,Pe.TR,Pe.TRACK,Pe.UL,Pe.WBR,Pe.XMP]),[Se.MATHML]:new Set([Pe.MI,Pe.MO,Pe.MN,Pe.MS,Pe.MTEXT,Pe.ANNOTATION_XML]),[Se.SVG]:new Set([Pe.TITLE,Pe.FOREIGN_OBJECT,Pe.DESC]),[Se.XLINK]:new Set,[Se.XML]:new Set,[Se.XMLNS]:new Set};function _O(t){return t===Pe.H1||t===Pe.H2||t===Pe.H3||t===Pe.H4||t===Pe.H5||t===Pe.H6}de.STYLE,de.SCRIPT,de.XMP,de.IFRAME,de.NOEMBED,de.NOFRAMES,de.PLAINTEXT;const Tee=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Y;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",t[t.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",t[t.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",t[t.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",t[t.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",t[t.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Y||(Y={}));const xt={DATA:Y.DATA,RCDATA:Y.RCDATA,RAWTEXT:Y.RAWTEXT,SCRIPT_DATA:Y.SCRIPT_DATA,PLAINTEXT:Y.PLAINTEXT,CDATA_SECTION:Y.CDATA_SECTION};function wl(t){return t>=$.DIGIT_0&&t<=$.DIGIT_9}function ol(t){return t>=$.LATIN_CAPITAL_A&&t<=$.LATIN_CAPITAL_Z}function Cee(t){return t>=$.LATIN_SMALL_A&&t<=$.LATIN_SMALL_Z}function Ai(t){return Cee(t)||ol(t)}function y0(t){return Ai(t)||wl(t)}function bO(t){return t>=$.LATIN_CAPITAL_A&&t<=$.LATIN_CAPITAL_F}function yO(t){return t>=$.LATIN_SMALL_A&&t<=$.LATIN_SMALL_F}function xee(t){return wl(t)||bO(t)||yO(t)}function $u(t){return t+32}function vO(t){return t===$.SPACE||t===$.LINE_FEED||t===$.TABULATION||t===$.FORM_FEED}function Aee(t){return t===$.EQUALS_SIGN||y0(t)}function vS(t){return vO(t)||t===$.SOLIDUS||t===$.GREATER_THAN_SIGN}class kee{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Y.DATA,this.returnState=Y.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new dee(n),this.currentLocation=this.getCurrentLocation(-1)}_err(e){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(e))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(e){this.consumedAfterSnapshot-=e,this.preprocessor.retreat(e)}_reconsumeInState(e,n){this.state=e,this._callState(n)}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Ke.START_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Ke.END_TAG,tagName:"",tagID:C.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Ke.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Ke.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(pO(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(be.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Aa(e.tagName),e.type===Ke.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(be.endTagWithAttributes),e.selfClosing&&this._err(be.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Ke.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Ke.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Ke.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Ke.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==e)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(e,n)}_emitCodePoint(e){const n=vO(e)?Ke.WHITESPACE_CHARACTER:e===$.NULL?Ke.NULL_CHARACTER:Ke.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Ke.CHARACTER,e)}_matchNamedCharacterReference(e){let n=null,r=0,i=!1;for(let s=0,o=xi[0];s>=0&&(s=gO(xi,o,s+1,e),!(s<0));e=this._consume()){r+=1,o=xi[s];const a=o&Wr.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(e!==$.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Aee(this.preprocessor.peek(1))?(n=[$.AMPERSAND],s+=l):(n=l===0?[xi[s]&~Wr.VALUE_LENGTH]:l===1?[xi[++s]]:[xi[++s],xi[++s]],r=0,i=e!==$.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(be.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Y.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Y.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Y.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Y.DATA:{this._stateData(e);break}case Y.RCDATA:{this._stateRcdata(e);break}case Y.RAWTEXT:{this._stateRawtext(e);break}case Y.SCRIPT_DATA:{this._stateScriptData(e);break}case Y.PLAINTEXT:{this._statePlaintext(e);break}case Y.TAG_OPEN:{this._stateTagOpen(e);break}case Y.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Y.TAG_NAME:{this._stateTagName(e);break}case Y.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Y.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Y.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Y.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Y.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Y.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Y.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Y.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Y.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Y.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Y.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Y.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Y.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Y.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Y.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Y.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Y.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Y.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Y.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Y.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Y.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Y.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Y.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Y.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Y.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Y.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Y.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Y.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Y.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Y.COMMENT_START:{this._stateCommentStart(e);break}case Y.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Y.COMMENT:{this._stateComment(e);break}case Y.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Y.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Y.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Y.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Y.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Y.COMMENT_END:{this._stateCommentEnd(e);break}case Y.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Y.DOCTYPE:{this._stateDoctype(e);break}case Y.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Y.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Y.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Y.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Y.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Y.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Y.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Y.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Y.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Y.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Y.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Y.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Y.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Y.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Y.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Y.CDATA_SECTION:{this._stateCdataSection(e);break}case Y.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Y.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Y.CHARACTER_REFERENCE:{this._stateCharacterReference(e);break}case Y.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(e);break}case Y.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}case Y.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(e);break}case Y.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(e);break}case Y.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(e);break}case Y.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(e);break}case Y.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case $.LESS_THAN_SIGN:{this.state=Y.TAG_OPEN;break}case $.AMPERSAND:{this.returnState=Y.DATA,this.state=Y.CHARACTER_REFERENCE;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitCodePoint(e);break}case $.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case $.AMPERSAND:{this.returnState=Y.RCDATA,this.state=Y.CHARACTER_REFERENCE;break}case $.LESS_THAN_SIGN:{this.state=Y.RCDATA_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case $.LESS_THAN_SIGN:{this.state=Y.RAWTEXT_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Ai(e))this._createStartTagToken(),this.state=Y.TAG_NAME,this._stateTagName(e);else switch(e){case $.EXCLAMATION_MARK:{this.state=Y.MARKUP_DECLARATION_OPEN;break}case $.SOLIDUS:{this.state=Y.END_TAG_OPEN;break}case $.QUESTION_MARK:{this._err(be.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Y.BOGUS_COMMENT,this._stateBogusComment(e);break}case $.EOF:{this._err(be.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(be.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Y.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Ai(e))this._createEndTagToken(),this.state=Y.TAG_NAME,this._stateTagName(e);else switch(e){case $.GREATER_THAN_SIGN:{this._err(be.missingEndTagName),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(be.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Y.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.BEFORE_ATTRIBUTE_NAME;break}case $.SOLIDUS:{this.state=Y.SELF_CLOSING_START_TAG;break}case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentTagToken();break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.tagName+=bt;break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(ol(e)?$u(e):e)}}_stateRcdataLessThanSign(e){e===$.SOLIDUS?this.state=Y.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Y.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Ai(e)?(this.state=Y.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Y.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Y.BEFORE_ATTRIBUTE_NAME,!1;case $.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Y.SELF_CLOSING_START_TAG,!1;case $.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Y.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Y.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===$.SOLIDUS?this.state=Y.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Y.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Ai(e)?(this.state=Y.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Y.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Y.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case $.SOLIDUS:{this.state=Y.SCRIPT_DATA_END_TAG_OPEN;break}case $.EXCLAMATION_MARK:{this.state=Y.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Y.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Ai(e)?(this.state=Y.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Y.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Y.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===$.HYPHEN_MINUS?(this.state=Y.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Y.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===$.HYPHEN_MINUS?(this.state=Y.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Y.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case $.HYPHEN_MINUS:{this.state=Y.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case $.HYPHEN_MINUS:{this.state=Y.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.state=Y.SCRIPT_DATA_ESCAPED,this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Y.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case $.HYPHEN_MINUS:{this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case $.GREATER_THAN_SIGN:{this.state=Y.SCRIPT_DATA,this._emitChars(">");break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.state=Y.SCRIPT_DATA_ESCAPED,this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Y.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===$.SOLIDUS?this.state=Y.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ai(e)?(this._emitChars("<"),this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Y.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Ai(e)?(this.state=Y.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Y.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Y.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(vn.SCRIPT,!1)&&vS(this.preprocessor.peek(vn.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<vn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Y.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case $.HYPHEN_MINUS:{this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case $.NULL:{this._err(be.unexpectedNullCharacter),this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case $.HYPHEN_MINUS:{this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case $.HYPHEN_MINUS:{this._emitChars("-");break}case $.LESS_THAN_SIGN:{this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case $.GREATER_THAN_SIGN:{this.state=Y.SCRIPT_DATA,this._emitChars(">");break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bt);break}case $.EOF:{this._err(be.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===$.SOLIDUS?(this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(vn.SCRIPT,!1)&&vS(this.preprocessor.peek(vn.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<vn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Y.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Y.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.SOLIDUS:case $.GREATER_THAN_SIGN:case $.EOF:{this.state=Y.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case $.EQUALS_SIGN:{this._err(be.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Y.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Y.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:case $.SOLIDUS:case $.GREATER_THAN_SIGN:case $.EOF:{this._leaveAttrName(),this.state=Y.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case $.EQUALS_SIGN:{this._leaveAttrName(),this.state=Y.BEFORE_ATTRIBUTE_VALUE;break}case $.QUOTATION_MARK:case $.APOSTROPHE:case $.LESS_THAN_SIGN:{this._err(be.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.currentAttr.name+=bt;break}default:this.currentAttr.name+=String.fromCodePoint(ol(e)?$u(e):e)}}_stateAfterAttributeName(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.SOLIDUS:{this.state=Y.SELF_CLOSING_START_TAG;break}case $.EQUALS_SIGN:{this.state=Y.BEFORE_ATTRIBUTE_VALUE;break}case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentTagToken();break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Y.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.QUOTATION_MARK:{this.state=Y.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case $.APOSTROPHE:{this.state=Y.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case $.GREATER_THAN_SIGN:{this._err(be.missingAttributeValue),this.state=Y.DATA,this.emitCurrentTagToken();break}default:this.state=Y.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case $.QUOTATION_MARK:{this.state=Y.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case $.AMPERSAND:{this.returnState=Y.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Y.CHARACTER_REFERENCE;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.currentAttr.value+=bt;break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case $.APOSTROPHE:{this.state=Y.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case $.AMPERSAND:{this.returnState=Y.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Y.CHARACTER_REFERENCE;break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.currentAttr.value+=bt;break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this._leaveAttrValue(),this.state=Y.BEFORE_ATTRIBUTE_NAME;break}case $.AMPERSAND:{this.returnState=Y.ATTRIBUTE_VALUE_UNQUOTED,this.state=Y.CHARACTER_REFERENCE;break}case $.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Y.DATA,this.emitCurrentTagToken();break}case $.NULL:{this._err(be.unexpectedNullCharacter),this.currentAttr.value+=bt;break}case $.QUOTATION_MARK:case $.APOSTROPHE:case $.LESS_THAN_SIGN:case $.EQUALS_SIGN:case $.GRAVE_ACCENT:{this._err(be.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this._leaveAttrValue(),this.state=Y.BEFORE_ATTRIBUTE_NAME;break}case $.SOLIDUS:{this._leaveAttrValue(),this.state=Y.SELF_CLOSING_START_TAG;break}case $.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Y.DATA,this.emitCurrentTagToken();break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this._err(be.missingWhitespaceBetweenAttributes),this.state=Y.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case $.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Y.DATA,this.emitCurrentTagToken();break}case $.EOF:{this._err(be.eofInTag),this._emitEOFToken();break}default:this._err(be.unexpectedSolidusInTag),this.state=Y.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentComment(n);break}case $.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.data+=bt;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(vn.DASH_DASH,!0)?(this._createCommentToken(vn.DASH_DASH.length+1),this.state=Y.COMMENT_START):this._consumeSequenceIfMatch(vn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(vn.DOCTYPE.length+1),this.state=Y.DOCTYPE):this._consumeSequenceIfMatch(vn.CDATA_START,!0)?this.inForeignNode?this.state=Y.CDATA_SECTION:(this._err(be.cdataInHtmlContent),this._createCommentToken(vn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Y.BOGUS_COMMENT):this._ensureHibernation()||(this._err(be.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Y.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case $.HYPHEN_MINUS:{this.state=Y.COMMENT_START_DASH;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptClosingOfEmptyComment),this.state=Y.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Y.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case $.HYPHEN_MINUS:{this.state=Y.COMMENT_END;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptClosingOfEmptyComment),this.state=Y.DATA,this.emitCurrentComment(n);break}case $.EOF:{this._err(be.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Y.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case $.HYPHEN_MINUS:{this.state=Y.COMMENT_END_DASH;break}case $.LESS_THAN_SIGN:{n.data+="<",this.state=Y.COMMENT_LESS_THAN_SIGN;break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.data+=bt;break}case $.EOF:{this._err(be.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case $.EXCLAMATION_MARK:{n.data+="!",this.state=Y.COMMENT_LESS_THAN_SIGN_BANG;break}case $.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Y.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===$.HYPHEN_MINUS?this.state=Y.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Y.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===$.HYPHEN_MINUS?this.state=Y.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Y.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==$.GREATER_THAN_SIGN&&e!==$.EOF&&this._err(be.nestedComment),this.state=Y.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case $.HYPHEN_MINUS:{this.state=Y.COMMENT_END;break}case $.EOF:{this._err(be.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Y.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentComment(n);break}case $.EXCLAMATION_MARK:{this.state=Y.COMMENT_END_BANG;break}case $.HYPHEN_MINUS:{n.data+="-";break}case $.EOF:{this._err(be.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Y.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case $.HYPHEN_MINUS:{n.data+="--!",this.state=Y.COMMENT_END_DASH;break}case $.GREATER_THAN_SIGN:{this._err(be.incorrectlyClosedComment),this.state=Y.DATA,this.emitCurrentComment(n);break}case $.EOF:{this._err(be.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Y.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.BEFORE_DOCTYPE_NAME;break}case $.GREATER_THAN_SIGN:{this.state=Y.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case $.EOF:{this._err(be.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingWhitespaceBeforeDoctypeName),this.state=Y.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(ol(e))this._createDoctypeToken(String.fromCharCode($u(e))),this.state=Y.DOCTYPE_NAME;else switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.NULL:{this._err(be.unexpectedNullCharacter),this._createDoctypeToken(bt),this.state=Y.DOCTYPE_NAME;break}case $.GREATER_THAN_SIGN:{this._err(be.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Y.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.AFTER_DOCTYPE_NAME;break}case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.name+=bt;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(ol(e)?$u(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(vn.PUBLIC,!1)?this.state=Y.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(vn.SYSTEM,!1)?this.state=Y.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(be.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case $.QUOTATION_MARK:{this._err(be.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Y.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{this._err(be.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Y.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case $.GREATER_THAN_SIGN:{this._err(be.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.QUOTATION_MARK:{n.publicId="",this.state=Y.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{n.publicId="",this.state=Y.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case $.GREATER_THAN_SIGN:{this._err(be.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case $.QUOTATION_MARK:{this.state=Y.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.publicId+=bt;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case $.APOSTROPHE:{this.state=Y.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.publicId+=bt;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case $.GREATER_THAN_SIGN:{this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.QUOTATION_MARK:{this._err(be.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{this._err(be.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.QUOTATION_MARK:{n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:{this.state=Y.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case $.QUOTATION_MARK:{this._err(be.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{this._err(be.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case $.GREATER_THAN_SIGN:{this._err(be.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.QUOTATION_MARK:{n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case $.APOSTROPHE:{n.systemId="",this.state=Y.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case $.GREATER_THAN_SIGN:{this._err(be.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.DATA,this.emitCurrentDoctype(n);break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case $.QUOTATION_MARK:{this.state=Y.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.systemId+=bt;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case $.APOSTROPHE:{this.state=Y.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case $.NULL:{this._err(be.unexpectedNullCharacter),n.systemId+=bt;break}case $.GREATER_THAN_SIGN:{this._err(be.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case $.SPACE:case $.LINE_FEED:case $.TABULATION:case $.FORM_FEED:break;case $.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.EOF:{this._err(be.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(be.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Y.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case $.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Y.DATA;break}case $.NULL:{this._err(be.unexpectedNullCharacter);break}case $.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case $.RIGHT_SQUARE_BRACKET:{this.state=Y.CDATA_SECTION_BRACKET;break}case $.EOF:{this._err(be.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===$.RIGHT_SQUARE_BRACKET?this.state=Y.CDATA_SECTION_END:(this._emitChars("]"),this.state=Y.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case $.GREATER_THAN_SIGN:{this.state=Y.DATA;break}case $.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Y.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(e){e===$.NUMBER_SIGN?this.state=Y.NUMERIC_CHARACTER_REFERENCE:y0(e)?(this.state=Y.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(e)):(this._flushCodePointConsumedAsCharacterReference($.AMPERSAND),this._reconsumeInState(this.returnState,e))}_stateNamedCharacterReference(e){const n=this._matchNamedCharacterReference(e);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference($.AMPERSAND),this.state=Y.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(e){y0(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===$.SEMICOLON&&this._err(be.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,e))}_stateNumericCharacterReference(e){this.charRefCode=0,e===$.LATIN_SMALL_X||e===$.LATIN_CAPITAL_X?this.state=Y.HEXADEMICAL_CHARACTER_REFERENCE_START:wl(e)?(this.state=Y.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(e)):(this._err(be.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference($.AMPERSAND),this._flushCodePointConsumedAsCharacterReference($.NUMBER_SIGN),this._reconsumeInState(this.returnState,e))}_stateHexademicalCharacterReferenceStart(e){xee(e)?(this.state=Y.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(e)):(this._err(be.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference($.AMPERSAND),this._flushCodePointConsumedAsCharacterReference($.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(e){bO(e)?this.charRefCode=this.charRefCode*16+e-55:yO(e)?this.charRefCode=this.charRefCode*16+e-87:wl(e)?this.charRefCode=this.charRefCode*16+e-48:e===$.SEMICOLON?this.state=Y.NUMERIC_CHARACTER_REFERENCE_END:(this._err(be.missingSemicolonAfterCharacterReference),this.state=Y.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateDecimalCharacterReference(e){wl(e)?this.charRefCode=this.charRefCode*10+e-48:e===$.SEMICOLON?this.state=Y.NUMERIC_CHARACTER_REFERENCE_END:(this._err(be.missingSemicolonAfterCharacterReference),this.state=Y.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(e))}_stateNumericCharacterReferenceEnd(e){if(this.charRefCode===$.NULL)this._err(be.nullCharacterReference),this.charRefCode=$.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(be.characterReferenceOutsideUnicodeRange),this.charRefCode=$.REPLACEMENT_CHARACTER;else if(hO(this.charRefCode))this._err(be.surrogateCharacterReference),this.charRefCode=$.REPLACEMENT_CHARACTER;else if(fO(this.charRefCode))this._err(be.noncharacterCharacterReference);else if(dO(this.charRefCode)||this.charRefCode===$.CARRIAGE_RETURN){this._err(be.controlCharacterReference);const n=Tee.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,e)}}const EO=new Set([C.DD,C.DT,C.LI,C.OPTGROUP,C.OPTION,C.P,C.RB,C.RP,C.RT,C.RTC]),ES=new Set([...EO,C.CAPTION,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]),qu=new Map([[C.APPLET,Se.HTML],[C.CAPTION,Se.HTML],[C.HTML,Se.HTML],[C.MARQUEE,Se.HTML],[C.OBJECT,Se.HTML],[C.TABLE,Se.HTML],[C.TD,Se.HTML],[C.TEMPLATE,Se.HTML],[C.TH,Se.HTML],[C.ANNOTATION_XML,Se.MATHML],[C.MI,Se.MATHML],[C.MN,Se.MATHML],[C.MO,Se.MATHML],[C.MS,Se.MATHML],[C.MTEXT,Se.MATHML],[C.DESC,Se.SVG],[C.FOREIGN_OBJECT,Se.SVG],[C.TITLE,Se.SVG]]),Ree=[C.H1,C.H2,C.H3,C.H4,C.H5,C.H6],Pee=[C.TR,C.TEMPLATE,C.HTML],Dee=[C.TBODY,C.TFOOT,C.THEAD,C.TEMPLATE,C.HTML],Oee=[C.TABLE,C.TEMPLATE,C.HTML],Iee=[C.TD,C.TH];class Lee{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=C.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===C.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Se.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Se.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ree,Se.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Iee,Se.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Oee,Se.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Dee,Se.HTML)}clearBackToTableRowContext(){this.clearBackTo(Pee,Se.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===C.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===C.HTML}hasInScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Se.HTML)return!0;if(qu.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e],r=this.treeAdapter.getNamespaceURI(this.items[e]);if(_O(n)&&r===Se.HTML)return!0;if(qu.get(n)===r)return!1}return!0}hasInListItemScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Se.HTML)return!0;if((r===C.UL||r===C.OL)&&i===Se.HTML||qu.get(r)===i)return!1}return!0}hasInButtonScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&i===Se.HTML)return!0;if(r===C.BUTTON&&i===Se.HTML||qu.get(r)===i)return!1}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Se.HTML){if(r===e)return!0;if(r===C.TABLE||r===C.TEMPLATE||r===C.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];if(this.treeAdapter.getNamespaceURI(this.items[e])===Se.HTML){if(n===C.TBODY||n===C.THEAD||n===C.TFOOT)return!0;if(n===C.TABLE||n===C.HTML)return!1}}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Se.HTML){if(r===e)return!0;if(r!==C.OPTION&&r!==C.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;EO.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;ES.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&ES.has(this.currentTagId);)this.pop()}}const im=3;var ur;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(ur=ur||(ur={}));const wS={type:ur.Marker};class Mee{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===ur.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===s&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===i&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<im)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<im)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=im&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(wS)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:ur.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ur.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(wS);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===ur.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===ur.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===ur.Element&&n.element===e)}}function SS(t){return{nodeName:"#text",value:t,parentNode:null}}const To={createDocument(){return{nodeName:"#document",mode:Nn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};To.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(To.isTextNode(n)){n.value+=e;return}}To.appendChild(t,SS(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&To.isTextNode(r)?r.value+=e:To.insertBefore(t,SS(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},wO="html",Nee="about:legacy-compat",Bee="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",SO=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Fee=[...SO,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Hee=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),TO=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Uee=[...TO,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function TS(t,e){return e.some(n=>t.startsWith(n))}function jee(t){return t.name===wO&&t.publicId===null&&(t.systemId===null||t.systemId===Nee)}function zee(t){if(t.name!==wO)return Nn.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Bee)return Nn.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),Hee.has(n))return Nn.QUIRKS;let r=e===null?Fee:SO;if(TS(n,r))return Nn.QUIRKS;if(r=e===null?TO:Uee,TS(n,r))return Nn.LIMITED_QUIRKS}return Nn.NO_QUIRKS}const CS={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Vee="definitionurl",Wee="definitionURL",Gee=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),$ee=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Se.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Se.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Se.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Se.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Se.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Se.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Se.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Se.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Se.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Se.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Se.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Se.XMLNS}]]),qee=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Kee=new Set([C.B,C.BIG,C.BLOCKQUOTE,C.BODY,C.BR,C.CENTER,C.CODE,C.DD,C.DIV,C.DL,C.DT,C.EM,C.EMBED,C.H1,C.H2,C.H3,C.H4,C.H5,C.H6,C.HEAD,C.HR,C.I,C.IMG,C.LI,C.LISTING,C.MENU,C.META,C.NOBR,C.OL,C.P,C.PRE,C.RUBY,C.S,C.SMALL,C.SPAN,C.STRONG,C.STRIKE,C.SUB,C.SUP,C.TABLE,C.TT,C.U,C.UL,C.VAR]);function Yee(t){const e=t.tagID;return e===C.FONT&&t.attrs.some(({name:r})=>r===Wi.COLOR||r===Wi.SIZE||r===Wi.FACE)||Kee.has(e)}function CO(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Vee){t.attrs[e].name=Wee;break}}function xO(t){for(let e=0;e<t.attrs.length;e++){const n=Gee.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function e1(t){for(let e=0;e<t.attrs.length;e++){const n=$ee.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Xee(t){const e=qee.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Aa(t.tagName))}function Qee(t,e){return e===Se.MATHML&&(t===C.MI||t===C.MO||t===C.MN||t===C.MS||t===C.MTEXT)}function Jee(t,e,n){if(e===Se.MATHML&&t===C.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Wi.ENCODING){const i=n[r].value.toLowerCase();return i===CS.TEXT_HTML||i===CS.APPLICATION_XML}}return e===Se.SVG&&(t===C.FOREIGN_OBJECT||t===C.DESC||t===C.TITLE)}function Zee(t,e,n,r){return(!r||r===Se.HTML)&&Jee(t,e,n)||(!r||r===Se.MATHML)&&Qee(t,e)}const ete="hidden",tte=8,nte=3;var ee;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const rte={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},AO=new Set([C.TABLE,C.TBODY,C.TFOOT,C.THEAD,C.TR]),xS={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:To,onParseError:null};class AS{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...xS,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new kee(this.options,this),this.activeFormattingElements=new Mee(this.treeAdapter),this.fragmentContextID=r?Aa(this.treeAdapter.getTagName(r)):C.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Lee(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...xS,...n};e??(e=r.treeAdapter.createElement(de.TEMPLATE,Se.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Se.HTML,[]),s=new this(r,i,e);return s.fragmentContextID===C.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:rte,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const r=e===this.document||this.treeAdapter.getNamespaceURI(e)===Se.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Se.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=xt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===de.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Se.HTML))switch(this.fragmentContextID){case C.TITLE:case C.TEXTAREA:{this.tokenizer.state=xt.RCDATA;break}case C.STYLE:case C.XMP:case C.IFRAME:case C.NOEMBED:case C.NOFRAMES:case C.NOSCRIPT:{this.tokenizer.state=xt.RAWTEXT;break}case C.SCRIPT:{this.tokenizer.state=xt.SCRIPT_DATA;break}case C.PLAINTEXT:{this.tokenizer.state=xt.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Se.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Se.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(de.HTML,Se.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,C.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),s=n.type===Ke.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===C.SVG&&this.treeAdapter.getTagName(n)===de.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Se.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===C.MGLYPH||e.tagID===C.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Se.HTML)}_processToken(e){switch(e.type){case Ke.CHARACTER:{this.onCharacter(e);break}case Ke.NULL_CHARACTER:{this.onNullCharacter(e);break}case Ke.COMMENT:{this.onComment(e);break}case Ke.DOCTYPE:{this.onDoctype(e);break}case Ke.START_TAG:{this._processStartTag(e);break}case Ke.END_TAG:{this.onEndTag(e);break}case Ke.EOF:{this.onEof(e);break}case Ke.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Zee(e,i,s,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===ur.Marker||this.openElements.contains(i.element)),r=n<0?e-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(C.P),this.openElements.popUntilTagNamePopped(C.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case C.TR:{this.insertionMode=ee.IN_ROW;return}case C.TBODY:case C.THEAD:case C.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case C.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case C.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case C.TABLE:{this.insertionMode=ee.IN_TABLE;return}case C.BODY:{this.insertionMode=ee.IN_BODY;return}case C.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case C.SELECT:{this._resetInsertionModeForSelect(e);return}case C.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case C.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case C.TD:case C.TH:{if(e>0){this.insertionMode=ee.IN_CELL;return}break}case C.HEAD:{if(e>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===C.TEMPLATE)break;if(r===C.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(e){return AO.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case C.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Se.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case C.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return See[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ine(this,e);return}switch(this.insertionMode){case ee.INITIAL:{$a(this,e);break}case ee.BEFORE_HTML:{Sl(this,e);break}case ee.BEFORE_HEAD:{Tl(this,e);break}case ee.IN_HEAD:{Cl(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{xl(this,e);break}case ee.AFTER_HEAD:{Al(this,e);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{RO(this,e);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{sm(this,e);break}case ee.IN_TABLE_TEXT:{MO(this,e);break}case ee.IN_COLUMN_GROUP:{Rd(this,e);break}case ee.AFTER_BODY:{Pd(this,e);break}case ee.AFTER_AFTER_BODY:{Ah(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){One(this,e);return}switch(this.insertionMode){case ee.INITIAL:{$a(this,e);break}case ee.BEFORE_HTML:{Sl(this,e);break}case ee.BEFORE_HEAD:{Tl(this,e);break}case ee.IN_HEAD:{Cl(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{xl(this,e);break}case ee.AFTER_HEAD:{Al(this,e);break}case ee.TEXT:{this._insertCharacters(e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{sm(this,e);break}case ee.IN_COLUMN_GROUP:{Rd(this,e);break}case ee.AFTER_BODY:{Pd(this,e);break}case ee.AFTER_AFTER_BODY:{Ah(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){v0(this,e);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{v0(this,e);break}case ee.IN_TABLE_TEXT:{qa(this,e);break}case ee.AFTER_BODY:{ute(this,e);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{hte(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{dte(this,e);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(e,be.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{qa(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,be.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Lne(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ee.INITIAL:{$a(this,e);break}case ee.BEFORE_HTML:{fte(this,e);break}case ee.BEFORE_HEAD:{mte(this,e);break}case ee.IN_HEAD:{Sr(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{bte(this,e);break}case ee.AFTER_HEAD:{vte(this,e);break}case ee.IN_BODY:{fn(this,e);break}case ee.IN_TABLE:{ua(this,e);break}case ee.IN_TABLE_TEXT:{qa(this,e);break}case ee.IN_CAPTION:{gne(this,e);break}case ee.IN_COLUMN_GROUP:{r1(this,e);break}case ee.IN_TABLE_BODY:{Nf(this,e);break}case ee.IN_ROW:{Bf(this,e);break}case ee.IN_CELL:{yne(this,e);break}case ee.IN_SELECT:{FO(this,e);break}case ee.IN_SELECT_IN_TABLE:{Ene(this,e);break}case ee.IN_TEMPLATE:{Sne(this,e);break}case ee.AFTER_BODY:{Cne(this,e);break}case ee.IN_FRAMESET:{xne(this,e);break}case ee.AFTER_FRAMESET:{kne(this,e);break}case ee.AFTER_AFTER_BODY:{Pne(this,e);break}case ee.AFTER_AFTER_FRAMESET:{Dne(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?Mne(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ee.INITIAL:{$a(this,e);break}case ee.BEFORE_HTML:{pte(this,e);break}case ee.BEFORE_HEAD:{gte(this,e);break}case ee.IN_HEAD:{_te(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{yte(this,e);break}case ee.AFTER_HEAD:{Ete(this,e);break}case ee.IN_BODY:{Mf(this,e);break}case ee.TEXT:{one(this,e);break}case ee.IN_TABLE:{sc(this,e);break}case ee.IN_TABLE_TEXT:{qa(this,e);break}case ee.IN_CAPTION:{_ne(this,e);break}case ee.IN_COLUMN_GROUP:{bne(this,e);break}case ee.IN_TABLE_BODY:{E0(this,e);break}case ee.IN_ROW:{BO(this,e);break}case ee.IN_CELL:{vne(this,e);break}case ee.IN_SELECT:{HO(this,e);break}case ee.IN_SELECT_IN_TABLE:{wne(this,e);break}case ee.IN_TEMPLATE:{Tne(this,e);break}case ee.AFTER_BODY:{jO(this,e);break}case ee.IN_FRAMESET:{Ane(this,e);break}case ee.AFTER_FRAMESET:{Rne(this,e);break}case ee.AFTER_AFTER_BODY:{Ah(this,e);break}}}onEof(e){switch(this.insertionMode){case ee.INITIAL:{$a(this,e);break}case ee.BEFORE_HTML:{Sl(this,e);break}case ee.BEFORE_HEAD:{Tl(this,e);break}case ee.IN_HEAD:{Cl(this,e);break}case ee.IN_HEAD_NO_SCRIPT:{xl(this,e);break}case ee.AFTER_HEAD:{Al(this,e);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{IO(this,e);break}case ee.TEXT:{ane(this,e);break}case ee.IN_TABLE_TEXT:{qa(this,e);break}case ee.IN_TEMPLATE:{UO(this,e);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{n1(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===$.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(e);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{kO(this,e);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{sm(this,e);break}case ee.IN_TABLE_TEXT:{LO(this,e);break}}}}function ite(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):OO(t,e),n}function ste(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(r<0?0:r),t.activeFormattingElements.removeEntry(e)),n}function ote(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==n;s++,o=i){i=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&s>=nte;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=ate(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function ate(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function lte(t,e,n){const r=t.treeAdapter.getTagName(e),i=Aa(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);i===C.TEMPLATE&&s===Se.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function cte(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,i.tagID)}function t1(t,e){for(let n=0;n<tte;n++){const r=ite(t,e);if(!r)break;const i=ste(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const s=ote(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(s),o&&lte(t,o,s),cte(t,i,r)}}function v0(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function ute(t,e){t._appendCommentNode(e,t.openElements.items[0])}function hte(t,e){t._appendCommentNode(e,t.document)}function n1(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function dte(t,e){t._setDocumentType(e);const n=e.forceQuirks?Nn.QUIRKS:zee(e);jee(e)||t._err(e,be.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=ee.BEFORE_HTML}function $a(t,e){t._err(e,be.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Nn.QUIRKS),t.insertionMode=ee.BEFORE_HTML,t._processToken(e)}function fte(t,e){e.tagID===C.HTML?(t._insertElement(e,Se.HTML),t.insertionMode=ee.BEFORE_HEAD):Sl(t,e)}function pte(t,e){const n=e.tagID;(n===C.HTML||n===C.HEAD||n===C.BODY||n===C.BR)&&Sl(t,e)}function Sl(t,e){t._insertFakeRootElement(),t.insertionMode=ee.BEFORE_HEAD,t._processToken(e)}function mte(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.HEAD:{t._insertElement(e,Se.HTML),t.headElement=t.openElements.current,t.insertionMode=ee.IN_HEAD;break}default:Tl(t,e)}}function gte(t,e){const n=e.tagID;n===C.HEAD||n===C.BODY||n===C.HTML||n===C.BR?Tl(t,e):t._err(e,be.endTagWithoutMatchingOpenElement)}function Tl(t,e){t._insertFakeElement(de.HEAD,C.HEAD),t.headElement=t.openElements.current,t.insertionMode=ee.IN_HEAD,t._processToken(e)}function Sr(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case C.TITLE:{t._switchToTextParsing(e,xt.RCDATA);break}case C.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,xt.RAWTEXT):(t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case C.NOFRAMES:case C.STYLE:{t._switchToTextParsing(e,xt.RAWTEXT);break}case C.SCRIPT:{t._switchToTextParsing(e,xt.SCRIPT_DATA);break}case C.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=ee.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case C.HEAD:{t._err(e,be.misplacedStartTagForHeadElement);break}default:Cl(t,e)}}function _te(t,e){switch(e.tagID){case C.HEAD:{t.openElements.pop(),t.insertionMode=ee.AFTER_HEAD;break}case C.BODY:case C.BR:case C.HTML:{Cl(t,e);break}case C.TEMPLATE:{oo(t,e);break}default:t._err(e,be.endTagWithoutMatchingOpenElement)}}function oo(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==C.TEMPLATE&&t._err(e,be.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,be.endTagWithoutMatchingOpenElement)}function Cl(t,e){t.openElements.pop(),t.insertionMode=ee.AFTER_HEAD,t._processToken(e)}function bte(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.BASEFONT:case C.BGSOUND:case C.HEAD:case C.LINK:case C.META:case C.NOFRAMES:case C.STYLE:{Sr(t,e);break}case C.NOSCRIPT:{t._err(e,be.nestedNoscriptInHead);break}default:xl(t,e)}}function yte(t,e){switch(e.tagID){case C.NOSCRIPT:{t.openElements.pop(),t.insertionMode=ee.IN_HEAD;break}case C.BR:{xl(t,e);break}default:t._err(e,be.endTagWithoutMatchingOpenElement)}}function xl(t,e){const n=e.type===Ke.EOF?be.openElementsLeftAfterEof:be.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=ee.IN_HEAD,t._processToken(e)}function vte(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.BODY:{t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=ee.IN_BODY;break}case C.FRAMESET:{t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_FRAMESET;break}case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{t._err(e,be.abandonedHeadElementChild),t.openElements.push(t.headElement,C.HEAD),Sr(t,e),t.openElements.remove(t.headElement);break}case C.HEAD:{t._err(e,be.misplacedStartTagForHeadElement);break}default:Al(t,e)}}function Ete(t,e){switch(e.tagID){case C.BODY:case C.HTML:case C.BR:{Al(t,e);break}case C.TEMPLATE:{oo(t,e);break}default:t._err(e,be.endTagWithoutMatchingOpenElement)}}function Al(t,e){t._insertFakeElement(de.BODY,C.BODY),t.insertionMode=ee.IN_BODY,Lf(t,e)}function Lf(t,e){switch(e.type){case Ke.CHARACTER:{RO(t,e);break}case Ke.WHITESPACE_CHARACTER:{kO(t,e);break}case Ke.COMMENT:{v0(t,e);break}case Ke.START_TAG:{fn(t,e);break}case Ke.END_TAG:{Mf(t,e);break}case Ke.EOF:{IO(t,e);break}}}function kO(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function RO(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function wte(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function Ste(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function Tte(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_FRAMESET)}function Cte(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML)}function xte(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),_O(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Se.HTML)}function Ate(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function kte(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML),n||(t.formElement=t.openElements.current))}function Rte(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===C.LI&&i===C.LI||(n===C.DD||n===C.DT)&&(i===C.DD||i===C.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==C.ADDRESS&&i!==C.DIV&&i!==C.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML)}function Pte(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.tokenizer.state=xt.PLAINTEXT}function Dte(t,e){t.openElements.hasInScope(C.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.framesetOk=!1}function Ote(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(de.A);n&&(t1(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Ite(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Lte(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(C.NOBR)&&(t1(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Se.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Mte(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function Nte(t,e){t.treeAdapter.getDocumentMode(t.document)!==Nn.QUIRKS&&t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=ee.IN_TABLE}function PO(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function DO(t){const e=pO(t,Wi.TYPE);return e!=null&&e.toLowerCase()===ete}function Bte(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Se.HTML),DO(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function Fte(t,e){t._appendElement(e,Se.HTML),e.ackSelfClosing=!0}function Hte(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._appendElement(e,Se.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Ute(t,e){e.tagName=de.IMG,e.tagID=C.IMG,PO(t,e)}function jte(t,e){t._insertElement(e,Se.HTML),t.skipNextNewLine=!0,t.tokenizer.state=xt.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=ee.TEXT}function zte(t,e){t.openElements.hasInButtonScope(C.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,xt.RAWTEXT)}function Vte(t,e){t.framesetOk=!1,t._switchToTextParsing(e,xt.RAWTEXT)}function kS(t,e){t._switchToTextParsing(e,xt.RAWTEXT)}function Wte(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===ee.IN_TABLE||t.insertionMode===ee.IN_CAPTION||t.insertionMode===ee.IN_TABLE_BODY||t.insertionMode===ee.IN_ROW||t.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function Gte(t,e){t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML)}function $te(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Se.HTML)}function qte(t,e){t.openElements.hasInScope(C.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(C.RTC),t._insertElement(e,Se.HTML)}function Kte(t,e){t._reconstructActiveFormattingElements(),CO(e),e1(e),e.selfClosing?t._appendElement(e,Se.MATHML):t._insertElement(e,Se.MATHML),e.ackSelfClosing=!0}function Yte(t,e){t._reconstructActiveFormattingElements(),xO(e),e1(e),e.selfClosing?t._appendElement(e,Se.SVG):t._insertElement(e,Se.SVG),e.ackSelfClosing=!0}function RS(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Se.HTML)}function fn(t,e){switch(e.tagID){case C.I:case C.S:case C.B:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.SMALL:case C.STRIKE:case C.STRONG:{Ite(t,e);break}case C.A:{Ote(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{xte(t,e);break}case C.P:case C.DL:case C.OL:case C.UL:case C.DIV:case C.DIR:case C.NAV:case C.MAIN:case C.MENU:case C.ASIDE:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.DETAILS:case C.ADDRESS:case C.ARTICLE:case C.SECTION:case C.SUMMARY:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{Cte(t,e);break}case C.LI:case C.DD:case C.DT:{Rte(t,e);break}case C.BR:case C.IMG:case C.WBR:case C.AREA:case C.EMBED:case C.KEYGEN:{PO(t,e);break}case C.HR:{Hte(t,e);break}case C.RB:case C.RTC:{$te(t,e);break}case C.RT:case C.RP:{qte(t,e);break}case C.PRE:case C.LISTING:{Ate(t,e);break}case C.XMP:{zte(t,e);break}case C.SVG:{Yte(t,e);break}case C.HTML:{wte(t,e);break}case C.BASE:case C.LINK:case C.META:case C.STYLE:case C.TITLE:case C.SCRIPT:case C.BGSOUND:case C.BASEFONT:case C.TEMPLATE:{Sr(t,e);break}case C.BODY:{Ste(t,e);break}case C.FORM:{kte(t,e);break}case C.NOBR:{Lte(t,e);break}case C.MATH:{Kte(t,e);break}case C.TABLE:{Nte(t,e);break}case C.INPUT:{Bte(t,e);break}case C.PARAM:case C.TRACK:case C.SOURCE:{Fte(t,e);break}case C.IMAGE:{Ute(t,e);break}case C.BUTTON:{Dte(t,e);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{Mte(t,e);break}case C.IFRAME:{Vte(t,e);break}case C.SELECT:{Wte(t,e);break}case C.OPTION:case C.OPTGROUP:{Gte(t,e);break}case C.NOEMBED:{kS(t,e);break}case C.FRAMESET:{Tte(t,e);break}case C.TEXTAREA:{jte(t,e);break}case C.NOSCRIPT:{t.options.scriptingEnabled?kS(t,e):RS(t,e);break}case C.PLAINTEXT:{Pte(t,e);break}case C.COL:case C.TH:case C.TD:case C.TR:case C.HEAD:case C.FRAME:case C.TBODY:case C.TFOOT:case C.THEAD:case C.CAPTION:case C.COLGROUP:break;default:RS(t,e)}}function Xte(t,e){if(t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ee.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function Qte(t,e){t.openElements.hasInScope(C.BODY)&&(t.insertionMode=ee.AFTER_BODY,jO(t,e))}function Jte(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function Zte(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(C.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(C.FORM):n&&t.openElements.remove(n))}function ene(t){t.openElements.hasInButtonScope(C.P)||t._insertFakeElement(de.P,C.P),t._closePElement()}function tne(t){t.openElements.hasInListItemScope(C.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(C.LI),t.openElements.popUntilTagNamePopped(C.LI))}function nne(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function rne(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function ine(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function sne(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(de.BR,C.BR),t.openElements.pop(),t.framesetOk=!1}function OO(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==C.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function Mf(t,e){switch(e.tagID){case C.A:case C.B:case C.I:case C.S:case C.U:case C.EM:case C.TT:case C.BIG:case C.CODE:case C.FONT:case C.NOBR:case C.SMALL:case C.STRIKE:case C.STRONG:{t1(t,e);break}case C.P:{ene(t);break}case C.DL:case C.UL:case C.OL:case C.DIR:case C.DIV:case C.NAV:case C.PRE:case C.MAIN:case C.MENU:case C.ASIDE:case C.BUTTON:case C.CENTER:case C.FIGURE:case C.FOOTER:case C.HEADER:case C.HGROUP:case C.DIALOG:case C.ADDRESS:case C.ARTICLE:case C.DETAILS:case C.SECTION:case C.SUMMARY:case C.LISTING:case C.FIELDSET:case C.BLOCKQUOTE:case C.FIGCAPTION:{Jte(t,e);break}case C.LI:{tne(t);break}case C.DD:case C.DT:{nne(t,e);break}case C.H1:case C.H2:case C.H3:case C.H4:case C.H5:case C.H6:{rne(t);break}case C.BR:{sne(t);break}case C.BODY:{Xte(t,e);break}case C.HTML:{Qte(t,e);break}case C.FORM:{Zte(t);break}case C.APPLET:case C.OBJECT:case C.MARQUEE:{ine(t,e);break}case C.TEMPLATE:{oo(t,e);break}default:OO(t,e)}}function IO(t,e){t.tmplInsertionModeStack.length>0?UO(t,e):n1(t,e)}function one(t,e){var n;e.tagID===C.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function ane(t,e){t._err(e,be.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function sm(t,e){if(AO.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=ee.IN_TABLE_TEXT,e.type){case Ke.CHARACTER:{MO(t,e);break}case Ke.WHITESPACE_CHARACTER:{LO(t,e);break}}else Kc(t,e)}function lne(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_CAPTION}function cne(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_COLUMN_GROUP}function une(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(de.COLGROUP,C.COLGROUP),t.insertionMode=ee.IN_COLUMN_GROUP,r1(t,e)}function hne(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_TABLE_BODY}function dne(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(de.TBODY,C.TBODY),t.insertionMode=ee.IN_TABLE_BODY,Nf(t,e)}function fne(t,e){t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function pne(t,e){DO(e)?t._appendElement(e,Se.HTML):Kc(t,e),e.ackSelfClosing=!0}function mne(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Se.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ua(t,e){switch(e.tagID){case C.TD:case C.TH:case C.TR:{dne(t,e);break}case C.STYLE:case C.SCRIPT:case C.TEMPLATE:{Sr(t,e);break}case C.COL:{une(t,e);break}case C.FORM:{mne(t,e);break}case C.TABLE:{fne(t,e);break}case C.TBODY:case C.TFOOT:case C.THEAD:{hne(t,e);break}case C.INPUT:{pne(t,e);break}case C.CAPTION:{lne(t,e);break}case C.COLGROUP:{cne(t,e);break}default:Kc(t,e)}}function sc(t,e){switch(e.tagID){case C.TABLE:{t.openElements.hasInTableScope(C.TABLE)&&(t.openElements.popUntilTagNamePopped(C.TABLE),t._resetInsertionMode());break}case C.TEMPLATE:{oo(t,e);break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:Kc(t,e)}}function Kc(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,Lf(t,e),t.fosterParentingEnabled=n}function LO(t,e){t.pendingCharacterTokens.push(e)}function MO(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function qa(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Kc(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const NO=new Set([C.CAPTION,C.COL,C.COLGROUP,C.TBODY,C.TD,C.TFOOT,C.TH,C.THEAD,C.TR]);function gne(t,e){const n=e.tagID;NO.has(n)?t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_TABLE,ua(t,e)):fn(t,e)}function _ne(t,e){const n=e.tagID;switch(n){case C.CAPTION:case C.TABLE:{t.openElements.hasInTableScope(C.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(C.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_TABLE,n===C.TABLE&&sc(t,e));break}case C.BODY:case C.COL:case C.COLGROUP:case C.HTML:case C.TBODY:case C.TD:case C.TFOOT:case C.TH:case C.THEAD:case C.TR:break;default:Mf(t,e)}}function r1(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.COL:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case C.TEMPLATE:{Sr(t,e);break}default:Rd(t,e)}}function bne(t,e){switch(e.tagID){case C.COLGROUP:{t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ee.IN_TABLE);break}case C.TEMPLATE:{oo(t,e);break}case C.COL:break;default:Rd(t,e)}}function Rd(t,e){t.openElements.currentTagId===C.COLGROUP&&(t.openElements.pop(),t.insertionMode=ee.IN_TABLE,t._processToken(e))}function Nf(t,e){switch(e.tagID){case C.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_ROW;break}case C.TH:case C.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(de.TR,C.TR),t.insertionMode=ee.IN_ROW,Bf(t,e);break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE,ua(t,e));break}default:ua(t,e)}}function E0(t,e){const n=e.tagID;switch(e.tagID){case C.TBODY:case C.TFOOT:case C.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE);break}case C.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE,sc(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:case C.TR:break;default:sc(t,e)}}function Bf(t,e){switch(e.tagID){case C.TH:case C.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Se.HTML),t.insertionMode=ee.IN_CELL,t.activeFormattingElements.insertMarker();break}case C.CAPTION:case C.COL:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,Nf(t,e));break}default:ua(t,e)}}function BO(t,e){switch(e.tagID){case C.TR:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY);break}case C.TABLE:{t.openElements.hasInTableScope(C.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,E0(t,e));break}case C.TBODY:case C.TFOOT:case C.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(C.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=ee.IN_TABLE_BODY,E0(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:case C.TD:case C.TH:break;default:sc(t,e)}}function yne(t,e){const n=e.tagID;NO.has(n)?(t.openElements.hasInTableScope(C.TD)||t.openElements.hasInTableScope(C.TH))&&(t._closeTableCell(),Bf(t,e)):fn(t,e)}function vne(t,e){const n=e.tagID;switch(n){case C.TD:case C.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=ee.IN_ROW);break}case C.TABLE:case C.TBODY:case C.TFOOT:case C.THEAD:case C.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),BO(t,e));break}case C.BODY:case C.CAPTION:case C.COL:case C.COLGROUP:case C.HTML:break;default:Mf(t,e)}}function FO(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t._insertElement(e,Se.HTML);break}case C.OPTGROUP:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Se.HTML);break}case C.INPUT:case C.KEYGEN:case C.TEXTAREA:case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),e.tagID!==C.SELECT&&t._processStartTag(e));break}case C.SCRIPT:case C.TEMPLATE:{Sr(t,e);break}}}function HO(t,e){switch(e.tagID){case C.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===C.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===C.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===C.OPTGROUP&&t.openElements.pop();break}case C.OPTION:{t.openElements.currentTagId===C.OPTION&&t.openElements.pop();break}case C.SELECT:{t.openElements.hasInSelectScope(C.SELECT)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode());break}case C.TEMPLATE:{oo(t,e);break}}}function Ene(t,e){const n=e.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t._processStartTag(e)):FO(t,e)}function wne(t,e){const n=e.tagID;n===C.CAPTION||n===C.TABLE||n===C.TBODY||n===C.TFOOT||n===C.THEAD||n===C.TR||n===C.TD||n===C.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(C.SELECT),t._resetInsertionMode(),t.onEndTag(e)):HO(t,e)}function Sne(t,e){switch(e.tagID){case C.BASE:case C.BASEFONT:case C.BGSOUND:case C.LINK:case C.META:case C.NOFRAMES:case C.SCRIPT:case C.STYLE:case C.TEMPLATE:case C.TITLE:{Sr(t,e);break}case C.CAPTION:case C.COLGROUP:case C.TBODY:case C.TFOOT:case C.THEAD:{t.tmplInsertionModeStack[0]=ee.IN_TABLE,t.insertionMode=ee.IN_TABLE,ua(t,e);break}case C.COL:{t.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,t.insertionMode=ee.IN_COLUMN_GROUP,r1(t,e);break}case C.TR:{t.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,t.insertionMode=ee.IN_TABLE_BODY,Nf(t,e);break}case C.TD:case C.TH:{t.tmplInsertionModeStack[0]=ee.IN_ROW,t.insertionMode=ee.IN_ROW,Bf(t,e);break}default:t.tmplInsertionModeStack[0]=ee.IN_BODY,t.insertionMode=ee.IN_BODY,fn(t,e)}}function Tne(t,e){e.tagID===C.TEMPLATE&&oo(t,e)}function UO(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(C.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):n1(t,e)}function Cne(t,e){e.tagID===C.HTML?fn(t,e):Pd(t,e)}function jO(t,e){var n;if(e.tagID===C.HTML){if(t.fragmentContext||(t.insertionMode=ee.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===C.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else Pd(t,e)}function Pd(t,e){t.insertionMode=ee.IN_BODY,Lf(t,e)}function xne(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.FRAMESET:{t._insertElement(e,Se.HTML);break}case C.FRAME:{t._appendElement(e,Se.HTML),e.ackSelfClosing=!0;break}case C.NOFRAMES:{Sr(t,e);break}}}function Ane(t,e){e.tagID===C.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==C.FRAMESET&&(t.insertionMode=ee.AFTER_FRAMESET))}function kne(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.NOFRAMES:{Sr(t,e);break}}}function Rne(t,e){e.tagID===C.HTML&&(t.insertionMode=ee.AFTER_AFTER_FRAMESET)}function Pne(t,e){e.tagID===C.HTML?fn(t,e):Ah(t,e)}function Ah(t,e){t.insertionMode=ee.IN_BODY,Lf(t,e)}function Dne(t,e){switch(e.tagID){case C.HTML:{fn(t,e);break}case C.NOFRAMES:{Sr(t,e);break}}}function One(t,e){e.chars=bt,t._insertCharacters(e)}function Ine(t,e){t._insertCharacters(e),t.framesetOk=!1}function zO(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Se.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Lne(t,e){if(Yee(e))zO(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Se.MATHML?CO(e):r===Se.SVG&&(Xee(e),xO(e)),e1(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function Mne(t,e){if(e.tagID===C.P||e.tagID===C.BR){zO(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Se.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}de.AREA,de.BASE,de.BASEFONT,de.BGSOUND,de.BR,de.COL,de.EMBED,de.FRAME,de.HR,de.IMG,de.INPUT,de.KEYGEN,de.LINK,de.META,de.PARAM,de.SOURCE,de.TRACK,de.WBR;const Nne=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),PS={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function VO(t,e){const n=$ne(t),r=cO("type",{handlers:{root:Bne,element:Fne,text:Hne,comment:GO,doctype:Une,raw:zne},unknown:Vne}),i={parser:n?new AS(PS):AS.getFragmentParser(void 0,PS),handle(a){r(a,i)},stitches:!1,options:e||{}};r(t,i),ka(i,Qr());const s=n?i.parser.document:i.parser.getFragment(),o=KZ(s,{file:i.options.file});return i.stitches&&$c(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const h=c.children;return h[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function WO(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function Bne(t,e){WO(t.children,e)}function Fne(t,e){Wne(t,e),WO(t.children,e),Gne(t,e)}function Hne(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:Ke.CHARACTER,chars:t.value,location:Yc(t)};ka(e,Qr(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Une(t,e){const n={type:Ke.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Yc(t)};ka(e,Qr(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function jne(t,e){e.stitches=!0;const n=qne(t);if("children"in t&&"children"in n){const r=VO({type:"root",children:t.children},e.options);n.children=r.children}GO({type:"comment",value:{stitch:n}},e)}function GO(t,e){const n=t.value,r={type:Ke.COMMENT,data:n,location:Yc(t)};ka(e,Qr(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function zne(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,$O(e,Qr(t)),e.parser.tokenizer.write(t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function Vne(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))jne(n,e);else{let r="";throw Nne.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ka(t,e){$O(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=xt.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function $O(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Wne(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===xt.PLAINTEXT)return;ka(e,Qr(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Ds.html;i===Ds.html&&n==="svg"&&(i=Ds.svg);const s=ZZ({...t,children:[]},{space:i===Ds.svg?"svg":"html"}),o={type:Ke.START_TAG,tagName:n,tagID:Aa(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Yc(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function Gne(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&aee.includes(n)||e.parser.tokenizer.state===xt.PLAINTEXT)return;ka(e,kf(t));const r={type:Ke.END_TAG,tagName:n,tagID:Aa(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Yc(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===xt.RCDATA||e.parser.tokenizer.state===xt.RAWTEXT||e.parser.tokenizer.state===xt.SCRIPT_DATA)&&(e.parser.tokenizer.state=xt.DATA)}function $ne(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Yc(t){const e=Qr(t)||{line:void 0,column:void 0,offset:void 0},n=kf(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function qne(t){return"children"in t?Qs({...t,children:[]}):Qs(t)}function Kne(t){return function(e,n){return VO(e,{...t,file:n})}}function DS(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function Yne(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Xne(t,e,n){const i=Of((n||{}).ignore||[]),s=Qne(e);let o=-1;for(;++o<s.length;)rO(t,"text",a);function a(c,u){let h=-1,d;for(;++h<u.length;){const f=u[h],_=d?d.children:void 0;if(i(f,_?_.indexOf(f):void 0,d))return;d=f}if(d)return l(c,u)}function l(c,u){const h=u[u.length-1],d=s[o][0],f=s[o][1];let _=0;const m=h.children.indexOf(c);let p=!1,b=[];d.lastIndex=0;let y=d.exec(c.value);for(;y;){const v=y.index,E={index:y.index,input:y.input,stack:[...u,c]};let w=f(...y,E);if(typeof w=="string"&&(w=w.length>0?{type:"text",value:w}:void 0),w===!1?d.lastIndex=v+1:(_!==v&&b.push({type:"text",value:c.value.slice(_,v)}),Array.isArray(w)?b.push(...w):w&&b.push(w),_=v+y[0].length,p=!0),!d.global)break;y=d.exec(c.value)}return p?(_<c.value.length&&b.push({type:"text",value:c.value.slice(_)}),h.children.splice(m,1,...b)):b=[c],m+b.length}}function Qne(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([Jne(i[0]),Zne(i[1])])}return e}function Jne(t){return typeof t=="string"?new RegExp(Yne(t),"g"):t}function Zne(t){return typeof t=="function"?t:function(){return t}}const om="phrasing",am=["autolink","link","image","label"];function ere(){return{transforms:[are],enter:{literalAutolink:nre,literalAutolinkEmail:lm,literalAutolinkHttp:lm,literalAutolinkWww:lm},exit:{literalAutolink:ore,literalAutolinkEmail:sre,literalAutolinkHttp:rre,literalAutolinkWww:ire}}}function tre(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:om,notInConstruct:am},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:om,notInConstruct:am},{character:":",before:"[ps]",after:"\\/",inConstruct:om,notInConstruct:am}]}}function nre(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function lm(t){this.config.enter.autolinkProtocol.call(this,t)}function rre(t){this.config.exit.autolinkProtocol.call(this,t)}function ire(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function sre(t){this.config.exit.autolinkEmail.call(this,t)}function ore(t){this.exit(t)}function are(t){Xne(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,lre],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,cre]],{ignore:["link","linkReference"]})}function lre(t,e,n,r,i){let s="";if(!qO(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!ure(n)))return!1;const o=hre(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function cre(t,e,n,r){return!qO(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function ure(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function hre(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=DS(t,"(");let s=DS(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function qO(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Xs(n)||Rf(n))&&(!e||n!==47)}KO.peek=wre;function dre(){return{enter:{gfmFootnoteDefinition:pre,gfmFootnoteDefinitionLabelString:mre,gfmFootnoteCall:bre,gfmFootnoteCallString:yre},exit:{gfmFootnoteDefinition:_re,gfmFootnoteDefinitionLabelString:gre,gfmFootnoteCall:Ere,gfmFootnoteCallString:vre}}}function fre(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:Sre,footnoteReference:KO}}}function pre(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function mre(){this.buffer()}function gre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=e,n.identifier=gr(this.sliceSerialize(t)).toLowerCase()}function _re(t){this.exit(t)}function bre(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function yre(){this.buffer()}function vre(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=e,n.identifier=gr(this.sliceSerialize(t)).toLowerCase()}function Ere(t){this.exit(t)}function KO(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{...i.current(),before:s,after:"]"})),a(),o(),s+=i.move("]"),s}function wre(){return"["}function Sre(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteDefinition"),a=n.enter("label");return s+=i.move(n.safe(n.associationId(t),{...i.current(),before:s,after:"]"})),a(),s+=i.move("]:"+(t.children&&t.children.length>0?" ":"")),i.shift(4),s+=i.move(n.indentLines(n.containerFlow(t,i.current()),Tre)),o(),s}function Tre(t,e,n){return e===0?t:(n?"":"    ")+t}const Cre=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];YO.peek=Pre;function xre(){return{canContainEols:["delete"],enter:{strikethrough:kre},exit:{strikethrough:Rre}}}function Are(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Cre}],handlers:{delete:YO}}}function kre(t){this.enter({type:"delete",children:[]},t)}function Rre(t){this.exit(t)}function YO(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Pre(){return"~"}function Dre(t,e={}){const n=(e.align||[]).concat(),r=e.stringLength||Ire,i=[],s=[],o=[],a=[];let l=0,c=-1;for(;++c<t.length;){const _=[],g=[];let m=-1;for(t[c].length>l&&(l=t[c].length);++m<t[c].length;){const p=Ore(t[c][m]);if(e.alignDelimiters!==!1){const b=r(p);g[m]=b,(a[m]===void 0||b>a[m])&&(a[m]=b)}_.push(p)}s[c]=_,o[c]=g}let u=-1;if(typeof n=="object"&&"length"in n)for(;++u<l;)i[u]=OS(n[u]);else{const _=OS(n);for(;++u<l;)i[u]=_}u=-1;const h=[],d=[];for(;++u<l;){const _=i[u];let g="",m="";_===99?(g=":",m=":"):_===108?g=":":_===114&&(m=":");let p=e.alignDelimiters===!1?1:Math.max(1,a[u]-g.length-m.length);const b=g+"-".repeat(p)+m;e.alignDelimiters!==!1&&(p=g.length+p+m.length,p>a[u]&&(a[u]=p),d[u]=p),h[u]=b}s.splice(1,0,h),o.splice(1,0,d),c=-1;const f=[];for(;++c<s.length;){const _=s[c],g=o[c];u=-1;const m=[];for(;++u<l;){const p=_[u]||"";let b="",y="";if(e.alignDelimiters!==!1){const v=a[u]-(g[u]||0),E=i[u];E===114?b=" ".repeat(v):E===99?v%2?(b=" ".repeat(v/2+.5),y=" ".repeat(v/2-.5)):(b=" ".repeat(v/2),y=b):y=" ".repeat(v)}e.delimiterStart!==!1&&!u&&m.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&p==="")&&(e.delimiterStart!==!1||u)&&m.push(" "),e.alignDelimiters!==!1&&m.push(b),m.push(p),e.alignDelimiters!==!1&&m.push(y),e.padding!==!1&&m.push(" "),(e.delimiterEnd!==!1||u!==l-1)&&m.push("|")}f.push(e.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return f.join(`
`)}function Ore(t){return t==null?"":String(t)}function Ire(t){return t.length}function OS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Lre(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Mre);return i(),o}function Mre(t,e,n){return">"+(n?"":" ")+t}function Nre(t,e){return IS(t,e.inConstruct,!0)&&!IS(t,e.notInConstruct,!1)}function IS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function LS(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Nre(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Bre(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function Fre(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function Hre(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Ure(t,e,n,r){const i=Hre(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(Fre(t,n)){const h=n.enter("codeIndented"),d=n.indentLines(s,jre);return h(),d}const a=n.createTracker(r),l=i.repeat(Math.max(Bre(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const h=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),h()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function jre(t,e,n){return(n?"":"    ")+t}function i1(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function zre(t,e,n,r){const i=i1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function Vre(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}XO.peek=Wre;function XO(t,e,n,r){const i=Vre(n),s=n.enter("emphasis"),o=n.createTracker(r);let a=o.move(i);return a+=o.move(n.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i),s(),a}function Wre(t,e,n){return n.options.emphasis||"*"}function Gre(t,e){let n=!1;return $c(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,d0}),!!((!t.depth||t.depth<3)&&Wb(t)&&(e.options.setext||n))}function $re(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(Gre(t,n)){const u=n.enter("headingSetext"),h=n.enter("phrasing"),d=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),u(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c="&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}QO.peek=qre;function QO(t){return t.value||""}function qre(){return"<"}JO.peek=Kre;function JO(t,e,n,r){const i=i1(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function Kre(){return"!"}ZO.peek=Yre;function ZO(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Yre(){return"!"}eI.peek=Xre;function eI(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function Xre(){return"`"}function tI(t,e){const n=Wb(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}nI.peek=Qre;function nI(t,e,n,r){const i=i1(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(tI(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),a(),n.stack=u,h}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function Qre(t,e,n){return tI(t,n)?"<":"["}rI.peek=Jre;function rI(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==h?l+=a.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Jre(){return"["}function s1(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Zre(t){const e=s1(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function eie(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function iI(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function tie(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?eie(n):s1(n);const a=t.ordered?o==="."?")":".":Zre(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),iI(n)===o&&u){let h=-1;for(;++h<t.children.length;){const d=t.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function nie(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function rie(t,e,n,r){const i=nie(n);let s=n.bulletCurrent||s1(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(h,d,f){return d?(f?"":" ".repeat(o))+h:(f?s:s+" ".repeat(o-s.length))+h}}function iie(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const sie=Of(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function oie(t,e,n,r){return(t.children.some(function(o){return sie(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function aie(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}sI.peek=lie;function sI(t,e,n,r){const i=aie(n),s=n.enter("strong"),o=n.createTracker(r);let a=o.move(i+i);return a+=o.move(n.containerPhrasing(t,{before:a,after:i,...o.current()})),a+=o.move(i+i),s(),a}function lie(t,e,n){return n.options.strong||"*"}function cie(t,e,n,r){return n.safe(t.value,r)}function uie(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function hie(t,e,n){const r=(iI(n)+(n.options.ruleSpaces?" ":"")).repeat(uie(n));return n.options.ruleSpaces?r.slice(0,-1):r}const oI={blockquote:Lre,break:LS,code:Ure,definition:zre,emphasis:XO,hardBreak:LS,heading:$re,html:QO,image:JO,imageReference:ZO,inlineCode:eI,link:nI,linkReference:rI,list:tie,listItem:rie,paragraph:iie,root:oie,strong:sI,text:cie,thematicBreak:hie};function die(){return{enter:{table:fie,tableData:MS,tableHeader:MS,tableRow:mie},exit:{codeText:gie,table:pie,tableData:cm,tableHeader:cm,tableRow:cm}}}function fie(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function pie(t){this.exit(t),this.data.inTable=void 0}function mie(t){this.enter({type:"tableRow",children:[]},t)}function cm(t){this.exit(t)}function MS(t){this.enter({type:"tableCell",children:[]},t)}function gie(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,_ie));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function _ie(t,e){return e==="|"?e:t}function bie(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:o,tableCell:l,tableRow:a}};function o(f,_,g,m){return c(u(f,g,m),f.align)}function a(f,_,g,m){const p=h(f,g,m),b=c([p]);return b.slice(0,b.indexOf(`
`))}function l(f,_,g,m){const p=g.enter("tableCell"),b=g.enter("phrasing"),y=g.containerPhrasing(f,{...m,before:s,after:s});return b(),p(),y}function c(f,_){return Dre(f,{align:_,alignDelimiters:r,padding:n,stringLength:i})}function u(f,_,g){const m=f.children;let p=-1;const b=[],y=_.enter("table");for(;++p<m.length;)b[p]=h(m[p],_,g);return y(),b}function h(f,_,g){const m=f.children;let p=-1;const b=[],y=_.enter("tableRow");for(;++p<m.length;)b[p]=l(m[p],f,_,g);return y(),b}function d(f,_,g){let m=oI.inlineCode(f,_,g);return g.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function yie(){return{exit:{taskListCheckValueChecked:NS,taskListCheckValueUnchecked:NS,paragraph:Eie}}}function vie(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:wie}}}function NS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Eie(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function wie(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=oI.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function Sie(){return[ere(),dre(),xre(),die(),yie()]}function Tie(t){return{extensions:[tre(),fre(),Are(),bie(t),vie()]}}const Cie={tokenize:Die,partial:!0},aI={tokenize:Oie,partial:!0},lI={tokenize:Iie,partial:!0},cI={tokenize:Lie,partial:!0},xie={tokenize:Mie,partial:!0},uI={tokenize:Rie,previous:dI},hI={tokenize:Pie,previous:fI},Ei={tokenize:kie,previous:pI},Jr={};function Aie(){return{text:Jr}}let fs=48;for(;fs<123;)Jr[fs]=Ei,fs++,fs===58?fs=65:fs===91&&(fs=97);Jr[43]=Ei;Jr[45]=Ei;Jr[46]=Ei;Jr[95]=Ei;Jr[72]=[Ei,hI];Jr[104]=[Ei,hI];Jr[87]=[Ei,uI];Jr[119]=[Ei,uI];function kie(t,e,n){const r=this;let i,s;return o;function o(h){return!w0(h)||!pI.call(r,r.previous)||o1(r.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(h))}function a(h){return w0(h)?(t.consume(h),a):h===64?(t.consume(h),l):n(h)}function l(h){return h===46?t.check(xie,u,c)(h):h===45||h===95||an(h)?(s=!0,t.consume(h),l):u(h)}function c(h){return t.consume(h),i=!0,l}function u(h){return s&&i&&gn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function Rie(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!dI.call(r,r.previous)||o1(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Cie,t.attempt(aI,t.attempt(lI,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Pie(t,e,n){const r=this;let i="",s=!1;return o;function o(h){return(h===72||h===104)&&fI.call(r,r.previous)&&!o1(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),t.consume(h),a):n(h)}function a(h){if(gn(h)&&i.length<5)return i+=String.fromCodePoint(h),t.consume(h),a;if(h===58){const d=i.toLowerCase();if(d==="http"||d==="https")return t.consume(h),l}return n(h)}function l(h){return h===47?(t.consume(h),s?c:(s=!0,l)):n(h)}function c(h){return h===null||Cd(h)||ht(h)||Xs(h)||Rf(h)?n(h):t.attempt(aI,t.attempt(lI,u),n)(h)}function u(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function Die(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Oie(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(cI,l,a)(c):c===null||ht(c)||Xs(c)||c!==45&&Rf(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function Iie(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(cI,e,s)(o):o===null||ht(o)||Xs(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function Lie(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||ht(a)||Xs(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||ht(a)||Xs(a)?e(a):r(a)}function s(a){return gn(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):gn(a)?(t.consume(a),o):n(a)}}function Mie(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return an(s)?n(s):e(s)}}function dI(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ht(t)}function fI(t){return!gn(t)}function pI(t){return!(t===47||w0(t))}function w0(t){return t===43||t===45||t===46||t===95||an(t)}function o1(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Nie={tokenize:Wie,partial:!0};function Bie(){return{document:{91:{tokenize:jie,continuation:{tokenize:zie},exit:Vie}},text:{91:{tokenize:Uie},93:{add:"after",tokenize:Fie,resolveTo:Hie}}}}function Fie(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=gr(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Hie(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function Uie(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(h){if(s>999||h===93&&!o||h===null||h===91||ht(h))return n(h);if(h===93){t.exit("chunkString");const d=t.exit("gfmFootnoteCallString");return i.includes(gr(r.sliceSerialize(d)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return ht(h)||(o=!0),s++,t.consume(h),h===92?u:c}function u(h){return h===91||h===92||h===93?(t.consume(h),s++,c):c(h)}}function jie(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(_){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(_){return _===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(_)}function u(_){if(o>999||_===93&&!a||_===null||_===91||ht(_))return n(_);if(_===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=gr(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(_),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),d}return ht(_)||(a=!0),o++,t.consume(_),_===92?h:u}function h(_){return _===91||_===92||_===93?(t.consume(_),o++,u):u(_)}function d(_){return _===58?(t.enter("definitionMarker"),t.consume(_),t.exit("definitionMarker"),i.includes(s)||i.push(s),nt(t,f,"gfmFootnoteDefinitionWhitespace")):n(_)}function f(_){return e(_)}}function zie(t,e,n){return t.check(Gc,e,t.attempt(Nie,e,n))}function Vie(t){t.exit("gfmFootnoteDefinition")}function Wie(t,e,n){const r=this;return nt(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Gie(t){let n=(t||{}).singleTilde;const r={tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},h={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},d=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",h,a]],f=a.parser.constructs.insideSpan.null;f&&nr(d,d.length,0,Pf(f,o.slice(c+1,l),a)),nr(d,d.length,0,[["exit",h,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),nr(o,c-1,l-c+3,d),l=c+d.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let h=0;return d;function d(_){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(_):(o.enter("strikethroughSequenceTemporary"),f(_))}function f(_){const g=xd(c);if(_===126)return h>1?l(_):(o.consume(_),h++,f);if(h<2&&!n)return l(_);const m=o.exit("strikethroughSequenceTemporary"),p=xd(_);return m._open=!p||p===2&&!!g,m._close=!g||g===2&&!!p,a(_)}}}class $ie{constructor(){this.map=[]}add(e,n,r){qie(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push([...e]),e.length=0;let i=r.pop();for(;i;)e.push(...i),i=r.pop();this.map.length=0}}function qie(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Kie(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Yie(){return{flow:{null:{tokenize:Xie,resolveAll:Qie}}}}function Xie(t,e,n){const r=this;let i=0,s=0,o;return a;function a(R){let U=r.events.length-1;for(;U>-1;){const A=r.events[U][1].type;if(A==="lineEnding"||A==="linePrefix")U--;else break}const P=U>-1?r.events[U][1].type:null,B=P==="tableHead"||P==="tableRow"?w:l;return B===w&&r.parser.lazy[r.now().line]?n(R):B(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),c(R)}function c(R){return R===124||(o=!0,s+=1),u(R)}function u(R){return R===null?n(R):Fe(R)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),f):n(R):Qe(R)?nt(t,u,"whitespace")(R):(s+=1,o&&(o=!1,i+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),h(R)))}function h(R){return R===null||R===124||ht(R)?(t.exit("data"),u(R)):(t.consume(R),R===92?d:h)}function d(R){return R===92||R===124?(t.consume(R),h):h(R)}function f(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,Qe(R)?nt(t,_,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):_(R))}function _(R){return R===45||R===58?m(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),g):E(R)}function g(R){return Qe(R)?nt(t,m,"whitespace")(R):m(R)}function m(R){return R===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),p):R===45?(s+=1,p(R)):R===null||Fe(R)?v(R):E(R)}function p(R){return R===45?(t.enter("tableDelimiterFiller"),b(R)):E(R)}function b(R){return R===45?(t.consume(R),b):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),y):(t.exit("tableDelimiterFiller"),y(R))}function y(R){return Qe(R)?nt(t,v,"whitespace")(R):v(R)}function v(R){return R===124?_(R):R===null||Fe(R)?!o||i!==s?E(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):E(R)}function E(R){return n(R)}function w(R){return t.enter("tableRow"),T(R)}function T(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),T):R===null||Fe(R)?(t.exit("tableRow"),e(R)):Qe(R)?nt(t,T,"whitespace")(R):(t.enter("data"),S(R))}function S(R){return R===null||R===124||ht(R)?(t.exit("data"),T(R)):(t.consume(R),R===92?x:S)}function x(R){return R===92||R===124?(t.consume(R),S):S(R)}}function Qie(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,h;const d=new $ie;for(;++n<t.length;){const f=t[n],_=f[1];f[0]==="enter"?_.type==="tableHead"?(a=!1,l!==0&&(BS(d,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},_.start),end:Object.assign({},_.end)},d.add(n,0,[["enter",c,e]])):_.type==="tableRow"||_.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},_.start),end:Object.assign({},_.end)},d.add(n,0,[["enter",u,e]])),i=_.type==="tableDelimiterRow"?2:u?3:1):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Ku(d,e,s,i,void 0,h),s=[0,0,0,0]),o[2]=n)):_.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=Ku(d,e,s,i,void 0,h)),s=o,o=[s[1],n,0,0])):_.type==="tableHead"?(a=!0,l=n):_.type==="tableRow"||_.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],h=Ku(d,e,s,i,n,h)):o[1]!==0&&(h=Ku(d,e,o,i,n,h)),i=0):i&&(_.type==="data"||_.type==="tableDelimiterMarker"||_.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&BS(d,e,l,c,u),d.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=Kie(e.events,n))}return t}function Ku(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},Co(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=Co(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=Co(e.events,n[2]),u=Co(e.events,n[3]),h={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",h,e]]),r!==2){const d=e.events[n[2]],f=e.events[n[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",n[3]>n[2]+1){const _=n[2]+1,g=n[3]-n[2]-1;t.add(_,g,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return i!==void 0&&(s.end=Object.assign({},Co(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function BS(t,e,n,r,i){const s=[],o=Co(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function Co(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const Jie={tokenize:ese};function Zie(){return{text:{91:Jie}}}function ese(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return ht(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Fe(l)?e(l):Qe(l)?t.check({tokenize:tse},e,n)(l):n(l)}}function tse(t,e,n){return nt(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function nse(t){return BD([Aie(),Bie(),Gie(t),Yie(),Zie()])}const rse={};function ise(t){const e=this,n=t||rse,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(nse(n)),s.push(Sie()),o.push(Tie(n))}const ps=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],kl={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...ps,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...ps],h2:[["className","sr-only"]],img:[...ps,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...ps,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...ps],table:[...ps],ul:[...ps,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Di={}.hasOwnProperty;function sse(t,e){let n={type:"root",children:[]};const r={schema:e?{...kl,...e}:kl,stack:[]},i=mI(r,t);return i&&(Array.isArray(i)?i.length===1?n=i[0]:n.children=i:n=i),n}function mI(t,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return ose(t,n);case"doctype":return ase(t,n);case"element":return lse(t,n);case"root":return cse(t,n);case"text":return use(t,n)}}}function ose(t,e){if(t.schema.allowComments){const n=typeof e.value=="string"?e.value:"",r=n.indexOf("-->"),s={type:"comment",value:r<0?n:n.slice(0,r)};return Xc(s,e),s}}function ase(t,e){if(t.schema.allowDoctypes){const n={type:"doctype"};return Xc(n,e),n}}function lse(t,e){const n=typeof e.tagName=="string"?e.tagName:"";t.stack.push(n);const r=gI(t,e.children),i=hse(t,e.properties);t.stack.pop();let s=!1;if(n&&n!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(n))&&(s=!0,t.schema.ancestors&&Di.call(t.schema.ancestors,n))){const a=t.schema.ancestors[n];let l=-1;for(s=!1;++l<a.length;)t.stack.includes(a[l])&&(s=!0)}if(!s)return t.schema.strip&&!t.schema.strip.includes(n)?r:void 0;const o={type:"element",tagName:n,properties:i,children:r};return Xc(o,e),o}function cse(t,e){const r={type:"root",children:gI(t,e.children)};return Xc(r,e),r}function use(t,e){const r={type:"text",value:typeof e.value=="string"?e.value:""};return Xc(r,e),r}function gI(t,e){const n=[];if(Array.isArray(e)){const r=e;let i=-1;for(;++i<r.length;){const s=mI(t,r[i]);s&&(Array.isArray(s)?n.push(...s):n.push(s))}}return n}function hse(t,e){const n=t.stack[t.stack.length-1],r=t.schema.attributes,i=t.schema.required,s=r&&Di.call(r,n)?r[n]:void 0,o=r&&Di.call(r,"*")?r["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Di.call(a,c)){const u=a[c];let h=FS(t,HS(s,c),c,u);h==null&&(h=FS(t,HS(o,c),c,u)),h!=null&&(l[c]=h)}if(i&&Di.call(i,n)){const u=i[n];for(c in u)Di.call(u,c)&&!Di.call(l,c)&&(l[c]=u[c])}return l}function FS(t,e,n,r){return e?Array.isArray(r)?dse(t,e,n,r):_I(t,e,n,r):void 0}function dse(t,e,n,r){let i=-1;const s=[];for(;++i<r.length;){const o=_I(t,e,n,r[i]);(typeof o=="number"||typeof o=="string")&&s.push(o)}return s}function _I(t,e,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&fse(t,n,r)){if(typeof e=="object"&&e.length>1){let i=!1,s=0;for(;++s<e.length;){const o=e[s];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(r))){i=!0;break}}else if(o===r){i=!0;break}}if(!i)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(n)?t.schema.clobberPrefix+r:r}}function fse(t,e,n){const r=t.schema.protocols&&Di.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||r.length===0)return!0;const i=String(n),s=i.indexOf(":"),o=i.indexOf("?"),a=i.indexOf("#"),l=i.indexOf("/");if(s<0||l>-1&&s>l||o>-1&&s>o||a>-1&&s>a)return!0;let c=-1;for(;++c<r.length;){const u=r[c];if(s===u.length&&i.slice(0,u.length)===u)return!0}return!1}function Xc(t,e){const n=DD(e);e.data&&(t.data=Qs(e.data)),n&&(t.position=n)}function HS(t,e){let n,r=-1;if(t)for(;++r<t.length;){const i=t[r],s=typeof i=="string"?i:i[0];if(s===e)return i;s==="data*"&&(n=i)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function pse(t){return function(e){return sse(e,t)}}const bI=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var"],mse={...kl,tagNames:bI,attributes:{...kl.attributes,div:[...kl.attributes?.div??[],"data*",["className","__boltArtifact__"]]},strip:[]};function gse(t){const e=[ise];return t&&e.unshift(bse),e}function _se(t){const e=[];return t&&e.push(Kne,[pse,mse]),e}const bse=()=>(t,e)=>{const n=e.toString();$c(t,(r,i,s)=>{if(i==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(r.type)||!r.position)return!0;let o=n.slice(r.position.start.offset,r.position.end.offset);return r.type==="heading"&&(o=`
${o}`),s.children[i]={type:"text",value:o},[nO,i]})},yI=[{id:"abap",name:"ABAP",import:()=>X(()=>import("./abap-DXFkqnOI.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>X(()=>import("./actionscript-3-BigF1UXR.js"),[])},{id:"ada",name:"Ada",import:()=>X(()=>import("./ada-CowR2XfX.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>X(()=>import("./angular-html-DZQ5UQWW.js").then(t=>t.e),__vite__mapDeps([12,13,14,15]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>X(()=>import("./angular-ts-DOuPvTiZ.js"),__vite__mapDeps([16,12,13,14,15,17]))},{id:"apache",name:"Apache Conf",import:()=>X(()=>import("./apache-rS0jd3Ly.js"),[])},{id:"apex",name:"Apex",import:()=>X(()=>import("./apex-Sfo2eW0G.js"),[])},{id:"apl",name:"APL",import:()=>X(()=>import("./apl-D9TNySCV.js"),__vite__mapDeps([18,13,14,15,19,20,21]))},{id:"applescript",name:"AppleScript",import:()=>X(()=>import("./applescript-B4yE-MfL.js"),[])},{id:"ara",name:"Ara",import:()=>X(()=>import("./ara-CG4fK2Nq.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>X(()=>import("./asciidoc-CF5eOCvB.js"),__vite__mapDeps([22,13,14,15,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,20,21,40,41,42,43,44,45,46,47,48,49,19,50,51,52,53,54,55,17,56,57,58]))},{id:"asm",name:"Assembly",import:()=>X(()=>import("./asm-PWN5J14X.js"),[])},{id:"astro",name:"Astro",import:()=>X(()=>import("./astro-U9VgAVQT.js"),__vite__mapDeps([59,21,14,58,60,54,15,17,45,61,62]))},{id:"awk",name:"AWK",import:()=>X(()=>import("./awk-i0IPvypD.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>X(()=>import("./ballerina-T9ysyp6P.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>X(()=>import("./bat-BPiaQZfK.js"),[])},{id:"beancount",name:"Beancount",import:()=>X(()=>import("./beancount-Urb1RsFe.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>X(()=>import("./berry-CxrokwfH.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>X(()=>import("./bibtex-BaedD2tq.js"),[])},{id:"bicep",name:"Bicep",import:()=>X(()=>import("./bicep-3ghuYFLd.js"),[])},{id:"blade",name:"Blade",import:()=>X(()=>import("./blade-HiqCVk8k.js"),__vite__mapDeps([63,13,14,15,19,20,30,21]))},{id:"c",name:"C",import:()=>X(()=>import("./c-RCJZWN-0.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>X(()=>import("./cadence-Bgpqy2XC.js"),[])},{id:"clarity",name:"Clarity",import:()=>X(()=>import("./clarity-CIekO_uJ.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>X(()=>import("./clojure-BF6G6X0H.js"),[])},{id:"cmake",name:"CMake",import:()=>X(()=>import("./cmake-DXZpi2gR.js"),[])},{id:"cobol",name:"COBOL",import:()=>X(()=>import("./cobol-DgBJixdi.js"),__vite__mapDeps([64,30,13,14,15,20]))},{id:"codeowners",name:"CODEOWNERS",import:()=>X(()=>import("./codeowners-CGmujMTu.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>X(()=>import("./codeql-BOpLLL-w.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>X(()=>import("./coffee-B4DZ7swD.js"),__vite__mapDeps([27,14]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>X(()=>import("./common-lisp-C3qUB5O8.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>X(()=>import("./cpp-B9__le0e.js"),__vite__mapDeps([28,29,25,30]))},{id:"crystal",name:"Crystal",import:()=>X(()=>import("./crystal-DwllXkRF.js"),__vite__mapDeps([65,13,14,15,30,25,51]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>X(()=>import("./csharp-DISxKEhY.js"),[])},{id:"css",name:"CSS",import:()=>X(()=>import("./css-CbYhyuC0.js"),[])},{id:"csv",name:"CSV",import:()=>X(()=>import("./csv-B2DkETJQ.js"),[])},{id:"cue",name:"CUE",import:()=>X(()=>import("./cue-C6Aznpr-.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>X(()=>import("./cypher-ByMv4Xf1.js"),[])},{id:"d",name:"D",import:()=>X(()=>import("./d-PifQWv0n.js"),[])},{id:"dart",name:"Dart",import:()=>X(()=>import("./dart-DZLoTQm4.js"),[])},{id:"dax",name:"DAX",import:()=>X(()=>import("./dax-DsfXcHUZ.js"),[])},{id:"desktop",name:"Desktop",import:()=>X(()=>import("./desktop-D71BffLY.js"),[])},{id:"diff",name:"Diff",import:()=>X(()=>import("./diff-DvyTQcux.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>X(()=>import("./docker-DNR26wTC.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>X(()=>import("./dream-maker-Eh5U-gDp.js"),[])},{id:"elixir",name:"Elixir",import:()=>X(()=>import("./elixir-DjCTzIqv.js"),__vite__mapDeps([34,13,14,15]))},{id:"elm",name:"Elm",import:()=>X(()=>import("./elm-CTSLo1i4.js"),__vite__mapDeps([35,29,25]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>X(()=>import("./emacs-lisp-BEjL32p1.js"),[])},{id:"erb",name:"ERB",import:()=>X(()=>import("./erb-C4FIxXpw.js"),__vite__mapDeps([66,13,14,15,50,19,20,30,25,51,52]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>X(()=>import("./erlang-DS9ZWoKD.js"),[])},{id:"fennel",name:"Fennel",import:()=>X(()=>import("./fennel-C6XIsc4F.js"),[])},{id:"fish",name:"Fish",import:()=>X(()=>import("./fish-DfeQjIbs.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>X(()=>import("./fluent-KPqz0Sb3.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>X(()=>import("./fortran-fixed-form-CdVjoHtb.js"),__vite__mapDeps([67,68]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>X(()=>import("./fortran-free-form-D6pmzCqS.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>X(()=>import("./fsharp-C-VjhQSu.js"),__vite__mapDeps([69,70]))},{id:"gdresource",name:"GDResource",import:()=>X(()=>import("./gdresource-nSffpn2A.js"),__vite__mapDeps([71,72,73]))},{id:"gdscript",name:"GDScript",import:()=>X(()=>import("./gdscript-B474tPdy.js"),[])},{id:"gdshader",name:"GDShader",import:()=>X(()=>import("./gdshader-B_SUYfiV.js"),[])},{id:"genie",name:"Genie",import:()=>X(()=>import("./genie-DAfrLhwG.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>X(()=>import("./gherkin-DjTlIhuc.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>X(()=>import("./git-commit-BleTlbuD.js"),__vite__mapDeps([74,32]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>X(()=>import("./git-rebase-CtmYztAk.js"),__vite__mapDeps([75,51]))},{id:"gleam",name:"Gleam",import:()=>X(()=>import("./gleam-Dd6f7Z5P.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>X(()=>import("./glimmer-js-Bhx_sfM5.js"),__vite__mapDeps([76,14,58,15,13]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>X(()=>import("./glimmer-ts-61dai_V5.js"),__vite__mapDeps([77,58,15,14,13]))},{id:"glsl",name:"GLSL",import:()=>X(()=>import("./glsl-DNg5e6rY.js"),__vite__mapDeps([29,25]))},{id:"gnuplot",name:"Gnuplot",import:()=>X(()=>import("./gnuplot-nclm9rTJ.js"),[])},{id:"go",name:"Go",import:()=>X(()=>import("./go-BJn7Ek5W.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>X(()=>import("./graphql-Cac5VMXA.js"),__vite__mapDeps([78,14,58,40,62]))},{id:"groovy",name:"Groovy",import:()=>X(()=>import("./groovy-wChcbJ1V.js"),[])},{id:"hack",name:"Hack",import:()=>X(()=>import("./hack-OhUXFOZr.js"),__vite__mapDeps([79,13,14,15,30]))},{id:"haml",name:"Ruby Haml",import:()=>X(()=>import("./haml-BsKmeTIz.js"),__vite__mapDeps([80,50,13,14,15,19,20,30,25,51,52,54,27,70]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>X(()=>import("./handlebars-C0vBBVRa.js"),__vite__mapDeps([81,13,14,15,23]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>X(()=>import("./haskell-DAGYewaG.js"),[])},{id:"haxe",name:"Haxe",import:()=>X(()=>import("./haxe-Dit6kIrv.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>X(()=>import("./hcl-CpAANOdC.js"),[])},{id:"hjson",name:"Hjson",import:()=>X(()=>import("./hjson-DZqG9GXz.js"),[])},{id:"hlsl",name:"HLSL",import:()=>X(()=>import("./hlsl-DmDrTTlz.js"),[])},{id:"html",name:"HTML",import:()=>X(()=>import("./html-CqhC7HHo.js"),__vite__mapDeps([13,14,15]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>X(()=>import("./html-derivative-CvQVKW9i.js"),__vite__mapDeps([82,13,14,15]))},{id:"http",name:"HTTP",import:()=>X(()=>import("./http-mWhOz2-8.js"),__vite__mapDeps([83,51,21,19,20,78,14,58,40,62]))},{id:"hxml",name:"HXML",import:()=>X(()=>import("./hxml-C5imjkyf.js"),__vite__mapDeps([84,85]))},{id:"hy",name:"Hy",import:()=>X(()=>import("./hy-C3qJFuQy.js"),[])},{id:"imba",name:"Imba",import:()=>X(()=>import("./imba-BXg-Svbq.js"),__vite__mapDeps([86,58]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>X(()=>import("./ini-DeVv6D4_.js"),[])},{id:"java",name:"Java",import:()=>X(()=>import("./java-ClXEvkw9.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>X(()=>import("./javascript-Dch3xQiY.js"),[])},{id:"jinja",name:"Jinja",import:()=>X(()=>import("./jinja-DwshyRC8.js"),__vite__mapDeps([87,13,14,15]))},{id:"jison",name:"Jison",import:()=>X(()=>import("./jison-5Ig0VrXv.js"),__vite__mapDeps([88,14]))},{id:"json",name:"JSON",import:()=>X(()=>import("./json-CupVZNk8.js"),[])},{id:"json5",name:"JSON5",import:()=>X(()=>import("./json5-Bh8mriwU.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>X(()=>import("./jsonc-DYI1rfmx.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>X(()=>import("./jsonl-BUpeXbsf.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>X(()=>import("./jsonnet-C9d3aiqh.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>X(()=>import("./jssm-Dble9ECP.js"),[])},{id:"jsx",name:"JSX",import:()=>X(()=>import("./jsx-CsyrCbsw.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>X(()=>import("./julia-CnoVwgV8.js"),__vite__mapDeps([41,28,29,25,30,42,14,43]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>X(()=>import("./kotlin-BIxS-Weu.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>X(()=>import("./kusto-DGEpfOTx.js"),[])},{id:"latex",name:"LaTeX",import:()=>X(()=>import("./latex-DhY63DBA.js"),__vite__mapDeps([89,90,43,51,15,91,39,13,14,20,41,28,29,25,30,42,52,50,19,53,58,23,55]))},{id:"less",name:"Less",import:()=>X(()=>import("./less-Du6_OKDb.js"),[])},{id:"liquid",name:"Liquid",import:()=>X(()=>import("./liquid-Dj-jsJFu.js"),__vite__mapDeps([92,13,14,15,21]))},{id:"log",name:"Log file",import:()=>X(()=>import("./log-Ksn5IXup.js"),[])},{id:"logo",name:"Logo",import:()=>X(()=>import("./logo-DdacRhvC.js"),[])},{id:"lua",name:"Lua",import:()=>X(()=>import("./lua-BPmF2VOm.js"),__vite__mapDeps([52,25]))},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>X(()=>import("./make-B9S9BZZh.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>X(()=>import("./markdown-BdfWgkoX.js"),[])},{id:"marko",name:"Marko",import:()=>X(()=>import("./marko-DTTVzMRa.js"),__vite__mapDeps([93,15,45,17,14]))},{id:"matlab",name:"MATLAB",import:()=>X(()=>import("./matlab-Btshr8M_.js"),[])},{id:"mdc",name:"MDC",import:()=>X(()=>import("./mdc-Bn_uTtpR.js"),__vite__mapDeps([94,70,23,82,13,14,15]))},{id:"mdx",name:"MDX",import:()=>X(()=>import("./mdx-CBPJd_fO.js"),[])},{id:"mermaid",name:"Mermaid",import:()=>X(()=>import("./mermaid-Dkb1Nx48.js"),[])},{id:"mojo",name:"Mojo",import:()=>X(()=>import("./mojo--7WWnkdy.js"),[])},{id:"move",name:"Move",import:()=>X(()=>import("./move-DOHBU7tp.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>X(()=>import("./narrat-B9CT-1u6.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>X(()=>import("./nextflow-DBxHOdLe.js"),[])},{id:"nginx",name:"Nginx",import:()=>X(()=>import("./nginx-Bo7Ko850.js"),__vite__mapDeps([95,52,25]))},{id:"nim",name:"Nim",import:()=>X(()=>import("./nim-0XdZC7BR.js"),__vite__mapDeps([96,25,13,14,15,19,20,29,70]))},{id:"nix",name:"Nix",import:()=>X(()=>import("./nix-B7rNE5kf.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>X(()=>import("./nushell-CrgTADc5.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>X(()=>import("./objective-c-DHmGyzbM.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>X(()=>import("./objective-cpp-BWKJ1FCf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>X(()=>import("./ocaml-RqY_Nz63.js"),[])},{id:"pascal",name:"Pascal",import:()=>X(()=>import("./pascal-BvCdDh2R.js"),[])},{id:"perl",name:"Perl",import:()=>X(()=>import("./perl-InL218rs.js"),__vite__mapDeps([49,13,14,15,19,20,30]))},{id:"php",name:"PHP",import:()=>X(()=>import("./php-DdJTc9Za.js"),__vite__mapDeps([97,13,14,15,19,20,30,21]))},{id:"plsql",name:"PL/SQL",import:()=>X(()=>import("./plsql-BbJj1K1w.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>X(()=>import("./po-HrnDn_2Q.js"),[])},{id:"postcss",name:"PostCSS",import:()=>X(()=>import("./postcss-DXT9h7v2.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>X(()=>import("./powerquery-CApMHEaB.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>X(()=>import("./powershell-9ZOzOPqN.js"),[])},{id:"prisma",name:"Prisma",import:()=>X(()=>import("./prisma-BBJYjQ0k.js"),[])},{id:"prolog",name:"Prolog",import:()=>X(()=>import("./prolog-BH_RS3WO.js"),[])},{id:"proto",name:"Protocol Buffer 3",import:()=>X(()=>import("./proto-DOtRmeXT.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>X(()=>import("./pug-BmZh5kCX.js"),__vite__mapDeps([98,14,15,54,17,60,27,13]))},{id:"puppet",name:"Puppet",import:()=>X(()=>import("./puppet-37ic6j3l.js"),[])},{id:"purescript",name:"PureScript",import:()=>X(()=>import("./purescript-CfPQhs6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>X(()=>import("./python-DwuVtWc2.js"),[])},{id:"qml",name:"QML",import:()=>X(()=>import("./qml-DcMLa_hy.js"),__vite__mapDeps([99,14]))},{id:"qmldir",name:"QML Directory",import:()=>X(()=>import("./qmldir-MS3qTAOR.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>X(()=>import("./qss-FJDVp-XM.js"),[])},{id:"r",name:"R",import:()=>X(()=>import("./r-BXfENWL6.js"),[])},{id:"racket",name:"Racket",import:()=>X(()=>import("./racket-Cp2HGa90.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>X(()=>import("./raku-D384ylkT.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>X(()=>import("./razor-CtZ59qoM.js"),__vite__mapDeps([100,13,14,15,31]))},{id:"reg",name:"Windows Registry Script",import:()=>X(()=>import("./reg-CrhH3_Og.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>X(()=>import("./regexp-C_ZPRiAj.js"),[])},{id:"rel",name:"Rel",import:()=>X(()=>import("./rel-6Kuza3Wr.js"),[])},{id:"riscv",name:"RISC-V",import:()=>X(()=>import("./riscv-AgnqFTPX.js"),[])},{id:"rst",name:"reStructuredText",import:()=>X(()=>import("./rst-5AUMhdsS.js"),__vite__mapDeps([101,82,13,14,15,28,29,25,30,42,51,23,102,50,19,20,52]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>X(()=>import("./ruby-CPHW1Myo.js"),__vite__mapDeps([50,13,14,15,19,20,30,25,51,52]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>X(()=>import("./rust-DGxQkqYo.js"),[])},{id:"sas",name:"SAS",import:()=>X(()=>import("./sas-WQZNIjpJ.js"),__vite__mapDeps([103,30]))},{id:"sass",name:"Sass",import:()=>X(()=>import("./sass-CMDmr8et.js"),[])},{id:"scala",name:"Scala",import:()=>X(()=>import("./scala-vMsNTMhM.js"),[])},{id:"scheme",name:"Scheme",import:()=>X(()=>import("./scheme-1Je9_Reo.js"),[])},{id:"scss",name:"SCSS",import:()=>X(()=>import("./scss-DqznleHU.js"),__vite__mapDeps([17,15]))},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>X(()=>import("./shaderlab-DBpbMEBh.js"),__vite__mapDeps([104,105]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>X(()=>import("./shellscript-BZfs-ost.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>X(()=>import("./shellsession-4WldjxEd.js"),__vite__mapDeps([106,51]))},{id:"smalltalk",name:"Smalltalk",import:()=>X(()=>import("./smalltalk-DSsji4Hu.js"),[])},{id:"solidity",name:"Solidity",import:()=>X(()=>import("./solidity-CThH5sBG.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>X(()=>import("./soy-DhLnWwFA.js"),__vite__mapDeps([107,13,14,15]))},{id:"sparql",name:"SPARQL",import:()=>X(()=>import("./sparql-BgtC_-ln.js"),__vite__mapDeps([108,109]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>X(()=>import("./splunk-6XBPEST2.js"),[])},{id:"sql",name:"SQL",import:()=>X(()=>import("./sql-DbK06e1c.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>X(()=>import("./ssh-config-BH1M7C1g.js"),[])},{id:"stata",name:"Stata",import:()=>X(()=>import("./stata-8O9LehIm.js"),__vite__mapDeps([110,30]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>X(()=>import("./stylus-DSrLtGYv.js"),[])},{id:"svelte",name:"Svelte",import:()=>X(()=>import("./svelte-DavKDhWY.js"),__vite__mapDeps([111,14,58,27,60,54,15,17,45,61,98,13,70]))},{id:"swift",name:"Swift",import:()=>X(()=>import("./swift-Dez-Qvcc.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>X(()=>import("./system-verilog-BscxmKrE.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>X(()=>import("./systemd-CuJfdYLG.js"),[])},{id:"tasl",name:"Tasl",import:()=>X(()=>import("./tasl-BxwAa5i0.js"),[])},{id:"tcl",name:"Tcl",import:()=>X(()=>import("./tcl-C_8Fx7bH.js"),[])},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>X(()=>import("./terraform-DBeuZS66.js"),[])},{id:"tex",name:"TeX",import:()=>X(()=>import("./tex-Dk885XYG.js"),__vite__mapDeps([90,43]))},{id:"toml",name:"TOML",import:()=>X(()=>import("./toml-BT9ZzGyQ.js"),[])},{id:"tsv",name:"TSV",import:()=>X(()=>import("./tsv-DnLUQrgA.js"),[])},{id:"tsx",name:"TSX",import:()=>X(()=>import("./tsx-BlxWTfDV.js"),[])},{id:"turtle",name:"Turtle",import:()=>X(()=>import("./turtle-C15OxdQ5.js"),[])},{id:"twig",name:"Twig",import:()=>X(()=>import("./twig-llAgFoxS.js"),__vite__mapDeps([112,15,14,17,97,13,19,20,30,21,42,50,25,51,52]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>X(()=>import("./typescript-DC8MraHL.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>X(()=>import("./typespec-DAP_O-zg.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>X(()=>import("./typst-I4qd5QHW.js"),[])},{id:"v",name:"V",import:()=>X(()=>import("./v-C2TBxDwV.js"),[])},{id:"vala",name:"Vala",import:()=>X(()=>import("./vala-CO5hpdkB.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>X(()=>import("./vb-beD-FUib.js"),[])},{id:"verilog",name:"Verilog",import:()=>X(()=>import("./verilog-DVfdqzEq.js"),[])},{id:"vhdl",name:"VHDL",import:()=>X(()=>import("./vhdl-QZ3jNtnE.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>X(()=>import("./viml-BLluXI4E.js"),[])},{id:"vue",name:"Vue",import:()=>X(()=>import("./vue-DwKRC_TW.js"),__vite__mapDeps([113,13,14,15,70,98,54,17,60,27,45,58,40,62,21,114,115,23,57,78,82]))},{id:"vue-html",name:"Vue HTML",import:()=>X(()=>import("./vue-html-BQKlc1uT.js"),__vite__mapDeps([116,113,13,14,15,70,98,54,17,60,27,45,58,40,62,21,114,115,23,57,78,82]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>X(()=>import("./vyper-o-cPXEvd.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>X(()=>import("./wasm-Cicx_DS6.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>X(()=>import("./wenyan-D3VXSfF0.js"),[])},{id:"wgsl",name:"WGSL",import:()=>X(()=>import("./wgsl-BZz1Hhek.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>X(()=>import("./wikitext-2Gt4HDrj.js"),__vite__mapDeps([117,13,14,15,118,20,52,25,46,49,19,30,43,50,51,97,21,119,120,23,121,26,27,28,29,32,33,37,38,98,54,17,60,114,45,47,56,122,123,42,41,53,55,58,31,69,70,124,81,36,34,89,90,91,39,125]))},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>X(()=>import("./wolfram-BICIrM8O.js"),[])},{id:"xml",name:"XML",import:()=>X(()=>import("./xml-KWQaRJyt.js"),__vite__mapDeps([19,20]))},{id:"xsl",name:"XSL",import:()=>X(()=>import("./xsl-bm8RKyr3.js"),__vite__mapDeps([120,19,20]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>X(()=>import("./yaml-C5gCGmDW.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>X(()=>import("./zenscript-B1nm99XP.js"),[])},{id:"zig",name:"Zig",import:()=>X(()=>import("./zig-xtV5iK4E.js"),[])}],yse=Object.fromEntries(yI.map(t=>[t.id,t.import])),vse=Object.fromEntries(yI.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),vI={...yse,...vse},Ese=async t=>X(()=>import("./wasm-CsTmP73Z.js"),[]).then(e=>e.default(t)),wse=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>X(()=>import("./andromeeda-YxQm0tCS.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>X(()=>import("./aurora-x-BaWyeHV_.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>X(()=>import("./ayu-dark-Bn5gmY5k.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>X(()=>import("./catppuccin-frappe-CSPeAESR.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>X(()=>import("./catppuccin-latte-BYdKNJ10.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>X(()=>import("./catppuccin-macchiato-DVLwECkk.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>X(()=>import("./catppuccin-mocha-CEfge3mM.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>X(()=>import("./dark-plus-KEYLhlmT.js"),[])},{id:"dracula",displayName:"Dracula",type:"dark",import:()=>X(()=>import("./dracula-DGO8GyiP.js"),[])},{id:"dracula-soft",displayName:"Dracula Soft",type:"dark",import:()=>X(()=>import("./dracula-soft-9B1nZgL-.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>X(()=>import("./github-dark-CzPA46E-.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>X(()=>import("./github-dark-default-BXF7Vm5l.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>X(()=>import("./github-dark-dimmed-CRDKj6ck.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>X(()=>import("./github-light-CRlnGVMD.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>X(()=>import("./github-light-default-UREJT2Bw.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>X(()=>import("./houston-CZZ6oYdA.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>X(()=>import("./light-plus-BsvsQ1iS.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>X(()=>import("./material-theme-B2BuIiKK.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>X(()=>import("./material-theme-darker-BrGg7AAd.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>X(()=>import("./material-theme-lighter-DDRuGeQH.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>X(()=>import("./material-theme-ocean-CBL0qBdF.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>X(()=>import("./material-theme-palenight-D7gg1Usp.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>X(()=>import("./min-dark-iSbrOpM4.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>X(()=>import("./min-light-BITGhEdf.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>X(()=>import("./monokai-sMI-pExk.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>X(()=>import("./night-owl-BeocmOPF.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>X(()=>import("./nord-CsyjKwr8.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>X(()=>import("./one-dark-pro-BTtaZsq5.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>X(()=>import("./one-light-alpzPJ78.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>X(()=>import("./poimandres-Cda-MJFk.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>X(()=>import("./red-jaXbsbtS.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>X(()=>import("./rose-pine-CX_FIdg1.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>X(()=>import("./rose-pine-dawn-Bj5xdiaE.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>X(()=>import("./rose-pine-moon-CdedUr_-.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>X(()=>import("./slack-dark-C7oZ9nno.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>X(()=>import("./slack-ochin-hXH8Gyq8.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>X(()=>import("./snazzy-light-CA9nliXM.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>X(()=>import("./solarized-dark-C86elO-m.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>X(()=>import("./solarized-light-xPNGhBYe.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>X(()=>import("./synthwave-84-BBDuFDsq.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>X(()=>import("./tokyo-night-eJfcURhx.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>X(()=>import("./vesper-BSB_bK09.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>X(()=>import("./vitesse-black-B3g-KkBK.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>X(()=>import("./vitesse-dark-Bxkoe-BC.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>X(()=>import("./vitesse-light-Br6ll-O0.js"),[])}],Sse=Object.fromEntries(wse.map(t=>[t.id,t.import]));var pr;(function(t){t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline"})(pr||(pr={}));var ha;(function(t){function e(u){return u.toString(2).padStart(32,"0")}t.toBinaryStr=e;function n(u){const h=t.getLanguageId(u),d=t.getTokenType(u),f=t.getFontStyle(u),_=t.getForeground(u),g=t.getBackground(u);console.log({languageId:h,tokenType:d,fontStyle:f,foreground:_,background:g})}t.print=n;function r(u){return(u&255)>>>0}t.getLanguageId=r;function i(u){return(u&768)>>>8}t.getTokenType=i;function s(u){return(u&1024)!==0}t.containsBalancedBrackets=s;function o(u){return(u&30720)>>>11}t.getFontStyle=o;function a(u){return(u&16744448)>>>15}t.getForeground=a;function l(u){return(u&4278190080)>>>24}t.getBackground=l;function c(u,h,d,f,_,g,m){let p=t.getLanguageId(u),b=t.getTokenType(u),y=t.containsBalancedBrackets(u)?1:0,v=t.getFontStyle(u),E=t.getForeground(u),w=t.getBackground(u);return h!==0&&(p=h),d!==8&&(b=d),f!==null&&(y=f?1:0),_!==-1&&(v=_),g!==0&&(E=g),m!==0&&(w=m),(p<<0|b<<8|y<<10|v<<11|E<<15|w<<24)>>>0}t.set=c})(ha||(ha={}));function Dd(t,e){const n=[],r=Tse(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let c=o();if(n.push({matcher:c,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return c=>!!l&&!l(c)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(US(i)){const l=[];do l.push(i),i=r.next();while(US(i));return c=>e(l,c)}return null}function o(){const l=[];let c=s();for(;c;)l.push(c),c=s();return u=>l.every(h=>h(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");c=o()}return u=>l.some(h=>h(u))}}function US(t){return!!t&&!!t.match(/[\w\.:]+/)}function Tse(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function EI(t){typeof t.dispose=="function"&&t.dispose()}function Cse(t){return a1(t)}function a1(t){return Array.isArray(t)?xse(t):typeof t=="object"?Ase(t):t}function xse(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=a1(t[n]);return e}function Ase(t){let e={};for(let n in t)e[n]=a1(t[n]);return e}function wI(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function SI(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?SI(t.substring(0,t.length-1)):t.substr(~e+1)}let um=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;class Yu{static hasCaptures(e){return e===null?!1:(um.lastIndex=0,um.test(e))}static replaceCaptures(e,n,r){return e.replace(um,(i,s,o,a)=>{let l=r[parseInt(s||o,10)];if(l){let c=n.substring(l.start,l.end);for(;c[0]===".";)c=c.substring(1);switch(a){case"downcase":return c.toLowerCase();case"upcase":return c.toUpperCase();default:return c}}else return i})}}function TI(t,e){return t<e?-1:t>e?1:0}function CI(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=TI(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function jS(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function xI(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}class AI{fn;cache=new Map;constructor(e){this.fn=e}get(e){if(this.cache.has(e))return this.cache.get(e);const n=this.fn(e);return this.cache.set(e,n),n}}class oc{scopeName;constructor(e){this.scopeName=e}toKey(){return this.scopeName}}class kse{scopeName;ruleName;constructor(e,n){this.scopeName=e,this.ruleName=n}toKey(){return`${this.scopeName}#${this.ruleName}`}}class Rse{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){const n=e.toKey();this._seenReferenceKeys.has(n)||(this._seenReferenceKeys.add(n),this._references.push(e))}}class Pse{repo;initialScopeName;seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;constructor(e,n){this.repo=e,this.initialScopeName=n,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new oc(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const n=new Rse;for(const r of e)Dse(r,this.initialScopeName,this.repo,n);for(const r of n.references)if(r instanceof oc){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName)||this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}}function Dse(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof oc?kh({baseGrammar:s,selfGrammar:i},r):S0(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new oc(a))}function S0(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Od([r],e,n)}}function kh(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Od(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Od(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Od(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?wI({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Od(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=kI(s);switch(o.kind){case 0:kh({...e,selfGrammar:e.baseGrammar},n);break;case 1:kh(e,n);break;case 2:S0(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?S0(o.ruleName,l,n):kh(l,n)}else o.kind===4?n.add(new kse(o.scopeName,o.ruleName)):n.add(new oc(o.scopeName));break}}}class Ose{kind=0}class Ise{kind=1}class Lse{ruleName;kind=2;constructor(e){this.ruleName=e}}class Mse{scopeName;kind=3;constructor(e){this.scopeName=e}}class Nse{scopeName;ruleName;kind=4;constructor(e,n){this.scopeName=e,this.ruleName=n}}function kI(t){if(t==="$base")return new Ose;if(t==="$self")return new Ise;const e=t.indexOf("#");if(e===-1)return new Mse(t);if(e===0)return new Lse(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new Nse(n,r)}}const Bse=/\\(\d+)/,zS=/\\(\d+)/g,Fse=-1,RI=-2;class Qc{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,n,r,i){this.$location=e,this.id=n,this._name=r||null,this._nameIsCapturing=Yu.hasCaptures(this._name),this._contentName=i||null,this._contentNameIsCapturing=Yu.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${SI(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return!this._nameIsCapturing||this._name===null||e===null||n===null?this._name:Yu.replaceCaptures(this._name,e,n)}getContentName(e,n){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Yu.replaceCaptures(this._contentName,e,n)}}class Hse extends Qc{retokenizeCapturedWithRuleId;constructor(e,n,r,i,s){super(e,n,r,i),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,n){throw new Error("Not supported!")}compile(e,n){throw new Error("Not supported!")}compileAG(e,n,r,i){throw new Error("Not supported!")}}class Use extends Qc{_match;captures;_cachedCompiledPatterns;constructor(e,n,r,i,s){super(e,n,r,null),this._match=new Js(i,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ac,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class VS extends Qc{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,n,r,i,s){super(e,n,r,i),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(const r of this.patterns)e.getRule(r).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new ac,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class T0 extends Qc{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i),this._begin=new Js(s,this.id),this.beginCaptures=o,this._end=new Js(a||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e,n).compileAG(e,r,i)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ac;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}}class Id extends Qc{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i),this._begin=new Js(s,this.id),this.beginCaptures=o,this.whileCaptures=l,this._while=new Js(a,RI),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,i){return this._getCachedCompiledPatterns(e).compileAG(e,r,i)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new ac;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,r,i){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,r,i)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new ac,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||""),this._cachedCompiledWhilePatterns}}class Ft{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new Hse(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new Use(e.$vscodeTextmateLocation,e.id,e.name,e.match,Ft._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=wI({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new VS(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Ft._compilePatterns(s,n,r))}return e.while?new Id(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Ft._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Ft._compileCaptures(e.whileCaptures||e.captures,n,r),Ft._compilePatterns(e.patterns,n,r)):new T0(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Ft._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Ft._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Ft._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Ft.getCompiledRuleId(e[o],n,r)),i[a]=Ft.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const c=kI(a.include);switch(c.kind){case 0:case 1:l=Ft.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=Ft.getCompiledRuleId(u,n,r));break;case 3:case 4:const h=c.scopeName,d=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(h,r);if(f)if(d){let _=f.repository[d];_&&(l=Ft.getCompiledRuleId(_,n,f.repository))}else l=Ft.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=Ft.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof VS||c instanceof T0||c instanceof Id)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}}class Js{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,this.hasBackReferences=Bse.test(this.source)}clone(){return new Js(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){let r=n.map(i=>e.substring(i.start,i.end));return zS.lastIndex=0,this.source.replace(zS,(i,s)=>xI(r[parseInt(s,10)]||""))}_buildAnchorCache(){let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="",n[s+1]="",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="",n[s+1]="G",r[s+1]="",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}}class ac{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,n){this._items[e].source!==n&&(this._disposeCaches(),this._items[e].setSource(n))}compile(e){if(!this._cached){let n=this._items.map(r=>r.source);this._cached=new WS(e,n,this._items.map(r=>r.ruleId))}return this._cached}compileAG(e,n,r){return this._hasAnchors?n?r?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,n,r)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,n,r)),this._anchorCache.A1_G0):r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,n,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,n,r)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,n,r){let i=this._items.map(s=>s.resolveAnchors(n,r));return new WS(e,i,this._items.map(s=>s.ruleId))}}class WS{regExps;rules;scanner;constructor(e,n,r){this.regExps=n,this.rules=r,this.scanner=e.createOnigScanner(n)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const e=[];for(let n=0,r=this.rules.length;n<r;n++)e.push("   - "+this.rules[n]+": "+this.regExps[n]);return e.join(`
`)}findNextMatchSync(e,n,r){const i=this.scanner.findNextMatchSync(e,n,r);return i?{ruleId:this.rules[i.index],captureIndices:i.captureIndices}:null}}class Ld{_colorMap;_defaults;_root;static createFromRawTheme(e,n){return this.createFromParsedTheme(Vse(e),n)}static createFromParsedTheme(e,n){return Gse(e,n)}_cachedMatchRoot=new AI(e=>this._root.match(e));constructor(e,n,r){this._colorMap=e,this._defaults=n,this._root=r}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(e===null)return this._defaults;const n=e.scopeName,i=this._cachedMatchRoot.get(n).find(s=>jse(e.parent,s.parentScopes));return i?new PI(i.fontStyle,i.foreground,i.background):null}}class Us{parent;scopeName;static push(e,n){for(const r of n)e=new Us(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new Us(n,e[r]);return n}constructor(e,n){this.parent=e,this.scopeName=n}push(e){return new Us(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}}function jse(t,e){if(e===null)return!0;let n=0,r=e[n];for(;t;){if(zse(t.scopeName,r)){if(n++,n===e.length)return!0;r=e[n]}t=t.parent}return!1}function zse(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}class PI{fontStyle;foregroundId;backgroundId;constructor(e,n,r){this.fontStyle=e,this.foregroundId=n,this.backgroundId=r}}function Vse(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let h=o.scope;h=h.replace(/^[,]+/,""),h=h.replace(/[,]+$/,""),a=h.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let h=o.settings.fontStyle.split(" ");for(let d=0,f=h.length;d<f;d++)switch(h[d]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&jS(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&jS(o.settings.background)&&(u=o.settings.background);for(let h=0,d=a.length;h<d;h++){let _=a[h].trim().split(" "),g=_[_.length-1],m=null;_.length>1&&(m=_.slice(0,_.length-1),m.reverse()),n[r++]=new Wse(g,m,i,l,c,u)}}return n}class Wse{scope;parentScopes;index;fontStyle;foreground;background;constructor(e,n,r,i,s,o){this.scope=e,this.parentScopes=n,this.index=r,this.fontStyle=i,this.foreground=s,this.background=o}}function Gse(t,e){t.sort((l,c)=>{let u=TI(l.scope,c.scope);return u!==0||(u=CI(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new $se(e),o=new PI(n,s.getId(r),s.getId(i)),a=new Rl(new lc(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,s.getId(u.foreground),s.getId(u.background))}return new Ld(s,o,a)}class $se{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let n=0,r=e.length;n<r;n++)this._color2id[e[n]]=n,this._id2color[n]=e[n]}else this._isFrozen=!1}getId(e){if(e===null)return 0;e=e.toUpperCase();let n=this._color2id[e];if(n)return n;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return n=++this._lastColorId,this._color2id[e]=n,this._id2color[n]=e,n}getColorMap(){return this._id2color.slice(0)}}class lc{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new lc(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}}class Rl{_mainRule;_children;_rulesWithParentScopes;constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}static _sortBySpecificity(e){return e.length===1||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,n){if(e.scopeDepth===n.scopeDepth){const r=e.parentScopes,i=n.parentScopes;let s=r===null?0:r.length,o=i===null?0:i.length;if(s===o)for(let a=0;a<s;a++){const l=r[a].length,c=i[a].length;if(l!==c)return c-l}return o-s}return n.scopeDepth-e.scopeDepth}match(e){if(e==="")return Rl._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let n=e.indexOf("."),r,i;return n===-1?(r=e,i=""):(r=e.substring(0,n),i=e.substring(n+1)),this._children.hasOwnProperty(r)?this._children[r].match(i):Rl._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new Rl(this._mainRule.clone(),lc.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(CI(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new lc(e,n,r,i,s))}}class hm{languageId;tokenType;constructor(e,n){this.languageId=e,this.tokenType=n}}class Md{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new hm(e,8),this._embeddedLanguagesMatcher=new qse(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Md._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new hm(0,0);_getBasicScopeAttributes=new AI(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new hm(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Md.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/}class qse{values;scopesRegExp;constructor(e){if(e.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const n=e.map(([r,i])=>xI(r));n.sort(),n.reverse(),this.scopesRegExp=new RegExp(`^((${n.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const n=e.match(this.scopesRegExp);if(n)return this.values.get(n[1])}}class GS{stack;stoppedEarly;constructor(e,n){this.stack=e,this.stoppedEarly=n}}function DI(t,e,n,r,i,s,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const f=Kse(t,e,n,r,i,s);i=f.stack,r=f.linePos,n=f.isFirstLine,u=f.anchorPosition}const h=Date.now();for(;!c;){if(a!==0&&Date.now()-h>a)return new GS(i,!0);d()}return new GS(i,!1);function d(){const f=Yse(t,e,n,r,i,u);if(!f){s.produce(i,l),c=!0;return}const _=f.captureIndices,g=f.matchedRuleId,m=_&&_.length>0?_[0].end>r:!1;if(g===Fse){const p=i.getRule(t);s.produce(i,_[0].start),i=i.withContentNameScopesList(i.nameScopesList),al(t,e,n,i,s,p.endCaptures,_),s.produce(i,_[0].end);const b=i;if(i=i.parent,u=b.getAnchorPos(),!m&&b.getEnterPos()===r){i=b,s.produce(i,l),c=!0;return}}else{const p=t.getRule(g);s.produce(i,_[0].start);const b=i,y=p.getName(e.content,_),v=i.contentNameScopesList.pushAttributed(y,t);if(i=i.push(g,r,u,_[0].end===l,null,v,v),p instanceof T0){const E=p;al(t,e,n,i,s,E.beginCaptures,_),s.produce(i,_[0].end),u=_[0].end;const w=E.getContentName(e.content,_),T=v.pushAttributed(w,t);if(i=i.withContentNameScopesList(T),E.endHasBackReferences&&(i=i.withEndRule(E.getEndWithResolvedBackReferences(e.content,_))),!m&&b.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(p instanceof Id){const E=p;al(t,e,n,i,s,E.beginCaptures,_),s.produce(i,_[0].end),u=_[0].end;const w=E.getContentName(e.content,_),T=v.pushAttributed(w,t);if(i=i.withContentNameScopesList(T),E.whileHasBackReferences&&(i=i.withEndRule(E.getWhileWithResolvedBackReferences(e.content,_))),!m&&b.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),c=!0;return}}else if(al(t,e,n,i,s,p.captures,_),s.produce(i,_[0].end),i=i.pop(),!m){i=i.safePop(),s.produce(i,l),c=!0;return}}_[0].end>r&&(r=_[0].end,n=!1)}}function Kse(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const c=l.getRule(t);c instanceof Id&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=Jse(l.rule,t,l.stack.endRule,n,r===o),h=c.findNextMatchSync(e,r,u);if(h){if(h.ruleId!==RI){i=l.stack.pop();break}h.captureIndices&&h.captureIndices.length&&(s.produce(l.stack,h.captureIndices[0].start),al(t,e,n,l.stack,s,l.rule.whileCaptures,h.captureIndices),s.produce(l.stack,h.captureIndices[0].end),o=h.captureIndices[0].end,h.captureIndices[0].end>r&&(r=h.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function Yse(t,e,n,r,i,s){const o=Xse(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=Qse(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function Xse(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=OI(o,t,i.endRule,n,r===s),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function Qse(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,c,u=0;const h=s.contentNameScopesList.getScopeNames();for(let d=0,f=t.length;d<f;d++){const _=t[d];if(!_.matcher(h))continue;const g=e.getRule(_.ruleId),{ruleScanner:m,findOptions:p}=OI(g,e,null,r,i===o),b=m.findNextMatchSync(n,i,p);if(!b)continue;const y=b.captureIndices[0].start;if(!(y>=a)&&(a=y,l=b.captureIndices,c=b.ruleId,u=_.priority,a===i))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function OI(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function Jse(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function al(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),c=[],u=o[0].end;for(let h=0;h<l;h++){const d=s[h];if(d===null)continue;const f=o[h];if(f.length===0)continue;if(f.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,f.start):i.produce(r,f.start),d.retokenizeCapturedWithRuleId){const g=d.getName(a,o),m=r.contentNameScopesList.pushAttributed(g,t),p=d.getContentName(a,o),b=m.pushAttributed(p,t),y=r.push(d.retokenizeCapturedWithRuleId,f.start,-1,!1,null,m,b),v=t.createOnigString(a.substring(0,f.end));DI(t,v,n&&f.start===0,f.start,y,i,!1,0),EI(v);continue}const _=d.getName(a,o);if(_!==null){const m=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(_,t);c.push(new Zse(m,f.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}class Zse{scopes;endPos;constructor(e,n){this.scopes=e,this.endPos=n}}function eoe(t,e,n,r,i,s,o,a){return new noe(t,e,n,r,i,s,o,a)}function $S(t,e,n,r,i){const s=Dd(e,Nd),o=Ft.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function Nd(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(toe(e[i],r))return n=i+1,!0;return!1})}function toe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}class noe{_rootScopeName;balancedBracketSelectors;_onigLib;_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}constructor(e,n,r,i,s,o,a,l){if(this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=l,this._basicScopeAttributesProvider=new Md(r,i),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=a,this._grammar=qS(n,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const c of Object.keys(s)){const u=Dd(c,Nd);for(const h of u)this._tokenTypeMatchers.push({matcher:h.matcher,type:s[c]})}}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},n=[],r=this._rootScopeName,i=e.lookup(r);if(i){const s=i.injections;if(s)for(let a in s)$S(n,a,s[a],this,i);const o=this._grammarRepository.injections(r);o&&o.forEach(a=>{const l=this.getExternalGrammar(a);if(l){const c=l.injectionSelector;c&&$S(n,c,l,this,l)}})}return n.sort((s,o)=>s.priority-o.priority),n}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const n=++this._lastRuleId,r=e(n);return this._ruleId2desc[n]=r,r}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,n){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const r=this._grammarRepository.lookup(e);if(r)return this._includedGrammars[e]=qS(r,n&&n.$base),this._includedGrammars[e]}}tokenizeLine(e,n,r=0){const i=this._tokenize(e,n,!1,r);return{tokens:i.lineTokens.getResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}tokenizeLine2(e,n,r=0){const i=this._tokenize(e,n,!0,r);return{tokens:i.lineTokens.getBinaryResult(i.ruleStack,i.lineLength),ruleStack:i.ruleStack,stoppedEarly:i.stoppedEarly}}_tokenize(e,n,r,i){this._rootId===-1&&(this._rootId=Ft.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!n||n===Ir.NULL){s=!0;const u=this._basicScopeAttributesProvider.getDefaultAttributes(),h=this.themeProvider.getDefaults(),d=ha.set(0,u.languageId,u.tokenType,null,h.fontStyle,h.foregroundId,h.backgroundId),f=this.getRule(this._rootId).getName(null,null);let _;f?_=pn.createRootAndLookUpScopeName(f,d,this):_=pn.createRoot("unknown",d),n=new Ir(null,this._rootId,-1,-1,!1,null,_,_)}else s=!1,n.reset();e=e+`
`;const o=this.createOnigString(e),a=o.content.length,l=new ioe(r,e,this._tokenTypeMatchers,this.balancedBracketSelectors),c=DI(this,o,s,0,n,l,!0,i);return EI(o),{lineLength:a,lineTokens:l,ruleStack:c.stack,stoppedEarly:c.stoppedEarly}}}function qS(t,e){return t=Cse(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}class pn{parent;scopePath;tokenAttributes;static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=Us.push(i,s.scopeNames),r=new pn(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new pn(null,new Us(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new Us(null,e),o=r.themeProvider.themeMatch(s),a=pn.mergeAttributes(n,i,o);return new pn(null,s,a)}get scopeName(){return this.scopePath.scopeName}constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}toString(){return this.getScopeNames().join(" ")}equals(e){return pn.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),ha.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return pn._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=pn._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=pn.mergeAttributes(e.tokenAttributes,i,o);return new pn(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}}class Ir{parent;ruleId;beginRuleCapturedEOL;endRule;nameScopesList;contentNameScopesList;_stackElementBrand=void 0;static NULL=new Ir(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}equals(e){return e===null?!1:Ir._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?pn.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ir._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new Ir(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ir(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=pn.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Ir(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,pn.fromExtension(r,n.contentNameScopesList))}}class roe{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,n){this.balancedBracketScopes=e.flatMap(r=>r==="*"?(this.allowAny=!0,[]):Dd(r,Nd).map(i=>i.matcher)),this.unbalancedBracketScopes=n.flatMap(r=>Dd(r,Nd).map(i=>i.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(e){for(const n of this.unbalancedBracketScopes)if(n(e))return!1;for(const n of this.balancedBracketScopes)if(n(e))return!0;return this.allowAny}}class ioe{balancedBracketSelectors;_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;constructor(e,n,r,i){this.balancedBracketSelectors=i,this._emitBinaryTokens=e,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,n){this.produceFromScopes(e.contentNameScopesList,n)}produceFromScopes(e,n){if(this._lastTokenEndIndex>=n)return;if(this._emitBinaryTokens){let i=e?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const o=e?.getScopeNames()??[];for(const a of this._tokenTypeOverrides)a.matcher(o)&&(i=ha.set(i,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(o))}if(s&&(i=ha.set(i,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===i){this._lastTokenEndIndex=n;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(i),this._lastTokenEndIndex=n;return}const r=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:n,scopes:r}),this._lastTokenEndIndex=n}getResult(e,n){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===n-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,n),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,n){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===n-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(e,n),this._binaryTokens[this._binaryTokens.length-2]=0);const r=new Uint32Array(this._binaryTokens.length);for(let i=0,s=this._binaryTokens.length;i<s;i++)r[i]=this._binaryTokens[i];return r}}class soe{_onigLibPromise;_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;constructor(e,n){this._onigLibPromise=n,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,n){this._rawGrammars.set(e.scopeName,e),n&&this._injectionGrammars.set(e.scopeName,n)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,n,r,i,s){if(!this._grammars.has(e)){let o=this._rawGrammars.get(e);if(!o)return null;this._grammars.set(e,eoe(e,o,n,r,i,s,this,await this._onigLibPromise))}return this._grammars.get(e)}}let ooe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new soe(Ld.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Ld.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new roe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}async _loadGrammar(e,n,r,i,s){const o=new Pse(this._syncRegistry,e);for(;o.Q.length>0;)await Promise.all(o.Q.map(a=>this._loadSingleGrammar(a.scopeName))),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}async _loadSingleGrammar(e){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),this._ensureGrammarCache.get(e)}async _doLoadSingleGrammar(e){const n=await this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}async addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),await this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}};const aoe=Ir.NULL,Gt={LANGUAGEID_MASK:255,TOKEN_TYPE_MASK:768,BALANCED_BRACKETS_MASK:1024,FONT_STYLE_MASK:14336,FOREGROUND_MASK:8372224,BACKGROUND_MASK:4286578688,LANGUAGEID_OFFSET:0,TOKEN_TYPE_OFFSET:8,BALANCED_BRACKETS_OFFSET:10,FONT_STYLE_OFFSET:11,FOREGROUND_OFFSET:15,BACKGROUND_OFFSET:24};class Zr{static toBinaryStr(e){let n=e.toString(2);for(;n.length<32;)n=`0${n}`;return n}static getLanguageId(e){return(e&Gt.LANGUAGEID_MASK)>>>Gt.LANGUAGEID_OFFSET}static getTokenType(e){return(e&Gt.TOKEN_TYPE_MASK)>>>Gt.TOKEN_TYPE_OFFSET}static getFontStyle(e){return(e&Gt.FONT_STYLE_MASK)>>>Gt.FONT_STYLE_OFFSET}static getForeground(e){return(e&Gt.FOREGROUND_MASK)>>>Gt.FOREGROUND_OFFSET}static getBackground(e){return(e&Gt.BACKGROUND_MASK)>>>Gt.BACKGROUND_OFFSET}static containsBalancedBrackets(e){return(e&Gt.BALANCED_BRACKETS_MASK)!==0}static set(e,n,r,i,s,o){let a=Zr.getLanguageId(e),l=Zr.getTokenType(e),c=Zr.getFontStyle(e),u=Zr.getForeground(e),h=Zr.getBackground(e);const d=Zr.containsBalancedBrackets(e)?1:0;return n!==0&&(a=n),r!==0&&(l=r===8?0:r),i!==pr.NotSet&&(c=i),s!==0&&(u=s),o!==0&&(h=o),(a<<Gt.LANGUAGEID_OFFSET|l<<Gt.TOKEN_TYPE_OFFSET|c<<Gt.FONT_STYLE_OFFSET|d<<Gt.BALANCED_BRACKETS_OFFSET|u<<Gt.FOREGROUND_OFFSET|h<<Gt.BACKGROUND_OFFSET)>>>0}}function Ff(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function II(t){return!t||["plaintext","txt","text","plain"].includes(t)}function l1(t){return t==="ansi"||II(t)}function LI(t){return t==="none"}function MI(t){return LI(t)}function NI(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function loe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function coe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?loe(i,s):i})):t}function Bd(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function Os(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function BI(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&pr.Italic&&(e["font-style"]="italic"),t.fontStyle&pr.Bold&&(e["font-weight"]="bold"),t.fontStyle&pr.Underline&&(e["text-decoration"]="underline")),e}function FI(t){return Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function uoe(t){const e=Ff(t,!0).map(([i])=>i);function n(i){let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}var Is=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],dm={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function hoe(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function KS(t,e){let n=1;const r=t[e+n++];let i;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[n,i]}function doe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)dm[i]&&e.push({type:"setDecoration",value:dm[i]});else if(i<=29){const s=dm[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Is[i-30]}});else if(i===38){const[s,o]=KS(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Is[i-40]}});else if(i===48){const[s,o]=KS(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Is[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Is[i-100+8]}})}return e}function foe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=hoe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=doe(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}s=o.position}while(s<r.length);return i}}}var poe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function moe(t=poe){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let c=0;c<Is.length;c++)r.push(e(Is[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let h=0;h<6;h++)r.push(n([a[c],a[u],a[h]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function goe(t,e,n){const r=Bd(t,n),i=Ff(e),s=moe(Object.fromEntries(Is.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=foe();return i.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?s.value(l.background):t.bg,u=l.foreground?s.value(l.foreground):t.fg):(c=l.foreground?s.value(l.foreground):t.fg,u=l.background?s.value(l.background):void 0),c=Os(c,r),u=Os(u,r),l.decorations.has("dim")&&(c=_oe(c));let h=pr.None;return l.decorations.has("bold")&&(h|=pr.Bold),l.decorations.has("italic")&&(h|=pr.Italic),l.decorations.has("underline")&&(h|=pr.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:h}}))}function _oe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function c1(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(II(r)||LI(i))return Ff(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return goe(s,e,n);const a=t.getLanguage(r);return boe(e,a,s,o,n)}function boe(t,e,n,r,i){const s=Bd(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=Ff(t);let c=aoe,u=[];const h=[],d=[];if(i.includeExplanation)for(const f of n.settings){let _;switch(typeof f.scope){case"string":_=f.scope.split(/,/).map(g=>g.trim());break;case"object":_=f.scope;break;default:continue}d.push({settings:f,selectors:_.map(g=>g.split(/ /))})}for(let f=0,_=l.length;f<_;f++){const[g,m]=l[f];if(g===""){u=[],h.push([]);continue}if(o>0&&g.length>=o){u=[],h.push([{content:g,offset:m,color:"",fontStyle:0}]);continue}let p,b,y;i.includeExplanation&&(p=e.tokenizeLine(g,c),b=p.tokens,y=0);const v=e.tokenizeLine2(g,c,a),E=v.tokens.length/2;for(let w=0;w<E;w++){const T=v.tokens[2*w],S=w+1<E?v.tokens[2*w+2]:g.length;if(T===S)continue;const x=v.tokens[2*w+1],R=Os(r[Zr.getForeground(x)],s),U=Zr.getFontStyle(x),P={content:g.substring(T,S),offset:m+T,color:R,fontStyle:U};if(i.includeExplanation){P.explanation=[];let B=0;for(;T+B<S;){const A=b[y],W=g.substring(A.startIndex,A.endIndex);B+=W.length,P.explanation.push({content:W,scopes:yoe(d,A.scopes)}),y+=1}}u.push(P)}h.push(u),u=[],c=v.ruleStack}return h}function yoe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e.slice(0,r),o=e[r];n[r]={scopeName:o,themeMatches:Eoe(t,o,s)}}return n}function YS(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function voe(t,e,n){if(!YS(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)YS(t[r],n[i])&&(r-=1),i-=1;return r===-1}function Eoe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(voe(o,e,n)){r.push(s);break}return r}function HI(t,e,n){const r=Object.entries(n.themes).filter(o=>o[1]).map(o=>({color:o[0],theme:o[1]})),i=woe(...r.map(o=>c1(t,e,{...n,theme:o.theme})));return i[0].map((o,a)=>o.map((l,c)=>{const u={content:l.content,variants:{},offset:l.offset};return i.forEach((h,d)=>{const{content:f,explanation:_,offset:g,...m}=h[a][c];u.variants[r[d].color]=m}),u}))}function woe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(s[c].push(u),o[c]+=1,a[c]=i[c][o[c]]):(s[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}class zt extends Error{constructor(e){super(e),this.name="ShikiError"}}function Fd(t,e,n){let r,i,s,o,a;if("themes"in n){const{defaultColor:l="light",cssVariablePrefix:c="--shiki-"}=n,u=Object.entries(n.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})).sort((g,m)=>g.color===l?-1:m.color===l?1:0);if(u.length===0)throw new zt("`themes` option must not be empty");const h=HI(t,e,n);if(l&&!u.find(g=>g.color===l))throw new zt(`\`themes\` option must contain the defaultColor key \`${l}\``);const d=u.map(g=>t.getTheme(g.theme)),f=u.map(g=>g.color);s=h.map(g=>g.map(m=>Soe(m,f,c,l)));const _=u.map(g=>Bd(g.theme,n));i=u.map((g,m)=>(m===0&&l?"":`${c+g.color}:`)+(Os(d[m].fg,_[m])||"inherit")).join(";"),r=u.map((g,m)=>(m===0&&l?"":`${c+g.color}-bg:`)+(Os(d[m].bg,_[m])||"inherit")).join(";"),o=`shiki-themes ${d.map(g=>g.name).join(" ")}`,a=l?void 0:[i,r].join(";")}else if("theme"in n){const l=Bd(n.theme,n.colorReplacements);s=c1(t,e,n);const c=t.getTheme(n.theme);r=Os(c.bg,l),i=Os(c.fg,l),o=c.name}else throw new zt("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a}}function Soe(t,e,n,r){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>BI(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a=s.reduce((l,c,u)=>{for(const h of o){const d=c[h]||"inherit";if(u===0&&r)l[h]=d;else{const f=h==="color"?"":h==="background-color"?"-bg":`-${h}`,_=n+e[u]+(h==="color"?"":f);l[h]?l[h]+=`;${_}:${d}`:l[h]=`${_}:${d}`}}return l},{});return i.htmlStyle=r?FI(a):Object.values(a).join(";"),i}function Toe(){const t=new WeakMap;function e(r){if(!t.has(r.meta)){let s=function(a){return typeof a=="number"?{...i.indexToPos(a),offset:a}:{...a,offset:i.posToIndex(a.line,a.character)}};const i=uoe(r.source),o=(r.options.decorations||[]).map(a=>({...a,start:s(a.start),end:s(a.end)}));n(o),t.set(r.meta,{decorations:o,converter:i,source:r.source})}return t.get(r.meta)}function n(r){for(let i=0;i<r.length;i++){const s=r[i];if(s.start.offset>s.end.offset)throw new zt(`Invalid decoration range: ${JSON.stringify(s.start)} - ${JSON.stringify(s.end)}`);for(let o=i+1;o<r.length;o++){const a=r[o],l=s.start.offset<a.start.offset&&a.start.offset<s.end.offset,c=s.start.offset<a.end.offset&&a.end.offset<s.end.offset,u=a.start.offset<s.start.offset&&s.start.offset<a.end.offset,h=a.start.offset<s.end.offset&&s.end.offset<a.end.offset;if(l||c||u||h){if(c&&c||u&&h)continue;throw new zt(`Decorations ${JSON.stringify(s.start)} and ${JSON.stringify(a.start)} intersect.`)}}}}return{name:"shiki:decorations",tokens(r){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return coe(r,s)},code(r){if(!this.options.decorations?.length)return;const i=e(this),s=Array.from(r.children).filter(h=>h.type==="element"&&h.tagName==="span");if(s.length!==i.converter.lines.length)throw new zt(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${i.converter.lines.length}). Failed to apply decorations.`);function o(h,d,f,_){const g=s[h];let m="",p=-1,b=-1;function y(E){return E.type==="text"?E.value:E.type==="element"?E.children.map(y).join(""):""}if(d===0&&(p=0),f===0&&(b=0),f===Number.POSITIVE_INFINITY&&(b=g.children.length),p===-1||b===-1)for(let E=0;E<g.children.length;E++)m+=y(g.children[E]),p===-1&&m.length===d&&(p=E+1),b===-1&&m.length===f&&(b=E+1);if(p===-1)throw new zt(`Failed to find start index for decoration ${JSON.stringify(_.start)}`);if(b===-1)throw new zt(`Failed to find end index for decoration ${JSON.stringify(_.end)}`);const v=g.children.slice(p,b);if(!_.alwaysWrap&&v.length===g.children.length)l(g,_,"line");else if(!_.alwaysWrap&&v.length===1&&v[0].type==="element")l(v[0],_,"token");else{const E={type:"element",tagName:"span",properties:{},children:v};l(E,_,"wrapper"),g.children.splice(p,v.length,E)}}function a(h,d){s[h]=l(s[h],d,"line")}function l(h,d,f){const _=d.properties||{},g=d.transform||(m=>m);return h.tagName=d.tagName||"span",h.properties={...h.properties,..._,class:h.properties.class},d.properties?.class&&NI(h,d.properties.class),h=g(h,f)||h,h}const c=[],u=i.decorations.sort((h,d)=>d.start.offset-h.start.offset);for(const h of u){const{start:d,end:f}=h;if(d.line===f.line)o(d.line,d.character,f.character,h);else if(d.line<f.line){o(d.line,d.character,Number.POSITIVE_INFINITY,h);for(let _=d.line+1;_<f.line;_++)c.unshift(()=>a(_,h));o(f.line,0,f.character,h)}}c.forEach(h=>h())}}}const Coe=[Toe()];function Hd(t){return[...t.transformers||[],...Coe]}function Ud(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>Ud(t,i,s),codeToTokens:(i,s)=>Fd(t,i,s)}){let i=e;for(const d of Hd(n))i=d.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:c}=Fd(t,i,n);const{mergeWhitespaces:u=!0}=n;u===!0?s=Aoe(s):u==="never"&&(s=koe(s));const h={...r,get source(){return i}};for(const d of Hd(n))s=d.tokens?.call(h,s)||s;return xoe(s,{...n,fg:o,bg:a,themeName:l,rootStyle:c},h)}function xoe(t,e,n){const r=Hd(e),i=[],s={type:"root",children:[]},{structure:o="classic"}=e;let a={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,tabindex:"0",...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([d])=>!d.startsWith("_")))},children:[]},l={type:"element",tagName:"code",properties:{},children:i};const c=[],u={...n,structure:o,addClassToHast:NI,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return s},get pre(){return a},get code(){return l},get lines(){return c}};if(t.forEach((d,f)=>{f&&(o==="inline"?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):o==="classic"&&i.push({type:"text",value:`
`}));let _={type:"element",tagName:"span",properties:{class:"line"},children:[]},g=0;for(const m of d){let p={type:"element",tagName:"span",properties:{},children:[{type:"text",value:m.content}]};const b=m.htmlStyle||FI(BI(m));b&&(p.properties.style=b);for(const y of r)p=y?.span?.call(u,p,f+1,g,_)||p;o==="inline"?s.children.push(p):o==="classic"&&_.children.push(p),g+=m.content.length}if(o==="classic"){for(const m of r)_=m?.line?.call(u,_,f+1)||_;c.push(_),i.push(_)}}),o==="classic"){for(const d of r)l=d?.code?.call(u,l)||l;a.children.push(l);for(const d of r)a=d?.pre?.call(u,a)||a;s.children.push(a)}let h=s;for(const d of r)h=d?.root?.call(u,h)||h;return h}function Aoe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&pr.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function koe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}const Roe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Jc{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Jc.prototype.property={};Jc.prototype.normal={};Jc.prototype.space=null;function UI(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new Jc(n,r,e)}function C0(t){return t.toLowerCase()}class lr{constructor(e,n){this.property=e,this.attribute=n}}lr.prototype.space=null;lr.prototype.boolean=!1;lr.prototype.booleanish=!1;lr.prototype.overloadedBoolean=!1;lr.prototype.number=!1;lr.prototype.commaSeparated=!1;lr.prototype.spaceSeparated=!1;lr.prototype.commaOrSpaceSeparated=!1;lr.prototype.mustUseProperty=!1;lr.prototype.defined=!1;let Poe=0;const $e=ao(),Rt=ao(),jI=ao(),Oe=ao(),pt=ao(),Qo=ao(),On=ao();function ao(){return 2**++Poe}var x0=Object.freeze({__proto__:null,boolean:$e,booleanish:Rt,commaOrSpaceSeparated:On,commaSeparated:Qo,number:Oe,overloadedBoolean:jI,spaceSeparated:pt});const fm=Object.keys(x0);class u1 extends lr{constructor(e,n,r,i){let s=-1;if(super(e,n),XS(this,"space",i),typeof r=="number")for(;++s<fm.length;){const o=fm[s];XS(this,fm[s],(r&x0[o])===x0[o])}}}u1.prototype.defined=!0;function XS(t,e,n){n&&(t[e]=n)}const Doe={}.hasOwnProperty;function Ra(t){const e={},n={};let r;for(r in t.properties)if(Doe.call(t.properties,r)){const i=t.properties[r],s=new u1(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[C0(r)]=r,n[C0(s.attribute)]=r}return new Jc(e,n,t.space)}const zI=Ra({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),VI=Ra({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function WI(t,e){return e in t?t[e]:e}function GI(t,e){return WI(t,e.toLowerCase())}const $I=Ra({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:GI,properties:{xmlns:null,xmlnsXLink:null}}),qI=Ra({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Rt,ariaAutoComplete:null,ariaBusy:Rt,ariaChecked:Rt,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:pt,ariaCurrent:null,ariaDescribedBy:pt,ariaDetails:null,ariaDisabled:Rt,ariaDropEffect:pt,ariaErrorMessage:null,ariaExpanded:Rt,ariaFlowTo:pt,ariaGrabbed:Rt,ariaHasPopup:null,ariaHidden:Rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pt,ariaLevel:Oe,ariaLive:null,ariaModal:Rt,ariaMultiLine:Rt,ariaMultiSelectable:Rt,ariaOrientation:null,ariaOwns:pt,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:Rt,ariaReadOnly:Rt,ariaRelevant:null,ariaRequired:Rt,ariaRoleDescription:pt,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:Rt,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null}}),Ooe=Ra({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:GI,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qo,acceptCharset:pt,accessKey:pt,action:null,allow:null,allowFullScreen:$e,allowPaymentRequest:$e,allowUserMedia:$e,alt:null,as:null,async:$e,autoCapitalize:null,autoComplete:pt,autoFocus:$e,autoPlay:$e,blocking:pt,capture:null,charSet:null,checked:$e,cite:null,className:pt,cols:Oe,colSpan:null,content:null,contentEditable:Rt,controls:$e,controlsList:pt,coords:Oe|Qo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:$e,defer:$e,dir:null,dirName:null,disabled:$e,download:jI,draggable:Rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:$e,formTarget:null,headers:pt,height:Oe,hidden:$e,high:Oe,href:null,hrefLang:null,htmlFor:pt,httpEquiv:pt,id:null,imageSizes:null,imageSrcSet:null,inert:$e,inputMode:null,integrity:null,is:null,isMap:$e,itemId:null,itemProp:pt,itemRef:pt,itemScope:$e,itemType:pt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:$e,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:$e,muted:$e,name:null,nonce:null,noModule:$e,noValidate:$e,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:$e,optimum:Oe,pattern:null,ping:pt,placeholder:null,playsInline:$e,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:$e,referrerPolicy:null,rel:pt,required:$e,reversed:$e,rows:Oe,rowSpan:Oe,sandbox:pt,scope:null,scoped:$e,seamless:$e,selected:$e,shadowRootDelegatesFocus:$e,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:Rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:$e,useMap:null,value:Rt,width:Oe,wrap:null,align:null,aLink:null,archive:pt,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:$e,declare:$e,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:$e,noHref:$e,noShade:$e,noWrap:$e,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:Rt,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:$e,disableRemotePlayback:$e,prefix:null,property:null,results:Oe,security:null,unselectable:null}}),Ioe=Ra({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:WI,properties:{about:On,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:pt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:$e,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qo,g2:Qo,glyphName:Qo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:On,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:On,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:On,rev:On,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:On,requiredFeatures:On,requiredFonts:On,requiredFormats:On,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:On,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:On,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:On,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Loe=/^data[-\w.:]+$/i,QS=/-[a-z]/g,Moe=/[A-Z]/g;function Noe(t,e){const n=C0(e);let r=e,i=lr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Loe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(QS,Foe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!QS.test(s)){let o=s.replace(Moe,Boe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=u1}return new i(r,e)}function Boe(t){return"-"+t.toLowerCase()}function Foe(t){return t.charAt(1).toUpperCase()}const Hoe=UI([VI,zI,$I,qI,Ooe],"html"),KI=UI([VI,zI,$I,qI,Ioe],"svg"),JS={}.hasOwnProperty;function Uoe(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&JS.call(i,t)){const l=String(i[t]);o=JS.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function joe(t,e){if(t=t.replace(e.subset?zoe(e.subset):/["&'<>`]/g,r),e.subset||e.escapeOnly)return t;return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n).replace(/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function zoe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function Voe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!/[\dA-Fa-f]/.test(String.fromCharCode(e))?r:r+";"}function Woe(t,e,n){const r="&#"+String(t);return n&&e&&!/\d/.test(String.fromCharCode(e))?r:r+";"}const Goe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],pm={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},$oe=["cent","copy","divide","gt","lt","not","para","times"],YI={}.hasOwnProperty,A0={};let Xu;for(Xu in pm)YI.call(pm,Xu)&&(A0[pm[Xu]]=Xu);function qoe(t,e,n,r){const i=String.fromCharCode(t);if(YI.call(A0,i)){const s=A0[i],o="&"+s;return n&&Goe.includes(s)&&!$oe.includes(s)&&(!r||e&&e!==61&&/[^\da-z]/i.test(String.fromCharCode(e)))?o:o+";"}return""}function Koe(t,e,n){let r=Voe(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=qoe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=Woe(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Jo(t,e){return joe(t,Object.assign({format:Koe},e))}const Yoe=/^>|^->|<!--|-->|--!>|<!-$/g,Xoe=[">"],Qoe=["<",">"];function Joe(t,e,n,r){return r.settings.bogusComments?"<?"+Jo(t.value,Object.assign({},r.settings.characterReferences,{subset:Xoe}))+">":"<!--"+t.value.replace(Yoe,i)+"-->";function i(s){return Jo(s,Object.assign({},r.settings.characterReferences,{subset:Qoe}))}}function Zoe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function ZS(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function eae(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function tae(t){return t.join(" ").trim()}const nae=/[ \t\n\f\r]/g;function h1(t){return typeof t=="object"?t.type==="text"?eT(t.value):!1:eT(t)}function eT(t){return t.replace(nae,"")===""}const Nt=QI(1),XI=QI(-1),rae=[];function QI(t){return e;function e(n,r,i){const s=n?n.children:rae;let o=(r||0)+t,a=s[o];if(!i)for(;a&&h1(a);)o+=t,a=s[o];return a}}const iae={}.hasOwnProperty;function JI(t){return e;function e(n,r,i){return iae.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const d1=JI({body:oae,caption:mm,colgroup:mm,dd:uae,dt:cae,head:mm,html:sae,li:lae,optgroup:hae,option:dae,p:aae,rp:tT,rt:tT,tbody:pae,td:nT,tfoot:mae,th:nT,thead:fae,tr:gae});function mm(t,e,n){const r=Nt(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&h1(r.value.charAt(0)))}function sae(t,e,n){const r=Nt(n,e);return!r||r.type!=="comment"}function oae(t,e,n){const r=Nt(n,e);return!r||r.type!=="comment"}function aae(t,e,n){const r=Nt(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function lae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&r.tagName==="li"}function cae(t,e,n){const r=Nt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function uae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function tT(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function hae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function dae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function fae(t,e,n){const r=Nt(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function pae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function mae(t,e,n){return!Nt(n,e)}function gae(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function nT(t,e,n){const r=Nt(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const _ae=JI({body:vae,colgroup:Eae,head:yae,html:bae,tbody:wae});function bae(t){const e=Nt(t,-1);return!e||e.type!=="comment"}function yae(t){const e=t.children,n=[];let r=-1;for(;++r<e.length;){const i=e[r];if(i.type==="element"&&(i.tagName==="title"||i.tagName==="base")){if(n.includes(i.tagName))return!1;n.push(i.tagName)}}return e.length>0}function vae(t){const e=Nt(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&h1(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Eae(t,e,n){const r=XI(n,e),i=Nt(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&d1(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function wae(t,e,n){const r=XI(n,e),i=Nt(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&d1(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const Qu={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Sae(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=KI);const c=Tae(r,t.properties),u=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,u&&(o=!1),(c||!s||!_ae(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!s||!d1(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function Tae(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=Cae(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function Cae(t,e,n){const r=Noe(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean&&typeof n!="string")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Jo(r.attribute,Object.assign({},t.settings.characterReferences,{subset:Qu.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?eae:tae)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=Jo(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:Qu.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&ZS(n,o)>ZS(n,t.alternative)&&(o=t.alternative),a=o+Jo(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?Qu.single:Qu.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const xae=["<","&"];function ZI(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Jo(t.value,Object.assign({},r.settings.characterReferences,{subset:xae}))}function Aae(t,e,n,r){return r.settings.allowDangerousHtml?t.value:ZI(t,e,n,r)}function kae(t,e,n,r){return r.all(t)}const Rae=Uoe("type",{invalid:Pae,unknown:Dae,handlers:{comment:Joe,doctype:Zoe,element:Sae,raw:Aae,root:kae,text:ZI}});function Pae(t){throw new Error("Expected node, not `"+t+"`")}function Dae(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const Oae={},Iae={},Lae=[];function Mae(t,e){const n=Oae,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:Nae,all:Bae,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||Roe,characterReferences:n.characterReferences||Iae,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?KI:Hoe,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function Nae(t,e,n){return Rae(t,e,n,this)}function Bae(t){const e=[],n=t&&t.children||Lae;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function Fae(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>Ud(t,s,o),codeToTokens:(s,o)=>Fd(t,s,o)};let i=Mae(Ud(t,e,n,r));for(const s of Hd(n))i=s.postprocess?.call(r,i,n)||i;return i}async function Hae(t){let e,n;const r={};function i(g){n=g,r.HEAPU8=new Uint8Array(g),r.HEAPU32=new Uint32Array(g)}function s(){return typeof performance<"u"?performance.now():Date.now()}function o(g,m,p){r.HEAPU8.copyWithin(g,m,m+p)}function a(){return 2147483648}function l(g){try{return e.grow(g-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function c(g){const m=r.HEAPU8.length;g=g>>>0;const p=a();if(g>p)return!1;const b=(y,v)=>y+(v-y%v)%v;for(let y=1;y<=4;y*=2){let v=m*(1+.2/y);v=Math.min(v,g+100663296);const E=Math.min(p,b(Math.max(g,v),65536));if(l(E))return!0}return!1}const u=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(g,m,p=1024){const b=m+p;let y=m;for(;g[y]&&!(y>=b);)++y;if(y-m>16&&g.buffer&&u)return u.decode(g.subarray(m,y));let v="";for(;m<y;){let E=g[m++];if(!(E&128)){v+=String.fromCharCode(E);continue}const w=g[m++]&63;if((E&224)===192){v+=String.fromCharCode((E&31)<<6|w);continue}const T=g[m++]&63;if((E&240)===224?E=(E&15)<<12|w<<6|T:E=(E&7)<<18|w<<12|T<<6|g[m++]&63,E<65536)v+=String.fromCharCode(E);else{const S=E-65536;v+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return v}function d(g,m){return g?h(r.HEAPU8,g,m):""}const f={emscripten_get_now:s,emscripten_memcpy_big:o,emscripten_resize_heap:c,fd_write:()=>0};async function _(){const m=await t({env:f,wasi_snapshot_preview1:f});e=m.memory,i(e.buffer),Object.assign(r,m),r.UTF8ToString=d}return await _(),r}let Ut=null,Uae=!1;function jae(t){throw new zt(t.UTF8ToString(t.getLastOnigError()))}class Hf{static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}utf16Length;utf8Length;utf16Value;utf8Value;utf16OffsetToUtf8;utf8OffsetToUtf16;constructor(e){const n=e.length,r=Hf._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let h=u,d=!1;if(u>=55296&&u<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(h=(u-55296<<10)+65536|f-56320,d=!0)}i&&(s[c]=l,d&&(s[c+1]=l),h<=127?o[l+0]=c:h<=2047?(o[l+0]=c,o[l+1]=c):h<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),h<=127?a[l++]=h:h<=2047?(a[l++]=192|(h&1984)>>>6,a[l++]=128|(h&63)>>>0):h<=65535?(a[l++]=224|(h&61440)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0):(a[l++]=240|(h&1835008)>>>18,a[l++]=128|(h&258048)>>>12,a[l++]=128|(h&4032)>>>6,a[l++]=128|(h&63)>>>0),d&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}class Kn{static LAST_ID=0;static _sharedPtr=0;static _sharedPtrInUse=!1;id=++Kn.LAST_ID;_onigBinding;content;utf16Length;utf8Length;utf16OffsetToUtf8;utf8OffsetToUtf16;ptr;constructor(e){if(!Ut)throw new zt("Must invoke loadWasm first.");this._onigBinding=Ut,this.content=e;const n=new Hf(e);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!Kn._sharedPtrInUse?(Kn._sharedPtr||(Kn._sharedPtr=Ut.omalloc(1e4)),Kn._sharedPtrInUse=!0,Ut.HEAPU8.set(n.utf8Value,Kn._sharedPtr),this.ptr=Kn._sharedPtr):this.ptr=n.createString(Ut)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===Kn._sharedPtr?Kn._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}}class zae{_onigBinding;_ptr;constructor(e){if(!Ut)throw new zt("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new Hf(e[a]);n[a]=c.createString(Ut),r[a]=c.utf8Length}const i=Ut.omalloc(4*e.length);Ut.HEAPU32.set(n,i/4);const s=Ut.omalloc(4*e.length);Ut.HEAPU32.set(r,s/4);const o=Ut.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)Ut.ofree(n[a]);Ut.ofree(s),Ut.ofree(i),o===0&&jae(Ut),this._onigBinding=Ut,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=Uae,s=0;if(typeof r=="number"?(r&8&&(i=!0),s=r):typeof r=="boolean"&&(i=r),typeof e=="string"){e=new Kn(e);const o=this._findNextMatchSync(e,n,i,s);return e.dispose(),o}return this._findNextMatchSync(e,n,i,s)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding;let o;if(r?o=s.findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i):o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i),o===0)return null;const a=s.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],h=[];for(let d=0;d<u;d++){const f=e.convertUtf8OffsetToUtf16(a[l++]),_=e.convertUtf8OffsetToUtf16(a[l++]);h[d]={start:f,end:_,length:_-f}}return{index:c,captureIndices:h}}}function Vae(t){return typeof t.instantiator=="function"}function Wae(t){return typeof t.default=="function"}function Gae(t){return typeof t.data<"u"}function $ae(t){return typeof Response<"u"&&t instanceof Response}function qae(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof tn<"u"&&tn.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Ju;function Kae(t){if(Ju)return Ju;async function e(){Ut=await Hae(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),Vae(r)?r=await r.instantiator(n):Wae(r)?r=await r.default(n):(Gae(r)&&(r=r.data),$ae(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await Yae(r)(n):r=await Xae(r)(n):qae(r)?r=await gm(r)(n):r instanceof WebAssembly.Module?r=await gm(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await gm(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Ju=e(),Ju}function gm(t){return e=>WebAssembly.instantiate(t,e)}function Yae(t){return e=>WebAssembly.instantiateStreaming(t,e)}function Xae(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}function Qae(t){return new Kn(t)}function Jae(t){return new zae(t)}const rT={light:"#333333",dark:"#bbbbbb"},iT={light:"#fffffe",dark:"#1e1e1e"},sT="__shiki_resolved";function eL(t){if(t?.[sT])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?rT.light:rT.dark),n||(n=e.type==="light"?iT.light:iT.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const h=o(a.settings.foreground);e.colorReplacements[h]=a.settings.foreground,u.settings.foreground=h}if(c){const h=o(a.settings.background);e.colorReplacements[h]=a.settings.background,u.settings.background=h}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,sT,{enumerable:!1,writable:!1,value:!0}),e}class Zae extends ooe{_resolver;_themes;_langs;_alias;_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,n.forEach(s=>this.loadTheme(s)),r.forEach(s=>this.loadLanguage(s))}getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=eL(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=Ld.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new zt(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}async loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=await this.loadGrammarWithConfiguration(e.scopeName,1,r);if(this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),await this.loadLanguage(this._langMap.get(s.name))}async init(){this._themes.map(e=>this.loadTheme(e)),await this.loadLanguages(this._langs)}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}async loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(s=>!r.includes(s));throw new zt(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)await this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class ele{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLibPromise;constructor(e,n){this._onigLibPromise=e,n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLibPromise}getLangRegistration(e){return this._langs.get(e)}async loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let tle,Ka=0;async function nle(t={}){Ka+=1,t.warnings!==!1&&Ka>=10&&Ka%10===0&&console.warn(`[Shiki] ${Ka} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;async function n(y){return Promise.resolve(typeof y=="function"?y():y).then(v=>v.default||v)}async function r(y){return Array.from(new Set((await Promise.all(y.filter(v=>!l1(v)).map(async v=>await n(v).then(E=>Array.isArray(E)?E:[E])))).flat()))}const i=t.loadWasm||tle,[s,o]=await Promise.all([Promise.all((t.themes||[]).map(n)).then(y=>y.map(eL)),r(t.langs||[]),i?Kae(i):void 0]),a=new ele(Promise.resolve({createOnigScanner(y){return Jae(y)},createOnigString(y){return Qae(y)}}),o),l=new Zae(a,s,o,t.langAlias);await l.init();let c;function u(y){p();const v=l.getGrammar(typeof y=="string"?y:y.name);if(!v)throw new zt(`Language \`${y}\` not found, you may need to load it first`);return v}function h(y){if(y==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};p();const v=l.getTheme(y);if(!v)throw new zt(`Theme \`${y}\` not found, you may need to load it first`);return v}function d(y){p();const v=h(y);c!==y&&(l.setTheme(v),c=y);const E=l.getColorMap();return{theme:v,colorMap:E}}function f(){return p(),l.getLoadedThemes()}function _(){return p(),l.getLoadedLanguages()}async function g(...y){p(),await l.loadLanguages(await r(y))}async function m(...y){p(),await Promise.all(y.map(async v=>MI(v)?null:l.loadTheme(await n(v))))}function p(){if(e)throw new zt("Shiki instance has been disposed")}function b(){e||(e=!0,l.dispose(),Ka-=1)}return{setTheme:d,getTheme:h,getLanguage:u,getLoadedThemes:f,getLoadedLanguages:_,loadLanguage:g,loadTheme:m,dispose:b,[Symbol.dispose]:b}}async function rle(t={}){const e=await nle(t);return{codeToTokensBase:(n,r)=>c1(e,n,r),codeToTokensWithThemes:(n,r)=>HI(e,n,r),codeToTokens:(n,r)=>Fd(e,n,r),codeToHast:(n,r)=>Ud(e,n,r),codeToHtml:(n,r)=>Fae(e,n,r),...e,getInternalContext:()=>e}}function ile(t,e,n){async function r(i){function s(u){if(typeof u=="string"){if(l1(u))return[];const h=t[u];if(!h)throw new zt(`Language \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}function o(u){if(MI(u))return"none";if(typeof u=="string"){const h=e[u];if(!h)throw new zt(`Theme \`${u}\` is not included in this bundle. You may want to load it from external source.`);return h}return u}const a=(i.themes??[]).map(u=>o(u)),l=(i.langs??[]).map(u=>s(u)),c=await rle({...i,themes:a,langs:l,loadWasm:n});return{...c,loadLanguage(...u){return c.loadLanguage(...u.map(s))},loadTheme(...u){return c.loadTheme(...u.map(o))}}}return r}function sle(t){let e;async function n(r={}){if(e){const i=await e;return await Promise.all([i.loadTheme(...r.themes||[]),i.loadLanguage(...r.langs||[])]),i}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function ole(t){const e=sle(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)}}}const tL=ile(vI,Sse,Ese),{codeToHtml:ale,codeToHast:Aue,codeToTokens:kue,codeToTokensBase:Rue,codeToTokensWithThemes:Pue,getSingletonHighlighter:Due}=ole(tL),lle={langs:["shell"],themes:["light-plus","dark-plus"]},cle=await tL(lle),ule=D.memo(({messageId:t})=>{const e=D.useRef(!1),[n,r]=D.useState(!1),s=Dt(He.artifacts)[t],o=Dt(B0(s.runner.actions,l=>Object.values(l))),a=()=>{e.current=!0,r(!n)};return D.useEffect(()=>{o.length&&!n&&!e.current&&r(!0)},[o]),N.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[N.jsxs("div",{className:"flex",children:[N.jsx("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const l=He.showWorkbench.get();He.showWorkbench.set(!l)},children:N.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[N.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:s?.title}),N.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})}),N.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),N.jsx(Fh,{children:o.length&&N.jsx(rr.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:ir},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:a,children:N.jsx("div",{className:"p-4",children:N.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),N.jsx(Fh,{children:n&&o.length>0&&N.jsxs(rr.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[N.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),N.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:N.jsx(ple,{actions:o})})]})})]})});function hle({classsName:t,code:e}){return N.jsx("div",{className:We("text-xs",t),dangerouslySetInnerHTML:{__html:cle.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const dle={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function fle(t){He.currentView.get()!=="code"&&He.currentView.set("code"),He.setSelectedFile(`${Pc}/${t}`)}const ple=D.memo(({actions:t})=>N.jsx(rr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:N.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,n)=>{const{status:r,type:i,content:s}=e,o=n===t.length-1;return N.jsxs(rr.li,{variants:dle,initial:"hidden",animate:"visible",transition:{duration:.2,ease:ir},children:[N.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[N.jsx("div",{className:We("text-lg",mle(e.status)),children:r==="running"?N.jsx(N.Fragment,{children:i!=="start"?N.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):N.jsx("div",{className:"i-ph:terminal-window-duotone"})}):r==="pending"?N.jsx("div",{className:"i-ph:circle-duotone"}):r==="complete"?N.jsx("div",{className:"i-ph:check"}):r==="failed"||r==="aborted"?N.jsx("div",{className:"i-ph:x"}):null}),i==="file"?N.jsxs("div",{children:["Create"," ",N.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:()=>fle(e.filePath),children:e.filePath})]}):i==="shell"?N.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:N.jsx("span",{className:"flex-1",children:"Run command"})}):i==="start"?N.jsx("a",{onClick:a=>{a.preventDefault(),He.currentView.set("preview")},className:"flex items-center w-full min-h-[28px]",children:N.jsx("span",{className:"flex-1",children:"Start Application"})}):null]}),(i==="shell"||i==="start")&&N.jsx(hle,{classsName:We("mt-1",{"mb-3.5":!o}),code:s})]},n)})})}));function mle(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const gle="c",_le={CopyButtonContainer:gle},oT=Wn("CodeBlock"),ble=D.memo(({className:t,code:e,language:n="plaintext",theme:r="dark-plus",disableCopy:i=!1})=>{const[s,o]=D.useState(void 0),[a,l]=D.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return D.useEffect(()=>{n&&!l1(n)&&!(n in vI)&&oT.warn(`Unsupported language '${n}'`),oT.trace(`Language = ${n}`),(async()=>{o(await ale(e,{lang:n,theme:r}))})()},[e]),N.jsxs("div",{className:We("relative group text-left",t),children:[N.jsx("div",{className:We(_le.CopyButtonContainer,"bg-white absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!i&&N.jsx("button",{className:We("flex items-center bg-transparent p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:N.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),N.jsx("div",{dangerouslySetInnerHTML:{__html:s??""}})]})}),yle="b",vle={MarkdownContent:yle},aT=Wn("MarkdownComponent"),nL=D.memo(({children:t,html:e=!1,limitedMarkdown:n=!1})=>{aT.trace("Render");const r=D.useMemo(()=>({div:({className:i,children:s,node:o,...a})=>{if(i?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||aT.error(`Invalid message id ${l}`),N.jsx(ule,{messageId:l})}return N.jsx("div",{className:i,...a,children:s})},pre:i=>{const{children:s,node:o,...a}=i,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:c,...u}=l.properties,[,h="plaintext"]=/language-(\w+)/.exec(String(c)||"")??[];return N.jsx(ble,{code:l.children[0].value,language:h,...u})}return N.jsx("pre",{...a,children:s})}}),[]);return N.jsx(MZ,{allowedElements:bI,className:vle.MarkdownContent,components:r,remarkPlugins:gse(n),rehypePlugins:_se(e),children:t})}),Ele=D.memo(({content:t})=>N.jsx("div",{className:"overflow-hidden w-full",children:N.jsx(nL,{html:!0,children:t})}));function wle({content:t}){return N.jsx("div",{className:"overflow-hidden pt-[4px]",children:N.jsx(nL,{limitedMarkdown:!0,children:Sle(t)})})}function Sle(t){return t.replace(AF,"").replace(tF,"Using: $1").replace(nF,` ($1)

`).trim()}const Tle=qe.forwardRef((t,e)=>{const{id:n,isStreaming:r=!1,messages:i=[]}=t,s=yL(),o=l=>{const c=new URLSearchParams(s.search);c.set("rewindTo",l),window.location.search=c.toString()},a=async l=>{try{if(!Ht||!xs.get()){je.error("Chat persistence is not available");return}const c=await l5(Ht,xs.get(),l);window.location.href=`/chat/${c}`}catch(c){je.error("Failed to fork chat: "+c.message)}};return N.jsxs("div",{id:n,ref:e,className:t.className,children:[i.length>0?i.map((l,c)=>{const{role:u,content:h,id:d}=l,f=u==="user",_=c===0,g=c===i.length-1;return N.jsxs("div",{className:We("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":f||!r||r&&!g,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":r&&g,"mt-4":!_}),children:[f&&N.jsx("div",{className:"flex items-center justify-center w-[34px] h-[34px] overflow-hidden bg-white text-gray-600 rounded-full shrink-0 self-start",children:N.jsx("div",{className:"i-ph:user-fill text-xl"})}),N.jsx("div",{className:"grid grid-col-1 w-full",children:f?N.jsx(wle,{content:h}):N.jsx(Ele,{content:h})}),!f&&N.jsxs("div",{className:"flex gap-2 flex-col lg:flex-row",children:[N.jsx(Vo,{tooltip:"Revert to this message",children:d&&N.jsx("button",{onClick:()=>o(d),className:We("i-ph:arrow-u-up-left","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:arrow-u-up-left")}),N.jsx(Vo,{tooltip:"Fork chat from this message",children:N.jsx("button",{onClick:()=>a(d),className:We("i-ph:git-fork","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:git-fork")})]})]},c)}):null,r&&N.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),Cle=to(.4,0,.2,1);function xle({show:t,isStreaming:e,onClick:n}){return N.jsx(Fh,{children:t?N.jsx(rr.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-accent-500 hover:brightness-94 color-white rounded-md w-[34px] h-[34px] transition-theme",transition:{ease:Cle,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},onClick:r=>{r.preventDefault(),n?.(r)},children:N.jsx("div",{className:"text-lg",children:e?N.jsx("div",{className:"i-ph:stop-circle-bold"}):N.jsx("div",{className:"i-ph:arrow-right"})})}):null})}const Ale=({provider:t,apiKey:e,setApiKey:n})=>{const[r,i]=D.useState(!1),[s,o]=D.useState(e),a=()=>{n(s),i(!1)};return N.jsxs("div",{className:"flex items-start sm:items-center mt-2 mb-2 flex-col sm:flex-row",children:[N.jsxs("div",{children:[N.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[t?.name," API Key:"]}),!r&&N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("span",{className:"flex-1 text-xs text-bolt-elements-textPrimary mr-2",children:e?"":"Not set (will still work if set in .env file)"}),N.jsx(Hn,{onClick:()=>i(!0),title:"Edit API Key",children:N.jsx("div",{className:"i-ph:pencil-simple"})})]})]}),r?N.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[N.jsx("input",{type:"password",value:s,placeholder:"Your API Key",onChange:l=>o(l.target.value),className:"flex-1 px-2 py-1 text-xs lg:text-sm rounded border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus"}),N.jsx(Hn,{onClick:a,title:"Save API Key",children:N.jsx("div",{className:"i-ph:check"})}),N.jsx(Hn,{onClick:()=>i(!1),title:"Cancel",children:N.jsx("div",{className:"i-ph:x"})})]}):N.jsx(N.Fragment,{children:t?.getApiKeyLink&&N.jsxs(Hn,{className:"ml-auto",onClick:()=>window.open(t?.getApiKeyLink),title:"Edit API Key",children:[N.jsx("span",{className:"mr-2 text-xs lg:text-sm",children:t?.labelForGetApiKey||"Get API Key"}),N.jsx("div",{className:t?.icon||"i-ph:key"})]})})]})};/*! js-cookie v3.0.5 | MIT */function Zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var kle={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function k0(t,e){function n(i,s,o){if(!(typeof document>"u")){o=Zu({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),c=l.slice(1).join("=");try{var u=decodeURIComponent(l[0]);if(o[u]=t.read(c,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",Zu({},s,{expires:-1}))},withAttributes:function(i){return k0(this.converter,Zu({},this.attributes,i))},withConverter:function(i){return k0(Zu({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ni=k0(kle,{path:"/"});const Rle="_",Ple="a",lT={BaseChat:Rle,Chat:Ple},Dle=({exportChat:t})=>N.jsx(Vo,{tooltip:"Export Chat",children:N.jsx(Hn,{title:"Export Chat",onClick:()=>t?.(),children:N.jsx("div",{className:"i-ph:download-simple text-xl"})})});function Ole(t){return N.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 p-4",children:[N.jsx("input",{type:"file",id:"chat-import",className:"hidden",accept:".json",onChange:async e=>{const n=e.target.files?.[0];if(n&&t){try{const r=new FileReader;r.onload=async i=>{try{const s=i.target?.result,o=JSON.parse(s);Array.isArray(o.messages)||je.error("Invalid chat file format"),await t(o.description,o.messages),je.success("Chat imported successfully")}catch(s){s instanceof Error?je.error("Failed to parse chat file: "+s.message):je.error("Failed to parse chat file")}},r.onerror=()=>je.error("Failed to read chat file"),r.readAsText(n)}catch(r){je.error(r instanceof Error?r.message:"Failed to import chat")}e.target.value=""}else je.error("Something went wrong")}}),N.jsx("div",{className:"flex flex-col items-center gap-4 max-w-2xl text-center",children:N.jsx("div",{className:"flex gap-2",children:N.jsxs("button",{onClick:()=>{document.getElementById("chat-import")?.click()},className:"px-4 py-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-3 transition-all flex items-center gap-2",children:[N.jsx("div",{className:"i-ph:upload-simple"}),"Import Chat"]})})})]})}const Ile=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"How do I center a div?"}];function Lle(t){return N.jsx("div",{id:"examples",className:"relative w-full max-w-xl mx-auto mt-8 flex justify-center",children:N.jsx("div",{className:"flex flex-col space-y-2 [mask-image:linear-gradient(to_bottom,black_0%,transparent_180%)] hover:[mask-image:none]",children:Ile.map((e,n)=>N.jsxs("button",{onClick:r=>{t?.(r,e.text)},className:"group flex items-center w-full gap-2 justify-center bg-transparent text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-theme",children:[e.text,N.jsx("div",{className:"i-ph:arrow-bend-down-left"})]},n))})})}const Mle=({model:t,setModel:e,provider:n,setProvider:r,modelList:i,providerList:s,apiKeys:o})=>N.jsxs("div",{className:"mb-2 flex gap-2 flex-col sm:flex-row",children:[N.jsx("select",{value:n?.name,onChange:a=>{r(s.find(c=>c.name===a.target.value));const l=[...i].find(c=>c.provider==a.target.value);e(l?l.name:"")},className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all",children:s.map(a=>N.jsx("option",{value:a.name,children:a.name},a.name))}),N.jsx("select",{value:t,onChange:a=>e(a.target.value),className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all lg:max-w-[70%] ",children:[...i].filter(a=>a.provider==n?.name&&a.name).map(a=>N.jsx("option",{value:a.name,children:a.label},a.name))},n?.name)]}),Nle=76,rL=qe.forwardRef(({textareaRef:t,messageRef:e,scrollRef:n,showChat:r=!0,chatStarted:i=!1,isStreaming:s=!1,enhancingPrompt:o=!1,promptEnhanced:a=!1,messages:l,input:c="",model:u,setModel:h,provider:d,setProvider:f,sendMessage:_,handleInputChange:g,enhancePrompt:m,handleStop:p,importChat:b,exportChat:y},v)=>{const E=i?400:200,[w,T]=D.useState({}),[S,x]=D.useState(Ym);D.useEffect(()=>{try{const P=Ni.get("apiKeys");if(P){const B=JSON.parse(P);typeof B=="object"&&B!==null&&T(B)}}catch(P){console.error("Error loading API keys from cookies:",P),Ni.remove("apiKeys")}uF().then(P=>{x(P)})},[]);const R=(P,B)=>{try{const A={...w,[P]:B};T(A),Ni.set("apiKeys",JSON.stringify(A),{expires:30,secure:!0,sameSite:"strict",path:"/"})}catch(A){console.error("Error saving API keys to cookies:",A)}},U=N.jsxs("div",{ref:v,className:We(lT.BaseChat,"relative flex flex-col lg:flex-row h-full w-full overflow-hidden bg-bolt-elements-background-depth-1"),"data-chat-visible":r,children:[N.jsx(Oi,{children:()=>N.jsx(K9,{})}),N.jsxs("div",{ref:n,className:"flex flex-col lg:flex-row overflow-y-auto w-full h-full",children:[N.jsxs("div",{className:We(lT.Chat,"flex flex-col flex-grow lg:min-w-[var(--chat-min-width)] h-full"),children:[!i&&N.jsxs("div",{id:"intro",className:"mt-[26vh] max-w-chat mx-auto text-center px-4 lg:px-0",children:[N.jsx("h1",{className:"text-3xl lg:text-6xl font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"Where ideas begin"}),N.jsx("p",{className:"text-md lg:text-xl mb-8 text-bolt-elements-textSecondary animate-fade-in animation-delay-200",children:"Bring ideas to life in seconds or get help on existing projects."})]}),N.jsxs("div",{className:We("pt-6 px-2 sm:px-6",{"h-full flex flex-col":i}),children:[N.jsx(Oi,{children:()=>i?N.jsx(Tle,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat pb-6 mx-auto z-1",messages:l,isStreaming:s}):null}),N.jsxs("div",{className:We(" bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor relative w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":i}),children:[N.jsx(Mle,{model:u,setModel:h,modelList:S,provider:d,setProvider:f,providerList:Dc,apiKeys:w},d?.name+":"+S.length),d&&N.jsx(Ale,{provider:d,apiKey:w[d.name]||"",setApiKey:P=>R(d.name,P)}),N.jsxs("div",{className:We("shadow-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background backdrop-filter backdrop-blur-[8px] rounded-lg overflow-hidden transition-all"),children:[N.jsx("textarea",{ref:t,className:"w-full pl-4 pt-4 pr-16 focus:outline-none focus:ring-0 focus:border-none focus:shadow-none resize-none text-md text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent transition-all",onKeyDown:P=>{if(P.key==="Enter"){if(P.shiftKey)return;P.preventDefault(),_?.(P)}},value:c,onChange:P=>{g?.(P)},style:{minHeight:Nle,maxHeight:E},placeholder:"How can Bolt help you today?",translate:"no"}),N.jsx(Oi,{children:()=>N.jsx(xle,{show:c.length>0||s,isStreaming:s,onClick:P=>{if(s){p?.();return}_?.(P)}})}),N.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[N.jsxs("div",{className:"flex gap-1 items-center",children:[N.jsx(Hn,{title:"Enhance prompt",disabled:c.length===0||o,className:We("transition-all",{"opacity-100!":o,"text-bolt-elements-item-contentAccent! pr-1.5 enabled:hover:bg-bolt-elements-item-backgroundAccent!":a}),onClick:()=>m?.(),children:o?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}),N.jsx("div",{className:"ml-1.5",children:"Enhancing prompt..."})]}):N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"i-bolt:stars text-xl"}),a&&N.jsx("div",{className:"ml-1.5",children:"Prompt enhanced"})]})}),i&&N.jsx(Oi,{children:()=>N.jsx(Dle,{exportChat:y})})]}),c.length>3?N.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",N.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Shift"})," +"," ",N.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Return"})," for a new line"]}):null]})]})]})]}),!i&&Ole(b),!i&&Lle(_)]}),N.jsx(Oi,{children:()=>N.jsx(yY,{chatStarted:i,isStreaming:s})})]})]});return N.jsx(CU,{delayDuration:200,children:U})});let Ble=(t,e=21)=>(n=e)=>{let r="",i=n;for(;i--;)r+=t[Math.random()*t.length|0];return r};var Pa={exports:{}};const Fle=typeof tn<"u",cT=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,uT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function iL(t,e,n){n==null&&e!==null&&typeof e=="object"&&(n=e,e=void 0),Fle&&tn.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const r=JSON.parse(t,e);if(r===null||typeof r!="object")return r;const i=n&&n.protoAction||"error",s=n&&n.constructorAction||"error";if(i==="ignore"&&s==="ignore")return r;if(i!=="ignore"&&s!=="ignore"){if(cT.test(t)===!1&&uT.test(t)===!1)return r}else if(i!=="ignore"&&s==="ignore"){if(cT.test(t)===!1)return r}else if(uT.test(t)===!1)return r;return sL(r,{protoAction:i,constructorAction:s,safe:n&&n.safe})}function sL(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let i=[t];for(;i.length;){const s=i;i=[];for(const o of s){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(r===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&i.push(l)}}}return t}function f1(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return iL(t,e,n)}finally{Error.stackTraceLimit=r}}function Hle(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return iL(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}Pa.exports=f1;Pa.exports.default=f1;Pa.exports.parse=f1;Pa.exports.safeParse=Hle;Pa.exports.scan=sL;var Ule=Pa.exports;const hT=N0(Ule);var jle=({prefix:t="",size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const r=Ble(n,e);return i=>`${t}${r(i)}`},oL=jle();function zle(t){const e=["ROOT"];let n=-1,r=null;function i(l,c,u){switch(l){case'"':{n=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{n=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{n=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function s(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":i(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),n=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,e.pop();break}default:{n=l,i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,e.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const h=t.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):n=l;break}}}let a=t.slice(0,n+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(r,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function Vle(t){if(t===void 0)return{value:void 0,state:"undefined-input"};try{return{value:hT.parse(t),state:"successful-parse"}}catch{try{return{value:hT.parse(zle(t)),state:"repaired-parse"}}catch{}}return{value:void 0,state:"failed-parse"}}var cc={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},uc={code:"1",name:"function_call",parse:t=>{if(t==null||typeof t!="object"||!("function_call"in t)||typeof t.function_call!="object"||t.function_call==null||!("name"in t.function_call)||!("arguments"in t.function_call)||typeof t.function_call.name!="string"||typeof t.function_call.arguments!="string")throw new Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:t}}},hc={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},dc={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},fc={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},pc={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},mc={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},gc={code:"7",name:"tool_calls",parse:t=>{if(t==null||typeof t!="object"||!("tool_calls"in t)||typeof t.tool_calls!="object"||t.tool_calls==null||!Array.isArray(t.tool_calls)||t.tool_calls.some(e=>e==null||typeof e!="object"||!("id"in e)||typeof e.id!="string"||!("type"in e)||typeof e.type!="string"||!("function"in e)||e.function==null||typeof e.function!="object"||!("arguments"in e.function)||typeof e.function.name!="string"||typeof e.function.arguments!="string"))throw new Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:t}}},_c={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},bc={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},yc={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},vc={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},Ec={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},wc={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},Sc={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},Wle=[cc,uc,hc,dc,fc,pc,mc,gc,_c,bc,yc,vc,Ec,wc,Sc],Gle={[cc.code]:cc,[uc.code]:uc,[hc.code]:hc,[dc.code]:dc,[fc.code]:fc,[pc.code]:pc,[mc.code]:mc,[gc.code]:gc,[_c.code]:_c,[bc.code]:bc,[yc.code]:yc,[vc.code]:vc,[Ec.code]:Ec,[wc.code]:wc,[Sc.code]:Sc};cc.name+"",cc.code,uc.name+"",uc.code,hc.name+"",hc.code,dc.name+"",dc.code,fc.name+"",fc.code,pc.name+"",pc.code,mc.name+"",mc.code,gc.name+"",gc.code,_c.name+"",_c.code,bc.name+"",bc.code,yc.name+"",yc.code,vc.name+"",vc.code,Ec.name+"",Ec.code,wc.name+"",wc.code,Sc.name+"",Sc.code;var $le=Wle.map(t=>t.code),qle=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const n=t.slice(0,e);if(!$le.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,i=t.slice(e+1),s=JSON.parse(i);return Gle[r].parse(s)},Kle=10;function Yle(t,e){const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return t.length=0,n}async function*Xle(t,{isAborted:e}={}){const n=new TextDecoder,r=[];let i=0;for(;;){const{value:s}=await t.read();if(s&&(r.push(s),i+=s.length,s[s.length-1]!==Kle))continue;if(r.length===0)break;const o=Yle(r,i);i=0;const a=n.decode(o,{stream:!0}).split(`
`).filter(l=>l!=="").map(qle);for(const l of a)yield l;if(e?.()){t.cancel();break}}}function eh(t,e){return!t||!e||!e.length?t:{...t,annotations:[...e]}}async function Qle({reader:t,abortControllerRef:e,update:n,onToolCall:r,onFinish:i,generateId:s=oL,getCurrentDate:o=()=>new Date}){var a;const l=o();let c={},u;const h=[],d=[];let f;const _={};let g={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},m="unknown";for await(const{type:p,value:b}of Xle(t,{isAborted:()=>e?.current===null})){if(p==="error")throw new Error(b);if(p==="finish_step"){b.isContinued||(u={});continue}if(p==="finish_message"){if(m=b.finishReason,b.usage!=null){const{completionTokens:T,promptTokens:S}=b.usage;g={completionTokens:T,promptTokens:S,totalTokens:T+S}}continue}if(u&&(c.text&&h.push(c.text),c.function_call&&h.push(c.function_call),c.tool_calls&&h.push(c.tool_calls),c=u,u=void 0),p==="text"&&(c.text?c.text={...c.text,content:(c.text.content||"")+b}:c.text={id:s(),role:"assistant",content:b,createdAt:l}),p==="tool_call_streaming_start")c.text==null&&(c.text={id:s(),role:"assistant",content:"",createdAt:l}),c.text.toolInvocations==null&&(c.text.toolInvocations=[]),_[b.toolCallId]={text:"",toolName:b.toolName,prefixMapIndex:c.text.toolInvocations.length},c.text.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0});else if(p==="tool_call_delta"){const T=_[b.toolCallId];T.text+=b.argsTextDelta;const{value:S}=Vle(T.text);c.text.toolInvocations[T.prefixMapIndex]={state:"partial-call",toolCallId:b.toolCallId,toolName:T.toolName,args:S},c.text.internalUpdateId=s()}else if(p==="tool_call"){if(_[b.toolCallId]!=null?c.text.toolInvocations[_[b.toolCallId].prefixMapIndex]={state:"call",...b}:(c.text==null&&(c.text={id:s(),role:"assistant",content:"",createdAt:l}),c.text.toolInvocations==null&&(c.text.toolInvocations=[]),c.text.toolInvocations.push({state:"call",...b})),c.text.internalUpdateId=s(),r){const T=await r({toolCall:b});T!=null&&(c.text.toolInvocations[c.text.toolInvocations.length-1]={state:"result",...b,result:T})}}else if(p==="tool_result"){const T=(a=c.text)==null?void 0:a.toolInvocations;if(T==null)throw new Error("tool_result must be preceded by a tool_call");const S=T.findIndex(x=>x.toolCallId===b.toolCallId);if(S===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");T[S]={...T[S],state:"result",...b}}let y=null;p==="function_call"&&(c.function_call={id:s(),role:"assistant",content:"",function_call:b.function_call,name:b.function_call.name,createdAt:l},y=c.function_call);let v=null;p==="tool_calls"&&(c.tool_calls={id:s(),role:"assistant",content:"",tool_calls:b.tool_calls,createdAt:l},v=c.tool_calls),p==="data"&&d.push(...b);let E=c.text;p==="message_annotations"&&(f?f.push(...b):f=[...b],y=eh(c.function_call,f),v=eh(c.tool_calls,f),E=eh(c.text,f)),f?.length&&(c.text&&(c.text.annotations=[...f]),c.function_call&&(c.function_call.annotations=[...f]),c.tool_calls&&(c.tool_calls.annotations=[...f]));const w=[y,v,E].filter(Boolean).map(T=>({...eh(T,f)}));n([...h,...w],[...d])}return i?.({message:c.text,finishReason:m,usage:g}),{messages:[c.text,c.function_call,c.tool_calls].filter(Boolean),data:d}}var Jle=()=>fetch;async function Zle({api:t,body:e,streamProtocol:n="data",credentials:r,headers:i,abortController:s,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:h,fetch:d=Jle()}){var f,_;const g=await d(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...i},signal:(f=s?.())==null?void 0:f.signal,credentials:r}).catch(p=>{throw o(),p});if(a)try{await a(g)}catch(p){throw p}if(!g.ok)throw o(),new Error((_=await g.text())!=null?_:"Failed to fetch the chat response.");if(!g.body)throw new Error("The response body is empty.");const m=g.body.getReader();switch(n){case"text":{const p=ece(),b={id:h(),createdAt:new Date,role:"assistant",content:""};for(;;){const{done:y,value:v}=await m.read();if(y)break;if(b.content+=p(v),l([{...b}],[]),s?.()===null){m.cancel();break}}return c?.(b,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"}),{messages:[b],data:[]}}case"data":return await Qle({reader:m,abortControllerRef:s!=null?{current:s()}:void 0,update:l,onToolCall:u,onFinish({message:p,finishReason:b,usage:y}){c&&p!=null&&c(p,{usage:y,finishReason:b})},generateId:h});default:{const p=n;throw new Error(`Unknown stream protocol: ${p}`)}}}function ece(t){const e=new TextDecoder;return function(n){return n?e.decode(n,{stream:!0}):""}}async function tce({getStreamedResponse:t,experimental_onFunctionCall:e,experimental_onToolCall:n,updateChatRequest:r,getCurrentMessages:i}){for(;;){const s=await t();if("messages"in s){let o=!1;for(const a of s.messages)if(!((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))){if(o=!0,e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const c=await e(i(),l);if(c===void 0){o=!1;break}r(c)}if(n){const l=a.tool_calls;if(!Array.isArray(l)||l.some(u=>typeof u!="object")){console.warn("experimental_onToolCall should not be defined when using tools");continue}const c=await n(i(),l);if(c===void 0){o=!1;break}r(c)}}if(!o)break}else{let o=function(l){for(const c of l.messages){if(c.tool_calls!==void 0)for(const u of c.tool_calls)typeof u=="object"&&u.function.arguments&&typeof u.function.arguments!="string"&&(u.function.arguments=JSON.stringify(u.function.arguments));c.function_call!==void 0&&typeof c.function_call=="object"&&c.function_call.arguments&&typeof c.function_call.arguments!="string"&&(c.function_call.arguments=JSON.stringify(c.function_call.arguments))}};const a=s;if((a.function_call===void 0||typeof a.function_call=="string")&&(a.tool_calls===void 0||typeof a.tool_calls=="string"))break;if(e){const l=a.function_call;if(typeof l!="object"){console.warn("experimental_onFunctionCall should not be defined when using tools");continue}const c=await e(i(),l);if(c===void 0)break;o(c),r(c)}if(n){const l=a.tool_calls;if(typeof l!="object"){console.warn("experimental_onToolCall should not be defined when using functions");continue}const c=await n(i(),l);if(c===void 0)break;o(c),r(c)}}}}var aL={exports:{}},lL={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=D;function nce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rce=typeof Object.is=="function"?Object.is:nce,ice=da.useState,sce=da.useEffect,oce=da.useLayoutEffect,ace=da.useDebugValue;function lce(t,e){var n=e(),r=ice({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return oce(function(){i.value=n,i.getSnapshot=e,_m(i)&&s({inst:i})},[t,n,e]),sce(function(){return _m(i)&&s({inst:i}),t(function(){_m(i)&&s({inst:i})})},[t]),ace(n),n}function _m(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rce(t,n)}catch{return!0}}function cce(t,e){return e()}var uce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cce:lce;lL.useSyncExternalStore=da.useSyncExternalStore!==void 0?da.useSyncExternalStore:uce;aL.exports=lL;var hce=aL.exports;const Ui=()=>{},xn=Ui(),bm=Object,it=t=>t===xn,Hr=t=>typeof t=="function",ts=(t,e)=>({...t,...e}),dce=t=>Hr(t.then),th=new WeakMap;let fce=0;const Tc=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let i,s;if(bm(t)===t&&!r&&n!=RegExp){if(i=th.get(t),i)return i;if(i=++fce+"~",th.set(t,i),n==Array){for(i="@",s=0;s<t.length;s++)i+=Tc(t[s])+",";th.set(t,i)}if(n==bm){i="#";const o=bm.keys(t).sort();for(;!it(s=o.pop());)it(t[s])||(i+=s+":"+Tc(t[s])+",");th.set(t,i)}}else i=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},ni=new WeakMap,ym={},nh={},p1="undefined",Uf=typeof window!=p1,R0=typeof document!=p1,pce=()=>Uf&&typeof window.requestAnimationFrame!=p1,cL=(t,e)=>{const n=ni.get(t);return[()=>!it(e)&&t.get(e)||ym,r=>{if(!it(e)){const i=t.get(e);e in nh||(nh[e]=i),n[5](e,ts(i,r),i||ym)}},n[6],()=>!it(e)&&e in nh?nh[e]:!it(e)&&t.get(e)||ym]};let P0=!0;const mce=()=>P0,[D0,O0]=Uf&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ui,Ui],gce=()=>{const t=R0&&document.visibilityState;return it(t)||t!=="hidden"},_ce=t=>(R0&&document.addEventListener("visibilitychange",t),D0("focus",t),()=>{R0&&document.removeEventListener("visibilitychange",t),O0("focus",t)}),bce=t=>{const e=()=>{P0=!0,t()},n=()=>{P0=!1};return D0("online",e),D0("offline",n),()=>{O0("online",e),O0("offline",n)}},yce={isOnline:mce,isVisible:gce},vce={initFocus:_ce,initReconnect:bce},dT=!qe.useId,Cc=!Uf||"Deno"in window,Ece=t=>pce()?window.requestAnimationFrame(t):setTimeout(t,1),vm=Cc?D.useEffect:D.useLayoutEffect,Em=typeof navigator<"u"&&navigator.connection,fT=!Cc&&Em&&(["slow-2g","2g"].includes(Em.effectiveType)||Em.saveData),m1=t=>{if(Hr(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Tc(t):"",[t,e]};let wce=0;const I0=()=>++wce,uL=0,hL=1,dL=2,Sce=3;var Ya={__proto__:null,ERROR_REVALIDATE_EVENT:Sce,FOCUS_EVENT:uL,MUTATE_EVENT:dL,RECONNECT_EVENT:hL};async function fL(...t){const[e,n,r,i]=t,s=ts({populateCache:!0,throwOnError:!0},typeof i=="boolean"?{revalidate:i}:i||{});let o=s.populateCache;const a=s.rollbackOnError;let l=s.optimisticData;const c=d=>typeof a=="function"?a(d):a!==!1,u=s.throwOnError;if(Hr(n)){const d=n,f=[],_=e.keys();for(const g of _)!/^\$(inf|sub)\$/.test(g)&&d(e.get(g)._k)&&f.push(g);return Promise.all(f.map(h))}return h(n);async function h(d){const[f]=m1(d);if(!f)return;const[_,g]=cL(e,f),[m,p,b,y]=ni.get(e),v=()=>{const B=m[f];return(Hr(s.revalidate)?s.revalidate(_().data,d):s.revalidate!==!1)&&(delete b[f],delete y[f],B&&B[0])?B[0](dL).then(()=>_().data):_().data};if(t.length<3)return v();let E=r,w;const T=I0();p[f]=[T,0];const S=!it(l),x=_(),R=x.data,U=x._c,P=it(U)?R:U;if(S&&(l=Hr(l)?l(P,R):l,g({data:l,_c:P})),Hr(E))try{E=E(P)}catch(B){w=B}if(E&&dce(E))if(E=await E.catch(B=>{w=B}),T!==p[f][0]){if(w)throw w;return E}else w&&S&&c(w)&&(o=!0,g({data:P,_c:xn}));if(o&&!w)if(Hr(o)){const B=o(E,P);g({data:B,error:xn,_c:xn})}else g({data:E,error:xn,_c:xn});if(p[f][1]=I0(),Promise.resolve(v()).then(()=>{g({_c:xn})}),w){if(u)throw w;return}return E}}const pT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Tce=(t,e)=>{if(!ni.has(t)){const n=ts(vce,e),r={},i=fL.bind(xn,t);let s=Ui;const o={},a=(u,h)=>{const d=o[u]||[];return o[u]=d,d.push(h),()=>d.splice(d.indexOf(h),1)},l=(u,h,d)=>{t.set(u,h);const f=o[u];if(f)for(const _ of f)_(h,d)},c=()=>{if(!ni.has(t)&&(ni.set(t,[r,{},{},{},i,l,a]),!Cc)){const u=n.initFocus(setTimeout.bind(xn,pT.bind(xn,r,uL))),h=n.initReconnect(setTimeout.bind(xn,pT.bind(xn,r,hL)));s=()=>{u&&u(),h&&h(),ni.delete(t)}}};return c(),[t,i,c,s]}return[t,ni.get(t)[4]]},Cce=(t,e,n,r,i)=>{const s=n.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!it(s)&&o>s||setTimeout(r,a,i)},xce=(t,e)=>Tc(t)==Tc(e),[pL,Ace]=Tce(new Map),kce=ts({onLoadingSlow:Ui,onSuccess:Ui,onError:Ui,onErrorRetry:Cce,onDiscarded:Ui,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:fT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:fT?5e3:3e3,compare:xce,isPaused:()=>!1,cache:pL,mutate:Ace,fallback:{}},yce),Rce=(t,e)=>{const n=ts(t,e);if(e){const{use:r,fallback:i}=t,{use:s,fallback:o}=e;r&&s&&(n.use=r.concat(s)),i&&o&&(n.fallback=ts(i,o))}return n},Pce=D.createContext({}),Dce="$inf$",mL=Uf&&window.__SWR_DEVTOOLS_USE__,Oce=mL?window.__SWR_DEVTOOLS_USE__:[],Ice=()=>{mL&&(window.__SWR_DEVTOOLS_REACT__=qe)},Lce=t=>Hr(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Mce=()=>ts(kce,D.useContext(Pce)),Nce=t=>(e,n,r)=>t(e,n&&((...s)=>{const[o]=m1(e),[,,,a]=ni.get(pL);if(o.startsWith(Dce))return n(...s);const l=a[o];return it(l)?n(...s):(delete a[o],l)}),r),Bce=Oce.concat(Nce),Fce=t=>function(...n){const r=Mce(),[i,s,o]=Lce(n),a=Rce(r,o);let l=t;const{use:c}=a,u=(c||[]).concat(Bce);for(let h=u.length;h--;)l=u[h](l);return l(i,s||a.fetcher||null,a)},Hce=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i>=0&&(r[i]=r[r.length-1],r.pop())}};Ice();const mT=qe.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),wm={dedupe:!0},Uce=(t,e,n)=>{const{cache:r,compare:i,suspense:s,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:h,keepPreviousData:d}=n,[f,_,g,m]=ni.get(r),[p,b]=m1(t),y=D.useRef(!1),v=D.useRef(!1),E=D.useRef(p),w=D.useRef(e),T=D.useRef(n),S=()=>T.current,x=()=>S().isVisible()&&S().isOnline(),[R,U,P,B]=cL(r,p),A=D.useRef({}).current,W=it(o)?n.fallback[p]:o,ne=(me,we)=>{for(const M in A){const se=M;if(se==="data"){if(!i(me[se],we[se])&&(!it(me[se])||!i(te,we[se])))return!1}else if(we[se]!==me[se])return!1}return!0},Q=D.useMemo(()=>{const me=!p||!e?!1:it(a)?S().isPaused()||s?!1:it(l)?!0:l:a,we=re=>{const _e=ts(re);return delete _e._k,me?{isValidating:!0,isLoading:!0,..._e}:_e},M=R(),se=B(),le=we(M),G=M===se?le:we(se);let q=le;return[()=>{const re=we(R());return ne(re,q)?(q.data=re.data,q.isLoading=re.isLoading,q.isValidating=re.isValidating,q.error=re.error,q):(q=re,re)},()=>G]},[r,p]),ie=hce.useSyncExternalStore(D.useCallback(me=>P(p,(we,M)=>{ne(M,we)||me()}),[r,p]),Q[0],Q[1]),L=!y.current,I=f[p]&&f[p].length>0,j=ie.data,H=it(j)?W:j,F=ie.error,J=D.useRef(H),te=d?it(j)?J.current:j:H,fe=I&&!it(F)?!1:L&&!it(a)?a:S().isPaused()?!1:s?it(H)?!1:l:it(H)||l,Z=!!(p&&e&&L&&fe),V=it(ie.isValidating)?Z:ie.isValidating,ue=it(ie.isLoading)?Z:ie.isLoading,ge=D.useCallback(async me=>{const we=w.current;if(!p||!we||v.current||S().isPaused())return!1;let M,se,le=!0;const G=me||{},q=!g[p]||!G.dedupe,re=()=>dT?!v.current&&p===E.current&&y.current:p===E.current,_e={isValidating:!1,isLoading:!1},ve=()=>{U(_e)},he=()=>{const Re=g[p];Re&&Re[1]===se&&delete g[p]},xe={isValidating:!0};it(R().data)&&(xe.isLoading=!0);try{if(q&&(U(xe),n.loadingTimeout&&it(R().data)&&setTimeout(()=>{le&&re()&&S().onLoadingSlow(p,n)},n.loadingTimeout),g[p]=[we(b),I0()]),[M,se]=g[p],M=await M,q&&setTimeout(he,n.dedupingInterval),!g[p]||g[p][1]!==se)return q&&re()&&S().onDiscarded(p),!1;_e.error=xn;const Re=_[p];if(!it(Re)&&(se<=Re[0]||se<=Re[1]||Re[1]===0))return ve(),q&&re()&&S().onDiscarded(p),!1;const Te=R().data;_e.data=i(Te,M)?Te:M,q&&re()&&S().onSuccess(M,p,n)}catch(Re){he();const Te=S(),{shouldRetryOnError:ce}=Te;Te.isPaused()||(_e.error=Re,q&&re()&&(Te.onError(Re,p,Te),(ce===!0||Hr(ce)&&ce(Re))&&(!S().revalidateOnFocus||!S().revalidateOnReconnect||x())&&Te.onErrorRetry(Re,p,Te,Ce=>{const ke=f[p];ke&&ke[0]&&ke[0](Ya.ERROR_REVALIDATE_EVENT,Ce)},{retryCount:(G.retryCount||0)+1,dedupe:!0})))}return le=!1,ve(),!0},[p,r]),Ee=D.useCallback((...me)=>fL(r,E.current,...me),[]);if(vm(()=>{w.current=e,T.current=n,it(j)||(J.current=j)}),vm(()=>{if(!p)return;const me=ge.bind(xn,wm);let we=0;const se=Hce(p,f,(le,G={})=>{if(le==Ya.FOCUS_EVENT){const q=Date.now();S().revalidateOnFocus&&q>we&&x()&&(we=q+S().focusThrottleInterval,me())}else if(le==Ya.RECONNECT_EVENT)S().revalidateOnReconnect&&x()&&me();else{if(le==Ya.MUTATE_EVENT)return ge();if(le==Ya.ERROR_REVALIDATE_EVENT)return ge(G)}});return v.current=!1,E.current=p,y.current=!0,U({_k:b}),fe&&(it(H)||Cc?me():Ece(me)),()=>{v.current=!0,se()}},[p]),vm(()=>{let me;function we(){const se=Hr(c)?c(R().data):c;se&&me!==-1&&(me=setTimeout(M,se))}function M(){!R().error&&(u||S().isVisible())&&(h||S().isOnline())?ge(wm).then(we):we()}return we(),()=>{me&&(clearTimeout(me),me=-1)}},[c,u,h,p]),D.useDebugValue(te),s&&it(H)&&p){if(!dT&&Cc)throw new Error("Fallback data is required when using suspense in SSR.");w.current=e,T.current=n,v.current=!1;const me=m[p];if(!it(me)){const we=Ee(me);mT(we)}if(it(F)){const we=ge(wm);it(te)||(we.status="fulfilled",we.value=!0),mT(we)}else throw F}return{mutate:Ee,get data(){return A.data=!0,te},get error(){return A.error=!0,F},get isValidating(){return A.isValidating=!0,V},get isLoading(){return A.isLoading=!0,ue}}},rh=Fce(Uce);var jce=async(t,e,n,r,i,s,o,a,l,c,u,h,d,f,_,g,m)=>{var p;const b=o.current;n(e.messages,!1);const y=f?e.messages:e.messages.map(({role:v,content:E,experimental_attachments:w,name:T,data:S,annotations:x,toolInvocations:R,function_call:U,tool_calls:P,tool_call_id:B})=>({role:v,content:E,...w!==void 0&&{experimental_attachments:w},...T!==void 0&&{name:T},...S!==void 0&&{data:S},...x!==void 0&&{annotations:x},...R!==void 0&&{toolInvocations:R},tool_call_id:B,...U!==void 0&&{function_call:U},...P!==void 0&&{tool_calls:P}}));return await Zle({api:t,body:(p=_?.({messages:e.messages,requestData:e.data,requestBody:e.body}))!=null?p:{messages:y,data:e.data,...s.current.body,...e.body,...e.functions!==void 0&&{functions:e.functions},...e.function_call!==void 0&&{function_call:e.function_call},...e.tools!==void 0&&{tools:e.tools},...e.tool_choice!==void 0&&{tool_choice:e.tool_choice}},streamProtocol:c,credentials:s.current.credentials,headers:{...s.current.headers,...e.headers},abortController:()=>a.current,restoreMessagesOnFailure(){m||n(b,!1)},onResponse:h,onUpdate(v,E){n([...e.messages,...v],!1),r([...i||[],...E||[]],!1)},onToolCall:d,onFinish:u,generateId:l,fetch:g})};function zce({api:t="/api/chat",id:e,initialMessages:n,initialInput:r="",sendExtraMessageFields:i,experimental_onFunctionCall:s,experimental_onToolCall:o,onToolCall:a,experimental_prepareRequestBody:l,experimental_maxAutomaticRoundtrips:c=0,maxAutomaticRoundtrips:u=c,maxToolRoundtrips:h=u,maxSteps:d=h!=null?h+1:1,streamMode:f,streamProtocol:_,onResponse:g,onFinish:m,onError:p,credentials:b,headers:y,body:v,generateId:E=oL,fetch:w,keepLastMessageOnError:T=!1}={}){f&&(_??(_=f==="text"?"text":void 0));const S=D.useId(),x=e??S,R=typeof t=="string"?[t,x]:x,[U]=D.useState([]),{data:P,mutate:B}=rh([R,"messages"],null,{fallbackData:n??U}),{data:A=!1,mutate:W}=rh([R,"loading"],null),{data:ne,mutate:Q}=rh([R,"streamData"],null),{data:ie=void 0,mutate:L}=rh([R,"error"],null),I=D.useRef(P||[]);D.useEffect(()=>{I.current=P||[]},[P]);const j=D.useRef(null),H=D.useRef({credentials:b,headers:y,body:v});D.useEffect(()=>{H.current={credentials:b,headers:y,body:v}},[b,y,v]);const F=D.useCallback(async we=>{const M=I.current.length;try{W(!0),L(void 0);const G=new AbortController;j.current=G,await tce({getStreamedResponse:()=>jce(t,we,B,Q,ne,H,I,j,E,_,m,g,a,i,l,w,T),experimental_onFunctionCall:s,experimental_onToolCall:o,updateChatRequest:q=>{we=q},getCurrentMessages:()=>I.current}),j.current=null}catch(G){if(G.name==="AbortError")return j.current=null,null;p&&G instanceof Error&&p(G),L(G)}finally{W(!1)}const se=I.current,le=se[se.length-1];se.length>M&&le!=null&&d>1&&gT(le)&&Vce(se)<d&&await F({messages:se})},[B,W,t,H,g,m,p,L,Q,ne,_,i,s,o,l,a,d,I,j,E,w,T]),J=D.useCallback(async(we,{options:M,functions:se,function_call:le,tools:G,tool_choice:q,data:re,headers:_e,body:ve,experimental_attachments:he}={})=>{var xe,Re;we.id||(we.id=E());const Te=await _T(he),ce={headers:_e??M?.headers,body:ve??M?.body},ke={messages:I.current.concat({...we,id:(xe=we.id)!=null?xe:E(),createdAt:(Re=we.createdAt)!=null?Re:new Date,experimental_attachments:Te.length>0?Te:void 0}),options:ce,headers:ce.headers,body:ce.body,data:re,...se!==void 0&&{functions:se},...le!==void 0&&{function_call:le},...G!==void 0&&{tools:G},...q!==void 0&&{tool_choice:q}};return F(ke)},[F,E]),te=D.useCallback(async({options:we,functions:M,function_call:se,tools:le,tool_choice:G,data:q,headers:re,body:_e}={})=>{if(I.current.length===0)return null;const ve={headers:re??we?.headers,body:_e??we?.body};if(I.current[I.current.length-1].role==="assistant"){const Re={messages:I.current.slice(0,-1),options:ve,headers:ve.headers,body:ve.body,data:q,...M!==void 0&&{functions:M},...se!==void 0&&{function_call:se},...le!==void 0&&{tools:le},...G!==void 0&&{tool_choice:G}};return F(Re)}const xe={messages:I.current,options:ve,headers:ve.headers,body:ve.body,data:q,...M!==void 0&&{functions:M},...se!==void 0&&{function_call:se},...le!==void 0&&{tools:le},...G!==void 0&&{tool_choice:G}};return F(xe)},[F]),fe=D.useCallback(()=>{j.current&&(j.current.abort(),j.current=null)},[]),Z=D.useCallback(we=>{typeof we=="function"&&(we=we(I.current)),B(we,!1),I.current=we},[B]),[V,ue]=D.useState(r),ge=D.useCallback(async(we,M={},se)=>{var le,G,q,re,_e;if((le=we?.preventDefault)==null||le.call(we),!V&&!M.allowEmptySubmit)return;se&&(H.current={...H.current,...se});const ve=await _T(M.experimental_attachments),he={headers:(q=M.headers)!=null?q:(G=M.options)==null?void 0:G.headers,body:(_e=M.body)!=null?_e:(re=M.options)==null?void 0:re.body},Re={messages:!V&&!ve.length&&M.allowEmptySubmit?I.current:I.current.concat({id:E(),createdAt:new Date,role:"user",content:V,experimental_attachments:ve.length>0?ve:void 0}),options:he,headers:he.headers,body:he.body,data:M.data};F(Re),ue("")},[V,E,F]),Ee=we=>{ue(we.target.value)},me=({toolCallId:we,result:M})=>{const se=I.current.map((G,q,re)=>q===re.length-1&&G.role==="assistant"&&G.toolInvocations?{...G,toolInvocations:G.toolInvocations.map(_e=>_e.toolCallId===we?{..._e,result:M}:_e)}:G);B(se,!1);const le=se[se.length-1];gT(le)&&F({messages:se})};return{messages:P||[],error:ie,append:J,reload:te,stop:fe,setMessages:Z,input:V,setInput:ue,handleInputChange:Ee,handleSubmit:ge,isLoading:A,data:ne,addToolResult:me,experimental_addToolResult:me}}function gT(t){return t.role==="assistant"&&t.toolInvocations&&t.toolInvocations.length>0&&t.toolInvocations.every(e=>"result"in e)}function Vce(t){let e=0;for(let n=t.length-1;n>=0&&t[n].role==="assistant";n--)e++;return e}async function _T(t){if(t==null)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:n,type:r}=e,i=await new Promise((s,o)=>{const a=new FileReader;a.onload=l=>{var c;s((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:n,contentType:r,url:i}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}var Wce=zce;const ri=Zs({started:!1,aborted:!1,showChat:!0}),Gce=Rc({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),bT=Wn("Chat");function $ce(){ma.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:i}=vA(),s=Dt(Do);return N.jsxs(N.Fragment,{children:[t&&N.jsx(qce,{description:s,initialMessages:e,exportChat:i,storeMessageHistory:n,importChat:r}),N.jsx(p6,{closeButton:({closeToast:o})=>N.jsx("button",{className:"Toastify__close-button",onClick:o,children:N.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:o})=>{switch(o){case"success":return N.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return N.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:Gce})]})}const qce=D.memo(({description:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:i})=>{mq();const s=D.useRef(null),[o,a]=D.useState(e.length>0),[l,c]=D.useState(()=>Ni.get("selectedModel")||rF),[u,h]=D.useState(()=>{const F=Ni.get("selectedProvider");return Dc.find(J=>J.name===F)||iF}),{showChat:d}=Dt(ri),[f,_]=n6(),[g,m]=D.useState({}),{messages:p,isLoading:b,input:y,handleInputChange:v,setInput:E,stop:w,append:T}=Wce({api:"/api/chat",body:{apiKeys:g},onError:F=>{bT.error(`Request failed

`,F),je.error("There was an error processing your request: "+(F.message?F.message:"No details were returned"))},onFinish:()=>{bT.debug("Finished streaming")},initialMessages:e}),{enhancingPrompt:S,promptEnhanced:x,enhancePrompt:R,resetEnhancer:U}=fq(),{parsedMessages:P,parseMessages:B}=dq(),A=o?400:200;D.useEffect(()=>{ri.setKey("started",e.length>0)},[]),D.useEffect(()=>{B(p,b),p.length>e.length&&n(p).catch(F=>je.error(F.message))},[p,b,B]);const W=()=>{const F=s.current;F&&(F.scrollTop=F.scrollHeight)},ne=()=>{w(),ri.setKey("aborted",!0),He.abortAllActions()};D.useEffect(()=>{const F=s.current;if(F){F.style.height="auto";const J=F.scrollHeight;F.style.height=`${Math.min(J,A)}px`,F.style.overflowY=J>A?"auto":"hidden"}},[y,s]);const Q=async()=>{o||(await Promise.all([_("#examples",{opacity:0,display:"none"},{duration:.1}),_("#intro",{opacity:0,flex:1},{duration:.2,ease:ir})]),ri.setKey("started",!0),a(!0))},ie=async(F,J)=>{const te=J||y;if(te.length===0||b)return;await He.saveAllFiles();const fe=He.getFileModifcations();if(ri.setKey("aborted",!1),Q(),fe!==void 0){const Z=DF(fe);T({role:"user",content:`[Model: ${l}]

[Provider: ${u.name}]

${Z}

${te}`}),He.resetAllFileModifications()}else T({role:"user",content:`[Model: ${l}]

[Provider: ${u.name}]

${te}`});E(""),U(),s.current?.blur()},[L,I]=gq();D.useEffect(()=>{const F=Ni.get("apiKeys");F&&m(JSON.parse(F))},[]);const j=F=>{c(F),Ni.set("selectedModel",F,{expires:30})},H=F=>{h(F),Ni.set("selectedProvider",F.name,{expires:30})};return N.jsx(rL,{ref:f,textareaRef:s,input:y,showChat:d,chatStarted:o,isStreaming:b,enhancingPrompt:S,promptEnhanced:x,sendMessage:ie,model:l,setModel:j,provider:u,setProvider:H,messageRef:L,scrollRef:I,handleInputChange:v,handleStop:ne,description:t,importChat:r,exportChat:i,messages:p.map((F,J)=>F.role==="user"?F:{...F,content:P[J]||""}),enhancePrompt:()=>{R(y,F=>{E(F),W()},l,u,g)}})});function Kce({}){const t=Dt(He.showWorkbench),{showChat:e}=Dt(ri),n=AP(1024),r=t||!e;return N.jsx("div",{className:"flex",children:N.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[N.jsx(yT,{active:e,disabled:!r||n,onClick:()=>{r&&ri.setKey("showChat",!e)},children:N.jsx("div",{className:"i-bolt:chat text-sm"})}),N.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),N.jsx(yT,{active:t,onClick:()=>{t&&!e&&ri.setKey("showChat",!0),He.showWorkbench.set(!t)},children:N.jsx("div",{className:"i-ph:code-bold"})})]})})}function yT({active:t=!1,disabled:e=!1,children:n,onClick:r}){return N.jsx("button",{className:We("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e}),onClick:r,children:n})}function Yce(){return Dt(Do)}function Xce(){const t=Dt(ri);return N.jsxs("header",{className:We("flex items-center bg-bolt-elements-background-depth-1 p-5 border-b h-[var(--header-height)]",{"border-transparent":!t.started,"border-bolt-elements-borderColor":t.started}),children:[N.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[N.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),N.jsx("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:N.jsx("span",{className:"i-bolt:logo-text?mask w-[46px] inline-block"})})]}),N.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:N.jsx(Oi,{children:()=>N.jsx(Yce,{})})}),t.started&&N.jsx(Oi,{children:()=>N.jsx("div",{className:"mr-1",children:N.jsx(Kce,{})})})]})}const Oue=()=>[{title:"Bolt"},{name:"description",content:"Talk with Bolt, an AI assistant from StackBlitz"}];function Iue(){return N.jsxs("div",{className:"flex flex-col h-full w-full",children:[N.jsx(Xce,{}),N.jsx(Oi,{fallback:N.jsx(rL,{}),children:()=>N.jsx($ce,{})})]})}export{Me as A,yue as B,tR as C,Ez as D,Ae as E,mue as F,$z as G,bue as H,wt as I,LV as J,lue as K,Wg as L,Iue as M,H2 as N,Oue as O,kz as P,Mt as T,_ue as a,fue as b,kn as c,pue as d,Je as e,oV as f,gue as g,Or as h,Xz as i,uue as j,Jt as k,uf as l,ss as m,ff as n,tt as o,ei as p,fr as q,va as r,Uz as s,ae as t,Gz as u,Io as v,sV as w,Zt as x,ld as y,AV as z};
